
Ext.ns("Ext.fx.target"),Ext.fx.Queue={constructor:function(){this.targets=new Ext.util.HashMap,this.fxQueue={}},getFxDefaults:function(n){var t=this.targets.get(n);return t?t.fxDefaults:{}},setFxDefaults:function(n,t){var i=this.targets.get(n);i&&(i.fxDefaults=Ext.apply(i.fxDefaults||{},t))},stopAnimation:function(n){for(var r=this,i=r.getFxQueue(n),t=i.length;t;)i[t-1].end(),t--},getActiveAnimation:function(n){var t=this.getFxQueue(n);return t&&!!t.length?t[0]:!1},hasFxBlock:function(n){var t=this.getFxQueue(n);return t&&t[0]&&t[0].block},getFxQueue:function(n){if(!n)return!1;var t=this,r=t.fxQueue[n],i=t.targets.get(n);if(!i)return!1;if(!r&&(t.fxQueue[n]=[],i.type!="element"))i.target.on("destroy",function(){t.fxQueue[n]=[]});return t.fxQueue[n]},queueFx:function(n){var u=this,i=n.target,t,r;if(i){if(t=u.getFxQueue(i.getId()),r=t.length,r)if(n.concurrent)n.paused=!1;else t[r-1].on("afteranimate",function(){n.paused=!1});else n.paused=!1;n.on("afteranimate",function(){if(t.remove(n),n.remove&&i.type=="element"){var r=Ext.get(i.id);r&&r.remove()}},this);t.push(n)}}},Ext.fx.Manager={constructor:function(){var n=this;n.items=new Ext.util.MixedCollection,n.addEvents("framebegin","frameend"),Ext.util.Observable.constructor.call(n),Ext.fx.Queue.constructor.call(n)},interval:32,createTarget:function(n){var i=this,t;if(Ext.isObject(n)){if(n.isSprite)t=new Ext.fx.target.Sprite(n);else if(n.isCompositeSprite)t=new Ext.fx.target.CompositeSprite(n);else return n.isAnimTarget?n:null;return i.targets.add(t),t}return null},addAnim:function(n){var t=this,i=t.items,r=t.task;i.add(n),!r&&i.length&&(t.task=setInterval(t.runner,t.interval))},removeAnim:function(n){var t=this,r=t.items,i=t.task;r.remove(n),i&&!r.length&&(clearInterval(i),delete t.task)},startingFilter:function(n){return n.paused===!1&&n.running===!1&&n.iterations>0},runningFilter:function(n){return n.paused===!1&&n.running===!0&&n.isAnimator!==!0},runner:function(){var n=Ext.fx.Manager,t=n.items;n.running||(n.fireEvent("framebegin"),n.running=!0,n.targetData={},n.targetArr={},n.timestamp=new Date,t.filterBy(n.startingFilter).each(n.startAnim,n),t.filterBy(n.runningFilter).each(n.runAnim,n),n.applyPendingAttrs(),n.fireEvent("frameend"),n.running=!1)},startAnim:function(n){n.start(this.timestamp)},runAnim:function(n){if(n){var t=this,r=n.target.getId(),i=t.timestamp-n.startTime;this.collectTargetData(n,i),i>=n.duration&&(t.applyPendingAttrs(!0),delete t.targetData[r],delete t.targetArr[r],n.lastFrame())}},collectTargetData:function(n,t){var u=this,f=n.target.getId(),i=u.targetData[f],r;i||(i=u.targetData[f]=[],u.targetArr[f]=n.target),r={duration:n.duration,easing:n.easing,attrs:{}},Ext.apply(r.attrs,n.runAnim(t)),i.push(r)},applyPendingAttrs:function(n){var i=this.targetData,r=this.targetArr,t;for(t in i)i.hasOwnProperty(t)&&r[t].setAttr(i[t],!1,n)}},Ext.applyIf(Ext.fx.Manager,Ext.fx.Queue),Ext.applyIf(Ext.fx.Manager,Ext.util.Observable.prototype),Ext.fx.Manager.constructor(),Ext.fx.CubicBezier={cubicBezierAtTime:function(n,t,i,r,u,f){function h(n){return((l*n+s)*n+e)*n}function v(n,t){var i=a(n,t);return((y*i+c)*i+o)*i}function a(n,t){for(var r,f,u,c,i=n,o=0;o<8;o++){if(u=h(i)-n,Math.abs(u)<t)return i;if(c=(3*l*i+2*s)*i+e,Math.abs(c)<1e-6)break;i=i-u/c}if(r=0,f=1,i=n,i<r)return r;if(i>f)return f;while(r<f){if(u=h(i),Math.abs(u-n)<t)return i;n>u?r=i:f=i,i=(f-r)/2+r}return i}var e=3*t,s=3*(r-t)-e,l=1-e-s,o=3*i,c=3*(u-i)-o,y=1-o-c;return v(n,1/(200*f))},cubicBezier:function(n,t,i,r){var u=function(u){return Ext.fx.CubicBezier.cubicBezierAtTime(u,n,t,i,r,1)};return u.toCSS3=function(){return"cubic-bezier("+[n,t,i,r].join(",")+")"},u.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-i,1-r,1-n,1-t)},u}},(Ext.fx.Easing=function(){var t=Math,e=t.PI,n=t.pow,f=t.sin,u=t.sqrt,i=t.abs,r=1.70158;Ext.apply(Ext.fx.Easing,{linear:function(n){return n},ease:function(t){var f=.07813-t/2,s=u(.0066+f*f),o=s-f,h=n(i(o),1/3)*(o<0?-1:1),e=-s-f,c=n(i(e),1/3)*(e<0?-1:1),r=h+c+.25;return n(1-r,2)*3*r*.1+(1-r)*3*r*r+r*r*r},easeIn:function(t){return n(t,1.7)},easeOut:function(t){return n(t,.48)},easeInOut:function(t){var f=.48-t/1.04,s=u(.1734+f*f),o=s-f,h=n(i(o),1/3)*(o<0?-1:1),e=-s-f,c=n(i(e),1/3)*(e<0?-1:1),r=h+c+.5;return(1-r)*3*r*r+r*r*r},backIn:function(n){return n*n*((r+1)*n-r)},backOut:function(n){return n=n-1,n*n*((r+1)*n+r)+1},elasticIn:function(t){if(t===0||t===1)return t;var i=.3,r=i/4;return n(2,-10*t)*f((t-r)*2*e/i)+1},elasticOut:function(n){return 1-Ext.fx.Easing.elasticIn(1-n)},bounceIn:function(n){return 1-Ext.fx.Easing.bounceOut(1-n)},bounceOut:function(n){var r=7.5625,t=2.75,i;return n<1/t?i=r*n*n:n<2/t?(n-=1.5/t,i=r*n*n+.75):n<2.5/t?(n-=2.25/t,i=r*n*n+.9375):(n-=2.625/t,i=r*n*n+.984375),i}}),Ext.apply(Ext.fx.Easing,{"back-in":Ext.fx.Easing.backIn.prototype,"back-out":Ext.fx.Easing.backOut.prototype,"ease-in":Ext.fx.Easing.easeIn.prototype,"ease-out":Ext.fx.Easing.easeOut.prototype,"elastic-in":Ext.fx.Easing.elasticIn.prototype,"elastic-out":Ext.fx.Easing.elasticIn.prototype,"bounce-in":Ext.fx.Easing.bounceIn.prototype,"bounce-out":Ext.fx.Easing.bounceOut.prototype,"ease-in-out":Ext.fx.Easing.easeInOut.prototype})})(),Ext.fx.PropertyHandler={defaultHandler:{pixelDefaults:["width","height","top","left"],unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,computeDelta:function(n,t,i,r,u){i=typeof i=="number"?i:1;var f=this.unitRE.exec(n),o,e;return f&&(n=f[1],e=f[2],e||this.pixelDefaults.indexOf(u)===-1||(e="px")),n=+n||0,f=this.unitRE.exec(t),f&&(t=f[1],e=f[2]||e),t=+t||0,o=r!=null?r:n,{from:n,delta:(t-o)*i,units:e}},get:function(n,t,i,r,u){for(var l=n.length,h=[],s,o,e,c,f=0;f<l;f++)if(r&&(s=r[f][1].from),Ext.isArray(n[f][1])&&Ext.isArray(t)){for(o=[],e=0,c=n[f][1].length;e<c;e++)o.push(this.computeDelta(n[f][1][e],t[e],i,s,u));h.push([n[f][0],o])}else h.push([n[f][0],this.computeDelta(n[f][1],t,i,s,u)]);return h},set:function(n,t){for(var s=n.length,e=[],i,f,o,r,u=0;u<s;u++)if(i=n[u][1],Ext.isArray(i)){for(f=[],r=0,o=i.length;r<o;r++)f.push(i[r].from+i[r].delta*t+(i[r].units||0));e.push([n[u][0],f])}else e.push([n[u][0],i.from+i.delta*t+(i.units||0)]);return e}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(n,t){t=typeof t=="number"?t:1;var r,u=!1,i;return Ext.each([this.hexRE,this.rgbRE,this.hex3RE],function(t,f){return r=f%2==0?16:10,i=t.exec(n),i&&i.length==4?(f==2&&(i[1]+=i[1],i[2]+=i[2],i[3]+=i[3]),u={red:parseInt(i[1],r),green:parseInt(i[2],r),blue:parseInt(i[3],r)},!1):void 0}),u||n},computeDelta:function(n,t,i,r){n=this.parseColor(n),t=this.parseColor(t,i);var u=r?r:n,e=typeof u,f=typeof t;return e=="string"||e=="undefined"||f=="string"||f=="undefined"?t||u:{from:n,delta:{red:Math.round((t.red-u.red)*i),green:Math.round((t.green-u.green)*i),blue:Math.round((t.blue-u.blue)*i)}}},get:function(n,t,i,r){for(var o=n.length,e=[],f,u=0;u<o;u++)r&&(f=r[u][1].from),e.push([n[u][0],this.computeDelta(n[u][1],t,i,f)]);return e},set:function(n,t){for(var s=n.length,e=[],i,o,u,f,r=0;r<s;r++)if(i=n[r][1],i){if(u=i.from,f=i.delta,i=typeof i=="object"&&"red"in i?"rgb("+i.red+", "+i.green+", "+i.blue+")":i,i=typeof i=="object"&&i.length?i[0]:i,typeof i=="undefined")return[];o=typeof i=="string"?i:"rgb("+[(u.red+Math.round(f.red*t))%256,(u.green+Math.round(f.green*t))%256,(u.blue+Math.round(f.blue*t))%256].join(",")+")",e.push([n[r][0],o])}return e}},object:{interpolate:function(n,t){t=typeof t=="number"?t:1;var r={},i;for(i in n)r[i]=parseFloat(n[i],10)*t;return r},computeDelta:function(n,t,i,r){n=this.interpolate(n),t=this.interpolate(t,i);var e=r?r:n,f={},u;for(u in t)f[u]=t[u]-e[u];return{from:n,delta:f}},get:function(n,t,i,r){for(var o=n.length,e=[],f,u=0;u<o;u++)r&&(f=r[u][1].from),e.push([n[u][0],this.computeDelta(n[u][1],t,i,f)]);return e},set:function(n,t){for(var h=n.length,s=[],e={},f,o,u,r,i=0;i<h;i++){u=n[i][1],f=u.from,o=u.delta;for(r in f)e[r]=Math.round(f[r]+o[r]*t);s.push([n[i][0],e])}return s}},path:{computeDelta:function(n,t,i,r){i=typeof i=="number"?i:1;var u;return n=+n||0,t=+t||0,u=r!=null?r:n,{from:n,delta:(t-u)*i}},forcePath:function(n){return Ext.isArray(n)||Ext.isArray(n[0])||(n=Ext.draw.Draw.parsePathString(n)),n},get:function(n,t,i,r){for(var h=this.forcePath(t),a=[],p=n.length,y,v,o,l,u,e,c,f,s=0;s<p;s++){for(f=this.forcePath(n[s][1]),o=Ext.draw.Draw.interpolatePaths(f,h),f=o[0],h=o[1],y=f.length,c=[],u=0;u<y;u++){for(o=[f[u][0]],v=f[u].length,e=1;e<v;e++)l=r&&r[0][1][u][e].from,o.push(this.computeDelta(f[u][e],h[u][e],i,l));c.push(o)}a.push([n[s][0],c])}return a},set:function(n,t){for(var l=n.length,c=[],i,u,o,e,r,h,s,f=0;f<l;f++){for(r=n[f][1],o=[],h=r.length,i=0;i<h;i++){for(e=[r[i][0]],s=r[i].length,u=1;u<s;u++)e.push(r[i][u].from+r[i][u].delta*t);o.push(e.join(","))}c.push([n[f][0],o.join(",")])}return c}}},Ext.each(["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],function(n){Ext.fx.PropertyHandler[n]=Ext.fx.PropertyHandler.color},Ext.fx.PropertyHandler),Ext.fx.Animator=Ext.extend(Ext.util.Observable,{isAnimator:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",running:!1,paused:!1,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(n){var t=this;n=Ext.apply(t,n||{}),t.config=n,t.id=Ext.id(null,"ext-animator-"),t.addEvents("beforeanimate","keyframe","afteranimate"),Ext.fx.Animator.superclass.constructor.call(t,n),t.timeline=[],t.createTimeline(t.keyframes),t.target&&(t.applyAnimator(t.target),Ext.fx.Manager.addAnim(t))},sorter:function(n,t){return n.pct-t.pct},createTimeline:function(n){var u=this,r=[],c=u.to||{},h=u.duration,o,s,i,e,t,f;for(t in n)n.hasOwnProperty(t)&&u.animKeyFramesRE.test(t)&&(f={attrs:Ext.apply(n[t],c)},t=="from"?t=0:t=="to"&&(t=100),f.pct=parseInt(t,10),r.push(f));for(r.sort(u.sorter),e=r.length,i=0;i<e;i++)o=r[i-1]?h*(r[i-1].pct/100):0,s=h*(r[i].pct/100),u.timeline.push({duration:s-o,attrs:r[i].attrs})},applyAnimator:function(n){var r=this,f=[],o=r.timeline,e=o.length,t,s,h,u,i;if(r.fireEvent("beforeanimate",r)!==!1){for(i=0;i<e;i++)t=o[i],u=t.attrs,s=u.easing||r.easing,h=u.damper||r.damper,delete u.easing,delete u.damper,t=new Ext.fx.Anim({target:n,easing:s,damper:h,duration:t.duration,paused:!0,to:u}),f.push(t);for(r.animations=f,r.target=t.target,i=0;i<e-1;i++){t=f[i],t.nextAnim=f[i+1];t.on("afteranimate",function(){this.nextAnim.paused=!1});t.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},r)}f[e-1].on("afteranimate",function(){this.lastFrame()},r)}},start:function(n){var t=this,r=t.delay,i=t.delayStart,u;if(r)if(i){if(u=n-i,u<r)return;n=new Date(i.getTime()+r)}else{t.delayStart=n;return}t.fireEvent("beforeanimate",t)!==!1&&(t.startTime=n,t.running=!0,t.animations[t.keyframeStep].paused=!1)},lastFrame:function(){var n=this,i=n.iterations,t=n.currentIteration;t++,t<i?(n.startTime=new Date,n.currentIteration=t,n.keyframeStep=0,n.applyAnimator(n.target),n.animations[n.keyframeStep].paused=!1):(n.currentIteration=0,n.end())},end:function(){var n=this;n.fireEvent("afteranimate",n,n.startTime,new Date-n.startTime)}}),Ext.fx.Anim=Ext.extend(Ext.util.Observable,{isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,alternate:!1,currentIteration:0,startTime:0,constructor:function(n){var t=this,i;if(n=n||{},n.keyframes)return new Ext.fx.Animator(n);if(n=Ext.apply(t,n),t.from===undefined&&(t.from={}),t.propHandlers={},t.config=n,t.target=Ext.fx.Manager.createTarget(t.target),t.easingFn=Ext.fx.Easing[t.easing],t.target.dynamic=t.dynamic,t.easingFn||(t.easingFn=String(t.easing).match(t.bezierRE),t.easingFn&&t.easingFn.length==5&&(i=t.easingFn,t.easingFn=Ext.fx.cubicBezier(+i[1],+i[2],+i[3],+i[4]))),t.id=Ext.id(null,"ext-anim-"),Ext.fx.Manager.addAnim(t),t.addEvents("beforeanimate","afteranimate","lastframe"),Ext.fx.Anim.superclass.constructor.call(t,n),n.callback)t.on("afteranimate",n.callback,n.scope);return t},setAttr:function(n,t){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,n,t)},initAttrs:function(){var t=this,s=t.from,u=t.to,o=t.initialFrom||{},f={},e,r,i,n;for(n in u)u.hasOwnProperty(n)&&(e=t.target.getAttr(n,s[n]),r=u[n],i=Ext.fx.PropertyHandler[n]?t.propHandlers[n]=Ext.fx.PropertyHandler[n]:Ext.isObject(r)?t.propHandlers[n]=Ext.fx.PropertyHandler.object:t.propHandlers[n]=Ext.fx.PropertyHandler.defaultHandler,f[n]=i.get(e,r,t.damper,o[n],n));t.currentAttrs=f},start:function(n){var t=this,r=t.delay,i=t.delayStart,u;if(r)if(i){if(u=n-i,u<r)return;n=new Date(i.getTime()+r)}else{t.delayStart=n;return}t.fireEvent("beforeanimate",t)!==!1&&(t.startTime=n,t.paused||t.currentAttrs||t.initAttrs(),t.running=!0)},runAnim:function(n){var i=this,u=i.currentAttrs,r=i.duration,c=i.easingFn,h=i.propHandlers,s={},f,e,t,o;n>=r&&(n=r,o=!0),i.reverse&&(n=r-n);for(t in u)u.hasOwnProperty(t)&&(e=u[t],f=o?1:c(n/r),s[t]=h[t].set(e,f));return s},lastFrame:function(){var n=this,i=n.iterations,t=n.currentIteration;t++,t<i?(n.alternate&&(n.reverse=!n.reverse),n.startTime=new Date,n.currentIteration=t,n.paused=!1):(n.currentIteration=0,n.end(),n.fireEvent("lastframe",n,n.startTime))},end:function(){var n=this;n.startTime=0,n.paused=!1,n.running=!1,Ext.fx.Manager.removeAnim(n),n.fireEvent("afteranimate",n,n.startTime)}}),Ext.enableFx=!0,Ext.fx.target.Target=Ext.extend(Object,{isAnimTarget:!0,constructor:function(n){this.target=n,this.id=this.getId()},getId:function(){return this.target.id}}),Ext.fx.target.Sprite=Ext.extend(Ext.fx.target.Target,{type:"draw",getFromPrim:function(n,t){var i;return i=t=="translate"?{x:n.attr.translation.x||0,y:n.attr.translation.y||0}:t=="rotate"?{degrees:n.attr.rotation.degrees||0,x:n.attr.rotation.x,y:n.attr.rotation.y}:n.attr[t]},getAttr:function(n,t){return[[this.target,t!=undefined?t:this.getFromPrim(this.target,n)]]},setAttr:function(n){for(var v=n.length,f=[],a,t,c,i,u,l,o,e,h,s,y,r=0;r<v;r++){a=n[r].attrs;for(t in a)for(c=a[t],y=c.length,e=0;e<y;e++)u=c[e][0],i=c[e][1],t==="translate"?o={x:i.x,y:i.y}:t==="rotate"?(h=i.x,isNaN(h)&&(h=null),s=i.y,isNaN(s)&&(s=null),o={degrees:i.degrees,x:h,y:s}):o=t==="width"||t==="height"||t==="x"||t==="y"?parseFloat(i):i,l=f.indexOf(u),l==-1&&(f.push([u,{}]),l=f.length-1),f[l][1][t]=o}for(v=f.length,r=0;r<v;r++)u=f[r],u[0].setAttributes(u[1]);this.target.tween()}}),Ext.fx.target.CompositeSprite=Ext.extend(Ext.fx.target.Sprite,{getAttr:function(n,t){var i=[],r=this.target;return r.each(function(r){i.push([r,t!=undefined?t:this.getFromPrim(r,n)])},this),i}}),Ext.util.Animate={animate:function(n){var t=this;return Ext.fx.Manager.hasFxBlock(t.id)?t:(Ext.fx.Manager.queueFx(new Ext.fx.Anim(t.anim(n))),this)},anim:function(n){if(!Ext.isObject(n))return n?{}:!1;var t=this;return n.stopAnimation&&t.stopAnimation(),Ext.applyIf(n,Ext.fx.Manager.getFxDefaults(t.id)),Ext.apply({target:t,paused:!0},n)},stopAnimation:function(){return Ext.fx.Manager.stopAnimation(this.id),this},syncFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!0}),this},sequenceFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!1}),this},getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},Ext.layout.DrawLayout=Ext.extend(Ext.layout.AutoComponentLayout,{type:"draw",onLayout:function(n,t){this.owner.surface.setSize(n,t),Ext.layout.DrawLayout.superclass.onLayout.apply(this,arguments)}}),Ext.regLayout("draw",Ext.layout.DrawLayout),Ext.ns("Ext.draw.engine"),Ext.draw.Color=Ext.extend(Object,{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgba?\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*(,\s*[0-9\.]+\s*)?\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:.2,constructor:function(n,t,i){var u=this,r=Ext.util.Numbers.constrain;u.r=r(n,0,255),u.g=r(t,0,255),u.b=r(i,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var n=this;return[n.r,n.g,n.b]},getHSL:function(){var o=this,u=o.r/255,f=o.g/255,e=o.b/255,t=Math.max(u,f,e),i=Math.min(u,f,e),r=t-i,n,h=0,s=.5*(t+i);return i!=t&&(h=s<.5?r/(t+i):r/(2-t-i),n=u==t?60*(f-e)/r:f==t?120+60*(e-u)/r:240+60*(u-f)/r,n<0&&(n+=360),n>=360&&(n-=360)),[n,h,s]},getLighter:function(n){var t=this.getHSL();return n=n||this.lightnessFactor,t[2]=Ext.util.Numbers.constrain(t[2]+n,0,1),this.fromHSL(t[0],t[1],t[2])},getDarker:function(n){return n=n||this.lightnessFactor,this.getLighter(-n)},toString:function(){var r=this,u=Math.round,i=u(r.r).toString(16),t=u(r.g).toString(16),n=u(r.b).toString(16);return i=i.length==1?"0"+i:i,t=t.length==1?"0"+t:t,n=n.length==1?"0"+n:n,["#",i,t,n].join("")},toHex:function(n){var t;if(Ext.isArray(n)&&(n=n[0]),!Ext.isString(n))return"";if(n.substr(0,1)==="#")return n;if(t=this.colorToHexRe.exec(n),Ext.isArray(t)){var u=parseInt(t[2],10),f=parseInt(t[3],10),i=parseInt(t[4],10),r=i|f<<8|u<<16;return t[1]+"#"+("000000"+r.toString(16)).slice(-6)}return""},fromString:function(n){var t,i,u,r,f=parseInt;return(n.length==4||n.length==7)&&n.substr(0,1)==="#"?(t=n.match(this.hexRe),t&&(i=f(t[1],16)>>0,u=f(t[2],16)>>0,r=f(t[3],16)>>0,n.length==4&&(i+=i*16,u+=u*16,r+=r*16))):(t=n.match(this.rgbRe),t&&(i=t[1],u=t[2],r=t[3])),typeof i=="undefined"?undefined:new Ext.draw.Color(i,u,r)},getGrayscale:function(){return this.r*.3+this.g*.59+this.b*.11},fromHSL:function(n,t,i){var u,f,e,r=[],s=Math.abs,o=Math.floor;if(t==0||n==null)r=[i,i,i];else{n/=60,u=t*(1-s(2*i-1)),f=u*(1-s(n-2*o(n/2)-1)),e=i-u/2;switch(o(n)){case 0:r=[u,f,0];break;case 1:r=[f,u,0];break;case 2:r=[0,u,f];break;case 3:r=[0,f,u];break;case 4:r=[f,0,u];break;case 5:r=[u,0,f]}r=[r[0]+e,r[1]+e,r[2]+e]}return new Ext.draw.Color(r[0]*255,r[1]*255,r[2]*255)}}),function(){var n=Ext.draw.Color.prototype;Ext.draw.Color.fromHSL=function(){return n.fromHSL.apply(n,arguments)},Ext.draw.Color.fromString=function(){return n.fromString.apply(n,arguments)},Ext.draw.Color.toHex=function(){return n.toHex.apply(n,arguments)}}(),Ext.draw.Draw={pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,pi2:Math.PI*2,snapEndsIntervalWeights:[[0,15],[20,4],[30,2],[40,4],[50,9],[60,4],[70,2],[80,4],[100,15]],is:function(n,t){return t=String(t).toLowerCase(),t=="object"&&n===Object(n)||t=="undefined"&&typeof n==t||t=="null"&&n===null||t=="array"&&Array.isArray&&Array.isArray(n)||Object.prototype.toString.call(n).toLowerCase().slice(8,-1)==t},ellipsePath:function(n){var t=n.attr;return Ext.String.format("M{0},{1}A{2},{3},0,1,1,{0},{4}A{2},{3},0,1,1,{0},{1}z",t.x,t.y-t.ry,t.rx,t.ry,t.y+t.ry)},rectPath:function(n){var t=n.attr;return t.radius?Ext.String.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",t.x+t.radius,t.y,t.width-t.radius*2,t.radius,-t.radius,t.height-t.radius*2,t.radius*2-t.width,t.radius*2-t.height):Ext.String.format("M{0},{1}l{2},0,0,{3},{4},0z",t.x,t.y,t.width,t.height,-t.width)},pathToString:function(n){return Ext.isArray(n)&&(n=n.join(",")),n.replace(Ext.draw.Draw.pathToStringRE,"$1")},parsePathString:function(n){if(!n)return null;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=[],i=this;return i.is(n,"array")&&i.is(n[0],"array")&&(t=i.pathClone(n)),t.length||Ext.draw.Draw.pathToString(n).replace(i.pathCommandRE,function(n,u,f){var o=[],e=u.toLowerCase();for(f.replace(i.pathValuesRE,function(n,t){t&&o.push(+t)}),e=="m"&&o.length>2&&(t.push([u].concat(o.splice(0,2))),e="l",u=u=="m"?"l":"L");o.length>=r[e];)if(t.push([u].concat(o.splice(0,r[e]))),!r[e])break}),t},mapPath:function(n,t){if(!t)return n;var s,e,u,o,i,f,r;for(n=this.path2curve(n),u=0,o=n.length;u<o;u++)for(r=n[u],i=1,f=r.length;i<f-1;i+=2)s=t.x(r[i],r[i+1]),e=t.y(r[i],r[i+1]),r[i]=s,r[i+1]=e;return n},pathClone:function(n){var r=[],i,f,t,u;for(this.is(n,"array")&&this.is(n&&n[0],"array")||(n=this.parsePathString(n)),t=0,u=n.length;t<u;t++)for(r[t]=[],i=0,f=n[t].length;i<f;i++)r[t][i]=n[t][i];return r},pathToAbsolute:function(n){this.is(n,"array")&&this.is(n&&n[0],"array")||(n=this.parsePathString(n));var s=[],f=0,e=0,c=0,h=0,o=0,l=n.length,i,t,r,u;for(n[0][0]=="M"&&(f=+n[0][1],e=+n[0][2],c=f,h=e,o++,s[0]=["M",f,e]);o<l;o++){if(i=s[o]=[],t=n[o],t[0]!=t[0].toUpperCase()){i[0]=t[0].toUpperCase();switch(i[0]){case"A":i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=+(t[6]+f),i[7]=+(t[7]+e);break;case"V":i[1]=+t[1]+e;break;case"H":i[1]=+t[1]+f;break;case"M":c=+t[1]+f,h=+t[2]+e;default:for(r=1,u=t.length;r<u;r++)i[r]=+t[r]+(r%2?f:e)}}else for(r=0,u=t.length;r<u;r++)s[o][r]=t[r];switch(i[0]){case"Z":f=c,e=h;break;case"H":f=i[1];break;case"V":e=i[1];break;case"M":t=s[o],u=t.length,c=t[u-2],h=t[u-1];default:t=s[o],u=t.length,f=t[u-2],e=t[u-1]}}return s},path2curve:function(n){for(var s=this,t=s.pathToAbsolute(n),o=t.length,r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u,f,e,i=0;i<o;i++){if(t[i]=s.command2curve(t[i],r),t[i].length>7){for(t[i].shift(),e=t[i];e.length;)t.splice(i++,0,["C"].concat(e.splice(0,6)));t.splice(i,1),o=t.length}u=t[i],f=u.length,r.x=u[f-2],r.y=u[f-1],r.bx=parseFloat(u[f-4])||r.x,r.by=parseFloat(u[f-3])||r.y}return t},interpolatePaths:function(n,t){for(var l=this,u=l.pathToAbsolute(n),r=l.pathToAbsolute(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},v=function(n,t){if(n[t].length>7){n[t].shift();for(var i=n[t];i.length;)n.splice(t++,0,["C"].concat(i.splice(0,6)));n.splice(t,1),c=Math.max(u.length,r.length||0)}},y=function(n,t,i,f,e){n&&t&&n[e][0]=="M"&&t[e][0]!="M"&&(t.splice(e,0,["M",f.x,f.y]),i.bx=0,i.by=0,i.x=n[e][1],i.y=n[e][2],c=Math.max(u.length,r.length||0))},i=0,c=Math.max(u.length,r.length||0);i<c;i++){u[i]=l.command2curve(u[i],e),v(u,i),r[i]=l.command2curve(r[i],f),v(r,i),y(u,r,e,f,i),y(r,u,f,e,i);var o=u[i],s=r[i],h=o.length,a=s.length;e.x=o[h-2],e.y=o[h-1],e.bx=parseFloat(o[h-4])||e.x,e.by=parseFloat(o[h-3])||e.y,f.bx=parseFloat(s[a-4])||f.x,f.by=parseFloat(s[a-3])||f.y,f.x=s[a-2],f.y=s[a-1]}return[u,r]},command2curve:function(n,t){var i=this;if(!n)return["C",t.x,t.y,t.x,t.y,t.x,t.y];n[0]!="T"&&n[0]!="Q"&&(t.qx=t.qy=null);switch(n[0]){case"M":t.X=n[1],t.Y=n[2];break;case"A":n=["C"].concat(i.arc2curve.apply(i,[t.x,t.y].concat(n.slice(1))));break;case"S":n=["C",t.x+(t.x-(t.bx||t.x)),t.y+(t.y-(t.by||t.y))].concat(n.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),n=["C"].concat(i.quadratic2curve(t.x,t.y,t.qx,t.qy,n[1],n[2]));break;case"Q":t.qx=n[1],t.qy=n[2],n=["C"].concat(i.quadratic2curve(t.x,t.y,n[1],n[2],n[3],n[4]));break;case"L":n=["C"].concat(t.x,t.y,n[1],n[2],n[1],n[2]);break;case"H":n=["C"].concat(t.x,t.y,n[1],t.y,n[1],t.y);break;case"V":n=["C"].concat(t.x,t.y,t.x,n[1],t.x,n[1]);break;case"Z":n=["C"].concat(t.x,t.y,t.X,t.Y,t.X,t.Y)}return n},quadratic2curve:function(n,t,i,r,u,f){var o=1/3,e=2/3;return[o*n+e*i,o*t+e*r,o*u+e*i,o*f+e*r,u,f]},rotate:function(n,t,i){var u=Math.cos(i),r=Math.sin(i),e=n*u-t*r,f=n*r+t*u;return{x:e,y:f}},arc2curve:function(n,t,i,r,u,f,e,o,s,h){var nt=this,b=Math.PI,wt=nt.radian,ri=b*120/180,st=wt*(+u||0),a=[],tt=Math,ut=tt.cos,ft=tt.sin,ui=tt.sqrt,ti=tt.abs,ni=tt.asin,it,hi,ci,p,y,d,ot,et,yt,k,g,l,c,rt,oi,ii,fi,ei,ht,bt,at,lt,w,ct,vt,pt,v,dt,gt,kt,si;if(h?(l=h[0],c=h[1],k=h[2],g=h[3]):(it=nt.rotate(n,t,-st),n=it.x,t=it.y,it=nt.rotate(o,s,-st),o=it.x,s=it.y,hi=ut(wt*u),ci=ft(wt*u),p=(n-o)/2,y=(t-s)/2,d=p*p/(i*i)+y*y/(r*r),d>1&&(d=ui(d),i=d*i,r=d*r),ot=i*i,et=r*r,yt=(f==e?-1:1)*ui(ti((ot*et-ot*y*y-et*p*p)/(ot*y*y+et*p*p))),k=yt*i*y/r+(n+o)/2,g=yt*-r*p/i+(t+s)/2,l=ni(((t-g)/r).toFixed(7)),c=ni(((s-g)/r).toFixed(7)),l=n<k?b-l:l,c=o<k?b-c:c,l<0&&(l=b*2+l),c<0&&(c=b*2+c),e&&l>c&&(l=l-b*2),!e&&c>l&&(c=c-b*2)),rt=c-l,ti(rt)>ri&&(gt=c,kt=o,si=s,c=l+ri*(e&&c>l?1:-1),o=k+i*ut(c),s=g+r*ft(c),a=nt.arc2curve(o,s,i,r,u,0,e,kt,si,[c,gt,k,g])),rt=c-l,oi=ut(l),ii=ft(l),fi=ut(c),ei=ft(c),ht=tt.tan(rt/4),bt=4/3*i*ht,at=4/3*r*ht,lt=[n,t],w=[n+bt*ii,t-at*oi],ct=[o+bt*ei,s-at*fi],vt=[o,s],w[0]=2*lt[0]-w[0],w[1]=2*lt[1]-w[1],h)return[w,ct,vt].concat(a);for(a=[w,ct,vt].concat(a).join().split(","),pt=[],dt=a.length,v=0;v<dt;v++)pt[v]=v%2?nt.rotate(a[v-1],a[v],st).y:nt.rotate(a[v],a[v+1],st).x;return pt},pathDimensions:function(n){if(!n||!n.length)return{x:0,y:0,width:0,height:0};n=this.path2curve(n);for(var f=0,e=0,u=[],i=[],s=0,c=n.length,t,h,o,r;s<c;s++)t=n[s],t[0]=="M"?(f=t[1],e=t[2],u.push(f),i.push(e)):(r=this.curveDim(f,e,t[1],t[2],t[3],t[4],t[5],t[6]),u=u.concat(r.min.x,r.max.x),i=i.concat(r.min.y,r.max.y),f=t[5],e=t[6]);return h=Math.min.apply(0,u),o=Math.min.apply(0,i),{x:h,y:o,path:n,width:Math.max.apply(0,u)-h,height:Math.max.apply(0,i)-o}},intersectInside:function(n,t,i){return(i[0]-t[0])*(n[1]-t[1])>(i[1]-t[1])*(n[0]-t[0])},intersectIntersection:function(n,t,i,r){var u=[],h=i[0]-r[0],c=i[1]-r[1],l=n[0]-t[0],s=n[1]-t[1],f=i[0]*r[1]-i[1]*r[0],e=n[0]*t[1]-n[1]*t[0],o=1/(h*s-c*l);return u[0]=(f*l-e*h)*o,u[1]=(f*s-e*c)*o,u},intersect:function(n,t){for(var o=this,c=0,a=t.length,e=t[a-1],r=n,i,f,u,l,s,h;c<a;++c){for(i=t[c],s=r,r=[],f=s[s.length-1],h=0,l=s.length;h<l;h++)u=s[h],o.intersectInside(u,e,i)?(o.intersectInside(f,e,i)||r.push(o.intersectIntersection(f,u,e,i)),r.push(u)):o.intersectInside(f,e,i)&&r.push(o.intersectIntersection(f,u,e,i)),f=u;e=i}return r},curveDim:function(n,t,i,r,u,f,e,o){var a=u-2*i+n-(e-2*u+i),s=2*(i-n)-2*(u-i),p=n-i,l=(-s+Math.sqrt(s*s-4*a*p))/2/a,c=(-s-Math.sqrt(s*s-4*a*p))/2/a,y=[t,o],v=[n,e],h;return Math.abs(l)>1e12&&(l=.5),Math.abs(c)>1e12&&(c=.5),l>0&&l<1&&(h=this.findDotAtSegment(n,t,i,r,u,f,e,o,l),v.push(h.x),y.push(h.y)),c>0&&c<1&&(h=this.findDotAtSegment(n,t,i,r,u,f,e,o,c),v.push(h.x),y.push(h.y)),a=f-2*r+t-(o-2*f+r),s=2*(r-t)-2*(f-r),p=t-r,l=(-s+Math.sqrt(s*s-4*a*p))/2/a,c=(-s-Math.sqrt(s*s-4*a*p))/2/a,Math.abs(l)>1e12&&(l=.5),Math.abs(c)>1e12&&(c=.5),l>0&&l<1&&(h=this.findDotAtSegment(n,t,i,r,u,f,e,o,l),v.push(h.x),y.push(h.y)),c>0&&c<1&&(h=this.findDotAtSegment(n,t,i,r,u,f,e,o,c),v.push(h.x),y.push(h.y)),{min:{x:Math.min.apply(0,v),y:Math.min.apply(0,y)},max:{x:Math.max.apply(0,v),y:Math.max.apply(0,y)}}},getAnchors:function(n,t,i,r,u,f,e){e=e||4;var a=Math,v=a.PI,b=v/2,w=a.abs,g=a.sin,tt=a.cos,nt=a.atan,d,k,s,o,p,h,y,c,l;return d=(i-n)/e,k=(u-i)/e,r>=t&&r>=f||r<=t&&r<=f?s=o=b:(s=nt((i-n)/w(r-t)),t<r&&(s=v-s),o=nt((u-i)/w(r-f)),f<r&&(o=v-o)),l=b-(s+o)%(v*2)/2,l>b&&(l-=v),s+=l,o+=l,p=i-d*g(s),h=r+d*tt(s),y=i+k*g(o),c=r+k*tt(o),(r>t&&h<t||r<t&&h>t)&&(p+=w(t-h)*(p-i)/(h-r),h=t),(r>f&&c<f||r<f&&c>f)&&(y-=w(f-c)*(y-i)/(c-r),c=f),{x1:p,y1:h,x2:y,y2:c}},smooth:function(n,t){for(var r=this.path2curve(n),u=[r[0]],p=r[0][1],y=r[0][2],a,f,h=1,d=r.length,s=1,v=p,c=y,nt=0,g=0,b;h<d;h++){var i=r[h],o=i.length,l=r[h-1],w=l.length,e=r[h+1],k=e&&e.length;if(i[0]=="M"){for(v=i[1],c=i[2],a=h+1;r[a][0]!="C";)a++;nt=r[a][5],g=r[a][6],u.push(["M",v,c]),s=u.length,p=v,y=c;continue}i[o-2]!=v||i[o-1]!=c||e&&e[0]!="M"?f=e&&e[0]!="M"?this.getAnchors(l[w-2],l[w-1],i[o-2],i[o-1],e[k-2],e[k-1],t):{x1:i[o-2],y1:i[o-1]}:(b=u[s].length,f=this.getAnchors(l[w-2],l[w-1],v,c,u[s][b-2],u[s][b-1],t),u[s][1]=f.x2,u[s][2]=f.y2),u.push(["C",p,y,f.x1,f.y1,i[o-2],i[o-1]]),p=f.x2,y=f.y2}return u},findDotAtSegment:function(n,t,i,r,u,f,e,o,s){var h=1-s;return{x:Math.pow(h,3)*n+Math.pow(h,2)*3*s*i+h*3*s*s*u+Math.pow(s,3)*e,y:Math.pow(h,3)*t+Math.pow(h,2)*3*s*r+h*3*s*s*f+Math.pow(s,3)*o}},snapEnds:function(n,t,i,r){var o=Math,s=o.pow,v=o.floor,u=(t-n)/i,f=v(o.log(u)/o.LN10)+1,a=s(10,f),p=o.round(u%a*s(10,2-f)),y=Ext.draw.Draw.snapEndsIntervalWeights,d=y.length,w=0,b=1e9,c,h,l,e,k;for(r||(n=v(n/a)*a),c=n,e=0;e<d;e++)h=y[e][0],l=h-p<0?1e6:(h-p)/y[e][1],l<b&&(k=h,b=l);for(u=v(u*s(10,-f))*s(10,f)+k*s(10,f-2);c<t;)c+=u,w++;return r||(t=+c.toFixed(10)),{from:n,to:t,power:f,step:u,steps:w}},sorter:function(n,t){return n.offset-t.offset},rad:function(n){return n%360*Math.PI/180},degrees:function(n){return n*180/Math.PI%360},withinBox:function(n,t,i){return i=i||{},n>=i.x&&n<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},parseGradient:function(n){var o=this,f=n.type||"linear",h=n.angle||0,c=o.radian,r=n.stops,u=[],i,t,e,s;f=="linear"&&(t=[0,0,Math.cos(h*c),Math.sin(h*c)],e=1/(Math.max(Math.abs(t[2]),Math.abs(t[3]))||1),t[2]*=e,t[3]*=e,t[2]<0&&(t[0]=-t[2],t[2]=0),t[3]<0&&(t[1]=-t[3],t[3]=0));for(i in r)r.hasOwnProperty(i)&&o.stopsRE.test(i)&&(s={offset:parseInt(i,10),color:Ext.draw.Color.toHex(r[i].color)||"#ffffff",opacity:r[i].opacity||1},u.push(s));return u.sort(o.sorter),f=="linear"?{id:n.id,type:f,vector:t,stops:u}:{id:n.id,type:f,centerX:n.centerX,centerY:n.centerY,focalX:n.focalX,focalY:n.focalY,radius:n.radius,vector:t,stops:u}}},Ext.draw.CompositeSprite=Ext.extend(Ext.util.MixedCollection,{isCompositeSprite:!0,constructor:function(n){var t=this;n=n||{},Ext.apply(t,n),t.addEvents("mousedown","mouseup","mouseover","mouseout","click"),t.id=Ext.id(null,"ext-sprite-group-"),Ext.draw.CompositeSprite.superclass.constructor.apply(this,arguments)},onClick:function(n){this.fireEvent("click",n)},onMouseUp:function(n){this.fireEvent("mouseup",n)},onMouseDown:function(n){this.fireEvent("mousedown",n)},onMouseOver:function(n){this.fireEvent("mouseover",n)},onMouseOut:function(n){this.fireEvent("mouseout",n)},attachEvents:function(n){var t=this;n.on({scope:t,mousedown:t.onMouseDown,mouseup:t.onMouseUp,mouseover:t.onMouseOver,mouseout:t.onMouseOut,click:t.onClick})},add:function(){var i=Ext.draw.CompositeSprite.superclass.add.apply(this,arguments);return this.attachEvents(i),i},insert:function(){return Ext.draw.CompositeSprite.superclass.insert.apply(this,arguments)},remove:function(n){var t=this;n.un({scope:t,mousedown:t.onMouseDown,mouseup:t.onMouseUp,mouseover:t.onMouseOver,mouseout:t.onMouseOut,click:t.onClick}),Ext.draw.CompositeSprite.superclass.remove.apply(this,arguments)},getBBox:function(){for(var f=0,o,n,h=this.items,s=this.length,i=Infinity,t=i,u=-i,r=i,e=-i;f<s;f++)o=h[f],n=o.getBBox(),t=Math.min(t,n.x),r=Math.min(r,n.y),u=Math.max(u,n.height+n.y),e=Math.max(e,n.width+n.x);return{x:t,y:r,height:u-r,width:e-t}},setAttributes:function(n,t){for(var i=0,u=this.items,r=this.length;i<r;i++)u[i].setAttributes(n,t);return this},hide:function(n){for(var t=0,r=this.items,i=this.length;t<i;t++)r[t].hide(n);return this},show:function(n){for(var t=0,r=this.items,i=this.length;t<i;t++)r[t].show(n);return this},redraw:function(){var n=this,t=0,u=n.items,i=n.getSurface(),r=n.length;if(i)for(;t<r;t++)i.renderItem(u[t]);return n},setStyle:function(n){for(var i=0,u=this.items,f=this.length,r,t;i<f;i++)r=u[i],t=r.el,t&&t.setStyle(n)},addCls:function(n){var t=0,u=this.items,i=this.getSurface(),r=this.length;if(i)for(;t<r;t++)i.addCls(u[t],n)},removeCls:function(n){var t=0,u=this.items,i=this.getSurface(),r=this.length;if(i)for(;t<r;t++)i.removeCls(u[t],n)},getSurface:function(){var n=this.first();return n?n.surface:null},destroy:function(){var n=this,i=n.getSurface(),t;if(i)while(n.getCount()>0)t=n.first(),n.remove(t),i.remove(t);n.clearListeners()}}),Ext.applyIf(Ext.draw.CompositeSprite.prototype,Ext.util.Animate.prototype),Ext.draw.Sprite=Ext.extend(Ext.util.Observable,{dirty:!1,dirtyHidden:!1,dirtyTransform:!1,dirtyPath:!0,dirtyFont:!0,zIndexDirty:!0,isSprite:!0,zIndex:0,fontProperties:["font","font-size","font-weight","font-style","font-family","text-anchor","text"],pathProperties:["x","y","d","path","height","width","radius","r","rx","ry","cx","cy"],minDefaults:{circle:{cx:0,cy:0,r:0,fill:"none"},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none"},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none"},text:{x:0,y:0,"text-anchor":"start",fill:"#000"},path:{d:"M0,0",fill:"none"},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none"}},constructor:function(n){var t=this;n=n||{},t.id=Ext.id(null,"ext-sprite-"),t.transformations=[],t.surface=n.surface,t.group=n.group,t.type=n.type,t.bbox={},t.attr={zIndex:0,translation:{x:null,y:null},rotation:{degrees:null,x:null,y:null},scaling:{x:null,y:null,cx:null,cy:null}},delete n.surface,delete n.group,delete n.type,Ext.applyIf(n,t.minDefaults[t.type]),t.setAttributes(n),t.addEvents("beforedestroy","destroy","render","mousedown","mouseup","mouseover","mouseout","mousemove","click","rightclick","mouseenter","mouseleave","touchstart","touchmove","touchend"),Ext.draw.Sprite.superclass.constructor.apply(this,arguments)},setAttributes:function(n,t){var i=this,y=i.fontProperties,w=y.length,p=i.pathProperties,b=p.length,v=!!i.surface,a=v&&i.surface.customAttributes||{},o=i.attr,r,e,s,l,f,c,u,h;n=Ext.apply({},n);for(r in a)n.hasOwnProperty(r)&&typeof a[r]=="function"&&Ext.apply(n,a[r].apply(i,[].concat(n[r])));for(!!n.hidden!=!!o.hidden&&(i.dirtyHidden=!0),e=0;e<b;e++)if(r=p[e],r in n&&n[r]!==o[r]){i.dirtyPath=!0;break}for(("zIndex"in n)&&(i.zIndexDirty=!0),e=0;e<w;e++)if(r=y[e],r in n&&n[r]!==o[r]){i.dirtyFont=!0;break}return s=n.translate,l=o.translation,s&&((s.x&&s.x!==l.x||s.y&&s.y!==l.y)&&(Ext.apply(l,s),i.dirtyTransform=!0),delete n.translate),f=n.rotate,c=o.rotation,f&&(f.x&&f.x===c.x&&f.y&&f.y===c.y&&(!f.degrees||f.degrees===c.degrees)||(Ext.apply(c,f),i.dirtyTransform=!0),delete n.rotate),u=n.scale,h=o.scaling,u&&((u.x&&u.x!==h.x||u.y&&u.y!==h.y||u.cx&&u.cx!==h.cx||u.cy&&u.cy!==h.cy)&&(Ext.apply(h,u),i.dirtyTransform=!0),delete n.scale),Ext.apply(o,n),i.dirty=!0,t===!0&&v&&i.redraw(),this},getBBox:function(n){return this.surface.getBBox(this,n)},setText:function(n){return this.surface.setText(this,n)},hide:function(n){return this.setAttributes({hidden:!0},n),this},show:function(n){return this.setAttributes({hidden:!1},n),this},remove:function(){return this.surface?(this.surface.remove(this),!0):!1},onRemove:function(){this.surface.onRemove(this)},destroy:function(){var n=this;if(n.fireEvent("beforedestroy",n)!==!1){n.remove();n.surface.onDestroy(n);n.clearListeners(),n.fireEvent("destroy")}},redraw:function(){return this.surface.renderItem(this),this},tween:function(){return this.surface.tween(this),this},setStyle:function(){return this.el.setStyle.apply(this.el,arguments),this},addCls:function(n){return this.surface.addCls(this,n),this},removeCls:function(n){return this.surface.removeCls(this,n),this}}),Ext.applyIf(Ext.draw.Sprite.prototype,Ext.util.Animate),Ext.draw.Matrix=Ext.extend(Object,{constructor:function(n,t,i,r,u,f){this.matrix=n!=null?[[n,i,u],[t,r,f],[0,0,1]]:[[1,0,0],[0,1,0],[0,0,1]]},add:function(n,t,i,r,u,f){for(var c=this,l=[[],[],[]],a=[[n,i,u],[t,r,f],[0,0,1]],e,s,h,o=0;o<3;o++)for(e=0;e<3;e++){for(h=0,s=0;s<3;s++)h+=c.matrix[o][s]*a[s][e];l[o][e]=h}return c.matrix=l,c},prepend:function(n,t,i,r,u,f){for(var c=this,l=[[],[],[]],a=[[n,i,u],[t,r,f],[0,0,1]],e,s,h,o=0;o<3;o++)for(e=0;e<3;e++){for(h=0,s=0;s<3;s++)h+=a[o][s]*c.matrix[s][e];l[o][e]=h}return c.matrix=l,c},invert:function(){var t=this.matrix,u=t[0][0],f=t[1][0],i=t[0][1],r=t[1][1],e=t[0][2],o=t[1][2],n=u*r-f*i;return new Ext.draw.Matrix(r/n,-f/n,-i/n,u/n,(i*o-r*e)/n,(f*e-u*o)/n)},clone:function(){var n=this.matrix;return new Ext.draw.Matrix(n[0][0],n[1][0],n[0][1],n[1][1],n[0][2],n[1][2])},translate:function(n,t){return this.prepend(1,0,0,1,n,t),this},scale:function(n,t,i,r){var u=this;return t==null&&(t=n),u.add(1,0,0,1,i,r),u.add(n,0,0,t,0,0),u.add(1,0,0,1,-i,-r),u},rotate:function(n,t,i){n=Ext.draw.Draw.rad(n);var r=this,f=+Math.cos(n).toFixed(9),u=+Math.sin(n).toFixed(9);return r.add(f,u,-u,f,t,i),r.add(1,0,0,1,-t,-i),r},x:function(n,t){var i=this.matrix;return n*i[0][0]+t*i[0][1]+i[0][2]},y:function(n,t){var i=this.matrix;return n*i[1][0]+t*i[1][1]+i[1][2]},get:function(n,t){return+this.matrix[n][t].toFixed(4)},isIdentity:function(){return this.equals(new Ext.draw.Matrix)},equals:function(n){var i=this.matrix,t=n.matrix;return i[0][0]===t[0][0]&&i[0][1]===t[0][1]&&i[0][2]===t[0][2]&&i[1][0]===t[1][0]&&i[1][1]===t[1][1]&&i[1][2]===t[1][2]},toString:function(){var n=this;return[n.get(0,0),n.get(0,1),n.get(1,0),n.get(1,1),0,0].join()},toCanvas:function(n){var t=this.matrix;n.transform(t[0][0],t[1][0],t[0][1],t[1][1],t[0][2],t[1][2])},toSvg:function(){var n=this.matrix;return"matrix("+[n[0][0],n[1][0],n[0][1],n[1][1],n[0][2],n[1][2]].join()+")"},toFilter:function(){var n=this;return"progid:DXImageTransform.Microsoft.Matrix(M11="+n.get(0,0)+", M12="+n.get(0,1)+", M21="+n.get(1,0)+", M22="+n.get(1,1)+", Dx="+n.get(0,2)+", Dy="+n.get(1,2)+")"},offset:function(){var n=this.matrix;return[n[0][2].toFixed(4),n[1][2].toFixed(4)]},split:function(){function r(n){return n[0]*n[0]+n[1]*n[1]}function u(n){var t=Math.sqrt(r(n));n[0]/=t,n[1]/=t}var i=this.matrix,t={translateX:i[0][2],translateY:i[1][2]},n;return n=[[i[0][0],i[0][1]],[i[1][1],i[1][1]]],t.scaleX=Math.sqrt(r(n[0])),u(n[0]),t.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*t.shear,n[1][1]-n[0][1]*t.shear],t.scaleY=Math.sqrt(r(n[1])),u(n[1]),t.shear/=t.scaleY,t.rotate=Math.asin(-n[0][1]),t.isSimple=!+t.shear.toFixed(9)&&(t.scaleX.toFixed(9)==t.scaleY.toFixed(9)||!t.rotate),t}}),Ext.baseCSSPrefix="x-",function(){function n(n){return function(t){this.processEvent(n,t)}}Ext.draw.Surface=Ext.extend(Ext.util.Observable,{zoomX:1,zoomY:1,panX:0,panY:0,availableAttrs:{blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,"dominant-baseline":"auto",fill:"none","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:"",height:0,hidden:!1,href:"http://sencha.com/",opacity:1,path:"M0,0",radius:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank",text:"","text-anchor":"middle",title:"Ext Draw",width:0,x:0,y:0,zIndex:0},container:undefined,height:352,width:512,x:0,y:0,constructor:function(n){var t=this;n=n||{},Ext.apply(t,n),t.domRef=Ext.getDoc().dom,t.customAttributes={},t.addEvents.apply(t,Ext.draw.Surface.eventNames),Ext.draw.Surface.superclass.constructor.apply(t,arguments),t.getId(),t.initGradients(),t.initItems(),t.renderTo&&(t.render(t.renderTo),delete t.renderTo),t.initBackground(n.background)},initializeEvents:function(){var n=this;n.mon(n.el,{scope:n,mouseover:n.onMouseOver,mouseout:n.onMouseOut,mouseenter:n.onMouseEnter,mouseleave:n.onMouseLeave,mousemove:n.onMouseMove,mouseup:n.onMouseUp,mousedown:n.onMouseDown,click:n.onClick,doubleclick:n.onDoubleClick,tap:n.onTap,tapstart:n.onTapStart,tapend:n.onTapEnd,tapcancel:n.onTapCancel,taphold:n.onTapHold,doubletap:n.onDoubleTap,singletap:n.onSingleTap,touchstart:n.onTouchStart,touchmove:n.onTouchMove,touchend:n.onTouchEnd,pinchstart:n.onPinchStart,pinch:n.onPinch,pinchend:n.onPinchEnd,swipe:n.onSwipe})},initializeDragEvents:function(){var n=this;n.dragEventsInitialized||(n.dragEventsInitialized=!0,n.mon(n.el,{scope:n,dragstart:n.onDragStart,drag:n.onDrag,dragend:n.onDragEnd}))},initSurface:Ext.emptyFn,renderItem:Ext.emptyFn,renderItems:Ext.emptyFn,renderFrame:Ext.emptyFn,setViewBox:Ext.emptyFn,tween:Ext.emptyFn,addCls:Ext.emptyFn,removeCls:Ext.emptyFn,setStyle:Ext.emptyFn,createWrapEl:function(n){return Ext.fly(n).createChild({tag:"div",cls:Ext.baseCSSPrefix+"surface-wrap",style:"overflow:hidden"})},initGradients:function(){var n=this.gradients;n&&Ext.each(n,this.addGradient,this)},initItems:function(){var n=this,t=n.items;n.items=new Ext.draw.CompositeSprite,n.groups=new Ext.draw.CompositeSprite,t&&n.add(t)},initBackground:function(n){var t=this,f,r,i=t.width,u=t.height;n&&(n.gradient?(r=n.gradient,f=r.id,t.addGradient(r),t.background=t.add({type:"rect",x:0,y:0,width:i,height:u,fill:"url(#"+f+")",zIndex:-100})):n.fill?t.background=t.add({type:"rect",x:0,y:0,width:i,height:u,fill:n.fill,zIndex:-100}):n.image&&(t.background=t.add({type:"image",x:0,y:0,width:i,height:u,src:n.image,zIndex:-100})))},setSize:function(n,t){this.background&&this.background.setAttributes({width:n,height:t,hidden:!1},!0),this.width=n,this.height=t,this.updateSurfaceElBox()},scrubAttrs:function(n){var i=this,u={},f={},r=n.attr,t;for(t in r)i.translateAttrs.hasOwnProperty(t)?(u[i.translateAttrs[t]]=r[t],f[i.translateAttrs[t]]=!0):i.availableAttrs.hasOwnProperty(t)&&!f[t]&&(u[t]=r[t]);return u},onMouseMove:n("mousemove"),onMouseOver:n("mouseover"),onMouseOut:n("mouseout"),onMouseEnter:n("mouseenter"),onMouseLeave:n("mouseleave"),onMouseUp:n("mouseup"),onMouseDown:n("mousedown"),onClick:n("click"),onDoubleClick:n("doubleclick"),onTap:n("tap"),onTapStart:n("tapstart"),onTapEnd:n("tapend"),onTapCancel:n("tapcancel"),onTapHold:n("taphold"),onDoubleTap:n("doubletap"),onSingleTap:n("singletap"),onTouchStart:n("touchstart"),onTouchMove:n("touchmove"),onTouchEnd:n("touchend"),onDragStart:n("dragstart"),onDrag:n("drag"),onDragEnd:n("dragend"),onPinchStart:n("pinchstart"),onPinch:n("pinch"),onPinchEnd:n("pinchend"),onSwipe:n("swipe"),processEvent:function(n,t){var r=this,i=r.getSpriteForEvent(t);i&&i.fireEvent(n,i,t),r.fireEvent(n,t)},getSpriteForEvent:function(){return null},addGradient:Ext.emptyFn,add:function(){var r=this,n=Array.prototype.slice.call(arguments),o=n.length>1,t,e,u,s,i,f;if(o||Ext.isArray(n[0])){for(e=o?n:n[0],f=[],u=0,s=e.length;u<s;u++)i=e[u],i=r.add(i),f.push(i);return f}t=r.prepareItems(n[0],!0)[0],r.normalizeSpriteCollection(t);r.onAdd(t);return t},normalizeSpriteCollection:function(n){var i=this.items,r=n.attr.zIndex,t=i.indexOf(n);return(t<0||t>0&&i.getAt(t-1).attr.zIndex>r||t<i.length-1&&i.getAt(t+1).attr.zIndex<r)&&(i.removeAt(t),t=i.findIndexBy(function(n){return n.attr.zIndex>r}),t<0&&(t=i.length),i.insert(t,n)),t},onAdd:function(n){var i=n.group,f=n.draggable,r,u,t;if(i){for(r=[].concat(i),u=r.length,t=0;t<u;t++)i=r[t],this.getGroup(i).add(n);delete n.group}f&&n.initDraggable()},remove:function(n,t){n&&(this.items.remove(n),this.groups.each(function(t){t.remove(n)}),n.onRemove(),t===!0&&n.destroy())},removeAll:function(n){for(var i=this.items.items,r=i.length,t=r-1;t>-1;t--)this.remove(i[t],n)},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,applyTransformations:function(n){n.bbox.transform=0,n.dirtyTransform=!1;var i=this,r=!1,t=n.attr;(t.translation.x!=null||t.translation.y!=null)&&(i.translate(n),r=!0),(t.scaling.x!=null||t.scaling.y!=null)&&(i.scale(n),r=!0),t.rotation.degrees!=null&&(i.rotate(n),r=!0),r&&(n.bbox.transform=0,i.transform(n),n.transformations=[])},rotate:function(n){var r,o=n.attr.rotation.degrees,t=n.attr.rotation.x,i=n.attr.rotation.y,u=n.attr.translation,e=u&&u.x||0,f=u&&u.y||0;Ext.isNumber(t)&&Ext.isNumber(i)||(r=this.getBBox(n,!0),t=Ext.isNumber(t)?t:r.x+e+r.width/2,i=Ext.isNumber(i)?i:r.y+f+r.height/2),n.transformations.push({type:"rotate",degrees:o,x:t,y:i})},translate:function(n){var i=n.attr.translation.x||0,t=n.attr.translation.y||0;n.transformations.push({type:"translate",x:i,y:t})},scale:function(n){var r,u=n.attr.scaling.x||1,f=n.attr.scaling.y||1,t=n.attr.scaling.centerX,i=n.attr.scaling.centerY;Ext.isNumber(t)&&Ext.isNumber(i)||(r=this.getBBox(n),t=Ext.isNumber(t)?t:r.x+r.width/2,i=Ext.isNumber(i)?i:r.y+r.height/2),n.transformations.push({type:"scale",x:u,y:f,centerX:t,centerY:i})},rectPath:function(n,t,i,r,u){return u?[["M",n+u,t],["l",i-u*2,0],["a",u,u,0,0,1,u,u],["l",0,r-u*2],["a",u,u,0,0,1,-u,u],["l",u*2-i,0],["a",u,u,0,0,1,-u,-u],["l",0,u*2-r],["a",u,u,0,0,1,u,-u],["z"]]:[["M",n,t],["l",i,0],["l",0,r],["l",-i,0],["z"]]},ellipsePath:function(n,t,i,r){return r==null&&(r=i),[["M",n,t],["m",0,-r],["a",i,r,0,1,1,0,2*r],["a",i,r,0,1,1,0,-2*r],["z"]]},getPathpath:function(n){return n.attr.path},getPathcircle:function(n){var t=n.attr;return this.ellipsePath(t.x,t.y,t.radius,t.radius)},getPathellipse:function(n){var t=n.attr;return this.ellipsePath(t.x,t.y,t.radiusX,t.radiusY)},getPathrect:function(n){var t=n.attr;return this.rectPath(t.x,t.y,t.width,t.height,t.r)},getPathimage:function(n){var t=n.attr;return this.rectPath(t.x||0,t.y||0,t.width,t.height)},getPathtext:function(n){var t=this.getBBoxText(n);return this.rectPath(t.x,t.y,t.width,t.height)},createGroup:function(n){var t=this.groups.get(n);return t||(t=new Ext.draw.CompositeSprite({surface:this}),t.id=n||Ext.id(null,"ext-surface-group-"),this.groups.add(t)),t},getGroup:function(n){if(typeof n=="string"){var t=this.groups.get(n);t||(t=this.createGroup(n))}else t=n;return t},prepareItems:function(n){n=[].concat(n);for(var r,i=0,u=n.length;i<u;i++)r=n[i],r instanceof Ext.draw.Sprite?r.surface=this:(r.surface=this,n[i]=this.createItem(r));return n},setText:Ext.emptyFn,createItem:Ext.emptyFn,getId:function(){return this.id||(this.id=Ext.id(null,"ext-surface-"))},destroy:function(){delete this.domRef,this.removeAll()},clear:Ext.emtpyFn,updateSurfaceElBox:function(){var n=this,c=Math.floor,i=c(n.width*n.zoomX),t=c(n.height*n.zoomY),o=n.panX,s=n.panY,y=2e3,v=1500,f=n.surfaceEl,u=f.dom,w=n.width,b=n.height,p=n.surfaceEl.dom.getContext("2d"),h=!1,e,r,l,a;i*t>y*v&&(h=!0,r=t*y/i,r>t&&(r=v),e=i*r/t,o=(w-e)/2,s=(b-r)/2,l=n.panX-o,a=n.panY-s,i=e,t=r),(u.width!=i||u.height!=t)&&(f.setSize(i,t),u.width=i,u.height=t,h&&p.translate(l,a)),f.setTopLeft(s,o)},setSurfaceTransform:function(n,t,i,r){var u=this;u.panX=n,u.panY=t,u.zoomX=i,u.zoomY=r,u.setSurfaceFastTransform(null),u.updateSurfaceElBox()},setSurfaceFastTransform:function(n){this.transformMatrix=n,this.surfaceEl.setStyle({webkitTransformOrigin:"0 0",webkitTransform:n?n.toSvg():""})}})}(),Ext.draw.Surface.create=function(n,t){return new Ext.draw.engine.Canvas(n);var i,r},Ext.draw.Surface.eventNames=["mouseup","mousedown","mouseover","mouseout","mousemove","mouseenter","mouseleave","click","dblclick","tap","tapstart","tapend","tapcancel","taphold","doubletap","singletap","touchstart","touchmove","touchend","drag","dragstart","dragend","pinch","pinchstart","pinchend","swipe"],Ext.draw.engine.Canvas=Ext.extend(Ext.draw.Surface,{attributeMap:{rotate:"rotation",stroke:"strokeStyle",fill:"fillStyle",lineWidth:"lineWidth","text-anchor":"textAlign","stroke-width":"lineWidth","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit",opacity:"globalAlpha",font:"font",shadowColor:"shadowColor",shadowOffsetX:"shadowOffsetX",shadowOffsetY:"shadowOffsetY",shadowBlur:"shadowBlur"},attributeDefaults:{strokeStyle:"rgba(0, 0, 0, 0)",fillStyle:"rgba(0, 0, 0, 0)",lineWidth:1,lineCap:"square",lineJoin:"miter",miterLimit:1,shadowColor:"none",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,font:"10px Helvetica, sans-serif",textAlign:"start",globalAlpha:1},gradientRe:/\s*url\s*\(#([^\)]+)\)\s*/,attributeParsers:{fillStyle:function(n,t,i){if(!n)return n;Ext.isObject(n)&&(i.addGradient(n),n="url(#"+n.id+")");var r=n.match(i.gradientRe);return r?i.createGradient(i._gradients[r[1]],t):n=="none"?"rgba(0, 0, 0, 0)":n},strokeStyle:function(n,t,i){if(!n)return n;Ext.isObject(n)&&(i.addGradient(n),n="url(#"+n.id+")");var r=n.match(i.gradientRe);return r?i.createGradient(i._gradients[r[1]],t):n=="none"?"rgba(0, 0, 0, 0)":n},textAlign:function(n){return n==="middle"?"center":n}},constructor:function(n){var t=this;t.initEvents="initEvents"in n?n.initEvents:!0,t._gradients={},Ext.draw.engine.Canvas.superclass.constructor.apply(this,arguments),t.initCanvas(n.renderTo),Ext.fx.Manager.addListener("frameend",function(){t.animatedFrame&&(t.animatedFrame=!1,t.renderFrame())}),this.canvas.oncontextmenu=function(){return!1}},initCanvas:function(n){if(!this.ctx){var t=this,f=Ext.get(n),e=f.getWidth(),u=f.getHeight(),r=t.createWrapEl(n),i=document.createElement("canvas"),o=i.getContext("2d");r.setSize(e,u),r.dom.id=t.id+"-wrap",i.id=t.id+"-canvas",i.width=e,i.height=u,r.appendChild(i),t.el=r,t.surfaceEl=Ext.get(i),t.canvas=i,t.ctx=o,t.initEvents&&t.initializeEvents()}},getSpriteForEvent:function(){return null},addGradient:function(n){var t=this;n=Ext.draw.Draw.parseGradient(n),t._gradients[n.id]=n},transform:function(n){for(var r=new Ext.draw.Matrix,f=n.transformations,e=f.length,u=0,t,i;u<e;u++)t=f[u],i=t.type,i=="translate"?r.translate(t.x,t.y):i=="rotate"?r.rotate(t.degrees,t.x,t.y):i=="scale"&&r.scale(t.x,t.y,t.centerX,t.centerY);n.matrix=r},setSize:function(n,t){var r,i,u=this,f=u.canvas;typeof n=="object"?(r=n.width,i=n.height):(r=n,i=t),(r!==f.width||i!==f.height)&&(u.el.setSize(r,i),u.surfaceEl.setSize(r,i),f.width=r,f.height=i,u.width=r,u.height=i),Ext.draw.engine.Canvas.superclass.setSize.call(this,n,t)},tween:function(){this.animatedFrame=!0,Ext.draw.engine.Canvas.superclass.tween.apply(this)},renderFrame:function(){this.render()},render:function(n){var t=this;t.canvas||t.initCanvas(n),t.renderAll()},createItem:function(n){var t=new Ext.draw.Sprite(n);return t.surface=this,t.matrix=new Ext.draw.Matrix,t.bbox={plain:0,transform:0},t},zIndexSort:function(n,t){var u=n.attr,r=t.attr,f=u&&u.zIndex||-1,e=r&&r.zIndex||-1,i=f-e;return i?i:n.id>t.id?1:-1},renderAll:function(){var n=this;n.clear(),n.items.items.sort(n.zIndexSort),n.items.each(n.renderSprite,n)},renderSprite:function(n){if(n.dirtyHidden=n.dirtyPath=n.zIndexDirty=n.dirtyFont=n.dirty=!1,!n.attr.hidden){n.matrix||(n.matrix=new Ext.draw.Matrix);var i=this,r=i.ctx,e=n.attr,o=i.attributeMap,h=i.attributeDefaults,s=i.attributeParsers,f,t,u;n.dirtyTransform&&i.applyTransformations(n),r.save(),n.matrix.toCanvas(r);for(f in o)t=o[f],t in s?(u=s[t](e[f],n,i),r[t]=u!==undefined?u:h[t]):(u=e[f],r[t]=u!==undefined?u:h[t]);i[n.type+"Render"](n),r.restore()}},circleRender:function(n){var o=this,t=o.ctx,i=n.attr,e=+(i.x||0),f=+(i.y||0),u=i.radius,r=Ext.draw.Draw.pi2;t.beginPath(),t.arc(e,f,u,0,r,!0),t.closePath(),t.fill(),t.beginPath(),t.arc(e,f,u,0,r,!0),t.closePath(),t.stroke()},ellipseRender:function(n){var v=this,t=v.ctx,f=n.attr,i=f.width,r=f.height,c=+(f.x||0),l=+(f.y||0),a=1,h=1,o=1,e=1,u=0,s=Ext.draw.Draw.pi2;i>r?(u=i/2,h=r/i,e=i/r):(u=r/2,a=i/r,o=r/i),t.scale(a,h),t.beginPath(),t.arc(c*o,l*e,u,0,s,!0),t.closePath(),t.fill(),t.beginPath(),t.arc(c*o,l*e,u,0,s,!0),t.closePath(),t.stroke()},imageRender:function(n){var e=this,o=e.ctx,i=n.attr,r=i.width,u=i.height,s=+(i.x||0),h=+(i.y||0),f=i.src,t;n._img?t=n._img:(n._img=t=new Image,t.height=u,t.width=r,t._loading=!0,t.onload=function(){t._loading=!1,e.renderFrame()},t.src=f.slice(1,f.length-1)),t._loading||o.drawImage(t,s-r/2,h-u/2,r,u)},rectRender:function(n){var o=this,e=o.ctx,t=n.attr,f=t.width,i=t.height,r=+(t.x||0),u=+(t.y||0);isFinite(r)&&isFinite(u)&&isFinite(f)&&isFinite(i)&&(e.fillRect(r,u,f,i),e.strokeRect(r,u,f,i))},textRender:function(n){var e=this,u=e.ctx,t=n.attr,i=+(t.x||0),r=+(t.y||0),f=t.text;isFinite(i)&&isFinite(r)&&(u.textBaseline="middle",u.fillText(f,i,r))},pathRender:function(n){if(n.attr.path){var s=this,r=s.ctx,u=n.attr,i=Ext.draw.Draw.path2curve(u.path),o=i.length,e,f,t;for(r.beginPath(),t=0;t<o;t++)switch(i[t][0]){case"M":r.moveTo(i[t][1],i[t][2]),e==null&&(e=i[t][1]),f==null&&(f=i[t][2]);break;case"C":r.bezierCurveTo(i[t][1],i[t][2],i[t][3],i[t][4],i[t][5],i[t][6]);break;case"Z":r.lineTo(e,f)}u.stroke&&u.stroke!="none"&&u.stroke!="rgba(0, 0, 0, 0)"&&r.stroke(),u.fill&&u.fill!="none"&&u.fill!="rgba(0, 0, 0, 0)"&&r.fill(),r.closePath()}},contains:function(n,t){for(var r=this,u=r.items.items,f=u.length,i;f--;)if(i=u[f],r.bboxContains(n,t,i)&&r[i.type+"Contains"](n,t,i))return{target:i};return!1},bboxContains:function(n,t,i){var r=i.getBBox();return n>=r.x&&n<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},circleContains:function(n,t,i){var u=i.attr,r=u.translation,h=(u.x||0)+(r&&r.x||0),s=(u.y||0)+(r&&r.y||0),f=n-h,e=t-s,o=u.radius;return f*f+e*e<=o*o},ellipseContains:function(n,t,i){var r=i.attr,o=r.translation,a=(r.x||0)+(o&&o.x||0),l=(r.y||0)+(o&&o.y||0),u=r.radiusX||r.width/2||0,f=r.radiusY||r.height/2||0,e=0,v=1,s=1,h,c;return u>f?(e=u,s=f/u):(e=f,s=u/f),h=(n-a)/v,c=(t-l)/s,h*h+c*c<=e*e},imageContains:function(){return!0},rectContains:function(){return!0},textContains:function(){return!0},pathContains:function(){return!1},createGradient:function(n,t){var f=this.ctx,c=t.getBBox(),r=c.x,i=c.y,a=c.width,v=c.height,o=r+a,s=i+v,e=Math.round(Math.abs(n.degrees||n.angle||0)%360),l=n.stops,h,u;u=e<=0?f.createLinearGradient(r,i,r,s):e<=45?f.createLinearGradient(r,i,o,s):e<=90?f.createLinearGradient(r,i,o,i):e<=135?f.createLinearGradient(o,i,r,s):e<=180?f.createLinearGradient(r,s,r,i):e<=225?f.createLinearGradient(o,s,r,i):e<=270?f.createLinearGradient(o,i,r,i):e<=315?f.createLinearGradient(r,s,o,i):f.createLinearGradient(r,i,o,s);for(h in l)l.hasOwnProperty(h)&&u.addColorStop(h,l[h].color||"#000");return u},getBBox:function(n,t){if(n.type=="text")return this.getBBoxText(n,t);var i=this["getPath"+n.type](n);return t?n.bbox.plain=n.bbox.plain||Ext.draw.Draw.pathDimensions(i):n.bbox.transform=Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(i,n.matrix))},getBBoxText:function(n,t){var it=this,y=it.ctx,v=n.attr,i,s=v.x||0,h=v.y||0,u,e,r,f,d,g,b,k,tt,nt,p,w,ut,rt,a=n.attr.translation,ft=a&&a.x||0,ot=a&&a.y||0,l=v.font,c=+(l&&l.match(/[0-9]+/)[0])||10,et=v.text,o;return(y.save(),l&&(y.font=l),o=y.measureText(et),y.restore(),n.dirtyTransform&&it.applyTransformations(n),i=n.matrix,u=s+ft,r=h+ot,e=u+(o.width||c),f=r+(o.height||c),t)?{x:s,y:h,width:o.width||c,height:o.height||c}:(d=i.x(u,r),tt=i.y(u,r),g=i.x(u,f),nt=i.y(u,f),b=i.x(e,r),p=i.y(e,r),k=i.x(e,f),w=i.y(e,f),s=Math.min(d,g,b,k),h=Math.min(tt,nt,p,w),ut=Math.abs(s-Math.max(d,g,b,k)),rt=Math.abs(h-Math.max(tt,nt,p,w)),{x:s,y:h,width:ut,height:rt})},getRegion:function(){var t=this.canvas,n=Ext.get(t).getXY();return{left:n[0],top:n[1],right:n[0]+t.width,bottom:n[1]+t.height}},getShadowAttributesArray:function(n){return n?[{"stroke-width":6,"stroke-opacity":1,stroke:"rgba(200, 200, 200, 0.5)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgba(150, 150, 150, 0.5)",translate:{x:.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgba(100, 100, 100, 0.5)",translate:{x:.6,y:1}}]:[]},getShadowOptions:function(){return{shadowOffsetX:2,shadowOffsetY:Ext.is.Android?-2:2,shadowBlur:3,shadowColor:"#444"}},clear:function(){var t=this,n=t.canvas,u=t.ctx,r=n.width,i=n.height;u.clearRect(0,0,r,i)}}),Ext.draw.Component=Ext.extend(Ext.Component,{enginePriority:["Canvas"],baseCls:"ext-surface",componentLayout:"draw",viewBox:!0,autoSize:!1,cls:"x-draw-component",initComponent:function(){var n=this;Ext.draw.Component.superclass.initComponent.call(n),n.addEvents.apply(n,Ext.draw.Surface.eventNames)},onRender:function(){var n=this,o=n.viewBox,s=n.autoSize,t,e,f,i,u,r;Ext.draw.Component.superclass.onRender.apply(this,arguments),n.surface=n.createSurface(),e=n.surface.items,(o||s)&&(t=e.getBBox(),f=t.width,i=t.height,u=t.x,r=t.y,n.viewBox?n.surface.setViewBox(u,r,f,i):n.autoSizeSurface())},getEventsSurface:function(){return this.surface},initEvents:function(){var n=this;Ext.draw.Component.superclass.initEvents.call(n),n.relayEvents(n.getEventsSurface(),Ext.draw.Surface.eventNames)},autoSizeSurface:function(){var n=this,u=n.surface.items,t=u.getBBox(),r=t.width,i=t.height;u.setAttributes({translate:{x:-t.x,y:-t.y+ +Ext.isOpera}},!0),n.rendered?n.setSize(r,i):n.surface.setSize(r,i),n.el.setSize(r,i)},createSurface:function(n){var t=this,i=Ext.apply;return Ext.draw.Surface.create(i({},i({width:t.width,height:t.height,renderTo:t.el,id:Ext.id()},n),t.initialConfig))},onDestroy:function(){var n=this.surface;n&&n.destroy(),Ext.draw.Component.superclass.onDestroy.call(this)}}),Ext.reg("draw",Ext.draw.Component),Ext.ns("Ext.chart"),Ext.chart.Shape={image:function(n,t){return t.height=t.height||16,t.width=t.width||16,n.add(Ext.applyIf({type:"image",x:t.x,y:t.y,height:t.height,width:t.width,src:t.src},t))},circle:function(n,t){return n.add(Ext.apply({type:"circle",x:t.x,y:t.y,stroke:null,radius:t.radius},t))},line:function(n,t){return n.add(Ext.apply({type:"rect",x:t.x-t.radius,y:t.y-t.radius,height:2*t.radius,width:2*t.radius/5},t))},square:function(n,t){return n.add(Ext.applyIf({type:"rect",x:t.x-t.radius,y:t.y-t.radius,height:2*t.radius,width:2*t.radius,radius:null},t))},triangle:function(n,t){return t.radius*=1.75,n.add(Ext.apply({type:"path",stroke:null,path:"M".concat(t.x,",",t.y,"m0-",t.radius*.58,"l",t.radius*.5,",",t.radius*.87,"-",t.radius,",0z")},t))},diamond:function(n,t){var i=t.radius;return i*=1.5,n.add(Ext.apply({type:"path",stroke:null,path:["M",t.x,t.y-i,"l",i,i,-i,i,-i,-i,i,-i,"z"]},t))},cross:function(n,t){var i=t.radius;return i=i/1.7,n.add(Ext.apply({type:"path",stroke:null,path:"M".concat(t.x-i,",",t.y,"l",[-i,-i,i,-i,i,i,i,-i,i,i,-i,i,i,i,-i,i,-i,-i,-i,i,-i,-i,"z"])},t))},plus:function(n,t){var i=t.radius/1.3;return n.add(Ext.apply({type:"path",stroke:null,path:"M".concat(t.x-i/2,",",t.y-i/2,"l",[0,-i,i,0,0,i,i,0,0,i,-i,0,0,i,-i,0,0,-i,-i,0,0,-i,"z"])},t))},arrow:function(n,t){var i=t.radius;return n.add(Ext.apply({type:"path",path:"M".concat(t.x-i*.7,",",t.y-i*.4,"l",[i*.6,0,0,-i*.4,i,i*.8,-i,i*.8,0,-i*.4,-i*.6,0],"z")},t))},drop:function(n,t,i,r,u,f){u=u||30,f=f||0,n.add({type:"path",path:["M",t,i,"l",u,0,"A",u*.4,u*.4,0,1,0,t+u*.7,i-u*.7,"z"],fill:"#000",stroke:"none",rotate:{degrees:22.5-f,x:t,y:i}}),f=(f+90)*Math.PI/180,n.add({type:"text",x:t+u*Math.sin(f)-10,y:i+u*Math.cos(f)+5,text:r,"font-size":u*12/40,stroke:"none",fill:"#fff"})}},Ext.chart.Toolbar=Ext.extend(Ext.Container,{isChartToolbar:!0,defaultType:"button",baseCls:Ext.baseCSSPrefix+"chart-toolbar",isOrientationSpecific:function(){var n=this.position;return n&&Ext.isObject(n)&&"portrait"in n},getPosition:function(){var t=this,n=t.position,i=t.chart.legend;return!n&&i?n=i.getPosition():t.isOrientationSpecific()&&(n=n[Ext.getOrientation()]),n&&Ext.isString(n)||(n="bottom"),n},orient:function(){var n=this,t=Ext.getOrientation();n.rendered||n.render(n.chart.el),t!==n.lastOrientation&&(n.el.dom.setAttribute("data-side",n.getPosition()),n.lastOrientation=t)}}),Ext.chart.Legend=Ext.extend(Ext.util.Observable,{visible:!0,position:"bottom",dock:Ext.is.Phone,doubleTapThreshold:250,constructor:function(n){var t=this,e=n.chart,o=e.el,f,s,r,u,i;t.addEvents("combine","split"),Ext.chart.Legend.superclass.constructor.call(t,n),r=t.getView(),t.dock?(f=t.button=e.getToolbar().add({showAnimation:"fade",cls:Ext.baseCSSPrefix+"legend-button",iconCls:Ext.baseCSSPrefix+"legend-button-icon",iconMask:!0,handler:function(){t.sheet.show()}}),f.show(),u={bottom:"up",top:"down",right:"left",left:"right"},i={type:"slide",duration:150,direction:u[t.getPosition()]},s=t.sheet=new Ext.Sheet({enter:t.getPosition(),stretchY:!0,stretchX:!0,ui:"legend",hideOnMaskTap:!0,enterAnimation:i,exitAnimation:i,width:200,height:260,renderTo:o,layout:"fit",items:r,listeners:{swipe:{element:"el",fn:function(n){n.direction==t.getPosition()&&t.sheet.hide()}}}})):r.render(o),t.isDisplayed()&&t.show()},getView:function(){var n=this;return n.view||(n.view=new Ext.chart.Legend.View({legend:n,floating:!n.dock}))},isDisplayed:function(){return this.visible&&this.chart.series.findIndex("showInLegend",!0)!==-1},isOrientationSpecific:function(){var n=this.position;return Ext.isObject(n)&&"portrait"in n},getPosition:function(){var t=this,n=t.position;return t.isOrientationSpecific()&&(n=n[Ext.getOrientation()]),t.dock&&!Ext.isString(n)&&(n="bottom"),n},isVertical:function(){var n=this.getPosition();return this.dock||(Ext.isObject(n)?n.vertical:"left|right|float".indexOf(""+n)!==-1)},orient:function(){var t=this,n=t.sheet,r=t.getPosition(),i=Ext.getOrientation(),u="auto";t.getView().orient(),t.lastOrientation!==i&&(n&&(n.hide(),n.enter=n.exit=r,n.setSize(null,null),n.orient()),t.lastOrientation=i)},updatePosition:function(){if(!this.dock){var f=this,v=f.chart,c=v.chartBBox,n=v.insetPadding,h=Ext.isObject(n),l=(h?n.left:n)||0,b=(h?n.right:n)||0,w=(h?n.bottom:n)||0,a=(h?n.top:n)||0,it=v.curWidth,rt=v.curHeight,nt=c.width-(l+b),tt=c.height-(a+w),et=c.x+l,ot=c.y+a,ut=f.isVertical(),r=f.getView(),y=Math,e=y.floor,ft=y.min,g=y.max,i,t,o,u,k,p,s,d;if(f.sheet)return;if(f.isDisplayed()){if(r.show(),r.setCalculatedSize(ut?d:null,ut?null:d),o=r.getWidth(),u=r.getHeight(),s=f.getPosition(),Ext.isObject(s))i=s.x,t=s.y;else{switch(s){case"left":i=l,t=e(ot+tt/2-u/2);break;case"right":i=e(it-o)-b,t=e(ot+tt/2-u/2);break;case"top":i=e(et+nt/2-o/2),t=a;break;default:i=e(et+nt/2-o/2),t=e(rt-u)-w}i=g(i,l),t=g(t,a)}k=it-i-b,p=rt-t-w,r.setPosition(i,t),(o>k||u>p)&&r.setCalculatedSize(ft(o,k),ft(u,p))}else r.hide()}},getInsetSize:function(){var n=this,r=n.getPosition(),i=n.chart.insets,e=i.left,o=i.bottom,f=i.top,s=i.right,u=0,t;return!n.dock&&n.isDisplayed()&&(t=n.getView(),t.show(),r==="left"||r==="right"?u=t.getWidth()+e:(r==="top"||r==="bottom")&&(u=t.getHeight()+f)),u},show:function(){(this.sheet||this.getView()).show()},hide:function(){(this.sheet||this.getView()).hide()},onCombine:function(n,t,i){var r=this;n.combine(t,i),r.getView().updateStore(),r.fireEvent("combine",r,n,t,i)},onSplit:function(n,t){var i=this;n.split(t),i.getView().updateStore(),i.fireEvent("split",i,n,t)},reset:function(){this.getView().reset()}}),Ext.chart.Legend.View=Ext.extend(Ext.DataView,{tpl:['<ul class="'+Ext.baseCSSPrefix+'legend-items">','<tpl for=".">','<li class="'+Ext.baseCSSPrefix+'legend-item <tpl if="disabled">'+Ext.baseCSSPrefix+'legend-inactive</tpl>">','<span class="'+Ext.baseCSSPrefix+'legend-item-marker" style="background-color:{markerColor};"></span>{label}',"</li>","</tpl>","</ul>"],disableSelection:!0,componentCls:Ext.baseCSSPrefix+"legend",horizontalCls:Ext.baseCSSPrefix+"legend-horizontal",inactiveItemCls:Ext.baseCSSPrefix+"legend-inactive",itemSelector:"."+Ext.baseCSSPrefix+"legend-item",hideOnMaskTap:!1,triggerEvent:"tap",initComponent:function(){var n=this;n.createStore(),Ext.chart.Legend.View.superclass.initComponent.call(n);n.on("refresh",n.updateDroppables,n)},initEvents:function(){var n=this;Ext.chart.Legend.View.superclass.initEvents.call(n);n.el.on("taphold",n.onTapHold,n,{delegate:n.itemSelector})},onTapHold:function(n,t){var i=this,r,f,u,e;if(!Ext.fly(t).hasCls(i.inactiveItemCls)&&(f=i.getRecord(t),u=f.get("seriesId"),e=i.store.findBy(function(n){return n!==f&&n.get("seriesId")===u}),e>-1)){r=new Ext.util.Draggable(t,{threshold:0,revert:!0,direction:i.legend.isVertical()?"vertical":"horizontal",group:u});r.on("dragend",i.onDragEnd,i);if(!r.dragging)r.onStart(n)}},updateDroppables:function(){var n=this,i=n.droppables,t;Ext.destroy(i),i=n.droppables=[],n.store.each(function(r){t=new Ext.chart.Legend.Droppable(n.getNode(r),{group:r.get("seriesId"),disabled:r.get("disabled")});t.on("drop",n.onDrop,n);i.push(t)})},onDrop:function(n,t){var i=this,r=i.getRecord(t.el.dom),u=i.getRecord(n.el.dom);i.legend.onCombine(r.get("series"),r.get("index"),u.get("index"))},onDragEnd:function(n){n.destroy()},createStore:function(){var n=this;n.store=new Ext.data.Store({fields:["markerColor","label","series","seriesId","index","disabled"],data:n.getStoreData()}),n.legend.chart.series.each(function(t){t.on("titlechange",n.updateStore,n)})},getStoreData:function(){var n=[];return this.legend.chart.series.each(function(t){t.showInLegend&&Ext.each(t.getLegendLabels(),function(i,r){n.push({label:i,markerColor:t.getLegendColor(r),series:t,seriesId:Ext.id(t,"legend-series-"),index:r,disabled:!t.visibleInLegend(r)})})}),n},updateStore:function(){var n=this.store;n.suspendEvents(!0),n.removeAll(),n.add(this.getStoreData()),n.resumeEvents()},orient:function(){var n=this,u=n.legend,r=n.horizontalCls,t=u.isVertical(),i=Ext.getOrientation();t?n.removeCls(r):n.addCls(r),n.lastOrientation!==i&&(n.setCalculatedSize(null,null),n.scrollEl.setStyle({width:"",height:"",minWidth:"",minHeight:""}),Ext.iterate(n.scroller.scrollView.indicators,function(n,t){clearTimeout(t.hideTimer),Ext.destroy(t.el),delete t.el},this),n.scroller.destroy(),n.setScrollable(t?"vertical":"horizontal"),t&&n.setCalculatedSize(n.getWidth()),n.scroller&&n.scroller.scrollTo({x:0,y:0}),n.lastOrientation=i)},afterComponentLayout:function(){var r=this,n=r.scroller,t,i;Ext.chart.Legend.View.superclass.afterComponentLayout.apply(r,arguments),n&&(t=n.size,i=n.containerBox,t.width>i.width||t.height>i.height?n.enable():n.disable())},refresh:function(){Ext.chart.Legend.View.superclass.refresh.apply(this,arguments),this.scrollEl.setStyle({minWidth:"",minHeight:""})},onItemTap:function(n,t){Ext.chart.Legend.View.superclass.onItemTap.apply(this,arguments);var r=this,o=r.store.getAt(t),h=o.get("series"),s=o.get("index"),u=r.legend.doubleTapThreshold,f=r.tapTask||(r.tapTask=new Ext.util.DelayedTask),e=+new Date;f.cancel(),h.isCombinedItem(s)?(e-(r.lastTapTime||0)<u?r.doItemDoubleTap(n,t):f.delay(u,r.doItemTap,r,[n,t]),r.lastTapTime=e):r.doItemTap(n,t)},doItemTap:function(n,t){var r=this,e=r.store.getAt(t),i=e.get("series"),o=e.get("index"),s=i.visibleInLegend(o),u=r.droppables[t],f=r.inactiveItemCls;i._index=o,s?(i.hideAll(),Ext.fly(n).addCls(f),u.disable()):(i.showAll(),Ext.fly(n).removeCls(f),u.enable()),i.getSurface().renderFrame(),i.getOverlaySurface().renderFrame(),r.legend.chart.axes.each(function(n){n.renderFrame()})},doItemDoubleTap:function(n){var r=this,i=r.getRecord(n);if(i)r.legend.onSplit(i.get("series"),i.get("index"))},reset:function(){var n=this;n.store.each(function(t){var i=t.get("series");i._index=t.get("index"),i.showAll(),Ext.fly(n.getNode(t)).removeCls(n.inactiveItemCls),i.clearCombinations()}),n.updateStore()}}),Ext.chart.Legend.Droppable=Ext.extend(Ext.util.Droppable,{isDragOver:function(n){var t=n.region,i=Math.round,r={x:i((t.right-t.left)/2+t.left)+.5,y:i((t.bottom-t.top)/2+t.top)+.5};return n.el!==this.el&&!this.region.isOutOfBound(r)}}),Ext.ns("Ext.chart.theme"),Ext.ComponentQuery.pseudos["nth-child"]=function(n,t){var i=+t-1;return n[i]?[n[i]]:[]},Ext.ComponentQuery.pseudos.highlight=function(n){for(var e=0,u=0,h=n.length,o=[],i,f,r,s;e<h;++e)if(i=n[e],i.isXType&&i.isXType("highlight")&&o.push(i),i.getRefItems)for(f=i.getRefItems(!0),u=0,s=f.length;u<s;++u)r=f[u],r.isXType&&r.isXType("highlight")&&o.push(r);return o},Ext.chart.theme.Theme=Ext.extend(Object,{theme:"Base",themeInitialized:!1,applyStyles:function(n){if(!this.themeInitialized){var s=this,w={getRefItems:function(){return[s]},isXType:function(){return!1},initCls:function(){return[]},getItemId:function(){return""}},h=[Ext.chart.theme.Base.slice()],o=0,l=0,e=[],r,v,p,c,t,i,f,y,a,u;for((n||s.theme!="Base")&&h.push(Ext.chart.theme[n||s.theme].slice()),y=h.length;l<y;++l)for(u=h[l],a=u.length,u.sort(function(n,t){var r=n.specificity,i=t.specificity;return i[0]<r[0]||i[0]==r[0]&&i[1]<r[1]||i[0]==r[0]&&i[1]==r[1]&&i[2]<r[2]}),o=0;o<a;++o)for(c=u[o],v=c.selector,p=c.style,i=Ext.ComponentQuery.query(v,w),e.push.apply(e,i),t=0,f=i.length;t<f;++t)i[t].themeStyle=Ext.apply(i[t].themeStyle||{},p);for(t=0,f=e.length;t<f;++t)r=e[t],r.style=Ext.applyIf(r.style||{},r.themeStyle||{});s.themeInitialized=!0}}}),Ext.chart.theme.Aitana=[{selector:"chart",style:{colors:["rgba(62, 111, 255, 0.85)","rgba(164, 234, 17, 0.85)","rgba(255, 136, 9, 0.85)","rgba(166, 17, 32, 0.85)","rgba(255, 209, 62, 0.85)","rgba(166, 17, 135, 0.85)","rgba(36, 173, 154, 0.85)","rgba(124, 116, 116, 0.85)","rgba(166, 97, 17, 0.85)"],background:"#161616"},specificity:[0,0,1]},{selector:"chart axis",style:{stroke:"#333333"},specificity:[0,0,2]},{selector:"chart axis label",style:{color:"#888888",fill:"#888888",font:"10px Helvetica, Arial, sans-serif"},specificity:[0,0,3]},{selector:"chart series:nth-child(3)",style:{fill:"#ff8809"},specificity:[0,1,2]},{selector:"chart series:nth-child(4)",style:{fill:"#a61120"},specificity:[0,1,2]},{selector:"chart marker",style:{stroke:"#ffffff","stroke-width":0,type:"circle",fill:"#000000",radius:5,size:5},specificity:[0,0,2]},{selector:"chart marker:nth-child(3)",style:{fill:"#ff8809"},specificity:[0,1,2]},{selector:"chart marker:nth-child(4)",style:{fill:"#a61120"},specificity:[0,1,2]},{selector:'chart[cls="pie1"]',style:{padding:10},specificity:[0,1,1]},{selector:'chart[cls="pie1"] series label',style:{display:"rotate",contrast:!0,font:"0.7em Helvetica, Arial, sans-serif"},specificity:[0,1,3]}],Ext.chart.theme.Base=[{selector:"chart",style:{padding:10,colors:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]},specificity:[0,0,1]},{selector:"chart axis",style:{color:"#354f6e",fill:"#354f6e",stroke:"#cccccc","stroke-width":1},specificity:[0,0,2]},{selector:"chart axis label",style:{color:"#354f6e",fill:"#354f6e",font:"12px Helvetica, Arial, sans-serif","font-weight":"bold",spacing:2,padding:5},specificity:[0,0,3]},{selector:"chart axis title",style:{font:"18px Helvetica, Arial, sans-serif",color:"#354f6e",fill:"#354f6e",padding:5},specificity:[0,0,3]},{selector:'chart axis[position="left"] title',style:{rotate:{x:0,y:0,degrees:270}},specificity:[0,1,3]},{selector:'chart axis[position="right"] title',style:{rotate:{x:0,y:0,degrees:270}},specificity:[0,1,3]},{selector:'chart axis[position="radial"]',style:{fill:"none"},specificity:[0,1,2]},{selector:'chart axis[position="radial"] label',style:{font:"10px Helvetica, Arial, sans-serif","text-anchor":"middle"},specificity:[0,1,3]},{selector:'chart axis[position="gauge"]',style:{fill:"none"},specificity:[0,1,2]},{selector:'chart axis[position="gauge"] label',style:{font:"10px Helvetica, Arial, sans-serif","text-anchor":"middle"},specificity:[0,1,3]},{selector:"chart series",style:{"stroke-width":1},specificity:[0,0,2]},{selector:"chart series label",style:{font:"12px Helvetica, Arial, sans-serif",fill:"#333333",display:"none",field:"name",minMargin:"50",orientation:"horizontal"},specificity:[0,0,3]},{selector:"chart series:nth-child(1)",style:{fill:"#115fa6"},specificity:[0,1,2]},{selector:"chart series:nth-child(2)",style:{fill:"#94ae0a"},specificity:[0,1,2]},{selector:"chart series:nth-child(3)",style:{fill:"#a61120"},specificity:[0,1,2]},{selector:"chart series:nth-child(4)",style:{fill:"#ff8809"},specificity:[0,1,2]},{selector:"chart series:nth-child(5)",style:{fill:"#ffd13e"},specificity:[0,1,2]},{selector:"chart series:nth-child(6)",style:{fill:"#a61187"},specificity:[0,1,2]},{selector:"chart series:nth-child(7)",style:{fill:"#24ad9a"},specificity:[0,1,2]},{selector:"chart series:nth-child(8)",style:{fill:"#7c7474"},specificity:[0,1,2]},{selector:"chart series:nth-child(9)",style:{fill:"#a66111"},specificity:[0,1,2]},{selector:"chart series:highlight",style:{radius:20,"stroke-width":5,stroke:"#ff5555"},specificity:[0,1,2]},{selector:'chart series[type="line"]:highlight',style:{"stroke-width":3},specificity:[0,2,2]},{selector:'chart series[type="bar"]:highlight',style:{"stroke-width":3,stroke:"#5555cc",opacity:.8},specificity:[0,2,2]},{selector:'chart series[type="area"]:highlight',style:{"stroke-width":3,stroke:"#111111"},specificity:[0,2,2]},{selector:'chart series[type="pie"]:highlight',style:{stroke:"none","stroke-width":0},specificity:[0,2,2]},{selector:'chart series[type="scatter"]:highlight',style:{stroke:"none","stroke-width":0},specificity:[0,2,2]},{selector:"chart marker",style:{stroke:"#ffffff","stroke-width":1,type:"circle",fill:"#000000",radius:5,size:5},specificity:[0,0,2]},{selector:"chart marker:nth-child(1)",style:{fill:"#115fa6",type:"circle"},specificity:[0,1,2]},{selector:"chart marker:nth-child(2)",style:{fill:"#94ae0a"},specificity:[0,1,2]},{selector:"chart marker:nth-child(3)",style:{fill:"#a61120"},specificity:[0,1,2]},{selector:"chart marker:nth-child(3)",style:{fill:"#a61120"},specificity:[0,1,2]},{selector:"chart marker:nth-child(4)",style:{fill:"#ff8809"},specificity:[0,1,2]},{selector:"chart marker:nth-child(5)",style:{fill:"#ffd13e"},specificity:[0,1,2]},{selector:"chart marker:nth-child(6)",style:{fill:"#a61187"},specificity:[0,1,2]},{selector:"chart marker:nth-child(7)",style:{fill:"#24ad9a"},specificity:[0,1,2]},{selector:"chart marker:nth-child(8)",style:{fill:"#7c7474"},specificity:[0,1,2]},{selector:"chart marker:nth-child(9)",style:{fill:"#a66111"},specificity:[0,1,2]},{selector:'chart interaction[type="itemcompare"] circle',style:{fill:"rgba(0, 0, 0, 0)",stroke:"#0d75f2",radius:5},specificity:[0,1,3]},{selector:'chart interaction[type="itemcompare"] line',style:{stroke:"#0d75f2","stroke-width":3},specificity:[0,1,3]},{selector:'chart interaction[type="itemcompare"] arrow',style:{fill:"#0d75f2",radius:8},specificity:[0,1,3]},{selector:'chart interaction[type="piegrouping"] slice',style:{stroke:"#0d75f2","stroke-width":2,fill:"#0d75f2",opacity:.5},specificity:[0,1,3]},{selector:'chart interaction[type="piegrouping"] handle',style:{stroke:"#0d75f2","stroke-width":2,fill:"#0d75f2"},specificity:[0,1,3]}],Ext.chart.theme.Demo=[{selector:'chart[cls="area1"] axis[position="left"] grid even',style:{opacity:1,fill:"#dddddd",stroke:"#bbbbbb","stroke-width":1},specificity:[0,2,4]},{selector:'chart[cls="area1"] axis[position="bottom"] label',style:{rotate:{degrees:45}},specificity:[0,2,3]},{selector:'chart[cls="area1"] series',style:{opaciy:"0.93"},specificity:[0,1,2]},{selector:'chart[cls="bar1"] axis[position="bottom"] grid',style:{stroke:"#cccccc"},specificity:[0,2,3]},{selector:'chart[cls="column1"]',style:{background:"#111111"},specificity:[0,1,1]},{selector:'chart[cls="column1"] axis',style:{stroke:"#eeeeee",fill:"#eeeeee"},specificity:[0,1,2]},{selector:'chart[cls="column1"] axis label',style:{fill:"#ffffff"},specificity:[0,1,3]},{selector:'chart[cls="column1"] axis title',style:{fill:"#ffffff"},specificity:[0,1,3]},{selector:'chart[cls="column1"] axis[position="left"] grid odd',style:{stroke:"#555555"},specificity:[0,2,4]},{selector:'chart[cls="column1"] axis[position="left"] grid even',style:{stroke:"#555555"},specificity:[0,2,4]},{selector:'chart[cls="column1"] series label',style:{fill:"#ffffff",font:"17px Arial",display:"insideEnd","text-anchor":"middle",orientation:"horizontal"},specificity:[0,1,3]},{selector:'chart[cls="barcombo1"] axis[position="bottom"] grid',style:{stroke:"#cccccc"},specificity:[0,2,3]},{selector:'chart[cls="piecombo1"]',style:{padding:20},specificity:[0,1,1]},{selector:'chart[cls="piecombo1"] series label',style:{display:"rotate",contrast:!0,font:"14px Arial"},specificity:[0,1,3]},{selector:'chart[cls="gaugecombo1"]',style:{padding:30},specificity:[0,1,1]},{selector:'chart[cls="gaugecombo1"] axis',style:{stroke:"#cccccc"},specificity:[0,1,2]},{selector:'chart[cls="gaugecombo1"] axis label',style:{font:"15px Arial"},specificity:[0,1,3]},{selector:'chart[cls="radarcombo1"]',style:{padding:20},specificity:[0,1,1]},{selector:'chart[cls="radarcombo1"] axis',style:{stroke:"#cccccc",fill:"none"},specificity:[0,1,2]},{selector:'chart[cls="radarcombo1"] axis label',style:{font:"11px Arial","text-anchor":"middle"},specificity:[0,1,3]},{selector:'chart[cls="radarcombo1"] series',style:{opacity:.4},specificity:[0,1,2]},{selector:'chart[cls="line1"] axis[position="left"] grid odd',style:{opacity:1,fill:"#dddddd",stroke:"#bbbbbb","stroke-width":.5},specificity:[0,2,4]},{selector:'chart[cls="line1"] marker',style:{size:4,radius:4,"stroke-width":0},specificity:[0,1,2]},{selector:'chart[cls="line1"] series:nth-child(1) marker',style:{type:"image",height:"46",width:"46",src:'"../resources/shared/img/iphone.png"'},specificity:[0,2,3]},{selector:'chart[cls="line1"] series:nth-child(2) marker',style:{type:"image",height:"46",width:"46",src:'"../resources/shared/img/android.png"'},specificity:[0,2,3]},{selector:'chart[cls="line1"] series:nth-child(3) marker',style:{type:"image",height:"46",width:"46",src:'"../resources/shared/img/ipad.png"'},specificity:[0,2,3]},{selector:'chart[cls="pie1"]',style:{padding:10},specificity:[0,1,1]},{selector:'chart[cls="pie1"] series label',style:{display:"rotate",contrast:!0,font:"18px Helvetica, Arial, sans-serif"},specificity:[0,1,3]},{selector:'chart[cls="radar1"]',style:{padding:20},specificity:[0,1,1]},{selector:'chart[cls="radar1"] axis',style:{stroke:"#cccccc",fill:"none"},specificity:[0,1,2]},{selector:'chart[cls="radar1"] axis label',style:{font:"11px Arial","text-anchor":"middle"},specificity:[0,1,3]},{selector:'chart[cls="radar1"] series',style:{opacity:.4},specificity:[0,1,2]},{selector:'chart[cls="scatter1"]',style:{padding:40},specificity:[0,1,1]},{selector:'chart[cls="scatter1"] axis[position="left"] grid odd',style:{opacity:1,fill:"#dddddd",stroke:"#bbbbbb","stroke-width":.5},specificity:[0,2,4]},{selector:'chart[cls="scatter1"] marker',style:{size:8,radius:8},specificity:[0,1,2]},{selector:'chart[cls="stock1"] axis label',style:{font:"12px Arial"},specificity:[0,1,3]},{selector:'chart[cls="stock1"] axis[position="left"] grid',style:{stroke:"#cccccc"},specificity:[0,2,3]}],Ext.chart.theme.Energy=[{selector:"chart",style:{colors:["rgba(17, 95, 166, 0.85)","rgba(148, 174, 10, 0.85)","rgba(166, 17, 32, 0.85)","rgba(255, 136, 9, 0.85)","rgba(255, 209, 62, 0.85)","rgba(166, 17, 135, 0.85)","rgba(36, 173, 154, 0.85)","rgba(124, 116, 116, 0.85)","rgba(166, 97, 17, 0.85)"]},specificity:[0,0,1]},{selector:"chart series",style:{"stroke-width":2},specificity:[0,0,2]},{selector:"chart series grid odd",style:{stroke:"#333333"},specificity:[0,0,4]},{selector:"chart series grid even",style:{stroke:"#222222"},specificity:[0,0,4]},{selector:"chart axis",style:{stroke:"#555555",fill:"#555555"},specificity:[0,0,2]},{selector:"chart axis label",style:{fill:"#666666"},specificity:[0,0,3]},{selector:"chart axis title",style:{fill:"#cccccc"},specificity:[0,0,3]},{selector:'chart axis[position="radial"]',style:{fill:"none"},specificity:[0,1,2]},{selector:'chart axis[position="radial"] label',style:{fill:"#ffffff","text-anchor":"center",translate:{x:0,y:-10}},specificity:[0,1,3]},{selector:'chart[cls="radar"]',style:{padding:40},specificity:[0,1,1]}],Ext.chart.theme.WorldData=[{selector:"chart",style:{colors:["#49080e","#49080e","#d7a400"],background:"#dbddd8"},specificity:[0,0,1]},{selector:"chart series:highlight",style:{radius:5,"stroke-width":3,stroke:"#ffffff"},specificity:[0,1,2]},{selector:"chart axis",style:{stroke:"#c2c4be",fill:"#c2c4be"},specificity:[0,0,2]},{selector:"chart axis label",style:{fill:"#909488"},specificity:[0,0,3]},{selector:"chart axis title",style:{fill:"#43453e"},specificity:[0,0,3]}],Ext.ns("Ext.chart.theme"),Ext.chart.theme.Style=Ext.extend(Object,{constructor:function(n){this.style={},this.themeStyle={},Ext.apply(this.style,n)},ownerCt:null,getItemId:function(){return this.el&&this.el.id||this.id||null},initCls:function(){return(this.cls||"").split(" ")},isXType:function(n){return n===""},getRefItems:function(){return[]}}),Ext.ns("Ext.chart.theme"),Ext.chart.theme.LabelStyle=Ext.extend(Ext.chart.theme.Style,{constructor:function(n){Ext.chart.theme.LabelStyle.superclass.constructor.call(this,n)},isXType:function(n){return n==="label"}}),Ext.ns("Ext.chart.theme"),Ext.chart.theme.HighlightStyle=Ext.extend(Ext.chart.theme.Style,{constructor:function(n){Ext.chart.theme.HighlightStyle.superclass.constructor.call(this,n),this.style=!1},isXType:function(n){return n==="highlight"},getRefItems:function(){return[]}}),Ext.ns("Ext.chart.theme"),Ext.chart.theme.MarkerStyle=Ext.extend(Ext.chart.theme.Style,{constructor:function(n){Ext.chart.theme.MarkerStyle.superclass.constructor.call(this,n)},isXType:function(n){return n==="marker"}}),Ext.ns("Ext.chart.theme"),Ext.chart.theme.TitleStyle=Ext.extend(Ext.chart.theme.Style,{constructor:function(n){Ext.chart.theme.TitleStyle.superclass.constructor.call(this,n)},isXType:function(n){return n==="title"}}),Ext.ns("Ext.chart.theme"),Ext.chart.theme.CalloutStyle=Ext.extend(Ext.chart.theme.Style,{constructor:function(n){Ext.chart.theme.CalloutStyle.superclass.constructor.call(this,n),this.style=!1,this.oddStyle=new Ext.chart.theme.OddStyle,this.evenStyle=new Ext.chart.theme.EvenStyle},isXType:function(n){return n==="callout"},getRefItems:function(){return[]}}),Ext.ns("Ext.chart.theme"),Ext.chart.theme.GridStyle=Ext.extend(Ext.chart.theme.Style,{constructor:function(n){Ext.chart.theme.GridStyle.superclass.constructor.call(this,n),this.style=!1,this.oddStyle=new Ext.chart.theme.OddStyle,this.evenStyle=new Ext.chart.theme.EvenStyle},isXType:function(n){return n==="grid"},getRefItems:function(){return[this.oddStyle,this.evenStyle]}}),Ext.ns("Ext.chart.theme"),Ext.chart.theme.EvenStyle=Ext.extend(Ext.chart.theme.Style,{constructor:function(n){Ext.chart.theme.EvenStyle.superclass.constructor.call(this,n),this.style=!1},isXType:function(n){return n==="even"}}),Ext.ns("Ext.chart.theme"),Ext.chart.theme.OddStyle=Ext.extend(Ext.chart.theme.Style,{constructor:function(n){Ext.chart.theme.OddStyle.superclass.constructor.call(this,n),this.style=!1},isXType:function(n){return n==="odd"}}),Ext.chart.Chart=Ext.extend(Ext.draw.Component,{version:"1.0.0",viewBox:!1,animate:!1,legend:!1,background:!1,surfaceZIndexes:{main:0,axis:10,series:20,overlay:30,events:40},constructor:function(n){var t=this,i;n=Ext.apply({},n),t.gradients&&Ext.apply(n,{gradients:t.gradients}),t.background&&Ext.apply(n,{background:t.background}),n.animate&&(i={easing:"ease",duration:500},n.animate=Ext.isObject(n.animate)?Ext.applyIf(n.animate,i):i),Ext.chart.Chart.superclass.constructor.apply(this,[n])},initComponent:function(){var n=this,r,i,t;delete n.legend,Ext.chart.Chart.superclass.initComponent.call(this),n.addEvents("beforerefresh","refresh","redraw"),n.addEvents.apply(n,Ext.chart.series.ItemEvents.itemEventNames),Ext.applyIf(n,{zoom:{width:1,height:1,x:0,y:0}}),n.maxGutter=[0,0],r=n.axes;n.on("activate",n.onActivate,n);n.axes=new Ext.util.MixedCollection(!1,function(n){return n.position}),r&&n.axes.addAll(r),i=n.series,n.series=new Ext.util.MixedCollection(!1,function(n){return n.seriesId||(n.seriesId=Ext.id(null,"ext-chart-series-"))}),i&&n.series.addAll(i),t=n.interactions,n.interactions=new Ext.util.MixedCollection(!1,function(n){return n.type}),t&&Ext.each(t,n.addInteraction,n)},onActivate:function(){this.dirtyStore&&this.redraw()},getEventsSurface:function(){return this.getSurface("events")},initEvents:function(){Ext.chart.Chart.superclass.initEvents.call(this),this.interactions.each(function(n){n.initEvents()})},getSurface:function(n){var t=this,u=t.surfaces||(t.surfaces={main:t.surface}),i=u[n],f=t.surfaceZIndexes,r;return i||(i=u[n]=t.createSurface({background:null,initEvents:n=="events"}),r=i.el,r.setStyle("position","absolute"),r.setStyle("zIndex",10),n in f&&r.setStyle("zIndex",f[n])),i},getToolbar:function(){var t=this,n=t.toolbar;return n&&n.isChartToolbar||(n=t.toolbar=new Ext.chart.Toolbar(Ext.applyIf({chart:t},n))),n},doComponentLayout:function(n,t){var i=this,r;Ext.isNumber(n)&&Ext.isNumber(t)&&(i.dirtyStore||n!==i.curWidth||t!==i.curHeight)&&(i.curWidth=n,i.curHeight=t,i.getSurface("main").setSize(n,t),r=i.getEventsSurface(),r.setSize(n,t),r.el.setTopLeft(0,0),i.store&&i.redraw(!0)),Ext.chart.Chart.superclass.doComponentLayout.apply(this,arguments)},redraw:function(n){var t=this,c,u,e,f,h,i,r,o,s;if(t.dirtyStore=!1,t.chartBBox={x:0,y:0,height:t.curHeight,width:t.curWidth},t.colorArrayStyle=t.colorArrayStyle||[],t.series.each(t.initializeSeries,t),t.axes.each(t.initializeAxis,t),!t.themeInitialized){if(t.applyStyles(),t.style&&t.style.colors)for(i=t.style.colors,o=t.colorArrayStyle,f=0,h=i.length;f<h;++f)if(r=i[f],Ext.isObject(r)){for(c in t.surfaces)t.surfaces[c].addGradient(r);o.push("url(#"+r.id+")")}else o.push(r);else t.series.each(function(n,i){t.colorArrayStyle[i]=n.style.fill||n.style.stroke||"#000"});t.series.each(function(n){n.colorArrayStyle=t.colorArrayStyle}),t.style&&t.style.background&&(i=t.style.background,Ext.isObject(i)?(t.background={gradient:i},t.surfaces.main.addGradient(i)):t.background=i.indexOf("url")>-1?{image:i}:{fill:i},t.surfaces.main.initBackground(t.background))}t.initializeLegend(),u=t.legend,u&&u.orient(),e=t.toolbar,e&&e.isChartToolbar&&e.orient(),t.axes.each(function(n){n.processView()}),t.axes.each(function(n){n.drawAxis(!0)}),t.alignAxes(),u&&u.updatePosition(),t.getMaxGutter(),t.resizing=!!n,t.axes.each(t.drawAxis,t),t.series.each(t.drawCharts,t),Ext.iterate(t.surfaces,function(n,t){t.renderFrame()}),t.resizing=!1,Ext.is.iPad&&Ext.repaint(),t.interactionsInitialized||(t.interactionsInitialized=!0,t.animate?(t.interactions.each(function(n){n.initializeDefaults({type:"beforerender"})}),s=function(){t.interactions.each(function(n){n.initializeDefaults({type:"afterrender"})}),t.series.get(0).removeListener("afterrender",s)},t.series.get(0).addListener("afterrender",s)):t.interactions.each(function(n){n.initializeDefaults()})),t.fireEvent("redraw",t)},afterRender:function(){var t,n=this;Ext.chart.Chart.superclass.afterRender.call(this),n.categoryNames&&n.setCategoryNames(n.categoryNames),n.tipRenderer&&(t=n.getFunctionRef(n.tipRenderer),n.setTipRenderer(t.fn,t.scope)),n.bindStore(n.store),n.refresh()},getEventXY:function(n){n=n.changedTouches&&n.changedTouches[0]||n.event||n.browserEvent||n;var r=this,i=r.el.getXY(),t=r.chartBBox,f=n.pageX-i[0]-t.x,u=n.pageY-i[1]-t.y;return[f,u]},getItemForPoint:function(n,t){for(var e=this,r=0,f=e.series.items,o=f.length,u,i;r<o;r++)if(u=f[r],i=u.getItemForPoint(n,t),i)return i;return!1},getItemsForPoint:function(n,t){var r=this,i=[];return r.series.each(function(r){var u=r.getItemForPoint(n,t);u&&i.push(u)}),i},capitalize:function(n){return n.charAt(0).toUpperCase()+n.substr(1)},delayRefresh:function(){var n=this;n.refreshTask||(n.refreshTask=new Ext.util.DelayedTask(n.refresh,n)),n.refreshTask.delay(10)},refresh:function(){var n=this,t;n.dirtyStore=!0,n.rendered&&n.curWidth!=t&&n.curHeight!=t&&n.fireEvent("beforerefresh",n)!==!1&&(n.redraw(),n.fireEvent("refresh",n))},bindStore:function(n){var t=this,i=t.store,r=!t.storeIsBound;if(n=Ext.StoreMgr.lookup(n),!r&&i&&n!==i&&(i.autoDestroy?i.destroy():i.un({scope:t,datachanged:t.refresh,add:t.delayRefresh,remove:t.delayRefresh,update:t.delayRefresh})),n&&(r||n!==i))n.on({scope:t,datachanged:t.refresh,add:t.delayRefresh,remove:t.delayRefresh,update:t.delayRefresh});t.store=n,t.storeIsBound=!0,n&&!r&&t.refresh()},addInteraction:function(n){Ext.isString(n)&&(n={type:n}),n.chart||(n.chart=this,n=Ext.chart.interactions.Manager.create(n)),this.interactions.add(n)},initializeLegend:function(){var n=this,t=n.legend,i=n.initialConfig.legend;if(!t&&i){t=n.legend=new Ext.chart.Legend(Ext.apply({chart:n},i));t.on("combine",n.redraw,n);t.on("split",n.redraw,n)}},initializeAxis:function(n){var f=this,u=f.chartBBox,r=u.width,i=u.height,e=u.x,o=u.y,t={chart:f,ownerCt:f,x:0,y:0};switch(n.position){case"top":Ext.apply(t,{length:r,width:i,startX:e,startY:o});break;case"bottom":Ext.apply(t,{length:r,width:i,startX:e,startY:i});break;case"left":Ext.apply(t,{length:i,width:r,startX:e,startY:i});break;case"right":Ext.apply(t,{length:i,width:r,startX:r,startY:i})}n.chart?Ext.apply(n,t):(Ext.apply(t,n),n=f.axes.replace(new Ext.chart.axis[this.capitalize(n.type)](t)))},alignAxes:function(){function e(n){var t=u.findIndex("position",n);return t<0?null:u.getAt(t)}var r=this,u=r.axes,f=r.legend,o=["top","right","bottom","left"],n,i=r.insetPadding||+r.style.padding||10,t;Ext.isObject(i)?(r.insetPadding=Ext.apply({},i),t={top:i.top||0,right:i.right||0,bottom:i.bottom||0,left:i.left||0}):(r.insetPadding=i,t={top:i,right:i,bottom:i,left:i}),r.insets=t,Ext.each(o,function(n){var u=n==="left"||n==="right",i=e(n),r;f!==!1&&f.getPosition()===n&&(t[n]+=f.getInsetSize()),i&&i.bbox&&(r=i.bbox,t[n]+=u?r.width:r.height)}),n={x:t.left,y:t.top,width:r.curWidth-t.left-t.right,height:r.curHeight-t.top-t.bottom},r.chartBBox=n,u.each(function(t){var r=t.position,i=t.bbox||{width:0,height:0},u=r==="left"||r==="right";t.x=r==="left"?n.x-i.width:n.x,t.y=r==="top"?n.y-i.height:n.y,t.width=u?i.width+n.width:i.height+n.height,t.length=u?n.height:n.width,t.startX=u?r==="left"?i.width:n.width:0,t.startY=r==="top"?i.height:n.height})},initializeSeries:function(n,t){var i=this,r={chart:i,ownerCt:i,seriesId:n.seriesId,index:t};n instanceof Ext.chart.series.Series?Ext.apply(n,r):(Ext.applyIf(r,n),n=i.series.replace(new Ext.chart.series[i.capitalize(n.type)](r))),n.initialize&&n.initialize()},getMaxGutter:function(){var t=this,n=[0,0];t.series.each(function(t){var i=t.getGutters&&t.getGutters()||[0,0];n[0]=Math.max(n[0],i[0]),n[1]=Math.max(n[1],i[1])}),t.maxGutter=n},drawAxis:function(n){n.drawAxis()},drawCharts:function(n){n.drawSeries(),this.animate||n.fireEvent("afterrender")},reset:function(n){var t=this,i=t.legend;t.axes.each(function(n){n.reset&&n.reset()}),t.series.each(function(n){n.reset&&n.reset()}),i&&i.reset&&i.reset(),n||t.redraw()},destroy:function(){Ext.iterate(this.surfaces,function(n,t){t.destroy()}),this.bindStore(null),Ext.chart.Chart.superclass.destroy.apply(this,arguments)},ownerCt:null,getItemId:function(){return this.el&&this.el.id||this.id||null},initCls:function(){return(this.cls||"").split(" ")},isXType:function(n){return n==="chart"},getRefItems:function(n){var i=this,t=[];return i.series.each(function(i){t.push(i),n&&(i.markerStyle&&t.push(i.markerStyle),i.labelStyle&&t.push(i.labelStyle),i.calloutStyle&&t.push(i.calloutStyle))}),i.axes.each(function(i){t.push(i),n&&i.labelStyle&&t.push(i.labelStyle),n&&i.gridStyle&&(t.push(i.gridStyle),t.push(i.gridStyle.oddStyle),t.push(i.gridStyle.evenStyle))}),i.interactions.each(function(i){t.push(i),n&&(t=t.concat(i.getRefItems(n)))}),t}}),Ext.applyIf(Ext.chart.Chart.prototype,Ext.chart.theme.Theme.prototype),Ext.reg("chart",Ext.chart.Chart),Ext.chart.Panel=Ext.extend(Ext.Panel,{defaultType:"chart",layout:"fit",constructor:function(n){n.dockedItems={xtype:"panel",height:"2.6em",dock:"top",layout:{type:"card",align:"stretch"},activeItem:0,dockedItems:{dock:"right",xtype:"toolbar",ui:"light",items:n.dockedItems},items:[{dock:"top",xtype:"toolbar",ui:"light",title:n.title||""},{dock:"top",xtype:"toolbar",ui:"light",title:""}]},Ext.chart.Panel.superclass.constructor.call(this,n)},onRender:function(){var n=this,t;Ext.chart.Panel.superclass.onRender.apply(n,arguments),t=n.headerPanel=n.dockedItems.get(0),n.descriptionPanel=t.items.get(1)}}),Ext.chart.Callout=Ext.extend(Object,{constructor:function(n){var t=this;n.callouts&&(n.callouts.styles=Ext.apply({},n.callouts.styles||{}),t.callouts=Ext.apply(t.callouts||{},n.callouts),t.calloutsArray=[]),t.calloutStyle=new Ext.chart.theme.CalloutStyle},renderCallouts:function(){if(this.callouts){for(var e=this,c=e.items,w=e.chart.animate,h=e.callouts,b=h.styles,v=e.calloutsArray,l=e.chart.store,a=l.getCount(),p=c.length/a,y=[],o,i,u=0,t=0;u<a;u++)for(o=0;o<p;o++){var f=c[t],n=v[t],s=l.getAt(u),r;if(r=(f&&f.useCallout||h.filter(s,f,u,r,o,t))&&Math.abs(f.endAngle-f.startAngle)>.8,!r&&!n){t++;continue}n||(v[t]=n=e.onCreateCallout(s,f,u,r,o,t));for(i in n)n[i]&&n[i].setAttributes&&n[i].setAttributes(b,!0);if(!r)for(i in n)n[i]&&(n[i].setAttributes?n[i].setAttributes({hidden:!0},!0):n[i].setVisible&&n[i].setVisible(!1));if(h.renderer(n,s),r)e.onPlaceCallout(n,s,f,u,r,w,o,t,y);y.push(n),t++}this.hideCallouts(t)}},onCreateCallout:function(n,t,i){var o=this,f=o.callouts,s=f.styles,c=s.width||100,h=s.height||100,e=o.getSurface(),u={label:!1,box:!1,lines:!1};return u.lines=e.add(Ext.apply({},{type:"path",path:"M0,0",stroke:o.getLegendColor(i)||"#555"},f.lines||{})),u.box=e.add(Ext.apply({type:"rect",width:c,height:h},f.box||{})),u.label=e.add(Ext.apply({type:"text",text:"some text"},f.label||{})),u},hideCallouts:function(n){for(var u=this.calloutsArray,r=u.length,t,i;r-->n;){t=u[r];for(i in t)t[i]&&t[i].hide(!0)}},ownerCt:null,getItemId:function(){return this.el&&this.el.id||this.id||null},initCls:function(){return(this.cls||"").split(" ")},isXType:function(n){return n==="callout"},getRefItems:function(){return[]}}),Ext.chart.Highlight=Ext.extend(Object,{highlight:!0,highlightDuration:150,highlightCfg:null,constructor:function(n){n.highlight!==!1&&(this.highlightCfg=n.highlight!==!0?Ext.apply({},n.highlight):{},this.addEvents("highlight","unhighlight"),this.highlightStyle=new Ext.chart.theme.HighlightStyle)},highlightItem:function(n){if(n){var f=this,i=n.sprite,e=f.highlightCfg,s=f.chart.surface,h=f.chart.animate,t,o,u,r;if(f.highlight!==!1&&i&&!i._highlighted){if(Ext.applyIf(f.highlightCfg,f.highlightStyle.style||{}),i._anim&&(i._anim.paused=!0),i._highlighted=!0,!i._defaults){i._defaults=Ext.apply({},i.attr),o={},u={};for(t in e)if(t in i._defaults||(i._defaults[t]=s.attributeDefaults[s.attributeMap[t]]),o[t]=i._defaults[t],u[t]=e[t],Ext.isObject(e[t])){o[t]={},u[t]={},Ext.apply(i._defaults[t],i.attr[t]),Ext.apply(o[t],i._defaults[t]);for(r in i._defaults[t])u[t][r]=r in e[t]?e[t][r]:o[t][r];for(r in e[t])r in u[t]||(u[t][r]=e[t][r])}i._from=o,i._to=u,i._endStyle=u}h?i._anim=new Ext.fx.Anim({target:i,from:i._from,to:i._to,duration:f.highlightDuration||150}):i.setAttributes(i._to,!0),f.fireEvent("highlight",n)}}},unHighlightItem:function(){if(this.highlight!==!1&&this.items){for(var r=this,f=r.items,s=f.length,o=r.highlightCfg,e=r.chart.animate,u=0,t,i,n;u<s;u++)if(f[u]&&(n=f[u].sprite,n&&n._highlighted)){n._anim&&(n._anim.paused=!0),t={};for(i in o)Ext.isObject(n._defaults[i])?(t[i]={},Ext.apply(t[i],n._defaults[i])):t[i]=n._defaults[i];e?(n._endStyle=t,n._anim=new Ext.fx.Anim({target:n,to:t,duration:r.highlightDuration||150})):n.setAttributes(t,!0),delete n._highlighted}r.fireEvent("unhighlight")}},cleanHighlights:function(){if(this.highlight!==!1){for(var r=this.group,i=this.markerGroup,n=0,t=r.getCount();n<t;n++)delete r.getAt(n)._defaults;if(i)for(t=i.getCount();n<t;n++)delete i.getAt(n)._defaults}}}),Ext.chart.Label=Ext.extend(Object,{colorStringRe:/url\s*\(\s*#([^\/)]+)\s*\)/,constructor:function(n){var t=this;t.label=Ext.applyIf(n.label||{},{renderer:function(n){return n}}),t.label.display!=="none"&&(t.labelsGroup=t.chart.surface.getGroup(t.seriesId+"-labels"))},renderLabels:function(){var t=this,g=t.chart,k=g.gradients,v=t.items,et=g.animate,b=Ext.apply(t.labelStyle.style||{},t.label||{}),y=b.display,ot=[].concat(b.field),ft=t.labelsGroup,ut=t.getRecordCount(),tt=(v||0)&&v.length,rt=tt/ut,it=(k||0)&&k.length,o=Ext.draw.Color,s,l=0,e,f,c,d,nt,a,u,n,r,w,h,p,i;y!="none"&&(t.eachRecord(function(g,tt){for(e=0,f=0;f<rt;f++){for(u=v[l],n=ft.getAt(l);this.__excludes&&this.__excludes[e];)e++;if(!u&&n&&n.hide(!0),u&&ot[f]){n||(n=t.onCreateLabel(g,u,tt,y,f,e)),n.show(!0);t.onPlaceLabel(n,g,u,tt,y,et,f,e);if(b.contrast&&u.sprite){if(r=u.sprite,i=r._endStyle?r._endStyle.fill:r._to?r._to.fill:r.attr.fill,i=i||r.attr.fill,w=o.fromString(i),i&&!w){for(i=i.match(t.colorStringRe)[1],c=0;c<it;c++)if(s=k[c],s.id==i){a=0,d=0;for(nt in s.stops)a++,d+=o.fromString(s.stops[nt].color).getGrayscale();h=d/a/255;break}}else h=w.getGrayscale()/255;n.isOutside&&(h=1),p=o.fromString(n.attr.color||n.attr.fill).getHSL(),p[2]=h>.5?.2:.8,n.setAttributes({fill:String(o.fromHSL.apply({},p))},!0)}}l++,e++}}),t.hideLabels(l))},hideLabels:function(n){var i=this.labelsGroup,t;if(i)for(t=i.getCount();t-->n;)i.getAt(t).hide(!0)}}),Ext.chart.Transformable=Ext.extend(Object,{zoomX:1,zoomY:1,panX:0,panY:0,constructor:function(){this.addEvents("transform")},setTransform:function(n,t,i,r){var u=this;u.panX=n,u.panY=t,u.zoomX=i,u.zoomY=r,u.clearFastTransform(),Ext.each(u.getTransformableSurfaces(),function(u){u.setSurfaceTransform(n,t,i,r)}),u.fireEvent("transform",u,!1)},transformBy:function(n,t,i,r){var u=this;u.setTransform(u.panX+n,u.panY+t,u.zoomX*i,u.zoomY*r)},setTransformFast:function(n,t,i,r){var u=this;n-=u.panX,t-=u.panY,i/=u.zoomX,r/=u.zoomY,u.clearFastTransform(),u.transformByFast(n,t,i,r)},transformByFast:function(n,t,i,r){this.setFastTransformMatrix(this.getFastTransformMatrix().translate(n,t).scale(i,r,0,0))},getTransformMatrix:function(){var n=this;return n.getFastTransformMatrix().clone().translate(n.panX,n.panY).scale(n.zoomX,n.zoomY,0,0)},getFastTransformMatrix:function(){return this.fastTransformMatrix||new Ext.draw.Matrix},setTransformMatrixFast:function(n){var t=n.split();this.setTransformFast(t.translateX,t.translateY,t.scaleX,t.scaleY)},setFastTransformMatrix:function(n){var t=this;t.fastTransformMatrix=n,Ext.each(t.getTransformableSurfaces(),function(t){t.setSurfaceFastTransform(n)}),n&&t.fireEvent("transform",t,!0)},clearFastTransform:function(){this.setFastTransformMatrix(null)},hasFastTransform:function(){var n=this.fastTransformMatrix;return n&&!n.isIdentity()},clearTransform:function(){this.setTransform(0,0,1,1)},syncToFastTransform:function(){var t=this,i=t.getFastTransformMatrix(),n=i.split();delete t.fastTransformMatrix,t.transformBy(n.translateX,n.translateY,n.scaleX,n.scaleY)},getTransformableSurfaces:function(){return[]}}),Ext.ns("Ext.chart.axis"),Ext.chart.axis.Abstract=Ext.extend(Ext.util.Observable,{constructor:function(n){n=n||{};var t=this,i=n.position||"left";i=i.charAt(0).toUpperCase()+i.substring(1),Ext.apply(t,n),t.fields=[].concat(t.fields),t.labels=[],t.getId(),t.labelGroup=t.getSurface().getGroup(t.axisId+"-labels"),t.titleStyle=new Ext.chart.theme.TitleStyle,Ext.apply(t.titleStyle.style,n.labelTitle||{}),t.labelStyle=new Ext.chart.theme.LabelStyle,Ext.apply(t.labelStyle.style,n.label||{}),t.gridStyle=new Ext.chart.theme.GridStyle,Ext.apply(t.gridStyle.style,n.grid||{}),n.grid&&n.grid.odd&&(t.gridStyle.oddStyle.style=Ext.apply(t.gridStyle.oddStyle.style||{},n.grid.odd)),n.grid&&n.grid.even&&(t.gridStyle.evenStyle.style=Ext.apply(t.gridStyle.evenStyle.style||{},n.grid.even)),Ext.chart.Transformable.prototype.constructor.call(t)},grid:!1,steps:10,x:0,y:0,minValue:0,maxValue:0,getId:function(){return this.axisId||(this.axisId=Ext.id(null,"ext-axis-"))},processView:Ext.emptyFn,drawAxis:Ext.emptyFn,getSurface:function(){var t=this,n=t.surface,i=t.chart;return n||(n=t.surface=i.getSurface(t.position+"Axis"),n.el.setStyle("zIndex",i.surfaceZIndexes.axis)),n},hideLabels:function(){this.labelGroup.hide()},updateSurfaceBox:function(){var i=this,t=i.getSurface(),n=i.chart;t.el.setTopLeft(0,0),t.setSize(n.curWidth,n.curHeight)},getTransformableSurfaces:function(){return[this.getSurface()]},reset:function(){this.clearTransform()},renderFrame:function(){this.getSurface().renderFrame()},ownerCt:null,getItemId:function(){return this.el&&this.el.id||this.id||null},initCls:function(){return(this.cls||"").split(" ")},isXType:function(n){return n==="axis"},getRefItems:function(){var t=this,i=[];return t.labelStyle&&i.push(t.labelStyle),t.titleStyle&&i.push(t.titleStyle),t.gridStyle&&(i.push(t.gridStyle),i.push(t.gridStyle.oddStyle),i.push(t.gridStyle.evenStyle)),i}}),Ext.applyIf(Ext.chart.axis.Abstract.prototype,Ext.chart.Transformable.prototype),Ext.chart.axis.Axis=Ext.extend(Ext.chart.axis.Abstract,{dashSize:3,position:"bottom",length:0,width:0,majorTickSteps:!1,applyData:Ext.emptyFn,calcLabels:!1,overflowBuffer:1.25,renderFrame:function(){var i=this,t=i.getSurface(),n=i.getLabelSurface();t.renderFrame(),n!==t&&n.renderFrame()},isSide:function(){var n=this.position;return n==="left"||n==="right"},updateSurfaceBox:function(){var n=this,r=n.isSide(),f=n.length,t=f+1,i=n.width,u=n.getSurface();u.el.setTopLeft(n.y,n.x),u.setSize(r?i:t,r?t:i)},calcEnds:function(){var n=this,s=n.getBoundSeries(),r=isNaN(n.minimum)?Infinity:n.minimum,t=isNaN(n.maximum)?-Infinity:n.maximum,o=n["zoom"+(n.isSide()?"Y":"X")],u=n.chart.endsLocked,e,f,i;return u?(r=n.prevFrom,t=n.prevTo):(s.each(function(i){var u=n.isBoundToField(i.xField)?i.getMinMaxXValues():i.getMinMaxYValues();u[0]<r&&(r=u[0]),u[1]>t&&(t=u[1])}),isFinite(t)||(t=n.prevMax||0),isFinite(r)||(r=n.prevMin||0),r!=t&&t!=Math.floor(t)&&(t=Math.ceil(t))),n.type=="Numeric"&&r===t&&(r=t!==0?t/2:-1),i=Ext.draw.Draw.snapEnds(r,t,(n.majorTickSteps!==!1?n.majorTickSteps+1:n.steps)*o,u),e=i.from,f=i.to,u||(isNaN(n.maximum)||(i.to=n.maximum),isNaN(n.minimum)||(i.from=n.minimum)),i.step=(i.to-i.from)/(f-e)*i.step,n.adjustMaximumByMajorUnit&&(i.to+=i.step),n.adjustMinimumByMajorUnit&&(i.from-=i.step),n.prevTo=i.to,n.prevFrom=i.from,n.prevMin=r==t?0:r,n.prevMax=t,i},drawAxis:function(n){var t=this,ft=t.zoomX,st=t.zoomY,h=t.startX*ft,l=t.startY*st,b=t.chart.maxGutter[0]*ft,d=t.chart.maxGutter[1]*st,o=t.dashSize,wt=t.minorTickSteps||0,pt=t.minorTickSteps||0,it=t.isSide(),k=t.length,ut=k*t.overflowBuffer,c=k*(it?st:ft),at=t.position,nt=[],g=t.calcLabels,a=t.applyData(),y=a.step,yt=a.from,vt=a.to,rt=Math,i=rt.floor,ht=rt.max,ct=rt.min,lt=rt.round,v,f,u,et,ot,s,w,p,e,tt,r;if(t.updateSurfaceBox(),t.hidden||t.chart.store.getCount()<1||a.steps<=0){t.getSurface().items.hide(!0),t.displaySprite&&t.displaySprite.hide(!0);return}if(t.from=a.from,t.to=a.to,it?(f=i(h)+.5,s=["M",f,l,"l",0,-c],v=c-d*2):(u=i(l)+.5,s=["M",h,u,"l",c,0],v=c-b*2),e=v*y/(vt-yt),tt=t.skipTicks=i(ht(0,it?c+t.panY-k-ut:-t.panX-ut)/e),w=ht(wt+1,0),p=ht(pt+1,0),g&&(t.labels=[a.from+tt*y]),it){for(u=ot=l-d-e*tt,f=h-(at=="left")*o*2;u>=ot-ct(v,k+ut*2);){if(s.push("M",f,i(u)+.5,"l",o*2+1,0),u!=ot)for(r=1;r<p;r++)s.push("M",f+o,i(u+e*r/p)+.5,"l",o+1,0);if(nt.push([i(h),i(u)]),u-=e,g&&t.labels.push(+(t.labels[t.labels.length-1]+y).toFixed(10)),e===0)break}if(lt(u+e-(l-d-v))){for(s.push("M",f,i(l-c+d)+.5,"l",o*2+1,0),r=1;r<p;r++)s.push("M",f+o,i(l-c+d+e*r/p)+.5,"l",o+1,0);nt.push([i(h),i(u)]),g&&t.labels.push(+(t.labels[t.labels.length-1]+y).toFixed(10))}}else{for(f=et=h+b+e*tt,u=l-(at=="top")*o*2;f<=et+ct(v,k+ut*2);){if(s.push("M",i(f)+.5,u,"l",0,o*2+1),f!=et)for(r=1;r<w;r++)s.push("M",i(f-e*r/w)+.5,u,"l",0,o+1);if(nt.push([i(f),i(l)]),f+=e,g&&t.labels.push(+(t.labels[t.labels.length-1]+y).toFixed(10)),e===0)break}if(lt(f-e-(h+b+v))){for(s.push("M",i(h+c-b)+.5,u,"l",0,o*2+1),r=1;r<w;r++)s.push("M",i(h+c-b-e*r/w)+.5,u,"l",0,o+1);nt.push([i(f),i(l)]),g&&t.labels.push(+(t.labels[t.labels.length-1]+y).toFixed(10))}}t.axis||(t.axis=t.getSurface().add(Ext.apply({type:"path",path:s},t.style))),t.axis.setAttributes({path:s,hidden:!1},!0),t.inflections=nt,n||(t.grid||t.gridStyle.style||t.gridStyle.oddStyle.style||t.gridStyle.evenStyle.style)&&t.drawGrid(),t.axisBBox=t.axis.getBBox(),t.drawLabel()},drawGrid:function(){var i=this,w=i.getSurface(),k=i.gridStyle.style||i.grid,h=i.gridStyle.oddStyle.style||k.odd,s=i.gridStyle.evenStyle.style||k.even,v=i.inflections,y=v.length-(h||s?0:1),o=i.position,p=i.chart.maxGutter,f=i.width-2,t,r,e=1,b=i.isSide(),u=[],a,n,d,c=[],l=[];for((p[1]!==0&&b||p[0]!==0&&!b)&&(e=0,y++);e<y;e++)t=v[e],r=v[e-1],h||s?(u=e%2?c:l,a=(e%2?h:s)||{},n=(a.lineWidth||a["stroke-width"]||0)/2,d=2*n,o=="left"?u.push("M",r[0]+1+n,r[1]+.5-n,"L",r[0]+1+f-n,r[1]+.5-n,"L",t[0]+1+f-n,t[1]+.5+n,"L",t[0]+1+n,t[1]+.5+n,"Z"):o=="right"?u.push("M",r[0]-n,r[1]+.5-n,"L",r[0]-f+n,r[1]+.5-n,"L",t[0]-f+n,t[1]+.5+n,"L",t[0]-n,t[1]+.5+n,"Z"):o=="top"?u.push("M",r[0]+.5+n,r[1]+1+n,"L",r[0]+.5+n,r[1]+1+f-n,"L",t[0]+.5-n,t[1]+1+f-n,"L",t[0]+.5-n,t[1]+1+n,"Z"):u.push("M",r[0]+.5+n,r[1]-n,"L",r[0]+.5+n,r[1]-f+n,"L",t[0]+.5-n,t[1]-f+n,"L",t[0]+.5-n,t[1]-n,"Z")):u=o=="left"?u.concat(["M",t[0]+.5,t[1]+.5,"l",f,0]):o=="right"?u.concat(["M",t[0]-.5,t[1]+.5,"l",-f,0]):o=="top"?u.concat(["M",t[0]+.5,t[1]+.5,"l",0,f]):u.concat(["M",t[0]+.5,t[1]-.5,"l",0,-f]);h||s?(c.length&&(!i.gridOdd&&c.length&&(i.gridOdd=w.add({type:"path",path:c})),i.gridOdd.setAttributes(Ext.apply({path:c,hidden:!1},h||{}),!0)),l.length&&(i.gridEven||(i.gridEven=w.add({type:"path",path:l})),i.gridEven.setAttributes(Ext.apply({path:l,hidden:!1},s||{}),!0))):u.length?(i.gridLines||(i.gridLines=i.getSurface().add({type:"path",path:u,"stroke-width":i.lineWidth||1,stroke:i.gridColor||"#ccc"})),i.gridLines.setAttributes({hidden:!1,path:u},!0)):i.gridLines&&i.gridLines.hide(!0)},isPannable:function(){var i=this,t=i.length,f=i.isSide(),u=Math,e=u.ceil,r=u.floor,n=i.getTransformMatrix();return n&&((f?e(n.y(0,0))<0:r(n.x(t,0))>t)||(f?r(n.y(0,t))>t:e(n.x(0,0))<0))},getOrCreateLabel:function(n,t){var f=this,e=f.labelGroup,i=e.getAt(n),u,r=f.labelStyle.style;return i?t!=i.attr.text&&(i.setAttributes(Ext.apply({text:t},r),!0),i._bbox=i.getBBox()):(u=f.getLabelSurface(),i=u.add(Ext.apply({group:e,type:"text",x:0,y:0,text:t},r)),u.renderItem(i),i._bbox=i.getBBox()),r.rotation?(i.setAttributes({rotation:{degrees:0}},!0),i._ubbox=i.getBBox(),i.setAttributes(r,!0)):i._ubbox=i._bbox,i},rect2pointArray:function(n){var l=this.getSurface(),i=l.getBBox(n,!0),e=[i.x,i.y],c=e.slice(),r=[i.x+i.width,i.y],s=r.slice(),u=[i.x+i.width,i.y+i.height],h=u.slice(),f=[i.x,i.y+i.height],o=f.slice(),t=n.matrix;return e[0]=t.x.apply(t,c),e[1]=t.y.apply(t,c),r[0]=t.x.apply(t,s),r[1]=t.y.apply(t,s),u[0]=t.x.apply(t,h),u[1]=t.y.apply(t,h),f[0]=t.x.apply(t,o),f[1]=t.y.apply(t,o),[e,r,u,f]},intersect:function(n,t){var r=this.rect2pointArray(n),i=this.rect2pointArray(t);return!!Ext.draw.Draw.intersect(r,i).length},drawHorizontalLabels:function(){var n=this,r=n.labelStyle.style,b=r.renderer||function(n){return n},e=Math,it=e.floor,nt=e.max,g=n.chart.axes,tt=n.position,a=n.inflections,v=a.length,s=n.labels,l=n.skipTicks,c=0,k,u,f,d,i,p,y,o,h,t,w;for(!n.calcLabels&&l&&(s=s.slice(l),v-=l),y=v-1,f=a[0],w=n.getOrCreateLabel(0,b(s[0])),k=e.abs(e.sin(r.rotate&&r.rotate.degrees*e.PI/180||0))>>0,t=0;t<v;t++){if(f=a[t],p=b(s[t]),i=n.getOrCreateLabel(t,p),u=i._bbox,c=nt(c,u.height+n.dashSize+(r.padding||0)),o=it(f[0]-(k?u.height:u.width)/2),n.chart.maxGutter[0]==0&&(t==0&&g.findIndex("position","left")==-1?o=f[0]:t==y&&g.findIndex("position","right")==-1&&(o=f[0]-u.width)),h=tt=="top"?f[1]-n.dashSize*2-r.padding-u.height/2:f[1]+n.dashSize*2+r.padding+u.height/2,n.isPannable()||(o+=n.x,h+=n.y),i.setAttributes({hidden:!1,x:o,y:h},!0),r.rotate&&i.setAttributes(r,!0),t!=0&&(n.intersect(i,d)||n.intersect(i,w))){i.hide(!0);continue}d=i}return c},drawVerticalLabels:function(){var n=this,u=n.labelStyle.style,g=u.renderer||function(n){return n},v=n.inflections,d=n.position,p=v.length,s=n.labels,c=n.skipTicks,l=0,a=Math,nt=a.max,k=a.floor,it=a.ceil,w=n.chart.axes,tt=n.chart.maxGutter[1],i,o,y,r,b,h,e,f,t;for(!n.calcLabels&&c&&(s=s.slice(c),p-=c),h=p,t=0;t<h;t++){if(o=v[t],b=g(s[t]),r=n.getOrCreateLabel(t,b),i=r._bbox,l=nt(l,i.width+n.dashSize+(u.padding||0)),f=o[1],tt<i.height/2&&(t==h-1&&w.findIndex("position","top")==-1?f+=it(i.height/2):t==0&&w.findIndex("position","bottom")==-1&&(f-=k(i.height/2))),e=d=="left"?o[0]-i.width-n.dashSize-(u.padding||0)-2:o[0]+n.dashSize+(u.padding||0)+2,n.isPannable()||(e+=n.x,f+=n.y+n.panY),r.setAttributes(Ext.apply({hidden:!1,x:e,y:f},u),!0),t!=0&&n.intersect(r,y)){r.hide(!0);continue}y=r}return l},drawLabel:function(){if(!this.inflections)return 0;var n=this,i=n.labelGroup,o=n.inflections,e=n.getLabelSurface(),u=0,r=0,f,t;for(n.lastLabelSurface!==e&&(i.each(function(n){n.destroy()}),i.clear(),n.lastLabelSurface=e),n.isSide()?u=n.drawVerticalLabels():r=n.drawHorizontalLabels(),f=i.getCount(),t=o.length;t<f;t++)i.getAt(t).hide(!0);n.bbox={},Ext.apply(n.bbox,n.axisBBox),n.bbox.height=r,n.bbox.width=u,Ext.isString(n.title)&&n.drawTitle(u,r)},getLabelSurface:function(){var n=this;return n.isPannable()?n.getSurface():n.chart.getSurface("main")},setTitle:function(n){this.title=n,this.drawLabel()},drawTitle:function(n,t){var i=this,s=i.position,l=i.chart.getSurface("main"),u=i.displaySprite,h=i.title,a=i.isSide(),e=i.startX+i.x,o=i.startY+i.y,c,r,f;u?u.setAttributes({text:h},!0):(c={type:"text",x:0,y:0,text:h},u=i.displaySprite=l.add(Ext.apply(c,i.titleStyle.style,i.labelTitle)),l.renderItem(u)),r=u.getBBox(),f=i.dashSize+(i.titleStyle.style.padding||0),a?(o-=i.length/2-r.height/2,s=="left"?e-=n+f+r.width/2:e+=n+f+r.width-r.width/2,i.bbox.width+=r.width+10):(e+=i.length/2-r.width*.5,s=="top"?o-=t+f+r.height*.3:o+=t+f+r.height*.8,i.bbox.height+=r.height+10),u.setAttributes({hidden:!1,translate:{x:e,y:o}},!0)},getBoundSeries:function(){var n=this,t=n.chart.series;return t.filterBy(function(t){for(var r=[].concat(t.xField,t.yField),i=r.length;i--;)if(n.isBoundToField(r[i]))return!0;return!1})},isBoundToField:function(n){for(var i=this.fields,t=i.length;t--;)if(i[t]===n)return!0;return!1}}),Ext.chart.axis.Category=Ext.extend(Ext.chart.axis.Axis,{categoryNames:null,calculateCategoryCount:!1,setLabels:function(){var i=this.chart.store,t=this.fields,r=t.length,n;this.labels=[],i.each(function(i){for(n=0;n<r;n++)this.labels.push(i.get(t[n]))},this)},applyData:function(){Ext.chart.axis.Category.superclass.applyData.call(this),this.setLabels();var n=this.chart.store.getCount();return{from:0,to:n-1,power:1,step:1,steps:n-1}}}),Ext.chart.axis.Gauge=Ext.extend(Ext.chart.axis.Abstract,{position:"gauge",drawAxis:function(){var r=this,y=r.chart,p=r.getSurface(),e=y.chartBBox,s=e.x+e.width/2,a=e.y+e.height,o=r.margin||10,f=Math.min(e.width,2*e.height)/2+o,l=[],v,u=r.steps,i,t=Math.PI,h=Math.cos,c=Math.sin;if(r.sprites&&!y.resizing){r.drawLabel();return}if(r.updateSurfaceBox(),r.margin>=0)if(r.sprites)for(l=r.sprites,i=0;i<=u;i++)l[i].setAttributes({path:["M",s+(f-o)*h(i/u*t-t),a+(f-o)*c(i/u*t-t),"L",s+f*h(i/u*t-t),a+f*c(i/u*t-t),"Z"]},!0);else for(i=0;i<=u;i++)v=p.add({type:"path",path:["M",s+(f-o)*h(i/u*t-t),a+(f-o)*c(i/u*t-t),"L",s+f*h(i/u*t-t),a+f*c(i/u*t-t),"Z"],stroke:"#ccc"}),v.setAttributes(Ext.apply(r.style||{},{hidden:!1}),!0),l.push(v);r.sprites=l,r.drawLabel(),r.title&&r.drawTitle()},drawTitle:function(){var n=this,f=n.chart,u=n.getSurface(),i=f.chartBBox,t=n.titleSprite,r;t||(n.titleSprite=t=u.add({type:"text",zIndex:2})),t.setAttributes(Ext.apply({text:n.title},Ext.apply(n.titleStyle.style||{},n.label||{})),!0),r=t.getBBox(),t.setAttributes({x:i.x+i.width/2-r.width/2,y:i.y+i.height-r.height/2-4},!0)},setTitle:function(n){this.title=n,this.drawTitle()},drawLabel:function(){var i=this,b=i.chart,k=i.getSurface(),u=b.chartBBox,c=u.x+u.width/2,p=u.y+u.height,d=i.margin||10,o=Math.min(u.width,2*u.height)/2+2*d,y=Math.round,f=[],s,v=i.maximum||0,t=i.steps,n=0,e,r=Math.PI,h=Math.cos,l=Math.sin,w=i.labelStyle.style,a=w.renderer||function(n){return n};if(i.labelArray)for(f=i.labelArray,n=0;n<=t;n++)e=n===0||n===t?7:0,f[n].setAttributes({text:a(y(n/t*v)),x:c+o*h(n/t*r-r),y:p+o*l(n/t*r-r)-e},!0);else for(n=0;n<=t;n++)e=n===0||n===t?7:0,s=k.add({type:"text",text:a(y(n/t*v)),x:c+o*h(n/t*r-r),y:p+o*l(n/t*r-r)-e,"text-anchor":"middle","stroke-width":.2,zIndex:10,stroke:"#333"}),s.setAttributes(Ext.apply(i.labelStyle.style||{},{hidden:!1}),!0),f.push(s);i.labelArray=f}}),Ext.chart.axis.Numeric=Ext.extend(Ext.chart.axis.Axis,{type:"numeric",calcLabels:!0,constructor:function(n){var t=this,i,r;(Ext.chart.axis.Numeric.superclass.constructor.apply(t,[n]),i=t.label||{},t.roundToDecimal!==!1)&&(i.renderer?(r=i.renderer,i.renderer=function(n){return t.roundToDecimal(r(n),t.decimals)}):i.renderer=function(n){return t.roundToDecimal(n,t.decimals)})},roundToDecimal:function(n,t){var i=Math.pow(10,t||0);return(n*i>>0)/i},minimum:NaN,maximum:NaN,decimals:2,scale:"linear",position:"left",adjustMaximumByMajorUnit:!1,adjustMinimumByMajorUnit:!1,applyData:function(){return Ext.chart.axis.Numeric.superclass.applyData.apply(this,arguments),this.calcEnds()}}),Ext.chart.axis.Radial=Ext.extend(Ext.chart.axis.Abstract,{position:"radial",rotation:0,drawAxis:function(){var t=this,w=t.chart,v=t.getSurface(),h=w.chartBBox,a=w.store,y=a.getCount(),r=h.x+h.width/2,u=h.y+h.height/2,l=Math,b=l.max,o=l.min(h.width,h.height)/2,e=[],f,c=t.steps,k=-t.rotation,d=Ext.draw.Draw.rad,g=l.cos,p=l.sin,i,s;if(!y){v.items.hide(!0);return}if(t.updateSurfaceBox(),t.centerX=r,t.centerY=u,t.sprites){for(e=t.sprites,i=0;i<c;i++)e[i].setAttributes({hidden:!1,x:r,y:u,radius:b(o*(i+1)/c,0)},!0);a.each(function(n,f){s=d(k+f/y*360),e[i+f].setAttributes(Ext.apply(t.style||{},{hidden:!1,path:["M",r,u,"L",r+o*g(s),u+o*p(s),"Z"]}),!0)})}else{for(i=1;i<=c;i++)f=v.add(Ext.apply(t.style||{},{type:"circle",x:r,y:u,"stroke-width":1.5,radius:b(o*i/c,0),stroke:"#ccc"})),f.setAttributes({hidden:!1},!0),e.push(f);a.each(function(n,i){s=d(k+i/y*360),f=v.add(Ext.apply(t.style||{},{type:"path",path:["M",r,u,"L",r+o*g(s),u+o*p(s),"Z"]})),f.setAttributes({hidden:!1},!0),e.push(f)})}t.sprites=e,t.drawLabel()},drawLabel:function(){var n=this,k=n.chart,nt=n.getSurface(),st=k.chartBBox,ct=k.store,a=n.centerX,p=n.centerY,s=Math.min(st.width,st.height)/2,lt=Math.max,et=Math.round,f=[],o,b=[],ft,h=[],ut,ht=!n.maximum,v=n.maximum||0,i=n.steps,t=0,r,u,w,ot=-n.rotation,rt=Ext.draw.Draw.rad,d=Math.cos,tt=Math.sin,c=n.label.display,at=c!=="none",g=n.labelGroup,y=n.labelStyle.style,it=Ext.apply({},y),l=10,e;if(at){if(k.series.each(function(n){b.push(n.yField),ut=n.xField}),ct.each(function(n,t){if(ht)for(t=0,ft=b.length;t<ft;t++)v=lt(+n.get(b[t]),v);h.push(n.get(ut))}),n.labelArray){if(f=n.labelArray,c!="categories")for(t=0;t<i;t++)f[t].setAttributes({text:et((t+1)/i*v),x:a,y:p-s*(t+1)/i,hidden:!1},!0);if(c!="scale")for(r=0,i=h.length;r<i;r++)e=rt(ot+r/i*360),u=d(e)*(s+l),w=tt(e)*(s+l),f[t+r]&&f[t+r].setAttributes({type:"text",text:h[r],x:a+u,y:p+w,"text-anchor":u*u<=.001?"middle":u<0?"end":"start",hidden:!1},!0)}else{if(c!="categories")for(t=1;t<=i;t++)o=nt.add({group:g,type:"text",text:et(t/i*v),x:a,y:p-s*t/i}),y&&o.setAttributes(y,!0),f.push(o);if(c!="scale")for(delete it.translate,r=0,i=h.length;r<i;r++)e=rt(ot+r/i*360),u=d(e)*(s+l),w=tt(e)*(s+l),o=nt.add({group:g,type:"text",text:h[r],x:a+u,y:p+w,"text-anchor":u*u<=.001?"middle":u<0?"end":"start"}),y&&o.setAttributes(it,!0),f.push(o)}n.labelArray=f}},getSurface:function(){return this.chart.getSurface("main")},reset:function(){this.rotation=0,Ext.chart.axis.Radial.superclass.reset.call(this)}}),Ext.chart.axis.Time=Ext.extend(Ext.chart.axis.Category,{calculateByLabelSize:!0,dateFormat:!1,groupBy:"year,month,day",aggregateOp:"sum",fromDate:!1,toDate:!1,step:[Date.DAY,1],constrain:!1,dateMethods:{year:function(n){return n.getFullYear()},month:function(n){return n.getMonth()+1},day:function(n){return n.getDate()},hour:function(n){return n.getHours()},minute:function(n){return n.getMinutes()},second:function(n){return n.getSeconds()},millisecond:function(n){return n.getMilliseconds()}},aggregateFn:function(){var n=function(){var t=/^\[object\s(.*)\]$/,n=Object.prototype.toString;return function(i){return n.call(i).match(t)[1]}}();return{sum:function(t){var i=0,u=t.length,r=0;if(!t.length||n(t[0])!="Number")return t[0];for(;i<u;i++)r+=t[i];return r},max:function(t){return!t.length||n(t[0])!="Number"?t[0]:Math.max.apply(Math,t)},min:function(t){return!t.length||n(t[0])!="Number"?t[0]:Math.min.apply(Math,t)},avg:function(t){var i=0,u=t.length,r=0;if(!t.length||n(t[0])!="Number")return t[0];for(;i<u;i++)r+=t[i];return r/u}}}(),constrainDates:function(){var n=Ext.Date.clone(this.fromDate),s=Ext.Date.clone(this.toDate),e=this.step,f=this.fields,h=f.length?f[0]:f,u=this.chart.store,i=new Ext.data.Store({model:u.model}),r,t,o=function(){var n=0,t=u.getCount();return function(i){for(var f,r;n<t;n++){if(f=u.getAt(n),r=f.get(h),+r>+i)return!1;if(+r==+i)return f}return!1}}();if(!this.constrain){this.chart.filteredStore=this.chart.store;return}while(+n<=+s)r=o(n),t={},r?i.add(r.data):(i.model.prototype.fields.each(function(n){t[n.name]=!1}),t.date=n,i.add(t)),n=Ext.Date.add(n,e[0],e[1]);this.chart.filteredStore=i},aggregate:function(){var f={},w=[],r,o,p=this.aggregateOp,e=this.fields,n,h=this.groupBy.split(","),t,u=[],s=0,i,c=[],l=[],b=h.length,a=this.dateMethods,y=this.aggregateFn,v=this.chart.filteredStore||this.chart.store;e=e.length?e[0]:e,v.each(function(l){for(u.length||(l.fields.each(function(n){u.push(n.name)}),s=u.length),o=l.get(e),n=0;n<b;n++)n==0?r=String(a[h[n]](o)):r+="||"+a[h[n]](o);for((r in f)?i=f[r]:(i=f[r]={},w.push(r),c.push(o)),n=0;n<s;n++)t=u[n],i[t]||(i[t]=[]),l.get(t)!==undefined&&i[t].push(l.get(t))});for(r in f){for(i=f[r],n=0;n<s;n++)t=u[n],i[t]=y[p](i[t]);l.push(i)}this.chart.substore=new Ext.data.JsonStore({fields:u,data:l}),this.dates=c},setLabels:function(){var n=this,f=n.chart.substore,r=n.fields,i=n.dateFormat,u=n.dates,t;n.labels=t=[],f.each(function(n,f){i?t.push(u[f].format(i)):t.push(n.get(r))},n)},processView:function(){this.constrain?(this.constrainDates(),this.aggregate(),this.chart.substore=this.chart.filteredStore):this.aggregate()},applyData:function(){this.setLabels();var n=this.chart.substore.getCount();return{from:0,to:Math.max(n-1,0),steps:n-1,step:1}}}),Ext.ns("Ext.chart.series"),function(){function n(n){return function(t){var i=this,r=i.itemForEvent(t);r&&i.fireEvent(n,i,r,t)}}Ext.chart.series.ItemEvents=Ext.extend(Object,{constructor:function(){var n=this,t=Ext.chart.series.ItemEvents.itemEventNames;n.addEvents.apply(n,t),n.enableBubble(t)},initEvents:function(){var n=this;n.chart.on({scope:n,mousemove:n.onMouseMove,mouseup:n.onMouseUp,mousedown:n.onMouseDown,click:n.onClick,doubleclick:n.onDoubleClick,tap:n.onTap,tapstart:n.onTapStart,tapend:n.onTapEnd,tapcancel:n.onTapCancel,taphold:n.onTapHold,doubletap:n.onDoubleTap,singletap:n.onSingleTap,touchstart:n.onTouchStart,touchmove:n.onTouchMove,touchend:n.onTouchEnd,dragstart:n.onDragStart,drag:n.onDrag,dragend:n.onDragEnd,pinchstart:n.onPinchStart,pinch:n.onPinch,pinchend:n.onPinchEnd,swipe:n.onSwipe})},itemForEvent:function(n){var i=this,t=i.chart.getEventXY(n);return i.getItemForPoint(t[0],t[1])},getBubbleTarget:function(){return this.chart},onMouseMove:function(n){var t=this,r=t.lastOverItem,i=t.itemForEvent(n);r&&i!==r&&(t.fireEvent("itemmouseout",t,r,n),delete t.lastOverItem),i&&t.fireEvent("itemmousemove",t,i,n),i&&i!==r&&(t.fireEvent("itemmouseover",t,i,n),t.lastOverItem=i)},onMouseUp:n("itemmouseup"),onMouseDown:n("itemmousedown"),onClick:n("itemclick"),onDoubleClick:n("itemdoubleclick"),onTap:n("itemtap"),onTapStart:n("itemtapstart"),onTapEnd:n("itemtapend"),onTapCancel:n("itemtapcancel"),onTapHold:n("itemtaphold"),onDoubleTap:n("itemdoubletap"),onSingleTap:n("itemsingletap"),onTouchStart:n("itemtouchstart"),onTouchMove:n("itemtouchmove"),onTouchEnd:n("itemtouchend"),onDragStart:n("itemdragstart"),onDrag:n("itemdrag"),onDragEnd:n("itemdragend"),onPinchStart:n("itempinchstart"),onPinch:n("itempinch"),onPinchEnd:n("itempinchend"),onSwipe:n("itemswipe")}),Ext.chart.series.ItemEvents.itemEventNames=["itemmousemove","itemmouseup","itemmousedown","itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemtap","itemtapstart","itemtapend","itemtapcancel","itemtaphold","itemdoubletap","itemsingletap","itemtouchstart","itemtouchmove","itemtouchend","itemdragstart","itemdrag","itemdragend","itempinchstart","itempinch","itempinchend","itemswipe"]}(),Ext.ns("Ext.chart.series"),Ext.chart.series.Series=Ext.extend(Ext.util.Observable,{type:null,title:null,showInLegend:!0,renderer:function(n,t,i){return i},shadowAttributes:null,triggerAfterDraw:!1,constructor:function(n){var t=this;t.style={},t.themeStyle={},n&&Ext.apply(t,n),t.shadowGroups=[],t.markerStyle=new Ext.chart.theme.MarkerStyle,t.labelStyle=new Ext.chart.theme.LabelStyle,Ext.chart.Label.prototype.constructor.call(t,n),Ext.chart.Highlight.prototype.constructor.call(t,n),Ext.chart.Callout.prototype.constructor.call(t,n),Ext.chart.Transformable.prototype.constructor.call(t),Ext.chart.series.ItemEvents.prototype.constructor.call(t),t.addEvents({beforedraw:!0,draw:!0,afterdraw:!0,titlechange:!0}),t.initEvents(),Ext.chart.series.Series.superclass.constructor.call(t,n)},getSurface:function(){var n=this,t=n.surface;return t||(t=n.surface=n.chart.getSurface("series"+n.index),t.el.setStyle("zIndex",n.chart.surfaceZIndexes.series)),t},getOverlaySurface:function(){var n=this,t=n.overlaySurface;return t||(t=n.overlaySurface=n.chart.getSurface("seriesOverlay"+n.index),t.el.setStyle("zIndex",n.chart.surfaceZIndexes.overlay)),t},setBBox:function(n){var i=this,t=i.chart,e=t.chartBBox,o=n?0:t.maxGutter[0],f=n?0:t.maxGutter[1],r,u;r={x:0,y:0,width:e.width,height:e.height},i.clipBox=r,u={x:(r.x+o-t.zoom.x*t.zoom.width)*i.zoomX,y:(r.y+f-t.zoom.y*t.zoom.height)*i.zoomY,width:(r.width-o*2)*t.zoom.width*i.zoomX,height:(r.height-f*2)*t.zoom.height*i.zoomY},i.bbox=u},onAnimate:function(n,t){var i=this;return n.stopAnimation(),i.triggerAfterDraw?n.animate(Ext.applyIf(t,i.chart.animate)):(i.triggerAfterDraw=!0,n.animate(Ext.apply(Ext.applyIf(t,i.chart.animate),{listeners:{afteranimate:function(){i.triggerAfterDraw=!1,i.fireEvent("afterrender")}}})))},getGutters:function(){return[0,0]},getItemForPoint:function(n,t){var u=this,r=u.items,e=u.bbox,i,f;if(r&&r.length&&!u.seriesIsHidden&&Ext.draw.Draw.withinBox(n,t,e))for(n-=u.panX,t-=u.panY,i=0,f=r.length;i<f;i++)if(r[i]&&u.isItemInPoint(n,t,r[i],i))return r[i];return null},isItemInPoint:function(){return!1},hideAll:function(){var n=this,f=n.items,o,e,i,r,s,t,u;for(n.seriesIsHidden=!0,n._prevShowMarkers=n.showMarkers,n.showMarkers=!1,n.hideLabels(0),i=0,e=f.length;i<e;i++)if(o=f[i],t=o.sprite,t&&(t.setAttributes({hidden:!0},!0),t.shadows))for(u=t.shadows,r=0,s=u.length;r<s;++r)u[r].hide(!0)},showAll:function(){var n=this,t=n.chart.animate;n.chart.animate=!1,n.seriesIsHidden=!1,n.showMarkers=n._prevShowMarkers,n.drawSeries(),n.chart.animate=t},drawSeries:function(){this.updateSurfaceBox()},getLegendLabels:function(){var n=this.title;return n?[n]:[]},getColorFromStyle:function(n){return Ext.isObject(n)?n.stops[0].color:n.indexOf("url")==-1?n:me.getSurface("main")._gradients[n.match(/url\(#([^\)]+)\)/)[1]].stops[0].color},getLegendColor:function(){var t=this,i,r;return t.style?(i=t.style.fill,r=t.style.stroke,i&&i!="none")?t.getColorFromStyle(i):t.getColorFromStyle(r):"#000"},visibleInLegend:function(n){return!this.seriesIsHidden&&!this.isExcluded(n)},setTitle:function(n,t){var i=this,r=i.title;Ext.isString(n)&&(t=n,n=0),Ext.isArray(r)?r[n]=t:i.title=t,i.fireEvent("titlechange",t,n)},updateSurfaceBox:function(){var t=this,i=t.getSurface(),r=t.getOverlaySurface(),n=t.chart.chartBBox;i.el.setTopLeft(n.y,n.x),i.setSize(n.width,n.height),r.el.setTopLeft(n.y,n.x),r.setSize(n.width,n.height)},getTransformableSurfaces:function(){return[this.getSurface(),this.getOverlaySurface()]},eachRecord:function(n,t){var i=this.chart;(i.substore||i.store).each(n,t)},getRecordCount:function(){var t=this.chart,n=t.substore||t.store;return n?n.getCount():0},isExcluded:function(n){var t=this.__excludes;return!!(t&&t[n])},combine:function(n,t){var r=this,u=r.combinations||(r.combinations=[]),i=r.__excludes;u.push([n,t]),i&&n<i.length&&i.splice(n,1)},isCombinedItem:function(n){return this.getCombinationIndexesForItem(n).length>0},getCombinationIndexesForItem:function(n){var s=this,e=s.combinations,t=[],r,o,f,u,i;if(e)for(r=0,o=e.length;r<o;r++)f=e[r],u=f[0],i=f[1],t[i]||(t[i]=[]),t[u]&&(t[i]=t[i].concat(t[u])),t[i].push(r),t.splice(u,1);return t[n]||[]},split:function(n){var f=this,t=f.combinations,h=f.__excludes,i,r,o,u,s,e;if(t){if(u=f.getCombinationIndexesForItem(n),u)for(i=u.length;i--;){for(e=t[u[i]][0],r=u[i]+1,o=t.length;r<o;r++)e<=t[r][0]&&t[r][0]++,e<=t[r][1]&&t[r][1]++;t.splice(u[i],1),h&&h.splice(e,0,!1)}for(f.clearCombinations(),i=0,o=t.length;i<o;i++)s=t[i],f.combine(s[0],s[1])}},clearCombinations:function(){delete this.combinations},reset:function(){var n=this;n.unHighlightItem(),n.cleanHighlights(),n.clearTransform()},ownerCt:null,getItemId:function(){return this.el&&this.el.id||this.id||null},initCls:function(){return(this.cls||"").split(" ")},isXType:function(n){return n==="series"},getRefItems:function(){var t=this,i=[];return t.markerStyle&&i.push(t.markerStyle),t.labelStyle&&i.push(t.labelStyle),t.calloutStyle&&i.push(t.calloutStyle),t.highlightStyle&&i.push(t.highlightStyle),i}}),Ext.applyIf(Ext.chart.series.Series.prototype,Ext.chart.Label.prototype),Ext.applyIf(Ext.chart.series.Series.prototype,Ext.chart.Highlight.prototype),Ext.applyIf(Ext.chart.series.Series.prototype,Ext.chart.Callout.prototype),Ext.applyIf(Ext.chart.series.Series.prototype,Ext.chart.Transformable.prototype),Ext.applyIf(Ext.chart.series.Series.prototype,Ext.chart.series.ItemEvents.prototype),Ext.chart.series.Cartesian=Ext.extend(Ext.chart.series.Series,{xField:null,yField:null,axis:"left",getLegendLabels:function(){var t=this,n=[],i=t.combinations;return Ext.each([].concat(t.yField),function(i,r){var u=t.title;n.push((Ext.isArray(u)?u[r]:u)||i)}),i&&Ext.each(i,function(t){var r=n[t[0]],i=n[t[1]];n[t[1]]=r+" & "+i,n.splice(t[0],1)}),n},eachYValue:function(n,t,i){Ext.each(this.getYValueAccessors(),function(r,u){t.call(i,r(n),u)})},getYValueCount:function(){return this.getYValueAccessors().length},combine:function(n,t){var r=this,i=r.getYValueAccessors(),f=i[n],u=i[t];i[t]=function(n){return f(n)+u(n)},i.splice(n,1),Ext.chart.series.Cartesian.superclass.combine.call(r,n,t)},clearCombinations:function(){delete this.yValueAccessors,Ext.chart.series.Cartesian.superclass.clearCombinations.call(this)},getYValueAccessors:function(){var t=this,n=t.yValueAccessors;return n||(n=t.yValueAccessors=[],Ext.each([].concat(t.yField),function(t){n.push(function(n){return n.get(t)})})),n},getMinMaxXValues:function(){var i=this,n,t,r=i.xField;return i.getRecordCount()>0?(n=Infinity,t=-n,i.eachRecord(function(i){var u=i.get(r);u>t&&(t=u),u<n&&(n=u)})):n=t=0,[n,t]},getMinMaxYValues:function(){function e(n,t){i.isExcluded(t)||(n<0?r+=n:u+=n)}function f(r,u){i.isExcluded(u)||(r>t&&(t=r),r<n&&(n=r))}var i=this,o=i.stacked,n,t,u,r;return i.getRecordCount()>0?(n=Infinity,t=-n,i.eachRecord(function(s){o?(u=0,r=0,i.eachYValue(s,e),u>t&&(t=u),r<n&&(n=r)):i.eachYValue(s,f)})):n=t=0,[n,t]}}),Ext.chart.series.Bar=Ext.extend(Ext.chart.series.Cartesian,{type:"bar",column:!1,axis:"bottom",gutter:38.2,groupGutter:38.2,xPadding:0,yPadding:10,constructor:function(n){Ext.chart.series.Bar.superclass.constructor.apply(this,arguments);var t=this,r=t.getSurface(),u=t.chart.shadow,i,f;if(Ext.apply(t,n,{shadowAttributes:r.getShadowAttributesArray(),shadowOptions:Ext.apply(r.getShadowOptions(),u===!0?{}:u||{})}),t.group=r.getGroup(t.seriesId+"-bars"),u)for(i=0,f=t.shadowAttributes.length;i<f;i++)t.shadowGroups.push(r.getGroup(t.seriesId+"-shadows"+i));t.initialStacked=t.stacked},getBarGirth:function(){var n=this,i=n.column,r=n.getRecordCount(),t=n.gutter/100;return(n.chart.chartBBox[i?"width":"height"]-n[i?"xPadding":"yPadding"]*2)/(r*(t+1)-t)},getGutters:function(){var n=this,i=n.column,t=Math.ceil((i?n.xPadding:n.yPadding)+n.getBarGirth()/2);return i?[t,0]:[0,t]},getBounds:function(){function ot(i,r){n.isExcluded(r)||(t[i>0?1:0][d]+=p(i))}var n=this,tt=n.chart,w=n.getYValueCount(),b=w,it=n.groupGutter/100,o=n.column,g=n.zoomX,nt=n.zoomY,a=n.xPadding*g,l=n.yPadding*nt,rt=n.stacked,st=n.disjointStacked,ft=n.getBarGirth()*(o?g:nt),c=Math,et=c.max,p=c.abs,ut,u,i,r,h,f,s,e,t,v,k,y,d;for(n.setBBox(!0),u=n.bbox,v=0,t=w;v<t;v++)n.isExcluded(v)&&b--;return n.axis&&(h=tt.axes.get(n.axis),h&&(f=h.calcEnds(),i=f.from,r=f.to)),n.yField&&!Ext.isNumber(i)&&(h=new Ext.chart.axis.Axis({chart:tt,fields:[].concat(n.yField)}),f=h.calcEnds(),i=f.from,r=f.to),Ext.isNumber(i)||(i=0),Ext.isNumber(r)||(r=0),s=(o?u.height-l*2:u.width-a*2)/(r-i),ut=ft/((rt&&!st?1:b)*(it+1)-it),e=o?u.y+u.height-l:u.x+a,rt?(t=[[],[]],n.eachRecord(function(i,r){t[0][r]=t[0][r]||0,t[1][r]=t[1][r]||0,d=r,n.eachYValue(i,ot)}),t[+(r>0)].push(p(r)),t[+(i>0)].push(p(i)),y=et.apply(c,t[0]),k=et.apply(c,t[1]),s=(o?u.height-l*2:u.width-a*2)/(k+y),e=e+y*s*(o?-1:1)):i/r<0&&(e=e-i*s*(o?-1:1)),{bbox:u,barsLen:w,visibleBarsLen:b,barWidth:ft,groupBarWidth:ut,scale:s,zero:e,xPadding:a,yPadding:l,signed:i/r<0,minY:i,maxY:r}},getPaths:function(){function lt(ht,lt){if(!t.isExcluded(lt)){if(i=Math.round(ht*r.scale),n={fill:k[(it>1?lt:0)%wt]},f?Ext.apply(n,{height:i,width:ct(r.groupBarWidth,0),x:st.x+bt+o*r.barWidth*(1+ut)+e*r.groupBarWidth*(1+ot)*(!u||ft?1:0),y:s-i}):(rt=dt-1-o,Ext.apply(n,{height:ct(r.groupBarWidth,0),width:i+(s==r.zero),x:s+(s!=r.zero),y:st.y+pt+rt*r.barWidth*(1+ut)+e*r.groupBarWidth*(1+ot)*(!u||ft?1:0)+1})),i<0&&(f?(n.y=l,n.height=h(i)):(n.x=l+i,n.width=h(i))),u&&(i<0?l+=i*(f?-1:1):s+=i*(f?-1:1),p+=h(i),i<0&&(y+=h(i))),n.x=Math.floor(n.x)+1,a=Math.floor(n.y),!Ext.isIE9&&n.y>a&&a--,n.y=a,n.width=Math.floor(n.width),n.height=Math.floor(n.height),c.push({series:t,storeItem:b,value:[b.get(t.xField),ht],attr:n,point:f?[n.x+n.width/2,ht>=0?n.y:n.y+n.height]:[ht>=0?n.x+n.width:n.x,n.y+n.height/2]}),vt&&g.resizing){if(w=f?{x:n.x,y:r.zero,width:n.width,height:0}:{x:r.zero,y:n.y,width:0,height:n.height},yt&&(u&&!tt||!u))for(tt=!0,v=0;v<kt;v++)nt=et[v].getAt(u?o:o*it+lt),nt&&nt.setAttributes(w,!0);d=at.getAt(o*it+lt),d&&d.setAttributes(w,!0)}e++}}var t=this,g=t.chart,r=t.bounds=t.getBounds(),c=t.items=[],ut=t.gutter/100,ot=t.groupGutter/100,vt=g.animate,f=t.column,at=t.group,yt=g.shadow,et=t.shadowGroups,kt=et.length,st=r.bbox,bt=t.xPadding*t.zoomX,pt=t.yPadding*t.zoomY,u=t.stacked,ft=t.disjointStacked,it=r.barsLen,k=t.colorArrayStyle,wt=k&&k.length||0,ht=Math,ct=ht.max,h=ht.abs,dt=t.getRecordCount(),i,p,y,s,l,tt,n,w,e,v,nt,d,rt,a,o,b;t.eachRecord(function(n,i){s=l=r.zero,p=0,y=0,tt=!1,e=0,b=n,o=i,t.eachYValue(n,lt),u&&c.length&&(c[i*e].totalDim=p,c[i*e].totalNegDim=y)},t)},renderShadows:function(n,t,i,r){var f=this,p=f.chart,tt=f.getSurface(),it=p.animate,c=f.stacked,y=f.shadowGroups,g=f.shadowAttributes,d=y.length,s=p.substore||p.store,nt=f.column,b=f.items,k=[],w=r.zero,h,u,e,a,v,l,o;if(c&&n%r.visibleBarsLen==0||!c)for(l=n/r.visibleBarsLen,h=0;h<d;h++){if(u=Ext.apply({},g[h]),e=y[h].getAt(c?l:n),u.x=t.x,u.y=t.y,u.width=t.width,u.height=t.height,e||(e=tt.add(Ext.apply({type:"rect",group:y[h]},Ext.apply({},i,u)))),c&&(a=b[n].totalDim,v=b[n].totalNegDim,nt?(u.y=w-v,u.height=a):(u.x=w-v,u.width=a)),it)if(c)o=f.renderer(e,s.getAt(l),Ext.apply(u,{hidden:!0}),n,s),e.setAttributes(o,!0);else{o=f.renderer(e,s.getAt(l),u,n,s);f.onAnimate(e,{to:o})}else o=f.renderer(e,s.getAt(l),Ext.apply(u,{hidden:!1}),n,s),e.setAttributes(o,!0);k.push(e)}return k},drawSeries:function(){var n=this,l=n.chart,a=l.substore||l.store,tt=n.getSurface(),ft=l.animate,rt=n.stacked,it=n.column,v=l.shadow,b=n.shadowGroups,nt=b.length,y=n.group,ut=n.style,d,f,t,i,w,r,o,u,p,e,k,s,h,g,c;if(n.fireEvent("beforedraw",n)!==!1){if(Ext.chart.series.Bar.superclass.drawSeries.call(this),!n.getRecordCount()){tt.items.hide(!0);return}for(delete ut.fill,n.unHighlightItem(),n.cleanHighlights(),n.getPaths(),e=n.bounds,d=n.items,w=it?{y:e.zero,height:0}:{x:e.zero,width:0},f=d.length,t=0;t<f;t++){if(c=d[t],r=y.getAt(t),s=c.attr,v&&(c.shadows=n.renderShadows(t,s,w,e)),r||(h=Ext.apply({},w,s),h=Ext.apply(h,k||{}),v&&Ext.apply(h,n.shadowOptions),r=tt.add(Ext.apply({},{type:"rect",group:y},h))),ft){if(o=n.renderer(r,a.getAt(t),s,t,a),r._to=o,g=n.onAnimate(r,{to:Ext.apply(o,k)}),v&&rt&&t%e.barsLen==0)for(i=t/e.barsLen,u=0;u<nt;u++)g.on("afteranimate",function(){this.show(!0)},b[u].getAt(i))}else o=n.renderer(r,a.getAt(t),Ext.apply(s,{hidden:!1}),t,a),r.setAttributes(Ext.apply(o,k),!0);c.sprite=r}for(f=y.getCount(),i=t;i<f;i++)y.getAt(i).hide(!0);if(v)for(u=0;u<nt;u++)for(p=b[u],f=p.getCount(),i=t;i<f;i++)p.getAt(i).hide(!0);n.renderLabels(),n.fireEvent("draw",n)}},onCreateLabel:function(){var u=this,o=u.getSurface(),s=u.labelsGroup,f=u.label,e=Ext.apply({},f,u.labelStyle.style||{}),h;return o.add(Ext.apply({type:"text",group:s},e||{}))},onPlaceLabel:function(n,t,i,r,u,f,e,o){var v=this,k=v.bounds,rt=k.groupBarWidth,ut=v.column,et=v.chart,ht=et.chartBBox,at=et.resizing,vt=i.value[0],y=i.value[1],s=i.attr,d=Ext.apply(v.labelStyle.style||{},v.label||{}),st=d.orientation=="vertical",lt=[].concat(d.field),ct=d.renderer,ft=ct(t.get(lt[o])),ot=v.getLabelSize(ft),w=ot.width,p=ot.height,l=k.zero,c="outside",tt="insideStart",nt="insideEnd",g=10,it=6,yt=k.signed,h,a,b;if(n.setAttributes({text:ft}),n.isOutside=!1,ut?(u==c?p+it+s.height>(y>=0?l:ht.height-l)&&(u=nt):p+it>s.height&&(u=c,n.isOutside=!0),h=s.x+rt/2,a=u==tt?l+(p/2+3)*(y>=0?-1:1):y>=0?s.y+(p/2+3)*(u==c?-1:1):s.y+s.height+(p/2+3)*(u===c?1:-1)):(u==c?w+g+s.width>(y>=0?ht.width-l:l)&&(u=nt):w+g>s.width&&(u=c,n.isOutside=!0),h=u==tt?l+(w/2+5)*(y>=0?1:-1):y>=0?s.x+s.width+(w/2+5)*(u===c?1:-1):s.x+(w/2+5)*(u===c?-1:1),a=s.y+rt/2),b={x:h,y:a},st&&(b.rotate={x:h,y:a,degrees:270}),f&&at&&(ut?(h=s.x+s.width/2,a=l):(h=l,a=s.y+s.height/2),n.setAttributes({x:h,y:a},!0),st&&n.setAttributes({rotate:{x:h,y:a,degrees:270}},!0)),f)v.onAnimate(n,{to:b});else n.setAttributes(Ext.apply(b,{hidden:!1}),!0)},getLabelSize:function(n){var t=this.testerLabel,f=this.label,o=Ext.apply({},f,this.labelStyle.style||{}),e=f.orientation==="vertical",i,r,u,s;return t||(t=this.testerLabel=this.getSurface().add(Ext.apply({type:"text",opacity:0},o))),t.setAttributes({text:n},!0),i=t.getBBox(),r=i.width,u=i.height,{width:e?u:r,height:e?r:u}},onAnimate:function(n){n.show(),Ext.chart.series.Bar.superclass.onAnimate.apply(this,arguments)},isItemInPoint:function(n,t,i){var r=i.sprite.getBBox();return r.x<=n&&r.y<=t&&r.x+r.width>=n&&r.y+r.height>=t},hideAll:function(){var n=this.chart.axes;isNaN(this._index)||(this.__excludes||(this.__excludes=[]),this.__excludes[this._index]=!0,this.drawSeries(),n.each(function(n){n.drawAxis()}))},showAll:function(){var n=this.chart.axes;isNaN(this._index)||(this.__excludes||(this.__excludes=[]),this.__excludes[this._index]=!1,this.drawSeries(),n.each(function(n){n.drawAxis()}))},getLegendColor:function(n){var i=this,t=i.colorArrayStyle;return i.getColorFromStyle(t[n%t.length])},highlightItem:function(){Ext.chart.series.Bar.superclass.highlightItem.apply(this,arguments),this.renderLabels()},unHighlightItem:function(){Ext.chart.series.Bar.superclass.unHighlightItem.apply(this,arguments),this.renderLabels()},cleanHighlights:function(){Ext.chart.series.Bar.superclass.cleanHighlights.apply(this,arguments),this.renderLabels()},reset:function(){var n=this;n.stacked=n.initialStacked,Ext.chart.series.Bar.superclass.reset.call(n)}}),Ext.chart.series.Column=Ext.extend(Ext.chart.series.Bar,{type:"column",column:!0,axis:"left",xPadding:10,yPadding:0}),Ext.chart.series.Gauge=Ext.extend(Ext.chart.series.Series,{type:"gauge",rad:Math.PI/180,angleField:!1,needle:!1,donut:!1,showInLegend:!1,constructor:function(n){Ext.chart.series.Gauge.superclass.constructor.apply(this,arguments);var t=this,f=t.chart,i=t.getSurface(),e=f.shadow,r,u;if(Ext.apply(t,n,{shadowAttributes:i.getShadowAttributesArray(),shadowOptions:i.getShadowOptions()}),t.group=i.getGroup(t.seriesId),e)for(r=0,u=t.shadowAttributes.length;r<u;r++)t.shadowGroups.push(i.getGroup(t.seriesId+"-shadows"+r));i.customAttributes.segment=function(n){return t.getSegment(n)}},initialize:function(){var n=this;n.yField=[],n.label.field&&n.eachRecord(function(t){n.yField.push(t.get(n.label.field))})},getSegment:function(n){var d=this,k=d.rad,s=Math.cos,c=Math.sin,r=Math.abs,h=d.centerX,u=d.centerY,f=0,b=0,tt=0,i=0,o=0,w=0,nt=0,t=0,a=.01,v=n.startAngle,e=n.endAngle,it=(v+e)/2*k,ft=n.margin||0,l=r(e-v)>180,ut=r(e%360),et=ut>90&&ut<270,y=Math.min(v,e)*k,p=Math.max(v,e)*k,g=!1,rt=!1;return h+=ft*s(it),u+=ft*c(it),f=h+n.startRho*s(y),o=u+n.startRho*c(y),b=h+n.endRho*s(y),w=u+n.endRho*c(y),tt=h+n.startRho*s(p),nt=u+n.startRho*c(p),i=h+n.endRho*s(p),t=u+n.endRho*c(p),r(f-tt)<=a&&r(o-nt)<=a&&(g=!0),rt=g&&r(b-i)<=a&&r(w-t)<=a,rt?{path:[["M",i,t-.0001],["A",n.endRho,n.endRho,0,+l,+et,i,t],["Z"]]}:g?{path:[["M",f,o],["L",b,w],["A",n.endRho,n.endRho,0,+l,1,i,t],["Z"]]}:{path:[["M",f,o],["L",b,w],["A",n.endRho,n.endRho,0,+l,1,i,t],["M",i,t],["L",tt,nt],["A",n.startRho,n.startRho,0,+l,0,f,o],["Z"]]}},calcMiddle:function(n){var t=this,o=t.rad,e=n.slice,l=t.centerX,c=t.centerY,r=e.startAngle,i=e.endAngle,f=Math.min(r,i)*o,a=Math.max(r,i)*o,u=-(f+(a-f)/2),h=l+(n.endRho+n.startRho)/2*Math.cos(u),s=c-(n.endRho+n.startRho)/2*Math.sin(u);n.middle={x:h,y:s}},drawSeries:function(){var n=this,k=n.chart,d=k.substore||k.store,rt=n.group,et=n.chart.animate,w=n.chart.axes.get(0),b=w&&w.minimum||n.minimum||0,ft=w&&w.maximum||n.maximum||0,at=n.angleField||n.field||n.xField,ut=n.getSurface(),ht=k.chartBBox,h=+n.donut,ct=[],ot=n.style,e=n.colorArrayStyle,g=e&&e.length||0,a=Math.cos,l=Math.sin,vt=!!k.shadow,f,o,s,u,v,r,c,nt,it,y,i,yt,pt,tt,lt,t,p,st;if(n.fireEvent("beforedraw",n)!==!1){if(Ext.chart.series.Gauge.superclass.drawSeries.call(this),n.setBBox(),lt=n.bbox,n.colorSet&&(e=n.colorSet,g=e.length),!n.getRecordCount()){ut.items.hide(!0);return}for(o=n.centerX=ht.width/2,s=n.centerY=ht.height,n.radius=Math.min(o,s),n.slices=v=[],n.items=ct=[],n.value||(y=d.getAt(0),n.value=y.get(at)),c=n.value,n.needle?(p={series:n,value:c,startAngle:-180,endAngle:0,rho:n.radius},t=-180*(1-(c-b)/(ft-b)),v.push(p)):(t=-180*(1-(c-b)/(ft-b)),p={series:n,value:c,startAngle:-180,endAngle:t,rho:n.radius},st={series:n,value:n.maximum-c,startAngle:t,endAngle:0,rho:n.radius},v.push(p,st)),i=0,it=v.length;i<it;i++)if(u=v[i],r=rt.getAt(i),f=Ext.apply({segment:{startAngle:u.startAngle,endAngle:u.endAngle,margin:0,rho:u.rho,startRho:u.rho*+h/100,endRho:u.rho}},Ext.apply(ot,e&&{fill:e[i%g]}||{})),nt=Ext.apply({},f.segment,{slice:u,series:n,storeItem:y,index:i}),ct[i]=nt,r||(tt=Ext.apply({type:"path",group:rt},Ext.apply(ot,e&&{fill:e[i%g]}||{})),vt&&Ext.apply(tt,n.shadowOptions),r=ut.add(Ext.apply(tt,f))),u.sprite=u.sprite||[],nt.sprite=r,u.sprite.push(r),et){f=n.renderer(r,y,f,i,d),r._to=f;n.onAnimate(r,{to:f})}else f=n.renderer(r,y,Ext.apply(f,{hidden:!1}),i,d),r.setAttributes(f,!0);if(n.needle){if(t=t*Math.PI/180,n.needleSprite)if(et)n.onAnimate(n.needleSprite,{to:{path:["M",o+n.radius*+h/100*a(t),s+-Math.abs(n.radius*+h/100*l(t)),"L",o+n.radius*a(t),s+-Math.abs(n.radius*l(t))]}});else n.needleSprite.setAttributes({type:"path",path:["M",o+n.radius*+h/100*a(t),s+-Math.abs(n.radius*+h/100*l(t)),"L",o+n.radius*a(t),s+-Math.abs(n.radius*l(t))]});else n.needleSprite=n.getSurface().add({type:"path",path:["M",o+n.radius*+h/100*a(t),s+-Math.abs(n.radius*+h/100*l(t)),"L",o+n.radius*a(t),s+-Math.abs(n.radius*l(t))],"stroke-width":4,stroke:"#222"});n.needleSprite.setAttributes({hidden:!1},!0)}delete n.value,n.fireEvent("draw",n)}},setValue:function(n){this.value=n,this.drawSeries()},onCreateLabel:Ext.emptyFn,onPlaceLabel:Ext.emptyFn,onPlaceCallout:Ext.emptyFn,onAnimate:function(n){n.show(),Ext.chart.series.Gauge.superclass.onAnimate.apply(this,arguments)},isItemInPoint:function(){return!1},showAll:function(){isNaN(this._index)||(this.__excludes[this._index]=!1,this.drawSeries())},getLegendColor:function(n){var i=this,t=i.colorArrayStyle;return i.getColorFromStyle(t[n%t.length])}}),Ext.chart.series.Line=Ext.extend(Ext.chart.series.Cartesian,{type:"line",selectionTolerance:20,showMarkers:!0,markerConfig:{},smooth:!1,defaultSmoothness:3,fill:!1,overflowBuffer:1,constructor:function(n){Ext.chart.series.Line.superclass.constructor.apply(this,arguments);var t=this,i=t.getSurface(),u=t.chart.shadow,e=!0,r,f;if(Ext.apply(t,n,{shadowAttributes:i.getShadowAttributesArray(e),shadowOptions:e&&{}||Ext.apply(i.getShadowOptions(),u===!0?{}:u||{})}),t.group=i.getGroup(t.seriesId),t.showMarkers&&(t.markerGroup=i.getGroup(t.seriesId+"-markers")),u)for(r=0,f=this.shadowAttributes.length;r<f;r++)t.shadowGroups.push(i.getGroup(t.seriesId+"-shadows"+r))},shrink:function(n,t,i){for(var h=n.length,e=Math.floor(h/i),r=1,f=0,u=0,s=[n[0]],o=[t[0]];r<h;++r)f+=n[r]||0,u+=t[r]||0,r%e==0&&(s.push(f/e),o.push(u/e),f=0,u=0);return{x:s,y:o}},drawSeries:function(){var n=this,f=n.chart,tt=f.substore||f.store,vt=n.getRecordCount(),ki=f.chartBBox.width*n.overflowBuffer,st=n.getSurface(),i={},ni=n.group,yt=n.showMarkers,o=n.markerGroup,pt=f.shadow,di=n.shadowGroups,ur=n.shadowAttributes,bi=n.smooth,ht=di.length,g=["M"],r=["M"],pi=f.markerIndex,wi=[].concat(n.axis),kt,rt=[],wt=[],ri=!1,ir=n.markerStyle.style,rr=n.style,lt=n.colorArrayStyle,at=lt&&lt.length||0,ui=Ext.isNumber,gt=n.seriesIdx,y,bt,ct,et,tr,ei,c,w,k,nr,gi,ci,li,si,t,s,d,p,ot,v,ii,e,a,h,ti,ft,dt,b,oi,nt,fi,ut,yi,it,u,vi,l,hi,ai;if(n.fireEvent("beforedraw",n)!==!1){if(Ext.chart.series.Line.superclass.drawSeries.call(this),!vt||n.seriesIsHidden){st.items.hide(!0);return}if(it=Ext.apply({},n.markerConfig,ir),vi=it.type,delete it.type,u=rr,u["stroke-width"]||(u["stroke-width"]=.5),pi&&o&&o.getCount())for(t=0;t<pi;t++)v=o.getAt(t),o.remove(v),o.add(v),ii=o.getAt(o.getCount()-2),v.setAttributes({x:0,y:0,translate:{x:ii.attr.translation.x,y:ii.attr.translation.y}},!0);for(n.unHighlightItem(),n.cleanHighlights(),n.setBBox(),i=n.bbox,n.clipRect=[i.x,i.y,i.width,i.height],t=0,d=wi.length;t<d;t++)p=f.axes.get(wi[t]),p&&(ot=p.calcEnds(),p.position=="top"||p.position=="bottom"?(b=ot.from,oi=ot.to):(nt=ot.from,fi=ot.to));for(n.xField&&!ui(b)&&(n.axis=="bottom"||n.axis=="top")&&(p=new Ext.chart.axis.Axis({chart:f,fields:[].concat(n.xField)}).calcEnds(),b=p.from,oi=p.to),n.yField&&!ui(nt)&&(n.axis=="right"||n.axis=="left")&&(p=new Ext.chart.axis.Axis({chart:f,fields:[].concat(n.yField)}).calcEnds(),nt=p.from,fi=p.to),isNaN(b)?(b=0,ft=i.width/(vt-1||1)):ft=i.width/(oi-b||vt-1||1),isNaN(nt)?(nt=0,dt=i.height/(vt-1||1)):dt=i.height/(fi-nt||1),hi=b-(ki+n.panX)/ft,ai=hi+(ki*2+f.chartBBox.width)/ft,n.eachRecord(function(t,i){if(a=t.get(n.xField),(typeof a=="string"||typeof a=="object"||n.axis!="top"&&n.axis!="bottom")&&(a=i),a>=hi&&a<=ai){if(h=t.get(n.yField),typeof h=="undefined"||typeof h=="string"&&!h)return;(typeof h=="string"||typeof h=="object"||n.axis!="left"&&n.axis!="right")&&(h=i),rt.push(a),wt.push(h)}}),d=rt.length,d>i.width&&(ti=n.shrink(rt,wt,i.width),rt=ti.x,wt=ti.y),n.items=[],l=0,d=rt.length,t=0;t<d;t++){if(a=rt[t],h=wt[t],h===!1){r.length==1&&(r=[]),ri=!0,n.items.push(!1);continue}else w=(i.x+(a-b)*ft).toFixed(2),k=(i.y+i.height-(h-nt)*dt).toFixed(2),ri&&(ri=!1,r.push("M")),r=r.concat([w,k]);if(typeof li=="undefined"&&typeof k!="undefined"&&(li=k,ci=w),(!n.line||f.resizing)&&(g=g.concat([w,i.y+i.height/2])),f.animate&&f.resizing&&n.line&&(n.line.setAttributes({path:g},!0),n.fillPath&&n.fillPath.setAttributes({path:g,opacity:.2},!0),n.line.shadows))for(y=n.line.shadows,s=0,ht=y.length;s<ht;s++)bt=y[s],bt.setAttributes({path:g},!0);yt&&(v=o.getAt(l++),v?(v.setAttributes({value:'"'+a+", "+h+'"',x:0,y:0,hidden:!1},!0),v._to={translate:{x:w,y:k}}):(v=Ext.chart.Shape[vi](st,Ext.apply({group:[ni,o],x:0,y:0,translate:{x:nr||w,y:gi||i.y+i.height/2},value:'"'+a+", "+h+'"',zIndex:4e3},it)),v._to={translate:{x:w,y:k}})),n.items.push({series:n,value:[a,h],point:[w,k],sprite:v,storeItem:tt.getAt(t)}),nr=w,gi=k}if(!(r.length<=1)){if(n.smooth&&(r=Ext.draw.Draw.smooth(r,ui(bi)?bi:n.defaultSmoothness)),f.markerIndex&&n.previousPath?(et=n.previousPath,et.splice(1,2)):et=r,!n.line&&(n.line=st.add(Ext.apply({type:"path",group:ni,path:g,stroke:u.stroke||u.fill},u||{})),pt&&n.line.setAttributes(Ext.apply({},n.shadowOptions),!0),n.line.setAttributes({fill:"none",zIndex:3e3}),!u.stroke&&at&&n.line.setAttributes({stroke:lt[gt%at]},!0),pt))for(y=n.line.shadows=[],ct=0;ct<ht;ct++)kt=ur[ct],kt=Ext.apply({},kt,{path:g}),bt=st.add(Ext.apply({},{type:"path",group:di[ct]},kt)),y.push(bt);if(n.fill&&(ei=r.concat([["L",w,i.y+i.height],["L",ci,i.y+i.height],["L",ci,li]]),n.fillPath||(n.fillPath=st.add({group:ni,type:"path",opacity:u.opacity||.3,fill:u.fill||lt[gt%at],path:g}))),si=yt&&o.getCount(),f.animate){if(tr=n.fill,ut=n.line,c=n.renderer(ut,!1,{path:r},t,tt),Ext.apply(c,u||{},{stroke:u.stroke||u.fill}),delete c.fill,ut.show(!0),n.animation=f.markerIndex&&n.previousPath?yi=n.onAnimate(ut,{to:c,from:{path:et}}):yi=n.onAnimate(ut,{to:c}),pt)for(y=ut.shadows,s=0;s<ht;s++)if(y[s].show(!0),f.markerIndex&&n.previousPath)n.onAnimate(y[s],{to:{path:r},from:{path:et}});else n.onAnimate(y[s],{to:{path:r}});if(tr){n.fillPath.show(!0);n.onAnimate(n.fillPath,{to:Ext.apply({},{path:ei,fill:u.fill||lt[gt%at],"stroke-width":0},u||{})})}if(yt){for(l=0,t=0;t<d;t++)if(n.items[t]&&(e=o.getAt(l++),e)){c=n.renderer(e,tt.getAt(t),e._to,t,tt);n.onAnimate(e,{to:Ext.apply(c,it||{})});e.show(!0)}for(;l<si;l++)e=o.getAt(l),e.hide(!0)}}else{if(c=n.renderer(n.line,!1,{path:r,hidden:!1},t,tt),Ext.apply(c,u||{},{stroke:u.stroke||u.fill}),delete c.fill,n.line.setAttributes(c,!0),pt)for(y=n.line.shadows,s=0;s<ht;s++)y[s].setAttributes({path:r,hidden:!1},!0);if(n.fill&&n.fillPath.setAttributes({path:ei,hidden:!1},!0),yt){for(l=0,t=0;t<d;t++)n.items[t]&&(e=o.getAt(l++),e&&(c=n.renderer(e,tt.getAt(t),e._to,t,tt),e.setAttributes(Ext.apply(it||{},c||{}),!0),e.show(!0)));for(;l<si;l++)e=o.getAt(l),e.hide(!0)}}f.markerIndex&&(r.splice(1,0,r[1],r[2]),n.previousPath=r),n.renderLabels(),n.renderCallouts(),n.fireEvent("draw",n)}}},onCreateLabel:function(n,t){var u=this,o=u.labelsGroup,s=u.label,f=u.bbox,e=Ext.apply(s,u.labelStyle.style);return u.getSurface().add(Ext.apply({type:"text","text-anchor":"middle",group:o,x:t.point[0],y:f.y+f.height/2,zIndex:200},e||{}))},onPlaceLabel:function(n,t,i,r,u){var a=this,w=a.chart,k=w.resizing,y=a.label,b=y.renderer,p=y.field,e=a.bbox,o=i.point[0],s=i.point[1],v=i.sprite.attr.radius,h,c,l;if(n.setAttributes({text:b(t.get(p)),hidden:!0},!0),u=="rotate"?(n.setAttributes({"text-anchor":"start",rotation:{x:o,y:s,degrees:-45}},!0),h=n.getBBox(),c=h.width,l=h.height,o=o<e.x?e.x:o,o=o+c>e.x+e.width?o-(o+c-e.x-e.width):o,s=s-l<e.y?e.y+l:s):(u=="under"||u=="over")&&(h=i.sprite.getBBox(),h.width=h.width||v*2,h.height=h.height||v*2,s=s+(u=="over"?-h.height:h.height),h=n.getBBox(),c=h.width/2,l=h.height/2,o=o-c<e.x?e.x+c:o,o=o+c>e.x+e.width?o-(o+c-e.x-e.width):o,s=s-l<e.y?e.y+l:s,s=s+l>e.y+e.height?s-(s+l-e.y-e.height):s),a.chart.animate&&!a.chart.resizing){n.show(!0);a.onAnimate(n,{to:{x:o,y:s}})}else if(n.setAttributes({x:o,y:s},!0),k)a.animation.on("afteranimate",function(){n.show(!0)});else n.show(!0)},highlightItem:function(n){var t=this,i=t.line,u,r,f;Ext.chart.series.Line.superclass.highlightItem.call(t,n),i&&!t.highlighted&&("__strokeWidth"in i||(i.__strokeWidth=i.attr["stroke-width"]||0),i.__anim&&(i.__anim.paused=!0),i.__anim=new Ext.fx.Anim({target:i,to:{"stroke-width":i.__strokeWidth+3}}),t.highlighted=!0),t.showMarkers||(u=t.highlightMarker,u||(r=Ext.apply({},t.markerStyle.style,t.markerConfig),f=r.type,delete r.type,u=t.highlightMarker=Ext.chart.Shape[f](t.getSurface(),Ext.apply({x:0,y:0},r))),u.setAttributes({translate:{x:n.point[0],y:n.point[1]},hidden:!1},!0))},unHighlightItem:function(){var n=this,t=n.line,i=n.highlightMarker;Ext.chart.series.Line.superclass.unHighlightItem.call(n),t&&n.highlighted&&(t.__anim=new Ext.fx.Anim({target:t,to:{"stroke-width":t.__strokeWidth}}),n.highlighted=!1),i&&i.hide(!0)},onPlaceCallout:function(n,t,i,r,u){if(u){var k=this,ht=k.chart,it=k.callouts,ft=k.items,w=r==0?!1:ft[r-1].point,b=r==ft.length-1?!1:ft[r+1].point,s=[+i.point[0],+i.point[1]],ot,rt,o,tt,g,d,nt=it.offsetFromViz||30,h=it.offsetBox||3,y,v,et,ut,st,a=k.clipRect,c={width:it.styles.width||10,height:it.styles.height||10},l,p;if(w||(w=s),b||(b=s),tt=(b[1]-w[1])/(b[0]-w[0]),g=(s[1]-w[1])/(s[0]-w[0]),d=(b[1]-s[1])/(b[0]-s[0]),rt=Math.sqrt(1+tt*tt),ot=[1/rt,tt/rt],o=[-ot[1],ot[0]],g>0&&d<0&&o[1]<0||g<0&&d>0&&o[1]>0?(o[0]*=-1,o[1]*=-1):(Math.abs(g)<Math.abs(d)&&o[0]<0||Math.abs(g)>Math.abs(d)&&o[0]>0)&&(o[0]*=-1,o[1]*=-1),l=s[0]+o[0]*nt,p=s[1]+o[1]*nt,y=l+(o[0]>0?0:-(c.width+2*h)),v=p-c.height/2-h,et=c.width+2*h,ut=c.height+2*h,(y<a[0]||y+et>a[0]+a[2])&&(o[0]*=-1),(v<a[1]||v+ut>a[1]+a[3])&&(o[1]*=-1),l=s[0]+o[0]*nt,p=s[1]+o[1]*nt,y=l+(o[0]>0?0:-(c.width+2*h)),v=p-c.height/2-h,et=c.width+2*h,ut=c.height+2*h,ht.animate){k.onAnimate(n.lines,{to:{path:["M",s[0],s[1],"L",l,p,"Z"]}});n.panel&&n.panel.setPosition(y,v,!0)}else n.lines.setAttributes({path:["M",s[0],s[1],"L",l,p,"Z"]},!0),n.panel&&n.panel.setPosition(y,v);for(st in n)n[st].show(!0)}},isItemInPoint:function(n,t,i,r){var c=this,s=c.items,l=c.selectionTolerance,f,u,e,o,h=Math.sqrt;return(f=i.point,u=n-f[0],e=t-f[1],o=h(u*u+e*e),o<=l)?r>0&&s[r-1]&&(f=s[r-1].point,u=n-f[0],e=t-f[1],h(u*u+e*e)<o)?!1:s[r+1]&&(f=s[r+1].point,u=n-f[0],e=t-f[1],h(u*u+e*e)<o)?!1:!0:!1},toggleAll:function(n){var t=this,i,u,f,r;if(n?Ext.chart.series.Line.superclass.showAll.call(t):Ext.chart.series.Line.superclass.hideAll.call(t),t.line&&(t.line.setAttributes({hidden:!n},!0),t.line.shadows))for(i=0,r=t.line.shadows,u=r.length;i<u;i++)f=r[i],f.setAttributes({hidden:!n},!0);t.fillPath&&t.fillPath.setAttributes({hidden:!n},!0)},hideAll:function(){this.toggleAll(!1)},showAll:function(){this.toggleAll(!0)}}),Ext.chart.series.Pie=Ext.extend(Ext.chart.series.Series,{type:"pie",rad:Math.PI/180,rotation:0,angleField:!1,lengthField:!1,donut:!1,showInLegend:!1,labelOverflowPadding:20,constructor:function(n){Ext.applyIf(n,{highlightCfg:{segment:{margin:20}}}),Ext.chart.series.Pie.superclass.constructor.apply(this,arguments);var t=this,e=t.chart,i=t.getSurface(),u=e.shadow,r,f;if(Ext.apply(t,n,{shadowAttributes:i.getShadowAttributesArray(),shadowOptions:Ext.apply(i.getShadowOptions(),u===!0?{}:u||{})}),t.group=i.getGroup(t.seriesId),u)for(r=0,f=t.shadowAttributes.length;r<f;r++)t.shadowGroups.push(i.getGroup(t.seriesId+"-shadows"+r));i.customAttributes.segment=function(n){return t.getSegment(n)},t.__excludes=t.__excludes||[],t.addEvents("labelOverflow"),t.addListener("labelOverflow",t.onLabelOverflow)},onLabelOverflow:function(n){n.hide(!0)},getSegment:function(n){var nt=this,tt=nt.rad,h=Math.cos,c=Math.sin,l=Math.abs,i=nt.centerX,t=nt.centerY,s=0,p=0,d=0,f=0,o=0,w=0,g=0,u=0,v=.01,e=n.startAngle,r=n.endAngle,ut=(e+r)/2*tt,rt=n.margin||0,b=l(r-e)>180,a=Math.min(e,r)*tt,y=Math.max(e,r)*tt,k=!1,it=!1;return i+=rt*h(ut),t+=rt*c(ut),s=i+n.startRho*h(a),o=t+n.startRho*c(a),p=i+n.endRho*h(a),w=t+n.endRho*c(a),d=i+n.startRho*h(y),g=t+n.startRho*c(y),f=i+n.endRho*h(y),u=t+n.endRho*c(y),l(s-d)<=v&&l(o-g)<=v&&(k=!0),it=k&&l(p-f)<=v&&l(w-u)<=v,e===r?{path:""}:it?{path:[["M",i+n.endRho,t-.0001],["A",n.endRho,n.endRho,0,1,0,i+n.endRho,t],["Z"]]}:k?{path:[["M",s,o],["L",p,w],["A",n.endRho,n.endRho,0,+b,1,f,u],["Z"]]}:{path:[["M",s,o],["L",p,w],["A",n.endRho,n.endRho,0,+b,1,f,u],["L",f,u],["L",d,g],["A",n.startRho,n.startRho,0,+b,0,s,o],["Z"]]}},calcMiddle:function(n){var t=this,o=t.rad,e=n.slice,l=t.centerX,c=t.centerY,r=e.startAngle,i=e.endAngle,f=Math.min(r,i)*o,a=Math.max(r,i)*o,u=-(f+(a-f)/2),h=l+(n.endRho+n.startRho)/2*Math.cos(u),s=c-(n.endRho+n.startRho)/2*Math.sin(u);n.middle={x:h,y:s}},drawSeries:function(){var n=this,h=n.chart.substore||n.chart.store,g=n.group,wt=n.chart.animate,yt=n.angleField||n.field||n.xField,a=[].concat(n.lengthField),ot=0,pt=n.chart,ri=n.getSurface(),nt=pt.chartBBox,ft=pt.shadow,tt=n.shadowGroups,ui=n.shadowAttributes,lt=tt.length,o=a.length,k=0,bt=+n.donut,et=[],ti=[],p=0,ct=0,w=n.rotation,ni=n.style,y=n.colorArrayStyle,at=y&&y.length||0,f,l,ut,v,u,dt,gt,b,kt=0,i,s,e,it,c,vt,d,t,r,st,rt,fi,ei,ht,ii;if(n.fireEvent("beforedraw",n)!==!1){if(Ext.chart.series.Pie.superclass.drawSeries.call(this),n.setBBox(),ii=n.bbox,n.colorSet&&(y=n.colorSet,at=y.length),n.unHighlightItem(),n.cleanHighlights(),dt=n.centerX=nt.x+nt.width/2,gt=n.centerY=nt.y+nt.height/2,n.radius=Math.min(dt-nt.x,gt-nt.y),n.slices=s=[],n.items=ti=[],n.eachRecord(function(t,i){if(!n.isExcluded(i)&&(p+=+t.get(yt),a[0])){for(r=0,ot=0;r<o;r++)ot+=+t.get(a[r]);et[i]=ot,ct=Math.max(ct,ot)}},this),p=p||1,n.eachRecord(function(t,r){n.isExcluded(r)||(it=t.get(yt),rt=w-360*it/p/2,isNaN(rt)&&(rt=360,it=1,p=1),r&&kt!==0||(w=360-rt,n.firstAngle=w,rt=w-360*it/p/2),st=w-360*it/p,i={series:n,value:it,startAngle:w,endAngle:st,storeItem:t},a[0]?(vt=et[r],i.rho=n.radius*(vt/ct)):i.rho=n.radius,s[r]=i,w=st,kt++)},n),ft)for(t=0,d=s.length;t<d;t++)if(!n.isExcluded(t))for(i=s[t],i.shadowAttrs=[],r=0,k=0,ut=[];r<o;r++){for(e=g.getAt(t*o+r),b=a[r]?h.getAt(t).get(a[r])/et[t]*i.rho:i.rho,f={segment:{startAngle:i.startAngle,endAngle:i.endAngle,margin:0,rho:i.rho,startRho:k+b*bt/100,endRho:k+b},hidden:!i.value&&i.startAngle%360==i.endAngle%360},u=0,ut=[];u<lt;u++){if(l=ui[u],v=tt[u].getAt(t),v||(v=n.getSurface().add(Ext.apply({},{type:"path",group:tt[u],strokeLinejoin:"round"},f,l))),wt){l=n.renderer(v,h.getAt(t),Ext.apply({},f,l),t,h);n.onAnimate(v,{to:l})}else l=n.renderer(v,h.getAt(t),Ext.apply(l,{hidden:!1}),t,h),v.setAttributes(l,!0);ut.push(v)}i.shadowAttrs[r]=ut}for(t=0,d=s.length;t<d;t++)if(!n.isExcluded(t))for(i=s[t],r=0,k=0;r<o;r++){if(e=g.getAt(t*o+r),b=a[r]?h.getAt(t).get(a[r])/et[t]*i.rho:i.rho,f=Ext.apply({segment:{startAngle:i.startAngle,endAngle:i.endAngle,margin:0,rho:i.rho,startRho:k+b*bt/100,endRho:k+b},hidden:!i.value&&i.startAngle%360==i.endAngle%360},Ext.apply(ni,y&&{fill:y[(o>1?r:t)%at]}||{})),c=Ext.apply({},f.segment,{slice:i,series:n,storeItem:i.storeItem,index:t}),n.calcMiddle(c),ft&&(c.shadows=i.shadowAttrs[r]),ti[t]=c,e||(ht=Ext.apply({type:"path",group:g,middle:c.middle},Ext.apply(ni,y&&{fill:y[(o>1?r:t)%at]}||{})),ft&&Ext.apply(ht,n.shadowOptions),e=ri.add(Ext.apply(ht,f))),i.sprite=i.sprite||[],c.sprite=e,i.sprite.push(e),i.point=[c.middle.x,c.middle.y],f=n.renderer(e,h.getAt(t),f,t,h),wt){e._to=f;n.onAnimate(e,{to:f})}else e.setAttributes(f,!0);k+=b}for(d=g.getCount(),t=0;t<d;t++)!s[t/o>>0]&&g.getAt(t)&&g.getAt(t).hide(!0);if(ft)for(lt=tt.length,u=0;u<d;u++)if(!s[u/o>>0])for(r=0;r<lt;r++)tt[r].getAt(u)&&tt[r].getAt(u).hide(!0);n.renderLabels(),n.renderCallouts(),n.fireEvent("draw",n)}},onCreateLabel:function(n,t){var i=this,f=i.labelsGroup,e=i.label,r=t.middle,u=Ext.apply(i.labelStyle.style||{},e||{});return i.getSurface().add(Ext.apply({type:"text","text-anchor":"middle",group:f,x:r.x,y:r.y},u))},onPlaceLabel:function(n,t,i,r,u,f,e){function k(n){return n<0&&(n+=360),n%360}var h=this,tt=h.chart,it=tt.resizing,b=h.label,ut=b.renderer,nt=[].concat(b.field),g=h.centerX,d=h.centerY,l=i.middle,s={x:l.x,y:l.y},a=l.x-g,v=l.y-d,rt={},p=1,y=Math.atan2(v,a||1),o=y*180/Math.PI,c,w;n.setAttributes({text:ut(t.get(nt[e]))},!0);switch(u){case"outside":p=Math.sqrt(a*a+v*v)*2,s.x=p*Math.cos(y)+g,s.y=p*Math.sin(y)+d;break;case"rotate":o=k(o),o=o>90&&o<270?o+180:o,c=n.attr.rotation.degrees,c!=null&&Math.abs(c-o)>180?(o>c?o-=360:o+=360,o=o%360):o=k(o),s.rotate={degrees:o,x:s.x,y:s.y}}if(s.translate={x:0,y:0},f&&!it&&(u!="rotate"||c!==null))h.onAnimate(n,{to:s});else n.setAttributes(s,!0);n._from=rt,w=h.sliceContainsLabel(i.slice,n),w||h.fireEvent("labelOverflow",n,i)},onCreateCallout:function(){var n=this,t;return t=Ext.chart.series.Pie.superclass.onCreateCallout.apply(this,arguments),t.lines.setAttributes({path:["M",n.centerX,n.centerY]}),t.box.setAttributes({x:n.centerX,y:n.centerY}),t.label.setAttributes({x:n.centerX,y:n.centerY}),t},onPlaceCallout:function(n,t,i){var h=this,k=h.chart,l=h.centerX,a=h.centerY,v=i.middle,r={x:v.x,y:v.y},o=v.x-l,s=v.y-a,y=1,p,c=Math.atan2(s,o||1),d=n.label,g=n.box,nt=n.lines,b=nt.attr,u=d.getBBox(),tt=b.offsetFromViz||20,e=b.offsetToSide||10,f=g.attr.offsetBox||10,w;if(y=i.endRho+tt,p=(i.endRho+i.startRho)/2+(i.endRho-i.startRho)/3,r.x=y*Math.cos(c)+l,r.y=y*Math.sin(c)+a,o=p*Math.cos(c),s=p*Math.sin(c),k.animate){h.onAnimate(n.lines,{to:{path:["M",o+l,s+a,"L",r.x,r.y,"Z","M",r.x,r.y,"l",o>0?e:-e,0,"z"]}});h.onAnimate(n.box,{to:{x:r.x+(o>0?e:-(e+u.width+2*f)),y:r.y+(s>0?-u.height-f/2:-u.height-f/2),width:u.width+2*f,height:u.height+2*f}});h.onAnimate(n.label,{to:{x:r.x+(o>0?e+f:-(e+u.width+f)),y:r.y+(s>0?-u.height/4:-u.height/4)}})}else n.lines.setAttributes({path:["M",o+l,s+a,"L",r.x,r.y,"Z","M",r.x,r.y,"l",o>0?e:-e,0,"z"]},!0),n.box.setAttributes({x:r.x+(o>0?e:-(e+u.width+2*f)),y:r.y+(s>0?-u.height-f/2:-u.height-f/2),width:u.width+2*f,height:u.height+2*f},!0),n.label.setAttributes({x:r.x+(o>0?e+f:-(e+u.width+f)),y:r.y+(s>0?-u.height/4:-u.height/4)},!0);for(w in n)n[w].show(!0)},onAnimate:function(n){return n.show(),Ext.chart.series.Pie.superclass.onAnimate.apply(this,arguments)},isItemInPoint:function(n,t,i){for(var u=this,l=u.chart.chartBBox,c=u.centerX-l.x,s=u.centerY-l.y,v=Math.abs,a=v(n-c),h=v(t-s),e=i.startAngle,f=i.endAngle,o=Math.sqrt(a*a+h*h),r=Math.atan2(t-s,n-c)/u.rad;r<f;)r+=360;while(r>e)r-=360;return r<=e&&r>f&&o>=i.startRho&&o<=i.endRho},getItemForAngle:function(n){for(var r=this,t=r.items,i=t.length;i--;)if(t[i]&&r.isAngleInItem(n,t[i]))return t[i]},isAngleInItem:function(n,t){for(var r=t.startAngle,i=t.endAngle;n<i;)n+=360;while(n>r)n-=360;return n<=r&&n>i},sliceContainsLabel:function(n,t){var u=this,f=Math.PI,h=n.startAngle,o=n.endAngle,r=Math.abs(o-h)*f/180,c=t.getBBox(!0),s=u.radius,e=c.height+(u.labelOverflowPadding||0),i;return r>=f?!0:(i=Math.abs(Math.tan(r/2))*s*2,i>=e)},hideAll:function(){var i,e,u,f,n,t,r;if(!isNaN(this._index)){for(this.__excludes=this.__excludes||[],this.__excludes[this._index]=!0,r=this.slices[this._index].sprite,n=0,t=r.length;n<t;n++)r[n].setAttributes({hidden:!0},!0);if(this.slices[this._index].shadowAttrs)for(i=0,f=this.slices[this._index].shadowAttrs,e=f.length;i<e;i++)for(u=f[i],n=0,t=u.length;n<t;n++)u[n].setAttributes({hidden:!0},!0);this.drawSeries()}},showAll:function(){var i=this,t=i.__excludes,n=i._index;!isNaN(n)&&t&&t[n]&&(t[n]=!1,i.drawSeries())},highlightItem:function(n){var t=this,k=t.rad,s,v,a,e,l,r,p,c,o,f;if((n=n||this.items[this._index],n&&(!n.sprite||!n.sprite._animating))&&(Ext.chart.series.Pie.superclass.highlightItem.apply(this,[n]),t.highlight!==!1)&&"segment"in t.highlightCfg){if(s=t.highlightCfg.segment,v=t.chart.animate,t.labelsGroup){var b=t.labelsGroup,h=b.getAt(n.index),w=(n.startAngle+n.endAngle)/2*k,y=s.margin||0,u=y*Math.cos(w),i=y*Math.sin(w);Math.abs(u)<1e-10&&(u=0),Math.abs(i)<1e-10&&(i=0),v?(h.stopAnimation(),h.animate({to:{translate:{x:u,y:i}},duration:t.highlightDuration})):h.setAttributes({translate:{x:u,y:i}},!0)}if(t.chart.shadow&&n.shadows)for(e=0,l=n.shadows,p=l.length;e<p;e++){r=l[e],c={},o=n.sprite._from.segment;for(f in o)f in s||(c[f]=o[f]);a={segment:Ext.applyIf(c,t.highlightCfg.segment)},v?(r.stopAnimation(),r.animate({to:a,duration:t.highlightDuration})):r.setAttributes(a,!0)}}},unHighlightItem:function(){var n=this;if(n.highlight!==!1){if("segment"in n.highlightCfg&&n.items)for(var y=n.items,v=n.chart.animate,d=!!n.chart.shadow,p=n.labelsGroup,b=y.length,l=0,c=0,k=n.label.display,w,u,r,o,h,s,e,f,t,i,a;l<b;l++)if((t=y[l],t)&&(s=t.sprite,s&&s._highlighted&&(p&&(i=p.getAt(t.index),a=Ext.apply({translate:{x:0,y:0}},k=="rotate"?{rotate:{x:i.attr.x,y:i.attr.y,degrees:i.attr.rotation.degrees}}:{}),v?(i.stopAnimation(),i.animate({to:a,duration:n.highlightDuration})):i.setAttributes(a,!0)),d)))for(e=t.shadows,w=e.length;c<w;c++){r={},o=t.sprite._to.segment,h=t.sprite._from.segment,Ext.apply(r,h);for(u in o)u in h||(r[u]=o[u]);f=e[c],v?(f.stopAnimation(),f.animate({to:{segment:r},duration:n.highlightDuration})):f.setAttributes({segment:r},!0)}Ext.chart.series.Pie.superclass.unHighlightItem.apply(n,arguments)}},getLegendLabels:function(){var i=this,t=i.label.field,n=[];return t&&i.eachRecord(function(i){n.push(i.get(t))}),n},getLegendColor:function(n){var i=this,t=i.colorSet,r=i.colorArrayStyle;return i.getColorFromStyle(t&&t[n%t.length]||r[n%r.length])},eachRecord:function(n,t){var i=this,e=i.chart.substore||i.chart.store,o=i.combinations,f=i.label.field,u=i.angleField||i.field||i.xField,s=[].concat(i.lengthField),r;o?(r=e.data.clone(),Ext.each(o,function(n){var o=r.getAt(n[0]),i=r.getAt(n[1]),t={};t[f]=o.get(f)+" & "+i.get(f),t[u]=+o.get(u)+i.get(u),s[0]&&Ext.each(s,function(n){t[n]=+o.get(n)+i.get(n)}),r.insert(n[1],Ext.ModelMgr.create(t,e.model)),r.remove(o),r.remove(i)}),r.each(n,t)):e.each(n,t)},getRecordCount:function(){var t=this,n=t.combinations;return Ext.chart.series.Pie.superclass.getRecordCount.call(t)-(n?n.length:0)},updateSurfaceBox:function(){var n=this,u=n.getSurface(),f=n.getOverlaySurface(),r=n.chart,t=r.curWidth,i=r.curHeight;u.el.setTopLeft(0,0),u.setSize(t,i),f.el.setTopLeft(0,0),f.setSize(t,i)},reset:function(){this.rotation=0,Ext.chart.series.Pie.superclass.reset.call(this)}}),Ext.chart.series.Radar=Ext.extend(Ext.chart.series.Series,{type:"radar",rad:Math.PI/180,rotation:0,showInLegend:!1,constructor:function(){Ext.chart.series.Radar.superclass.constructor.apply(this,arguments);var t=this,i=t.getSurface();t.group=i.getGroup(t.seriesId),t.showMarkers&&(t.markerGroup=i.getGroup(t.seriesId+"-markers"))},drawSeries:function(){var n=this,nt=n.group,e=n.chart,it=n.field||n.yField,k=n.getSurface(),h=e.chartBBox,i,t,d,g,f=0,l=[],et=Math.max,tt=Math.cos,rt=Math.sin,ut=-n.rotation,ft=Ext.draw.Draw.rad,c,w=n.getRecordCount(),s,o,u,r,y,p,a=n.style,v=e.axes&&e.axes.get(0),b=!(v&&v.maximum);if(n.fireEvent("beforedraw",n)!==!1){if(Ext.chart.series.Radar.superclass.drawSeries.call(this),n.setBBox(),f=b?0:v.maximum||0,!w||n.seriesIsHidden){k.items.hide(!0);return}if(n.unHighlightItem(),n.cleanHighlights(),i=n.centerX=h.width/2,t=n.centerY=h.height/2,n.radius=g=Math.min(h.width,h.height)/2,n.items=d=[],b&&(e.series.each(function(n){l.push(n.yField)}),n.eachRecord(function(n,t){for(t=0,p=l.length;t<p;t++)f=et(+n.get(l[t]),f)})),f=f||1,s=[],o=[],n.eachRecord(function(e,h){y=g*e.get(it)/f,c=ft(ut+h/w*360),u=y*tt(c),r=y*rt(c),h==0?(o.push("M",u+i,r+t),s.push("M",.01*u+i,.01*r+t)):(o.push("L",u+i,r+t),s.push("L",.01*u+i,.01*r+t)),d.push({sprite:!1,point:[i+u,t+r],series:n})}),o.push("Z"),n.radar||(n.radar=k.add(Ext.apply({type:"path",group:nt,path:s},a||{}))),e.resizing&&n.radar.setAttributes({path:s},!0),n.radar.show(!0),e.animate)n.onAnimate(n.radar,{to:Ext.apply({path:o},a||{})});else n.radar.setAttributes(Ext.apply({path:o},a||{}),!0);n.showMarkers&&n.drawMarkers(),n.renderLabels(),n.renderCallouts(),n.fireEvent("draw",n)}},drawMarkers:function(){var t=this,h=t.chart,v=t.getSurface(),a=Ext.apply({},t.markerStyle.style||{}),r=Ext.apply(a,t.markerConfig),s=t.items,l=r.type,o=t.markerGroup,f=t.centerX,e=t.centerY,u,i,c,n;for(delete r.type,i=0,c=s.length;i<c;i++)if(u=s[i],n=o.getAt(i),n?n.show():n=Ext.chart.Shape[l](v,Ext.apply({group:o,x:0,y:0,translate:{x:f,y:e}},r)),h.resizing&&n.setAttributes({x:0,y:0,translate:{x:f,y:e}},!0),n._to={translate:{x:u.point[0],y:u.point[1]}},h.animate)t.onAnimate(n,{to:n._to});else n.setAttributes(Ext.apply(n._to,r||{}),!0)},isItemInPoint:function(n,t,i){var r,f=10,u=Math.abs;return r=i.point,u(r[0]-n)<=f&&u(r[1]-t)<=f},onCreateLabel:function(){var i=this,f=i.labelsGroup,e=i.label,r=i.centerX,u=i.centerY;return i.getSurface().add(Ext.apply({type:"text","text-anchor":"middle",group:f,x:r,y:u},e||{}))},onPlaceLabel:function(n,t,i,r,u,f){var e=this,l=e.chart,a=l.resizing,o=e.label,v=o.renderer,y=o.field,h=e.centerX,c=e.centerY,s={x:i.point[0],y:i.point[1]};if(n.setAttributes({text:v(t.get(y)),hidden:!0},!0),a&&n.setAttributes({x:h,y:c},!0),f){n.show(!0);e.onAnimate(n,{to:s})}else n.setAttributes(s,!0),n.show(!0)},toggleAll:function(n){var t=this,i,u,f,r;if(n?Ext.chart.series.Radar.superclass.showAll.call(t):Ext.chart.series.Radar.superclass.hideAll.call(t),t.radar&&(t.radar.setAttributes({hidden:!n},!0),t.radar.shadows))for(i=0,r=t.radar.shadows,u=r.length;i<u;i++)f=r[i],f.setAttributes({hidden:!n},!0)},hideAll:function(){this.toggleAll(!1),this.hideMarkers(0)},showAll:function(){this.toggleAll(!0)},hideMarkers:function(n){for(var i=this,r=i.markerGroup&&i.markerGroup.getCount()||0,t=n||0;t<r;t++)i.markerGroup.getAt(t).hide(!0)},getLegendLabels:function(){var n=this.title||this.yField;return n?[n]:[]},reset:function(){this.rotation=0,Ext.chart.series.Radar.superclass.reset.call(this)}}),Ext.chart.series.Scatter=Ext.extend(Ext.chart.series.Cartesian,{type:"scatter",constructor:function(n){Ext.chart.series.Scatter.superclass.constructor.apply(this,arguments);var t=this,u=t.chart.shadow,i=t.getSurface(),r,f;if(Ext.apply(t,n,{style:{},markerConfig:{},shadowAttributes:i.getShadowAttributesArray(),shadowOptions:Ext.apply(i.getShadowOptions(),u===!0?{}:u||{})}),t.group=i.getGroup(t.seriesId),u)for(r=0,f=t.shadowAttributes.length;r<f;r++)t.shadowGroups.push(i.getGroup(t.seriesId+"-shadows"+r))},getBounds:function(){var t=this,c=t.chart,e=t.getRecordCount(),y=[].concat(t.axis),u,l,a,v,i,r,h,o,s,n,f;for(t.setBBox(),u=t.bbox,s=0,v=y.length;s<v;s++)n=c.axes.get(y[s]),n&&(f=n.calcEnds(),n.position=="top"||n.position=="bottom"?(i=f.from,h=f.to):(r=f.from,o=f.to));return t.xField&&!Ext.isNumber(i)&&(n=new Ext.chart.axis.Axis({chart:c,fields:[].concat(t.xField)}).calcEnds(),i=n.from,h=n.to),t.yField&&!Ext.isNumber(r)&&(n=new Ext.chart.axis.Axis({chart:c,fields:[].concat(t.yField)}).calcEnds(),r=n.from,o=n.to),isNaN(i)?(i=0,h=e-1,l=u.width/(e-1)):l=u.width/(h-i),isNaN(r)?(r=0,o=e-1,a=u.height/(e-1)):a=u.height/(o-r),{bbox:u,minX:i,minY:r,xScale:l,yScale:a}},getPaths:function(){var n=this,f=n.chart,c=f.shadow,k=n.group,u=n.bounds=n.getBounds(),o=n.bbox,p=u.xScale,y=u.yScale,v=u.minX,l=u.minY,b=o.x,w=o.y,a=o.height,h=[],s,e,i,t,r;return n.items=n.items||[],n.eachRecord(function(u,o){(i=u.get(n.xField),t=u.get(n.yField),typeof t!="undefined"&&(typeof t!="string"||t))&&((typeof i=="string"||typeof i=="object")&&(i=o),(typeof t=="string"||typeof t=="object")&&(t=o),s=b+(i-v)*p,e=w+a-(t-l)*y,h.push({x:s,y:e}),n.items.push({series:n,value:[i,t],point:[s,e],storeItem:u}),f.animate&&f.resizing&&(r=k.getAt(o),r&&(n.resetPoint(r),c&&n.resetShadow(r))))}),h},resetPoint:function(n){var t=this.bbox;n.setAttributes({translate:{x:(t.x+t.width)/2,y:(t.y+t.height)/2}},!0)},resetShadow:function(n){for(var u=this,o=n.shadows,f=u.shadowAttributes,e=u.shadowGroups.length,t=u.bbox,i,r=0;r<e;r++)i=Ext.apply({},f[r]),i.translate?(i.translate.x+=(t.x+t.width)/2,i.translate.y+=(t.y+t.height)/2):i.translate={x:(t.x+t.width)/2,y:(t.y+t.height)/2},o[r].setAttributes(i,!0)},createPoint:function(n,t){var r=this,u=r.group,i=r.bbox;return Ext.chart.Shape[t](r.getSurface(),Ext.apply({},{x:0,y:0,group:u,translate:{x:(i.x+i.width)/2,y:(i.y+i.height)/2}},n))},createShadow:function(n,t,i){var e=this,h=e.shadowGroups,c=e.shadowAttributes,l=h.length,r=e.bbox,f,o,s,u;for(n.shadows=s=[],f=0;f<l;f++)u=Ext.apply({},c[f]),u.translate?(u.translate.x+=(r.x+r.width)/2,u.translate.y+=(r.y+r.height)/2):Ext.apply(u,{translate:{x:(r.x+r.width)/2,y:(r.y+r.height)/2}}),Ext.apply(u,t),o=Ext.chart.Shape[i](e.getSurface(),Ext.apply({},{x:0,y:0,group:h[f]},u)),s.push(o)},drawSeries:function(){var n=this,c=n.chart,o=c.substore||c.store,y=n.group,k=c.shadow,b=n.shadowGroups,p=n.shadowAttributes,w=b.length,i,l,e,a,t,s,r,v,h,f,u;if(n.fireEvent("beforedraw",n)!==!1){if(Ext.chart.series.Scatter.superclass.drawSeries.call(this),s=Ext.apply(n.markerStyle.style||{},n.markerConfig),v=s.type,delete s.type,!n.getRecordCount()||n.seriesIsHidden){n.getSurface().items.hide(!0);return}for(n.unHighlightItem(),n.cleanHighlights(),l=n.getPaths(),a=l.length,t=0;t<a;t++){if(e=l[t],i=y.getAt(t),Ext.apply(e,s),i||(i=n.createPoint(e,v),k&&(n.createShadow(i,s,v),i.setAttributes(n.shadowOptions,!0))),h=i.shadows,c.animate){f=n.renderer(i,o.getAt(t),{translate:e},t,o),i._to=f;n.onAnimate(i,{to:f});for(r=0;r<w;r++){u=Ext.apply({},p[r]),f=n.renderer(h[r],o.getAt(t),Ext.apply({},{translate:{x:e.x+(u.translate?u.translate.x:0),y:e.y+(u.translate?u.translate.y:0)}},u),t,o);n.onAnimate(h[r],{to:f})}}else for(f=n.renderer(i,o.getAt(t),{translate:e},t,o),i._to=f,i.setAttributes(f,!0),r=0;r<w;r++)u=Ext.apply({},p[r]),f=n.renderer(h[r],o.getAt(t),Ext.apply({},{translate:{x:e.x+(u.translate?u.translate.x:0),y:e.y+(u.translate?u.translate.y:0)}},u),t,o),h[r].setAttributes(f,!0);n.items[t].sprite=i}for(a=y.getCount(),t=l.length;t<a;t++)y.getAt(t).hide(!0);n.renderLabels(),n.renderCallouts(),n.fireEvent("draw",n)}},onCreateLabel:function(n,t){var u=this,e=u.labelsGroup,s=u.label,o=Ext.apply({},s,u.labelStyle.style||{}),f=u.bbox;return u.getSurface().add(Ext.apply({type:"text",group:e,x:t.point[0],y:f.y+f.height/2},o))},onPlaceLabel:function(n,t,i,r,u){var a=this,p=a.chart,d=p.resizing,y=a.label,k=y.renderer,b=y.field,o=a.bbox,e=i.point[0],s=i.point[1],w=i.sprite.attr.radius,h,c,l,v;if(n.setAttributes({text:k(t.get(b)),hidden:!0},!0),u=="rotate"?(n.setAttributes({"text-anchor":"start",rotation:{x:e,y:s,degrees:-45}},!0),h=n.getBBox(),c=h.width,l=h.height,e=e<o.x?o.x:e,e=e+c>o.x+o.width?e-(e+c-o.x-o.width):e,s=s-l<o.y?o.y+l:s):(u=="under"||u=="over")&&(h=i.sprite.getBBox(),h.width=h.width||w*2,h.height=h.height||w*2,s=s+(u=="over"?-h.height:h.height),h=n.getBBox(),c=h.width/2,l=h.height/2,e=e-c<o.x?o.x+c:e,e=e+c>o.x+o.width?e-(e+c-o.x-o.width):e,s=s-l<o.y?o.y+l:s,s=s+l>o.y+o.height?s-(s+l-o.y-o.height):s),p.animate)if(d)if(v=i.sprite.getActiveAnimation(),v)v.on("afteranimate",function(){n.setAttributes({x:e,y:s},!0),n.show(!0)});else n.show(!0);else a.onAnimate(n,{to:{x:e,y:s}});else n.setAttributes({x:e,y:s},!0),n.show(!0)},onPlaceCallout:function(n,t,i){var b=this,nt=b.chart,a=i.point,s,h=n.label.getBBox(),d=30,o=3,y,p,k,w,g,v=b.bbox,c,l;if(s=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)],c=a[0]+s[0]*d,l=a[1]+s[1]*d,y=c+(s[0]>0?0:-(h.width+2*o)),p=l-h.height/2-o,k=h.width+2*o,w=h.height+2*o,(y<v[0]||y+k>v[0]+v[2])&&(s[0]*=-1),(p<v[1]||p+w>v[1]+v[3])&&(s[1]*=-1),c=a[0]+s[0]*d,l=a[1]+s[1]*d,y=c+(s[0]>0?0:-(h.width+2*o)),p=l-h.height/2-o,k=h.width+2*o,w=h.height+2*o,nt.animate){b.onAnimate(n.lines,{to:{path:["M",a[0],a[1],"L",c,l,"Z"]}},!0);b.onAnimate(n.box,{to:{x:y,y:p,width:k,height:w}},!0);b.onAnimate(n.label,{to:{x:c+(s[0]>0?o:-(h.width+o)),y:l}},!0)}else n.lines.setAttributes({path:["M",a[0],a[1],"L",c,l,"Z"]},!0),n.box.setAttributes({x:y,y:p,width:k,height:w},!0),n.label.setAttributes({x:c+(s[0]>0?o:-(h.width+o)),y:l},!0);for(g in n)n[g].show(!0)},onAnimate:function(n){n.show(),Ext.chart.series.Scatter.superclass.onAnimate.apply(this,arguments)},isItemInPoint:function(n,t,i){var r,u=10;return r=i.point,r[0]-u<=n&&r[0]+u>=n&&r[1]-u<=t&&r[1]+u>=t}}),Ext.chart.series.Area=Ext.extend(Ext.chart.series.Cartesian,{type:"area",stacked:!0,constructor:function(n){Ext.chart.series.Area.superclass.constructor.apply(this,arguments);var t=this,i=t.getSurface(),u,r;Ext.apply(t,n,{__excludes:[],highlightCfg:{lineWidth:3,stroke:"#55c",opacity:.8,color:"#f00"}}),t.highlight!==!1&&(t.highlightSprite=i.add({type:"path",path:["M",0,0],zIndex:1e3,opacity:.3,lineWidth:5,hidden:!0,stroke:"#444"})),t.group=i.getGroup(t.seriesId)},shrink:function(n,t,i){for(var l=n.length,o=Math.floor(l/i),f,s=0,e=this.areas.length,u=[],c=[],h=[],r=0;r<e;++r)u[r]=0;for(f=0;f<l;++f){for(s+=n[f],r=0;r<e;++r)u[r]+=t[f][r];if(f%o==0){for(c.push(s/o),r=0;r<e;++r)u[r]/=o;for(h.push(u),s=0,r=0,u=[];r<e;++r)u[r]=0}}return{x:c,y:h}},getBounds:function(){function k(n){typeof n=="number"&&a.push(n)}var n=this,y=n.chart,e=[],s=[],v=Infinity,h=v,l=-v,t,f,o=Math,d=o.min,g=o.max,i,w,b,p,c,u,r,a;return n.setBBox(),i=n.bbox,n.axis&&(u=y.axes.get(n.axis),u&&(r=u.calcEnds(),t=r.from,f=r.to)),n.yField&&!Ext.isNumber(t)&&(u=new Ext.chart.axis.Axis({chart:y,fields:[].concat(n.yField)}),r=u.calcEnds(),t=r.from,f=r.to),Ext.isNumber(t)||(t=0),Ext.isNumber(f)||(f=0),n.eachRecord(function(t,i){var r=t.get(n.xField);typeof r!="number"&&(r=i),e.push(r),a=[],n.eachYValue(t,k),h=o.min(h,r),l=o.max(l,r),s.push(a)}),w=i.width/(l-h||1),b=i.height/(f-t||1),p=e.length,p>i.width&&n.areas&&(c=n.shrink(e,s,i.width),e=c.x,s=c.y),{bbox:i,minX:h,minY:t,xValues:e,yValues:s,xScale:w,yScale:b,areasLen:n.getYValueCount()}},getPaths:function(){for(var s=this,k=!0,i=s.getBounds(),r=i.bbox,a=s.items=[],h=[],u,c=[],f,o,b,p,v,n,w,y,e,l=i.xValues.length,t=0;t<l;t++)for(b=i.xValues[t],p=i.yValues[t],f=r.x+(b-i.minX)*i.xScale,v=0,n=0;n<i.areasLen;n++)s.isExcluded(n)||(h[n]||(h[n]=[]),y=p[n],v+=y,o=r.y+r.height-(v-i.minY)*i.yScale,c[n]?(c[n].push("L",f,o),h[n].push(["L",f,o])):(c[n]=["M",f,o],h[n].push(["L",f,o])),a[n]||(a[n]={pointsUp:[],pointsDown:[],series:s}),a[n].pointsUp.push([f,o]));for(n=0;n<i.areasLen;n++)if(!s.isExcluded(n)){if(e=c[n],n==0||k)k=!1,e.push("L",f,r.y+r.height,"L",r.x,r.y+r.height,"Z");else{for(u=h[w],u.reverse(),e.push("L",f,u[0][2]),t=0;t<l;t++)e.push(u[t][0],u[t][1],u[t][2]),a[n].pointsDown[l-t-1]=[u[t][1],u[t][2]];e.push("L",r.x,e[2],"Z")}w=n}return{paths:c,areasLen:i.areasLen}},drawSeries:function(){var n=this,h=n.chart,a=h.substore||h.store,l=n.getSurface(),v=h.animate,y=n.group,i=n.areas,s=n.style,r=n.colorArrayStyle,u=r&&r.length||0,t,f,o,c,e;if(n.fireEvent("beforedraw",n)!==!1){if(Ext.chart.series.Area.superclass.drawSeries.call(this),n.unHighlightItem(),n.cleanHighlights(),!n.getRecordCount()){l.items.hide(!0);return}for(o=n.getPaths(),i||(i=n.areas=[]),t=0;t<o.areasLen;t++)n.isExcluded(t)||(i[t]||(n.items[t].sprite=i[t]=l.add(Ext.apply({},{type:"path",group:y,path:o.paths[t],stroke:s.stroke||r[t%u],fill:r[t%u]},s||{}))),f=i[t],c=o.paths[t],v?(e=n.renderer(f,!1,{path:c,fill:r[t%u],stroke:s.stroke||r[t%u]},t,a),n.animation=n.onAnimate(f,{to:e})):(e=n.renderer(f,!1,{path:c,hidden:!1,fill:r[t%u],stroke:s.stroke||r[t%u]},t,a),i[t].setAttributes(e,!0)));for(;t<i.length;t++)i[t].hide();n.renderLabels(),n.renderCallouts(),n.fireEvent("draw",n)}},onAnimate:function(n){n.show(),Ext.chart.series.Area.superclass.onAnimate.apply(this,arguments)},onCreateLabel:function(n,t){var u=this,o=u.labelsGroup,s=u.label,f=u.bbox,e=Ext.apply({},s,u.labelStyle.style);return u.getSurface().add(Ext.apply({type:"text","text-anchor":"middle",group:o,x:t.point[0],y:f.y+f.height/2},e||{}))},onPlaceLabel:function(n,t,i,r,u,f,e){var c=this,w=c.chart,p=w.resizing,y=c.label,b=y.renderer,k=y.field,o=c.bbox,s=i.point[0],h=i.point[1],v,l,a;if(n.setAttributes({text:b(t.get(k[e])),hidden:!0},!0),v=n.getBBox(),l=v.width/2,a=v.height/2,s=s-l<o.x?o.x+l:s,s=s+l>o.x+o.width?s-(s+l-o.x-o.width):s,h=h-a<o.y?o.y+a:h,h=h+a>o.y+o.height?h-(h+a-o.y-o.height):h,c.chart.animate&&!c.chart.resizing){n.show(!0);c.onAnimate(n,{to:{x:s,y:h}})}else if(n.setAttributes({x:s,y:h},!0),p)c.animation.on("afteranimate",function(){n.show(!0)});else n.show(!0)},onPlaceCallout:function(n,t,i,r){var g=this,st=g.chart,at=g.getSurface(),ct=st.resizing,lt=g.callouts,ut=g.items,p=r==0?!1:ut[r-1].point,y=r==ut.length-1?!1:ut[r+1].point,s=i.point,ft,et,o,tt,w,b,c=n.label.getBBox(),nt=30,ht=10,h=3,d,k,rt,it,ot,v=g.clipRect,l,a;p||(p=s),y||(y=s),tt=(y[1]-p[1])/(y[0]-p[0]),w=(s[1]-p[1])/(s[0]-p[0]),b=(y[1]-s[1])/(y[0]-s[0]),et=Math.sqrt(1+tt*tt),ft=[1/et,tt/et],o=[-ft[1],ft[0]],w>0&&b<0&&o[1]<0||w<0&&b>0&&o[1]>0?(o[0]*=-1,o[1]*=-1):(Math.abs(w)<Math.abs(b)&&o[0]<0||Math.abs(w)>Math.abs(b)&&o[0]>0)&&(o[0]*=-1,o[1]*=-1),l=s[0]+o[0]*nt,a=s[1]+o[1]*nt,d=l+(o[0]>0?0:-(c.width+2*h)),k=a-c.height/2-h,rt=c.width+2*h,it=c.height+2*h,(d<v[0]||d+rt>v[0]+v[2])&&(o[0]*=-1),(k<v[1]||k+it>v[1]+v[3])&&(o[1]*=-1),l=s[0]+o[0]*nt,a=s[1]+o[1]*nt,d=l+(o[0]>0?0:-(c.width+2*h)),k=a-c.height/2-h,rt=c.width+2*h,it=c.height+2*h,n.lines.setAttributes({path:["M",s[0],s[1],"L",l,a,"Z"]},!0),n.box.setAttributes({x:d,y:k,width:rt,height:it},!0),n.label.setAttributes({x:l+(o[0]>0?h:-(c.width+h)),y:a},!0);for(ot in n)n[ot].show(!0)},isItemInPoint:function(n,t,i,r){for(var l=this,e=i.pointsUp,o=i.pointsDown,c=Math.abs,h=Infinity,f,u=0,s=e.length;u<s;u++)if(f=[e[u][0],e[u][1]],h>c(n-f[0]))h=c(n-f[0]);else{if(f=e[u-1],t>=f[1]&&(!o.length||t<=o[u-1][1]))return i.storeIndex=u-1,i.storeField=l.yField[r],i.storeItem=l.chart.store.getAt(u-1),i._points=o.length?[f,o[u-1]]:[f],!0;break}return!1},highlightSeries:function(){var n,t,i;this._index!==undefined&&(n=this.areas[this._index],n.__highlightAnim&&(n.__highlightAnim.paused=!0),n.__highlighted=!0,n.__prevOpacity=n.__prevOpacity||n.attr.opacity||1,n.__prevFill=n.__prevFill||n.attr.fill,n.__prevLineWidth=n.__prevLineWidth||n.attr.lineWidth,i=Ext.draw.Color.fromString(n.__prevFill),t={lineWidth:(n.__prevLineWidth||0)+2},i?t.fill=i.getLighter(.2).toString():t.opacity=Math.max(n.__prevOpacity-.3,0),this.chart.animate?n.__highlightAnim=new Ext.fx.Anim(Ext.apply({target:n,to:t},this.chart.animate)):n.setAttributes(t,!0))},unHighlightSeries:function(){var n;this._index!==undefined&&(n=this.areas[this._index],n.__highlightAnim&&(n.__highlightAnim.paused=!0),n.__highlighted&&(n.__highlighted=!1,n.__highlightAnim=new Ext.fx.Anim({target:n,to:{fill:n.__prevFill,opacity:n.__prevOpacity,lineWidth:n.__prevLineWidth}})))},highlightItem:function(n){var i=this,u=i.highlightSprite,t,r;if(!n){this.highlightSeries();return}t=n._points,r=t.length==2?["M",t[0][0],t[0][1],"L",t[1][0],t[1][1]]:["M",t[0][0],t[0][1],"L",t[0][0],i.bbox.y+i.bbox.height],u&&(Ext.applyIf(this.highlightCfg,this.highlightStyle.style||{}),u.setAttributes(Ext.apply({path:r,hidden:!1},this.highlightCfg),!0)),i.getSurface().renderFrame()},unHighlightItem:function(n){n||this.unHighlightSeries(),this.highlightSprite&&this.highlightSprite.hide(!0)},hideAll:function(){var n=this,t=n._index;isNaN(t)||(n.__excludes[t]=!0,n.areas[t].hide(!0),n.chart.axes.each(function(n){n.drawAxis()}),n.drawSeries())},showAll:function(){var n=this,t=n._index;isNaN(t)||(n.__excludes[t]=!1,n.areas[t].show(!0),n.chart.axes.each(function(n){n.drawAxis()}),n.drawSeries())},getLegendColor:function(n){var i=this,t=i.colorArrayStyle;return i.getColorFromStyle(t[n%t.length])}}),Ext.ns("Ext.chart.interactions"),Ext.chart.interactions.Manager=new Ext.AbstractManager,Ext.chart.interactions.Abstract=Ext.extend(Ext.util.Observable,{gesture:"tap",constructor:function(n){var t=this;Ext.chart.interactions.Abstract.superclass.constructor.call(t,n),t.ownerCt=t.chart},initEvents:function(){var n=this;(n.gesture&&n.gesture=="drag"||n.panGesture&&n.panGesture=="drag")&&n.chart.getSurface("events").initializeDragEvents(),n.addChartListener(n.gesture,n.onGesture,n)},onGesture:Ext.emptyFn,getItemForEvent:function(n){var r=this,t=r.chart,i=t.getEventXY(n);return t.getItemForPoint(i[0],i[1])},getItemsForEvent:function(n){var r=this,t=r.chart,i=t.getEventXY(n);return t.getItemsForPoint(i[0],i[1])},addChartListener:function(n,t,i,r){var u=this,f=u.getLocks();u.chart.on(n,function(){n in f&&f[n]!==u||t.apply(this,arguments)},i,r)},lockEvents:function(){for(var i=this,r=i.getLocks(),n=arguments,t=n.length;t--;)r[n[t]]=i},unlockEvents:function(){for(var i=this.getLocks(),t=arguments,n=t.length;n--;)delete i[t[n]]},getLocks:function(){var n=this.chart;return n.lockedEvents||(n.lockedEvents={})},isMultiTouch:function(){return!(Ext.is.MultiTouch===!1||Ext.is.Android&&!Ext.is.hasOwnProperty("MultiTouch")||Ext.is.Desktop)},initializeDefaults:Ext.emptyFn,ownerCt:null,getItemId:function(){return this.id||(this.id=Ext.id())},initCls:function(){return(this.cls||"").split(" ")},isXType:function(n){return n==="interaction"},getRefItems:function(){return[]}}),Ext.chart.interactions.DelayedSync=Ext.extend(Object,{syncDelay:500,syncWaitText:"Rendering...",constructor:function(){var n=this,t=Ext.util.DelayedTask;n.startSyncTask=new t(n.startSync,n),n.doSyncTask=new t(n.doSync,n),n.unlockInteractionTask=new t(n.unlockInteraction,n)},sync:Ext.emptyFn,needsSync:function(){return!0},startSync:function(){var n=this;n.needsSync()&&(n.lockInteraction(),n.doSyncTask.delay(1))},doSync:function(){var n=this;n.needsSync()&&n.sync(),n.unlockInteractionTask.delay(1)},cancelSync:function(){var n=this;n.startSyncTask.cancel(),n.doSyncTask.cancel(),n.unlockInteractionTask.cancel()},delaySync:function(){var n=this;n.cancelSync(),n.startSyncTask.delay(n.syncDelay)},lockInteraction:function(){var t=this,i=t.chart,r=i.el,n=t.stopEvent;t.unlockInteraction();r.on({touchstart:n,touchmove:n,touchend:n,capture:!0})},unlockInteraction:function(){var t=this,i=t.chart,r=i.el,n=t.stopEvent;r.un({touchstart:n,touchmove:n,touchend:n,capture:!0})},stopEvent:function(n){n.stopEvent()}}),Ext.chart.interactions.PanZoom=Ext.extend(Ext.chart.interactions.Abstract,{axes:{top:{},right:{},bottom:{},left:{}},showOverflowArrows:!0,gesture:"pinch",panGesture:"drag",constructor:function(n){var t=this,u=Ext.chart.interactions,r=Ext.baseCSSPrefix+"zooming",i;if(u.PanZoom.superclass.constructor.call(t,n),u.DelayedSync.prototype.constructor.call(t,n),t.showOverflowArrows)t.chart.on("redraw",t.updateAllOverflowArrows,t);i=t.axes,Ext.isArray(i)?(t.axes={},Ext.each(i,function(n){t.axes[n]={}})):Ext.isObject(i)?Ext.iterate(i,function(n,t){t===!0&&(i[n]={})}):Ext.Error.raise("Invalid value for panzoom interaction 'axes' config: '"+i+"'"),t.isMultiTouch()||(t.zoomOnPanGesture=!0,t.modeToggleButton=t.chart.getToolbar().add({cls:Ext.baseCSSPrefix+"panzoom-toggle "+r,iconCls:Ext.baseCSSPrefix+"panzoom-toggle-icon",iconMask:!0,handler:function(){var n=this,i=t.zoomOnPanGesture=!t.zoomOnPanGesture;i?n.addCls(r):n.removeCls(r)}}))},initEvents:function(){var n=this;Ext.chart.interactions.PanZoom.superclass.initEvents.call(n,arguments),n.addChartListener(n.gesture+"start",n.onGestureStart,n),n.addChartListener(n.gesture+"end",n.onGestureEnd,n),n.addChartListener(n.panGesture+"start",n.onPanGestureStart,n),n.addChartListener(n.panGesture,n.onPanGesture,n),n.addChartListener(n.panGesture+"end",n.onPanGestureEnd,n)},initializeDefaults:function(n){var t=this;n&&n.type!="beforerender"||(t.onGestureStart(),t.onPanGestureStart(),t.chart.axes.each(function(n){if(t.axes[n.position]){var u=t.axes[n.position],i=u.startPan||0,r=u.startZoom||1;(i!=0||r!=1)&&t.transformAxisBy(n,i,i,r,r)}})),n&&n.type!="afterrender"||(t.onGestureEnd(),t.onPanGestureEnd())},getInteractiveAxes:function(){var n=this,t=n.axes;return n.chart.axes.filterBy(function(n){return!!t[n.position]})},isEventOnAxis:function(n,t){var i=Ext.util;return!i.Region.getRegion(t.getSurface().el).isOutOfBound(i.Point.fromEvent(n))},sync:function(){var t=this,n=t.chart,r=n.animate,i=t.getInteractiveAxes();n.animate=!1,n.endsLocked=!0,i.each(function(n){n.hasFastTransform()&&(n.syncToFastTransform(),n.drawAxis(),n.renderFrame())}),t.getSeriesForAxes(i).each(function(n){n.hasFastTransform()&&(n.syncToFastTransform(),n.drawSeries(),n.getSurface().renderFrame())}),n.endsLocked=!1,n.animate=r},needsSync:function(){return!!this.getInteractiveAxes().findBy(function(n){return n.hasFastTransform()})},transformAxisBy:function(n,t,i,r,u){function c(n){var t=n.getTransformMatrix().clone(),r,u,i;h!==0&&t.translate(f?0:h,f?h:0),e!==1&&(r=t.get(+f,+f),v(l)&&(e=Math.max(e,l/r)),v(y)&&(e=Math.min(e,y/r)),u=t.invert(),t.scale(f?1:e,f?e:1,u.x(o/2,0),u.y(0,o/2))),i=t[f?"y":"x"](0,0),i>0&&t.translate(f?0:-i,f?-i:0),i=o-t[f?"y":"x"](o,o),i>0&&t.translate(f?0:i,f?i:0),n.setTransformMatrixFast(t)}var s=this,a=s.axes[n.position],l=a.minZoom||1,y=a.maxZoom||4,v=Ext.isNumber,o=n.length,f=n.isSide(),h=f?i:t,e=f?u:r;c(n),n.getBoundSeries().each(c),s.showOverflowArrows&&s.updateAxisOverflowArrows(n)},getPannableAxes:function(n){var i=this,r=i.axes,t;return i.chart.axes.filterBy(function(u){return t=r[u.position],t&&t.allowPan!==!1&&i.isEventOnAxis(n,u)})},panBy:function(n,t,i){n.each(function(n){this.transformAxisBy(n,t,i,1,1)},this)},onPanGestureStart:function(n){if(!n||!n.touches||n.touches.length<2){var t=this;if(t.cancelSync(),t.zoomOnPanGesture)t.onGestureStart(n)}},onPanGesture:function(n){if(!n.touches||n.touches.length<2){var t=this;t.zoomOnPanGesture?t.zoomBy(t.getZoomableAxes(n),(n.previousX+n.previousDeltaX)/n.previousX,n.previousY/(n.previousY+n.previousDeltaY)):t.panBy(t.getPannableAxes(n),n.previousDeltaX,n.previousDeltaY)}},onPanGestureEnd:function(n){var t=this;if(t.zoomOnPanGesture)t.onGestureEnd(n);else t.delaySync()},getSeriesForAxes:function(n){var t=new Ext.util.MixedCollection(!1,function(n){return n.seriesId});return n.each(function(n){t.addAll(n.getBoundSeries().items)}),t},getZoomableAxes:function(n){var i=this,r=i.axes,t;return i.chart.axes.filterBy(function(u){return t=r[u.position],t&&t.allowZoom!==!1&&(!n||i.isEventOnAxis(n,u))})},zoomBy:function(n,t,i){n.each(function(n){this.transformAxisBy(n,0,0,t,i)},this)},onGestureStart:function(n){var t=this;t.cancelSync(),t.getZoomableAxes(n).each(function(n){n.hideLabels(),n.getLabelSurface().renderFrame()})},onGesture:function(n){var r=this,f=Math.abs,t=f(n.secondPageX-n.firstPageX),i=f(n.secondPageY-n.firstPageY),u=r.lastZoomDistances||[t,i],o=t<30?1:t/(u[0]||t),e=i<30?1:i/(u[1]||i);r.zoomBy(r.getZoomableAxes(n),o,e),r.lastZoomDistances=[t,i]},onGestureEnd:function(n){var t=this;t.getZoomableAxes(n).each(function(n){n.hasFastTransform()||(n.drawLabel(),n.getLabelSurface().renderFrame())}),t.delaySync(),delete t.lastZoomDistances},getOverflowArrow:function(n,t,i){var r=this,e=n.position,f=r.overflowIndicators||(r.overflowIndicators={}),u=f[e]||(f[e]={});return u[t]||(u[t]=Ext.chart.Shape.arrow(r.chart.getEventsSurface(),i))},updateAxisOverflowArrows:function(n){var i=this,e=n.isSide(),y=n.position,h=i.axes[y].allowPan!==!1,s=n.length,p=i.chart,t=p.chartBBox,u=n.getTransformMatrix(),a=Ext.apply({hidden:!0,radius:5,opacity:.3,fill:n.style.stroke},i.overflowArrowOptions),v=Math,l=v.ceil,c=v.floor,o=i.getOverflowArrow(n,"up",a),f=i.getOverflowArrow(n,"down",a),r;h&&(e?l(u.y(0,0))<0:c(u.x(s,0))>s)?(r=e?["M",t.x,t.y,"l",t.width/2,0,0,5,-10,10,20,0,-10,-10,0,-5,t.width/2,0,0,20,-t.width,0,"z"].join(","):["M",t.x+t.width,t.y,"l",0,t.height/2,-5,0,-10,-10,0,20,10,-10,5,0,0,t.height/2,-20,0,0,-t.height,"z"].join(","),o.setAttributes({hidden:!1,path:r})):o.hide(),h&&(e?c(u.y(0,s))>s:l(u.x(0,0))<0)?(r=e?["M",t.x,t.y+t.height,"l",t.width/2,0,0,-5,-10,-10,20,0,-10,10,0,5,t.width/2,0,0,-20,-t.width,0,"z"].join(","):["M",t.x,t.y,"l",0,t.height/2,5,0,10,-10,0,20,-10,-10,-5,0,0,t.height/2,20,0,0,-t.height,"z"].join(","),f.setAttributes({hidden:!1,path:r})):f.hide(),(o.dirtyTransform||o.dirtyHidden||f.dirtyTransform||f.dirtyHidden)&&i.chart.getEventsSurface().renderFrame()},updateAllOverflowArrows:function(){var n=this;n.getInteractiveAxes().each(n.updateAxisOverflowArrows,n)}}),Ext.applyIf(Ext.chart.interactions.PanZoom.prototype,Ext.chart.interactions.DelayedSync.prototype),Ext.chart.interactions.Manager.registerType("panzoom",Ext.chart.interactions.PanZoom),Ext.chart.interactions.PieGrouping=Ext.extend(Ext.chart.interactions.Abstract,{type:"piegrouping",gesture:"tap",resizeGesture:"drag",outset:6,onSelectionChange:Ext.emptyFn,constructor:function(n){this.addEvents("selectionchange"),Ext.chart.interactions.PieGrouping.superclass.constructor.call(this,n),this.handleStyle=new Ext.chart.interactions.PieGrouping.HandleStyle,this.sliceStyle=new Ext.chart.interactions.PieGrouping.SliceStyle},initEvents:function(){Ext.chart.interactions.PieGrouping.superclass.initEvents.call(this,arguments);var n=this,t=n.resizeGesture;n.addChartListener(t+"start",n.onResizeStart,n),n.addChartListener(t,n.onResize,n),n.addChartListener(t+"end",n.onResizeEnd,n)},onGesture:function(n){var t=this,s=t.outset,i=t.getItemForEvent(n),u=t.handleStyle.style,h=t.sliceStyle.style,r,o,e,f;t.active&&(!i||t.getSelectedItems().indexOf(i)<0)&&t.cancel(),!t.active&&i&&(r=t.getSeries().getOverlaySurface(),o=i.startAngle,e=i.endAngle,t.slice={startAngle:o,endAngle:e,sprite:r.add(Ext.applyIf({type:"path"},h))},f="M"+Math.max(i.startRho-s,0)+",0L"+(i.endRho+s)+",0",t.startHandle={angle:o,sprite:r.add(Ext.applyIf({type:"path",path:f+"l5,-8l-10,0l5,8",fill:u.stroke},u))},t.endHandle={angle:e,sprite:r.add(Ext.applyIf({type:"path",path:f+"l5,8l-10,0l5,-8",fill:u.stroke},u))},t.mon(t.getSeries(),"draw",t.onSeriesDraw,t),t.active=!0,t.updateSprites(),t.fireSelectionChange())},onResizeStart:function(n){var t=this,o=Math.abs,f=t.normalizeAngle,e=t.startHandle,s=t.endHandle,r=t.resizeGesture,i,u;t.active&&(u=f(t.getAngleForEvent(n)),o(u-f(e.angle))<10?i=e:o(u-f(s.angle))<10&&(i=s),i&&t.lockEvents(r+"start",r,r+"end"),t.activeHandle=i)},onResize:function(n){var r=this,o=r.activeHandle,e=r.snapWhileDragging,f=r.slice,i,t,s=!1,u;if(o){if(i=f.startAngle,t=f.endAngle,u=r.getAngleForEvent(n),o.angle=u,o===r.startHandle){for(i=e?r.snapToItemAngles(u,0)[0]:u;i>t;)i-=360;while(i<=t)i+=360;f.startAngle===i&&e||(s=!0),f.startAngle=i}else{for(t=e?r.snapToItemAngles(0,u)[1]:u;i>t;)t+=360;while(i<=t)t-=360;f.endAngle===t&&e||(s=!0),f.endAngle=t}r.updateSprites(),s&&e&&r.fireSelectionChange()}},onResizeEnd:function(){var t=this,c=t.activeHandle,e=t.startHandle,o=t.endHandle,f=t.slice,h=t.closestAngle,s=t.resizeGesture,u,r,i;if(c){if(u=t.snapToItemAngles(e.angle,o.angle),r=f.startAngle,i=f.endAngle,c===e){for(e.angle=h(u[0],e.angle,1),r=u[0];r>i;)r-=360;while(r<=i)r+=360;f.startAngle=r}else{for(o.angle=h(u[1],o.angle,0),i=u[1];r>i;)i+=360;while(r<=i)i-=360;f.endAngle=i}t.updateSprites(!0),t.snapWhileDragging||t.fireSelectionChange(),delete t.activeHandle,t.unlockEvents(s+"start",s,s+"end")}},onSeriesDraw:function(){var n=this,s=n.startHandle,o=n.endHandle,t=n.slice,i=n.lastSelection,e,f,r,u;if(n.active&&i)if(e=i[0],f=i[i.length-1],r=n.findItemByRecord(e.storeItem),u=n.findItemByRecord(f.storeItem),r&&u){for(s.angle=t.startAngle=r.startAngle,o.angle=t.endAngle=u.endAngle;t.startAngle>t.endAngle;)t.startAngle-=360;while(t.startAngle<=t.endAngle)t.startAngle+=360;n.updateSprites(),n.fireSelectionChange()}else n.cancel()},findItemByRecord:function(n){for(var i=this.getSeries().items,t=i.length;t--;)if(i[t]&&i[t].storeItem===n)return i[t]},normalizeAngle:function(n){while(n<0)n+=360;return n%360},fireSelectionChange:function(){var n=this,t=n.getSelectedItems();n.onSelectionChange(n,t);n.fireEvent("selectionchange",n,t),n.lastSelection=t},renderFrame:function(){this.getSeries().getOverlaySurface().renderFrame()},updateSprites:function(n){var i=this,u=i.getSeries(),f=i.startHandle,e=i.endHandle,l=f.angle,h=e.angle,a=u.centerX,v=u.centerY,r=i.slice,c=i.outset,o,s,t;i.active&&(t={rotate:{degrees:l,x:0,y:0},translate:{x:a,y:v}},n?(f.sprite.stopAnimation(),f.sprite.animate({to:t})):f.sprite.setAttributes(t,!0),t={rotate:{degrees:h,x:0,y:0},translate:{x:a,y:v}},n?(e.sprite.stopAnimation(),e.sprite.animate({to:t})):e.sprite.setAttributes(t,!0),o=u.getItemForAngle(l-1e-9),s=u.getItemForAngle(h+1e-9),t={segment:{startAngle:r.startAngle,endAngle:r.endAngle,startRho:Math.max(Math.min(o.startRho,s.startRho)-c,0),endRho:Math.min(o.endRho,s.endRho)+c}},n?(r.sprite.stopAnimation(),r.sprite.animate({to:t})):r.sprite.setAttributes(t,!0),n||i.renderFrame())},snapToItemAngles:function(n,t){var f=this,i=f.getSeries(),u=i.getItemForAngle(n-1e-9),r=i.getItemForAngle(t+1e-9);return[u.startAngle,r.endAngle]},closestAngle:function(n,t,i){if(i){while(n>t)n-=360;while(n<t)n+=360}else{while(n<t)n+=360;while(n>t)n-=360}return n},cancel:function(){var n=this,t;n.active&&(t=n.getSeries(),Ext.destroy(n.startHandle.sprite,n.endHandle.sprite,n.slice.sprite),n.active=!1,n.startHandle=n.endHandle=n.slice=null,n.fireSelectionChange(),n.renderFrame(),n.mun(t,"draw",n.onSeriesDraw,n))},getSelectedItems:function(){var u=this,e=u.slice,t,f=u.getSeries(),n,i,r;return u.active&&(n=u.getSeries().items,i=n.indexOf(f.getItemForAngle(e.startAngle-1e-9)),r=n.indexOf(f.getItemForAngle(e.endAngle+1e-9)),t=i<=r?n.slice(i,r+1):n.slice(i).concat(n.slice(0,r+1)),t=t.filter(function(n,t,i){return t in i})),t||[]},getAngleForEvent:function(n){var r=this,t=r.getSeries(),i=t.getSurface().el.getXY();return Ext.draw.Draw.degrees(Math.atan2(n.pageY-t.centerY-i[1],n.pageX-t.centerX-i[0]))},getSeries:function(){var t=this,n=t._series;return n||(n=t._series=t.chart.series.findBy(function(n){return n.type==="pie"}),n.getOverlaySurface().customAttributes.segment=function(t){return n.getSegment(t)}),n},getRefItems:function(){return[this.handleStyle,this.sliceStyle]}}),Ext.chart.interactions.Manager.registerType("piegrouping",Ext.chart.interactions.PieGrouping),Ext.chart.interactions.PieGrouping.HandleStyle=Ext.extend(Ext.chart.theme.Style,{isXType:function(n){return n==="handle"}}),Ext.chart.interactions.PieGrouping.SliceStyle=Ext.extend(Ext.chart.theme.Style,{isXType:function(n){return n==="slice"}}),Ext.chart.interactions.Rotate=Ext.extend(Ext.chart.interactions.Abstract,{gesture:"drag",constructor:function(n){var i=this,t=Ext.chart.interactions;t.Rotate.superclass.constructor.call(i,n),t.DelayedSync.prototype.constructor.call(i,n)},initEvents:function(){Ext.chart.interactions.Rotate.superclass.initEvents.call(this,arguments);var n=this,t=n.gesture;n.addChartListener(t+"start",n.onGestureStart,n),n.addChartListener(t+"end",n.onGestureEnd,n)},onGestureStart:function(){var t=this,n=t.getAxis();t.cancelSync(),t.getSeries().each(function(n){n.unHighlightItem(),n.origHighlight=n.highlight,n.highlight=!1,n.callouts&&(n.hideCallouts(0),n.getSurface().renderFrame())}),n&&n.position==="radial"&&(n.hideLabels(),n.renderFrame())},onGesture:function(n){var i=this,u=i.lastAngle,o,s,h,e,r,f,t,c;i.gesture==="pinch"?(o=n.firstPageX,h=n.firstPageY,s=n.secondPageX,e=n.secondPageY):(r=i.getSeries().get(0),f=r.getSurface().el.getXY(),o=r.centerX+f[0],h=r.centerY+f[1],s=n.pageX,e=n.pageY),t=Ext.draw.Draw.degrees(Math.atan2(e-h,s-o)),u===c&&(u=t),u!==t&&i.rotateBy(t-u),i.lastAngle=t},onGestureEnd:function(){var n=this;n.delaySync(),n.getSeries().each(function(n){n.highlight=n.origHighlight}),delete n.lastAngle},rotateBy:function(n){var r=this,u=r.getSeries(),i=r.getAxis(),t;r.rotation=(r.rotation||0)+n,u.each(function(i){t=i.getFastTransformMatrix(),t.rotate(n,i.centerX,i.centerY),i.setFastTransformMatrix(t)}),i&&(t=i.getFastTransformMatrix(),t.rotate(n,i.centerX,i.centerY),i.setFastTransformMatrix(t))},seriesFilter:function(n){return n.type==="pie"||n.type==="radar"},getSeries:function(){return this.chart.series.filter(this.seriesFilter)},axisFilter:function(n){return n.position==="radial"},getAxis:function(){return this.chart.axes.findBy(this.axisFilter)},sync:function(){var n=this,i=n.chart,t=n.getAxis(),r=i.animate;i.animate=!1,n.getSeries().each(function(t){t.rotation-=n.rotation,t.drawSeries(),t.getSurface().renderFrame(),t.clearTransform()}),t&&(t.rotation-=n.rotation,t.drawAxis(),t.renderFrame(),t.clearTransform()),i.animate=r,n.rotation=0},needsSync:function(){return!!this.rotation}}),Ext.applyIf(Ext.chart.interactions.Rotate.prototype,Ext.chart.interactions.DelayedSync.prototype),Ext.chart.interactions.Manager.registerType("rotate",Ext.chart.interactions.Rotate),Ext.chart.interactions.ItemCompare=Ext.extend(Ext.chart.interactions.Abstract,{gesture:"tap",type:"itemcompare",constructor:function(n){var t=this;t.addEvents("show","hide"),t.circleStyle=new(Ext.extend(Ext.chart.theme.Style,{isXType:function(n){return n==="circle"}}))(n.circle),t.lineStyle=new(Ext.extend(Ext.chart.theme.Style,{isXType:function(n){return n==="line"}}))(n.line),t.arrowStyle=new(Ext.extend(Ext.chart.theme.Style,{isXType:function(n){return n==="arrow"}}))(n.arrow),delete n.line,delete n.circle,delete n.arrow;n.chart.on("refresh",t.reset,t);Ext.chart.interactions.ItemCompare.superclass.constructor.call(this,n)},onGesture:function(n){var t=this,i=t.getItemForEvent(n);i?(t.item1&&t.item2&&t.reset(),t.item1?t.item1.series!=i.series?t.reset():i!==t.item1&&(t.item2=i,i.series.highlightItem(i),t.showOverlay()):(t.item1=i,i.series.highlightItem(i))):t.reset()},reset:function(){var n=this,t=n.activeSeries;t&&(n.line.remove(),n.circle.remove(),n.arrow.remove(),t.unHighlightItem(),t.un("transform",n.onSeriesTransform,n),t.getOverlaySurface().renderFrame(),delete n.activeSeries),n.item1=n.item2=null,n.fireEvent("hide",n)},onSeriesTransform:function(n,t){t||this.renderSprites()},showOverlay:function(){var n=this,t=n.item1.series;n.activeSeries=t;t.on("transform",n.onSeriesTransform,n);n.renderSprites(),n.fireEvent("show",n)},initSprites:function(){var n=this,i=Ext.draw.Sprite,r=n.arrowStyle.style,t;n.line||(n.line=new i(Ext.apply({type:"path",path:["M",0,0]},n.lineStyle.style)),n.circle=new i(Ext.apply({type:"circle",radius:3},n.circleStyle.style)),t=r.radius||3,n.arrow=new i(Ext.apply({type:"path",path:"M".concat("0,0m0-",t*.58,"l",t*.5,",",t*.87,"-",t,",0z")},r)))},renderSprites:function(){var n=this,y=n.item1,w=n.item2,p=y.series,l,i,t,c,v,a,u,r,f,s,h,e,o;p&&(n.initSprites(),l=p.getOverlaySurface(),i=y.point,t=w.point,c=n.offset||{},v=c.x||0,a=c.y||0,u=i[0]+v,r=i[1]+a,f=t[0]+v,s=t[1]+a,h=n.line,e=n.circle,o=n.arrow,h.setAttributes({path:["M",u,r,"L",f,s]}),e.setAttributes({translate:{x:u,y:r}}),o.setAttributes({translate:{x:f,y:s},rotate:{x:0,y:0,degrees:Math.atan2(t[1]-i[1],t[0]-i[0])*180/Math.PI- -90}}),l.add(h,e,o),l.renderFrame())},getRefItems:function(){var t=this;return[t.arrowStyle,t.lineStyle,t.circleStyle]}}),Ext.chart.interactions.Manager.registerType("itemcompare",Ext.chart.interactions.ItemCompare),Ext.chart.interactions.ItemHighlight=Ext.extend(Ext.chart.interactions.Abstract,{gesture:"tap",unHighlightEvent:"touchstart",initEvents:function(){var n=this;Ext.chart.interactions.ItemHighlight.superclass.initEvents.call(n,arguments),n.addChartListener(n.unHighlightEvent,n.onUnHighlightEvent,n)},onGesture:function(n){for(var o=this,e=o.getItemsForEvent(n),t,u,r,i=0,f=e.length;i<f;i++)t=e[i],r=t.series,u=r.highlightedItem,u!==t&&(u&&u.series.unHighlightItem(),r.highlightItem(t),r.highlightedItem=t)},onUnHighlightEvent:function(n){var u=this,i=u.chart,r=i.getEventXY(n),t;i.series.each(function(n){t=n.highlightedItem,t&&t!==n.getItemForPoint(r[0],r[1])&&(n.unHighlightItem(),delete n.highlightedItem)})}}),Ext.chart.interactions.Manager.registerType("itemhighlight",Ext.chart.interactions.ItemHighlight),Ext.chart.interactions.ItemInfo=Ext.extend(Ext.chart.interactions.Abstract,{gesture:"tap",constructor:function(n){var t=this;t.addEvents("show"),Ext.chart.interactions.ItemInfo.superclass.constructor.call(t,n)},getPanel:function(){var n=this,t=n.infoPanel;return t||(t=n.infoPanel=new Ext.Panel(Ext.apply({floating:!0,modal:!0,centered:!0,width:250,styleHtmlContent:!0,scroll:"vertical",dockedItems:[{dock:"top",xtype:"toolbar",title:"Item Detail"}],stopMaskTapEvent:!1,fullscreen:!1,listeners:{hide:n.reset,scope:n}},n.panel))),t},onGesture:function(n){var i=this,t=i.getItemForEvent(n),r;t&&(i.item=t,t.series.highlightItem(t),r=i.getPanel(),i.fireEvent("show",i,t,r),r.show("pop"))},reset:function(){var t=this,n=t.item;n&&(n.series.unHighlightItem(n),delete t.item)}}),Ext.chart.interactions.Manager.registerType("iteminfo",Ext.chart.interactions.ItemInfo),Ext.chart.interactions.Reset=Ext.extend(Ext.chart.interactions.Abstract,{gesture:"doubletap",confirmTitle:"Reset",confirmText:"Reset the chart?",onGesture:function(n){var t=this,i=t.chart;t.getItemForEvent(n)||(t.confirm?Ext.Msg.confirm(t.confirmTitle,t.confirmText,function(n){n==="yes"&&i.reset()}):i.reset())}}),Ext.chart.interactions.Manager.registerType("reset",Ext.chart.interactions.Reset),Ext.chart.interactions.ToggleStacked=Ext.extend(Ext.chart.interactions.Abstract,{gesture:"swipe",onGesture:function(){var i=this,r=i.chart,t=i.getSeries();t&&(r.animate&&!i.animateDirect?i.locked||(i.lock(),t.stacked?(t.disjointStacked=!0,i.afterAnim(t,function(){t.stacked=t.disjointStacked=!1,i.afterAnim(t,i.unlock),r.redraw()}),t.drawSeries()):(t.stacked=t.disjointStacked=!0,i.afterAnim(t,function(){t.disjointStacked=!1,i.afterAnim(t,i.unlock),t.drawSeries()}),r.redraw())):(t.stacked=!t.stacked,r.redraw()))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},afterAnim:function(n,t){n.on("afterrender",t,this,{single:!0,delay:1})},getSeries:function(){return this.chart.series.findBy(function(n){return n.type==="bar"||n.type==="column"})}}),Ext.chart.interactions.Manager.registerType("togglestacked",Ext.chart.interactions.ToggleStacked)





