





var branchLocatorOptionsDiv=null;var atmLocatorOptionsDiv=null;var view=1;$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,slideleftSelector:".swipeMe",preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){$("#webpage").show();var a=webkitVersion();if(a=="530.17"){webkitVersion53017=true}if(a=="534.30"){disableLinksByElement("atmLocatorOptions");setTimeout(function(){enableLinksByElement("atmLocatorOptions")},300)}var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();branchLocatorOptionsDiv=$("#branchLocatorOptions");atmLocatorOptionsDiv=$("#atmLocatorOptions").show();$(".swipeMe").swipe(toggleSwitch);$(".switch").on("click",toggleSwitch);initIscroller();sessionStorage.removeItem("searchATMLocation");sessionStorage.removeItem("searchBranchLocation");sessionStorage.removeItem("findBranchFlag");sessionStorage.removeItem("findATMFlag")});function toggleSwitch(b,a){if(stopDoubleSwipeEvent){return false}stopDoubleSwipeEvent=true;setTimeout(function(){stopDoubleSwipeEvent=false},500);console.log("e = "+b+". info = "+a);b.preventDefault();$(".switch-button").toggleClass("switchRight");if(view===1){view=2;atmLocatorOptionsDiv.hide();branchLocatorOptionsDiv.show();$("#atmToggle").prop("checked",false);$("#branchToggle").prop("checked",true)}else{view=1;branchLocatorOptionsDiv.hide();atmLocatorOptionsDiv.show();$("#branchToggle").prop("checked",false);$("#atmToggle").prop("checked",true)}$("#branchToggleLabel").toggleClass("switchHighlight");$("#atmToggleLabel").toggleClass("switchHighlight");refreshScroller();return};






var branchlistDiv=null;var fsearchDiv=null;var locatorOptionsDiv=null;var watchID=null;var branchList=new Array();var myLocation=null;$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv=$("#loading").hide();var a=webkitVersion();if(a=="530.17"){webkitVersion53017=true}if(a=="534.13"){$("input").addClass("roundedInset");$(".ftbbutton").addClass("rounded")}var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#search").bind("click",searchBranches);fsearchDiv=$("#fsearch");branchlistDiv=$("#branchlist").hide();errorDiv=$("#error").hide();$("#navFooter").show();simulateFakeActiveState("ftbbutton");initIscroller();myLocation=sessionStorage.getItem("searchBranchLocation");if((myLocation!=null)&&(myLocation!="")){errorText="";fsearchDiv.hide();loadingDiv.show();document.addEventListener("deviceready",performAJAXCall,false)}return});function searchBranches(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);myLocation=$("#fsearch input[name=myLocation]").val();if((myLocation==null)||(myLocation=="")){console.log("Please enter a location.");navigator.notification.alert("Please enter a location.",null,"","Okay");return false}sessionStorage.setItem("searchBranchLocation",myLocation);errorText="";fsearchDiv.hide();loadingDiv.show();document.addEventListener("deviceready",performAJAXCall,false)}function performAJAXCall(){if(!checkConnection()){document.location.href="NetworkError.html";return false}var b="www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-android-search-branches&type=branch";var a=$.param({requestAddress:myLocation});$.ajax({type:"GET",url:b,data:a,cache:false,timeout:10000,cache:false,async:false,crossDomain:true,dataType:"html",success:parseResponse,error:parseError});return true}function parseResponse(j){console.log("Parsing Response");j=j.replace(/^\s\s*/,"").replace(/\s\s*$/,"");parser=new DOMParser(j);j=parser.parseFromString(j,"text/xml");var e="";var c="";var g="";var d="";var h="";var f=0;var i="";var a='<li class="whiteListItem nohover"><h3>Nearest Branches...</h3></li>';$(j).find("location").each(function(){f+=1;e=$(this).find("branchID").text();c=$(this).find("branchName").text();$(this).find("details").each(function(){g=$(this).find("address").text();d=$(this).find("lat").text();h=$(this).find("long").text()});branchList[f]={branchID:e,branchName:c,address:g,latitude:d,longditude:h};var m="0KM";if($(this).find("branchDistance").text()!=""){m=$(this).find("branchDistance").text()}m=m.replace(/ /g,"");m=m.replace(/([K])/g," $1");m=m.split(" ");var l=m[0];var k=m[1];i='<li class="whiteListItem arrow"><div class="leftBranchListBoxUpper"><a href="javascript:getBranchMap('+f+')"><p><span class="emphasis">'+l+"</span>"+k+'</p></a></div><div class="rightBranchListBoxUpper"><a href="javascript:getBranchDetails('+f+')">'+c+'</a></div><div class="leftBranchListBoxLower"><a href="javascript:getBranchMap('+f+')"><img src="images/icons/glyphish-icons/custom/103-map-orange.png" alt="Find on Map"/></a></div><div class="rightBranchListBoxLower"><a href="javascript:getBranchDetails('+f+')"><p>'+g+"</p></a></div></li>";a+=i});if(f===0){console.log("No results in Search Branch Ajax response.");var b="Your search has returned no results.";htmlError(b);return false}branchlistDiv.html(a);loadingDiv.hide();branchlistDiv.show();document.addEventListener("backbutton",onBackButtonPress,false);refreshScroller()}function parseError(b){var a="Unfortunately the Branch List is temporarily unavailable on our server, please try again later.<br><br>We apologise for any inconvenience this may cause.";htmlError(a)}function onBackButtonPress(a){branchlistDiv.hide();branchlistDiv.html("");fsearchDiv.show();sessionStorage.removeItem("searchBranchLocation");document.removeEventListener("backbutton",onBackButtonPress,false);refreshScroller();a.preventDefault()}function getBranchDetails(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);document.removeEventListener("backbutton",onBackButtonPress,false);sessionStorage.setItem("branchID",branchList[a].branchID);sessionStorage.setItem("findBranchFlag",false);document.location.href="BranchDetails.html"}function getBranchMap(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);document.removeEventListener("backbutton",onBackButtonPress,false);sessionStorage.setItem("branchID",branchList[a].branchID);sessionStorage.setItem("branchName",branchList[a].branchName);sessionStorage.setItem("address",branchList[a].address);sessionStorage.setItem("latitude",branchList[a].latitude);sessionStorage.setItem("longditude",branchList[a].longditude);sessionStorage.setItem("findBranchFlag",false);document.location.href="FindBranchOnMap.html"};






var externalUrl="";var twitterLinkDiv="";var isFetchingData;$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-blue.png"]});$(document).ready(function(){twitterLinkDiv=$("#twitter-link");twitterLinkDiv.hide();loadTwitterFeed_AJAXCall();$("#webpage").show();var a=$(".container");if(a.height()<($(window).height()-60)){a.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller()});function loadTwitterFeed_AJAXCall(){if(stopDoubleClickEvent){return}else{stopDoubleClick()}if(isFetchingData){return}else{isFetchingData=true}if(debug){console.log("Fetching Twitter Feed")}var a="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/include-twitter";$.ajax({type:"GET",url:a,timeout:10000,cache:true,async:false,crossDomain:true,dataType:"xml",success:function(b){parseTwitterFeed(b)},error:twitterFeedError})}function parseTwitterFeed(b){if(debug){console.log("Parsing Response")}var a="";var c=$(b).find("include-twitter").text();if(c=="yes"){if(debug){console.log("Twitter is avaiable")}a+='<a href="Twitter.html" rel="external" >Twitter</a>';twitterLinkDiv.html(a);twitterLinkDiv.show()}}function twitterFeedError(b,c,a){}function openExternalUrl(a){if(stopDoubleClickEvent){return}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);console.log("URL = "+a);externalUrl=a;navigator.notification.confirm("You will open your mobile web browser to complete this request?",confirmationCallback,"","Yes, No");return true}function confirmationCallback(a){if(a==1){console.log("Yes Pressed");window.location.href=externalUrl}else{console.log("Not Yes Pressed");return false}return true}function aboutApp(){if(stopDoubleClickEvent){return}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);displayAppInfo()}function exitApp(){if(stopDoubleClickEvent){return}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);navigator.notification.confirm("Exit the First Trust Bank Mobile app ?",exitConfirmationCallback,"","Yes, No")}function exitConfirmationCallback(a){if(a==1){console.log("Yes Pressed");localStorage.clear();navigator.app.exitApp()}else{console.log("No Pressed");return false}return true};






$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-blue.png"]});$(document).ready(function(){$("#webpage").show();var b=0;var a=webkitVersion();if(a=="530.17"){webkitVersion53017=true}if(a=="534.13"){webkitVersion53413=true}if(a=="534.30"){webkitVersion53430=true;b=300}var c=$(".container");if(c.height()<($(window).height()-60)){c.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller();setTimeout(function(){console.log("Using on Click");$(".leftCollapsibleBox").click(iconClick);$(".collapsibleHeader").click(headerClick)},b);$(".collapsibleBody").hide();refreshScroller()});function iconClick(){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);if($(this).children().children().prop("src")=="images/icons/button_plus_mini.png"){$(this).children().children().prop("src","images/icons/button_minus_mini.png")}else{if($(this).children().children().prop("src")=="images/icons/button_minus_mini.png"){$(this).children().children().prop("src","images/icons/button_plus_mini.png")}}$(this).next(".collapsibleHeader").next(".collapsibleBody").toggle();refreshScroller();return false}function headerClick(){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);if($(this).prev(".leftCollapsibleBox").children().children().prop("src")=="images/icons/button_plus_mini.png"){$(this).prev(".leftCollapsibleBox").children().children().prop("src","images/icons/button_minus_mini.png")}else{if($(this).prev(".leftCollapsibleBox").children().children().prop("src")=="images/icons/button_minus_mini.png"){$(this).prev(".leftCollapsibleBox").children().children().prop("src","images/icons/button_plus_mini.png")}}$(this).next(".collapsibleBody").toggle();refreshScroller();return false};






$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,touchSelector:"a, .touch",useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-blue.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png","images/icons/glyphish-icons/custom/54-lock-white.png","images/icons/glyphish-icons/custom/06-magnify-white.png","images/icons/glyphish-icons/custom/161-calculator-white.png","images/icons/glyphish-icons/custom/112-group-white.png"]});$(document).ready(function(){if(typeof(nativeAppUtils)!="undefined"){if(debug){console.log("nativeAppUtils defined in JS")}var a=new String(nativeAppUtils.getComplianceText());if(debug){console.log("Compliance text = "+a)}if(a!=""){$("#complianceText").html("<p>"+a+"</p>")}if(debug){console.log("Compliance text SET")}}$("#webpage").show();var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller()});






var findATMFlag=false;var atmdetailDiv=null;$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();var a=webkitVersion();if(a=="534.13"){webkitVersion53413=true}var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();simulateFakeActiveState("ftbbutton");atmdetailDiv=$("atmdetail").hide();errorDiv=$("error").hide();initIscroller();document.addEventListener("deviceready",performAJAXCall,false)});function performAJAXCall(){var b=sessionStorage.getItem("atmID");if(sessionStorage.getItem("findATMFlag")=="true"){findATMFlag=true}if(!checkConnection()){document.location.href="NetworkError.html";return false}var a="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-branches-detail&type=atm&branchID="+b;$.ajax({type:"GET",url:a,timeout:10000,cache:true,async:false,crossDomain:true,dataType:"html",success:parseResponse,error:parseError})}function parseResponse(c){console.log("Parse Ajax Response;");c=c.replace(/^\s\s*/,"").replace(/\s\s*$/,"");parser=new DOMParser(c);c=parser.parseFromString(c,"text/xml");var b='<ul class="whiteList rounded">';var a="";atmID="N/A";atmName="N/A";address="N/A";sortcode="N/A";telephone="N/A";fax="N/A";latitude="N/A";longditude="N/A";atm="N/A";if(($(c).find("branchID").text()!="")&&($(c).find("branchID").text()!=null)){atmID=$(c).find("branchID").text()}else{parseError();return false}if($(c).find("branchName").text()!=""){atmName=$(c).find("branchName").text()}$(c).find("details").each(function(){if($(this).find("address").text()!=""){address=$(this).find("address").text()}if($(this).find("lat").text()!=""){latitude=$(this).find("lat").text()}if($(this).find("long").text()!=""){longditude=$(this).find("long").text()}a='<li class="whiteListItem nohover"><h3>'+atmName+"</h3></li>";a+='<li class="whiteListItem nohover noBorder"></li><li class="whiteListItem nohover noBorder"><p>'+address+"</p></li>";if(webkitVersion53413){a+='<li class="whiteListItem nohover noBorder"><div class="ftbbutton blue mapusGradient rounded big">'}else{a+='<li class="whiteListItem nohover noBorder"><div class="ftbbutton blue mapusGradient big">'}a+='<a href="javascript:getATMMap(0)"><p>Locate First Trust<br>Bank ATM</p></a></div></li>';if(findATMFlag){if(webkitVersion53413){a+='<li class="whiteListItem nohover"><div class="ftbbutton blue directusGradient rounded medium">'}else{a+='<li class="whiteListItem nohover"><div class="ftbbutton blue directusGradient medium">'}a+='<a href="javascript:getATMMap(1)"><p>Get Directions</p></a></div></li>'}});b+=a;sessionStorage.setItem("atmID",atmID);sessionStorage.setItem("atmName",atmName);sessionStorage.setItem("address",address);sessionStorage.setItem("latitude",latitude);sessionStorage.setItem("longditude",longditude);b+="</ul>";$("#atmdetail").html(b);loadingDiv.hide();atmdetailDiv.show();simulateFakeActiveState();refreshScroller()}function parseError(c,d,b){var a="Unfortunately the ATM Details are temporarily unavailable on our server, please try again later.<br><br>We apologise for any inconvenience this may cause.";htmlError(a)}function getATMMap(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);sessionStorage.setItem("directions",a);document.location.href="FindATMOnMap.html"};






var atmlistDiv=null;var fsearchDiv=null;var locatorOptionsDiv=null;var watchID=null;var atmList=new Array();var myLocation=null;$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv=$("#loading").hide();var a=webkitVersion();if(a=="530.17"){webkitVersion53017=true}if(a=="534.13"){$("input").addClass("roundedInset");$(".ftbbutton").addClass("rounded")}var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#search").bind("click",searchATM);fsearchDiv=$("#fsearch");atmlistDiv=$("#atmlist").hide();errorDiv=$("#error").hide();$("#navFooter").show();simulateFakeActiveState("ftbbutton");initIscroller();myLocation=sessionStorage.getItem("searchATMLocation");if((myLocation!=null)&&(myLocation!="")){errorText="";fsearchDiv.hide();loadingDiv.show();document.addEventListener("deviceready",performAJAXCall,false)}return});function searchATM(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);myLocation=$("#fsearch input[name=myLocation]").val();if((myLocation==null)||(myLocation=="")){console.log("Please enter a location.");navigator.notification.alert("Please enter a location.",null,"","Okay");return false}sessionStorage.setItem("searchATMLocation",myLocation);errorText="";fsearchDiv.hide();loadingDiv.show();document.addEventListener("deviceready",performAJAXCall,false)}function performAJAXCall(){if(!checkConnection()){document.location.href="NetworkError.html";return false}var b="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-android-search-atms";var a=$.param({requestAddress:myLocation});$.ajax({type:"GET",url:b,data:a,cache:false,timeout:10000,cache:false,async:false,crossDomain:true,dataType:"html",success:parseResponse,error:parseError});return true}function parseResponse(j){console.log("Parsing Response");j=j.replace(/^\s\s*/,"").replace(/\s\s*$/,"");parser=new DOMParser(j);j=parser.parseFromString(j,"text/xml");var d="";var a="";var f="";var e="";var g="";var i=0;var h="";var b='<li class="whiteListItem nohover"><h3>Nearest ATMs...</h3></li>';$(j).find("location").each(function(){i+=1;d=$(this).find("branchID").text();a=$(this).find("branchName").text();$(this).find("details").each(function(){f=$(this).find("address").text();e=$(this).find("lat").text();g=$(this).find("long").text()});atmList[i]={atmID:d,atmName:a,address:f,latitude:e,longditude:g};var m="0KM";if($(this).find("branchDistance").text()!=""){m=$(this).find("branchDistance").text()}m=m.replace(/ /g,"");m=m.replace(/([K])/g," $1");m=m.split(" ");var l=m[0];var k=m[1];h='<li class="whiteListItem arrow"><div class="leftBranchListBoxUpper"><a href="javascript:getATMMap('+i+')"><p><span class="emphasis">'+l+"</span>"+k+'</p></a></div><div class="rightBranchListBoxUpper"><a href="javascript:getATMDetails('+i+')">'+a+'</a></div><div class="leftBranchListBoxLower"><a href="javascript:getATMMap('+i+')"><img src="images/icons/glyphish-icons/custom/103-map-orange.png" alt="Find on Map"/></a></div><div class="rightBranchListBoxLower"><a href="javascript:getATMDetails('+i+')"><p>'+f+"</p></a></div></li>";b+=h});if(i===0){console.log("No results in Search ATM Ajax response.");var c="Your search has returned no results.";htmlError(c);return false}atmlistDiv.html(b);loadingDiv.hide();atmlistDiv.show();document.addEventListener("backbutton",onBackButtonPress,false);refreshScroller()}function parseError(b){var a="Unfortunately the ATM List is temporarily unavailable on our server, please try again later.<br><br>We apologise for any inconvenience this may cause.";htmlError(a)}function onBackButtonPress(a){atmlistDiv.hide();atmlistDiv.html("");fsearchDiv.show();sessionStorage.removeItem("searchATMLocation");document.removeEventListener("backbutton",onBackButtonPress,false);refreshScroller();a.preventDefault()}function getATMDetails(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);document.removeEventListener("backbutton",onBackButtonPress,false);sessionStorage.setItem("atmID",atmList[a].atmID);sessionStorage.setItem("findATMFlag",false);document.location.href="ATMDetails.html"}function getATMMap(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);document.removeEventListener("backbutton",onBackButtonPress,false);sessionStorage.setItem("atmID",atmList[a].atmID);sessionStorage.setItem("atmName",atmList[a].atmName);sessionStorage.setItem("address",atmList[a].address);sessionStorage.setItem("latitude",atmList[a].latitude);sessionStorage.setItem("longditude",atmList[a].longditude);sessionStorage.setItem("findATMFlag",false);document.location.href="FindATMOnMap.html"};






$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-blue.png","images/icons/glyphish-icons/custom/75-phone-white.png"]});$(document).ready(function(){$("#webpage").show();var a=webkitVersion();if(a=="534.13"){$(".ftbbutton").addClass("rounded")}var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();simulateFakeActiveState("ftbbutton");initIscroller()});






$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,touchSelector:"a, .touch",useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-blue.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png","images/icons/glyphish-icons/custom/54-lock-white.png","images/icons/glyphish-icons/custom/06-magnify-white.png","images/icons/glyphish-icons/custom/161-calculator-white.png","images/icons/glyphish-icons/custom/112-group-white.png"]});$(document).ready(function(){if(typeof(nativeAppUtils)!="undefined"){if(debug){console.log("nativeAppUtils defined in JS")}var a=new String(nativeAppUtils.getComplianceText());if(debug){console.log("Compliance text = "+a)}if(a!=""){$("#complianceText").html("<p>"+a+"</p>")}if(debug){console.log("Compliance text SET")}}$("#webpage").show();var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller()});






var atmList=new Array();var atmlistDiv=null;$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();var a=webkitVersion();if(a=="530.17"){webkitVersion53017=true}if(a=="534.13"){webkitVersion53413=true}if(a=="534.30"){webkitVersion53430=true}atmlistDiv=$("#atmlist").hide();errorDiv=$("#error").hide();var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller();document.addEventListener("deviceready",performAJAXCall,false)});function performAJAXCall(){console.log("Ajax List ATMs Call");dataFeedURL="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-list-atm";if(!checkConnection()){document.location.href="NetworkError.html";return false}$.ajax({type:"GET",url:dataFeedURL,timeout:10000,cache:false,async:false,crossDomain:true,dataType:"html",success:parseResponse,error:parseError})}function parseResponse(d){console.log("parsing atm list response");d=d.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var e=encodeURIComponent(d);var c=e.replace(/%26/g,"&amp;");var d=decodeURIComponent(c);parser=new DOMParser(d);var d=parser.parseFromString(d,"text/xml");var b="";var a="";var f=0;$(d).find("branch-area").each(function(){var g='<li class="whiteListItem"><div class="leftCollapsibleBox"><a href="#"><img id="collapsibleImage" src="images/icons/button_plus_mini.png" alt="Collapsible"/></a></div><div class="collapsibleHeader rightCollapsibleBox"><a href="#">'+$(this).attr("name")+"</a></div>";g+='<div class="collapsibleBody">';$(this).find("branch").each(function(){if($(this).find("branch-id").text()!=""){b=$(this).find("branch-id").text();atmList[f]={atmID:b};g+='<p><a href="javascript:getATMDetails('+f+')">'+$(this).find("branch-name").text()+"</a></p>";f+=1}});g+="</div></li>";a+=g});if(f===0){console.log("No results in Search All ATMs Ajax response.");parseError();return false}loadingDiv.hide();atmlistDiv.html(a);atmlistDiv.show();refreshScroller();console.log("Using on Click");$(".leftCollapsibleBox").click(iconClick);$(".collapsibleHeader").click(headerClick);$(".collapsibleBody").hide();refreshScroller()}function parseError(b){var a="Unfortunately the ATM List is temporarily unavailable on our server, please try again later.<br><br>We apologise for any inconvenience this may cause.";htmlError(a)}function iconClick(){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);if($(this).children().children().prop("src")=="images/icons/button_plus_mini.png"){$(this).children().children().prop("src","images/icons/button_minus_mini.png")}else{if($(this).children().children().prop("src")=="images/icons/button_minus_mini.png"){$(this).children().children().prop("src","images/icons/button_plus_mini.png")}}$(this).next(".collapsibleHeader").next(".collapsibleBody").toggle();refreshScroller();return false}function headerClick(){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);if($(this).prev(".leftCollapsibleBox").children().children().prop("src")=="images/icons/button_plus_mini.png"){$(this).prev(".leftCollapsibleBox").children().children().prop("src","images/icons/button_minus_mini.png")}else{if($(this).prev(".leftCollapsibleBox").children().children().prop("src")=="images/icons/button_minus_mini.png"){$(this).prev(".leftCollapsibleBox").children().children().prop("src","images/icons/button_plus_mini.png")}}$(this).next(".collapsibleBody").toggle();refreshScroller();return false}function getATMDetails(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);sessionStorage.setItem("atmID",atmList[a].atmID);document.location.href="ATMDetails.html"};






var findBranchFlag=false;var loadingDiv=null;$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();var a=webkitVersion();if(a=="534.13"){webkitVersion53413=true}var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();simulateFakeActiveState("ftbbutton");initIscroller();document.addEventListener("deviceready",performAJAXCall,false)});function performAJAXCall(){var a=sessionStorage.getItem("branchID");if(sessionStorage.getItem("findBranchFlag")=="true"){findBranchFlag=true}if(!checkConnection()){document.location.href="NetworkError.html";return false}var b="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-branches-detail&type=branch&branchID="+a;$.ajax({type:"GET",url:b,timeout:10000,cache:true,async:false,crossDomain:true,dataType:"html",success:parseResponse,error:parseError})}function parseResponse(c){console.log("Parse Ajax Response;");c=c.replace(/^\s\s*/,"").replace(/\s\s*$/,"");parser=new DOMParser(c);c=parser.parseFromString(c,"text/xml");var b='<ul class="whiteList rounded">';var a="";branchID="N/A";branchName="N/A";address="N/A";sortcode="N/A";telephone="N/A";fax="N/A";latitude="N/A";longditude="N/A";atm="N/A";if(($(c).find("branchID").text()!="")&&($(c).find("branchID").text()!=null)){branchID=$(c).find("branchID").text()}else{parseError();return false}if($(c).find("branchName").text()!=""){branchName=$(c).find("branchName").text()}$(c).find("details").each(function(){if($(this).find("address").text()!=""){address=$(this).find("address").text()}if($(this).find("sortcode").text()!=""){sortcode=$(this).find("sortcode").text()}if($(this).find("telephone").text()!=""){telephone=$(this).find("telephone").text();var e=telephone.split(",");telephone=e[0];telephone.replace(/[^\d]/g,"")}if($(this).find("fax").text()!=""){fax=$(this).find("fax").text()}if($(this).find("lat").text()!=""){latitude=$(this).find("lat").text()}if($(this).find("long").text()!=""){longditude=$(this).find("long").text()}if($(this).find("atm").text()=="Yes"){atm="Yes"}if($(this).find("atm").text()=="No"){atm="No"}a='<li class="whiteListItem nohover"><h3>'+branchName+"</h3></li>";a+='<li class="whiteListItem nohover noBorder"><div class="days"><p>Sort code: '+sortcode+'</p></div><div class="hours"><p>ATM: '+atm+'</p></div></li><li class="whiteListItem nohover noBorder"><p>'+address+"<br>FAX: "+fax+"</p></li>";if(webkitVersion53413){a+='<li class="whiteListItem nohover noBorder"><div class="ftbbutton green callusGradient rounded medium">'}else{a+='<li class="whiteListItem nohover noBorder"><div class="ftbbutton green callusGradient medium">'}var d="'"+telephone+"'";a+='<a href="javascript:callUs('+d+')"><p>Call '+telephone+"</p></a></div></li>";if(webkitVersion53413){a+='<li class="whiteListItem nohover noBorder"><div class="ftbbutton blue mapusGradient rounded medium">'}else{a+='<li class="whiteListItem nohover noBorder"><div class="ftbbutton blue mapusGradient medium">'}a+='<a href="javascript:getBranchMap(0)"><p>Branch Map</p></a></div></li>';if(findBranchFlag){if(webkitVersion53413){a+='<li class="whiteListItem nohover"><div class="ftbbutton blue directusGradient rounded medium">'}else{a+='<li class="whiteListItem nohover"><div class="ftbbutton blue directusGradient medium">'}a+='<a href="javascript:getBranchMap(1)"><p>Get Directions</p></a></div></li>'}});b+=a;sessionStorage.setItem("branchID",branchID);sessionStorage.setItem("branchName",branchName);sessionStorage.setItem("address",address);sessionStorage.setItem("latitude",latitude);sessionStorage.setItem("longditude",longditude);a="";a='<li class="whiteListItem nohover noBorder"><h3>Opening Hours</h3>';$(c).find("openingHours").each(function(){monday="N/A";tuesday="N/A";wednesday="N/A";thursday="N/A";friday="N/A";if($(this).find("monday").text()!=""){monday=$(this).find("monday").text()}if($(this).find("tuesday").text()!=""){tuesday=$(this).find("tuesday").text()}if($(this).find("wednesday").text()!=""){wednesday=$(this).find("wednesday").text()}if($(this).find("thursday").text()!=""){thursday=$(this).find("thursday").text()}if($(this).find("friday").text()!=""){friday=$(this).find("friday").text()}a+='<li class="whiteListItem nohover"><div class="days"><p>Monday:</p></div><div class="hours"><p>'+monday+'</p></div><div class="days"><p>Tuesday:</p></div><div class="hours"><p>'+tuesday+'</p></div><div class="days"><p>Wednesday:</p></div><div class="hours"><p>'+wednesday+'</p></div><div class="days"><p>Thursday:</p></div><div class="hours"><p>'+thursday+'</p></div><div class="days"><p>Friday:</p></div><div class="hours"><p>'+friday+"</p></div></li>"});b+=a+"</ul>";loadingDiv.hide();$("#branchdetail").html(b);simulateFakeActiveState("ftbbutton");refreshScroller()}function parseError(c,d,b){var a="Unfortunately the Branch Details are temporarily unavailable on our server, please try again later.<br><br>We apologise for any inconvenience this may cause.";htmlError(a)}function getBranchMap(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);sessionStorage.setItem("directions",a);document.location.href="FindBranchOnMap.html"};







$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-blue.png"]});$(document).ready(function(){$("#webpage").show();var a=$(".container");if(a.height()<($(window).height()-60)){a.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller()});function openExternalUrl(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);console.log("URL = "+a);launchBrowser(a)};






$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-blue.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){$("#webpage").show();var a=webkitVersion();if(a=="534.30"){disableLinksByElement("calculatorOptions");setTimeout(function(){enableLinksByElement("calculatorOptions")},300)}var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller()});






$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-blue.png"]});$(document).ready(function(){$("#webpage").show();var a=$(".container");if(a.height()<($(window).height()-60)){a.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller()});function openExternalUrl(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);console.log("URL = "+a);launchBrowser(a)}function openExternalUrlInBrowser(a){if(stopDoubleClickEvent){return}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);console.log("URL = "+a);externalUrl=a;navigator.notification.confirm("You will open your mobile web browser to complete this request?",confirmationCallback,"","Yes, No");return true}function confirmationCallback(a){if(a==1){console.log("Yes Pressed");window.location.href=externalUrl}else{console.log("Not Yes Pressed");return false}return true};






var atmlistDiv=null;var fsearchDiv=null;var locatorOptionsDiv=null;var watchID=null;var atmList=new Array();$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();var a=webkitVersion();if(a=="534.13"){$("input").addClass("roundedInset");$(".ftbbutton").addClass("rounded")}errorDiv=$("#error");atmlistDiv=$("#atmlist");var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller();document.addEventListener("deviceready",findNearestATM,false);return});function findNearestATM(){if(!checkConnection()){document.location.href="NetworkError.html";return false}if(navigator&&navigator.geolocation){var a={enableHighAccuracy:true,timeout:30000,maximumAge:10000};watchID=navigator.geolocation.watchPosition(b,c,a);return}else{errorText="Location services must be enabled to use this service.";htmlError(errorText);return false}function b(d){navigator.geolocation.clearWatch(watchID);watchID=null;latitude=d.coords.latitude;londitude=d.coords.longitude;var f="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-android-near-atms";var e=$.param({currentLat:latitude,currentLong:londitude});console.log("Ajax Find ATM");$.ajax({type:"GET",url:f,data:e,timeout:10000,cache:false,async:false,crossDomain:true,dataType:"html",success:parseResponse,error:parseError});return}function c(d){console.log("Unable to obtain user's postion");navigator.geolocation.clearWatch(watchID);watchID=null;console.log("code: "+d.code+"<br>message: "+d.message);errorText="The application cannot establish your current geographical position. Please ensure your device's location services are working correctly.";htmlError(errorText)}}function parseResponse(i){errorTimeout=null;errorDiv.hide();console.log("Parsing Response");i=i.replace(/^\s\s*/,"").replace(/\s\s*$/,"");parser=new DOMParser(i);i=parser.parseFromString(i,"text/xml");var c="";var a="";var e="";var d="";var f="";var h=0;var g="";var b='<ul class="rounded whiteList"><li class="whiteListItem nohover"><h3>Nearest ATMs...</h3></li>';$(i).find("location").each(function(){h+=1;c=$(this).find("branchID").text();a=$(this).find("branchName").text();$(this).find("details").each(function(){e=$(this).find("address").text();d=$(this).find("lat").text();f=$(this).find("long").text()});atmList[h]={atmID:c,atmName:a,address:e,latitude:d,longditude:f};var l="0KM";if($(this).find("branchDistance").text()!=""){l=$(this).find("branchDistance").text()}l=l.replace(/ /g,"");l=l.replace(/([K])/g," $1");l=l.split(" ");var k=l[0];var j=l[1];g='<li class="whiteListItem arrow"><div class="leftBranchListBoxUpper"><a href="javascript:getATMMap('+h+')"><p><span class="emphasis">'+k+"</span>"+j+'</p></a></div><div class="rightBranchListBoxUpper"><a href="javascript:getATMDetails('+h+')">'+a+'</a></div><div class="leftBranchListBoxLower"><a href="javascript:getATMMap('+h+')"><img src="images/icons/glyphish-icons/custom/103-map-orange.png" alt="Find on Map"/></a></div><div class="rightBranchListBoxLower"><a href="javascript:getATMDetails('+h+')"><p>'+e+"</p></a></div></li>";b+=g});if(h===0){console.log("No results in Find ATM Ajax response.");parseError();return false}loadingDiv.hide();atmlistDiv.html(b);initIscroller()}function getATMDetails(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);sessionStorage.setItem("atmID",atmList[a].atmID);sessionStorage.setItem("findATMFlag",true);document.location.href="ATMDetails.html"}function getATMMap(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);sessionStorage.setItem("atmID",atmList[a].atmID);sessionStorage.setItem("atmName",atmList[a].atmName);sessionStorage.setItem("address",atmList[a].address);sessionStorage.setItem("latitude",atmList[a].latitude);sessionStorage.setItem("longditude",atmList[a].longditude);sessionStorage.setItem("findATMFlag",false);document.location.href="FindATMOnMap.html"}function parseError(b){errorTimeout=null;var a="Unfortunately the ATM List is temporarily unavailable on our server, please try again later.<br><br>We apologise for any inconvenience this may cause.";htmlError(a);return};






var currencyCode;var selected=0;var bidRates;var offerRates;var toEuros=true;var amountDiv=null;var ratesDiv=null;var fxPopupDiv=null;var popupPaddingDiv=null;var fxCalcDiv=null;var errorFlag=false;var fxCalcFlag=true;var fxPopupOpenFlag=false;var ratesupdatedDiv=null;var mandatoryTextDiv=null;var bigToggleDiv=null;var leftCurrencyBoxDiv=null;var rightCurrencyBoxDiv=null;var euroBoxHTML=null;$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,slideleftSelector:".swipeMe",preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-blue.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();var a=webkitVersion();if(a=="530.17"){webkitVersion53017=true}if(a=="534.13"){webkitVersion53413=true;$(".fxInput").addClass("roundedInset");$(".moneyBox").addClass("roundedInset");$(".ftbbutton").addClass("rounded")}if(a=="534.30"){webkitVersion53430=true}bigToggleDiv=$("#bigToggle").hide();ratesupdatedDiv=$("#ratesupdated").hide();fxCalcDiv=$("#fxcalc").hide();mandatoryTextDiv=$("#mandatoryText").hide();errorDiv=$("#error").hide();ratesDiv=$("#rates").hide();fxPopupDiv=$("#fxPopup").hide();popupPaddingDiv=$("#popupPadding").hide();amountDiv=$("#amount");var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();simulateFakeActiveState("ftbbutton");$(".swipeMe").swipe(toggleSwitch);stopDoubleSwipeEvent=true;setTimeout(function(){stopDoubleSwipeEvent=false},500);$(".switch").bind("click",toggleSwitch);$("#resetButton").bind("click",reset);initIscroller();document.addEventListener("deviceready",performAJAXCall,false)});function parseXml(l){console.log("XMLD DOC is "+l);if(l==""){parseError()}l=l.replace(/^\s\s*/,"").replace(/\s\s*$/,"");parser=new DOMParser(l);l=parser.parseFromString(l,"text/xml");var k="";var a=$(l).find("update-time").text();if(a){k="<p>Rates correct as per "+a+"</p>"}else{parseError();return}ratesupdatedDiv.html(k);ratesupdatedDiv.show();var e=$(l).find("currency").size();if(e==0){parseError();return}currencyCode=new Array(e);var h=new Array(e);bidRates=new Array(e);offerRates=new Array(e);var g='<ul class="rounded currencyList whiteList">';var d="<br>";var f=0;var j=0;var c="";euroBoxHTML='<img class="flagImage" src="images/flags/GBP_selected.png">';e=0;var b='<ul class="rounded whiteList">';$(l).find("currency").each(function(){var i=$(this).attr("id");currencyCode[e]=i.substring(i.length-3);h[e]=$(this).attr("title");if(currencyCode[e]=="EUR"){selected=e;c='<img class="flagImage" src="images/flags/'+currencyCode[e]+'_selected.png">'}f=parseFloat($(this).find("bid-rate").text(),10);j=parseFloat($(this).find("offer-rate").text(),10);if((!isNaN(f))&&(!isNaN(j))){g+='<li id="'+e+'" class="whiteListItem noBorder"><a ref="#"><img class="popupFxFlagImage" src="images/flags/'+currencyCode[e]+'.png"><p>&nbsp;'+h[e]+"</p></a></li>";d+="<br>";bidRates[e]=f;offerRates[e]=j;b+='<li class="whiteListItem nohover"><div class="leftBox"><img class="bigFlagImage" src="images/flags/'+currencyCode[e]+'.png" alt="'+currencyCode[e]+'"></div><div class="rightBox"><p>'+h[e]+'</p><p><span class="smallText">We buy:&nbsp;&nbsp;'+j+'</span></p><p><span class="smallText">We sell:&nbsp;&nbsp;'+f+"</span></p></div></li>"}else{bidRates[e]=0;offerRates[e]=0}e++});g+="</ul>";b+="</ul>";ratesDiv.html(b);ratesDiv.hide();leftCurrencyBoxDiv=$("#leftMoneyBox");leftCurrencyBoxDiv.addClass("euroBox");rightCurrencyBoxDiv=$("#rightMoneyBox");rightCurrencyBoxDiv.addClass("fxRatesBox");leftCurrencyBoxDiv.html(euroBoxHTML);rightCurrencyBoxDiv.html(c);fxPopupDiv.html(g);popupPaddingDiv.html(d);k="<p>"+$(l).find("intro-text").text()+"</p>";mandatoryTextDiv.html(k);mandatoryTextDiv.show();loadingDiv.hide();bigToggleDiv.show();fxCalcDiv.show();refreshScroller();$(".fxRatesBox").bind("click",fxRatesTapHandler);$(".currencyList li").click(selectCurrency);$("#swapCurrencyBoxes").click(swapCurrencies)}function swapCurrencies(){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);var a='<img class="flagImage" src="images/flags/'+currencyCode[selected]+'_selected.png">';$(".fxRatesBox").unbind("click",fxRatesTapHandler);if(leftCurrencyBoxDiv.hasClass("euroBox")){rightCurrencyBoxDiv.removeClass("fxRatesBox");rightCurrencyBoxDiv.addClass("euroBox");rightCurrencyBoxDiv.html(euroBoxHTML);leftCurrencyBoxDiv.removeClass("euroBox");leftCurrencyBoxDiv.addClass("fxRatesBox");leftCurrencyBoxDiv.html(a);toEuros=false;fxcalculate()}else{leftCurrencyBoxDiv.removeClass("fxRatesBox");leftCurrencyBoxDiv.addClass("euroBox");leftCurrencyBoxDiv.html(euroBoxHTML);rightCurrencyBoxDiv.removeClass("euroBox");rightCurrencyBoxDiv.addClass("fxRatesBox");rightCurrencyBoxDiv.html(a);toEuros=true;fxcalculate()}$(".fxRatesBox").bind("click",fxRatesTapHandler)}function parseError(c,d,b){errorFlag=true;fxCalcDiv.hide();var a="Unfortunately the Currency Exchange Rates are temporarily unavailable on our server, please try again later.<br><br>We apologise for any inconvenience this may cause.";htmlError(a)}function performAJAXCall(){if(!checkConnection()){document.location.href="NetworkError.html";return false}console.log("Connecting to "+fxCalculatorUrl);$.ajax({type:"GET",url:fxCalculatorUrl,timeout:10000,async:false,crossDomain:true,dataType:"xml",success:parseXml,error:parseError})}function fxcalculate(b){if((amountDiv.val()!=amountDiv.val().replace(/[^0-9]/g,""))||(amountDiv.val()!=amountDiv.val().replace(/^[0]/,""))){amountDiv.val(amountDiv.val().replace(/[^0-9]/g,""));amountDiv.val(amountDiv.val().replace(/^[0]/,""))}var c=parseInt(amountDiv.val());if(c>99999999){amountDiv.val(amountDiv.val().slice(0,-1));return}if(isNaN(c)){c=0}if(toEuros){var a=parseFloat(Math.round(((c)*(bidRates[selected]))*100)/100).toFixed(2)}else{var a=parseFloat(Math.round(((c)/(offerRates[selected]))*100)/100).toFixed(2)}$("#result").html("<p>"+a+"</p>")}function reset(a){console.log("reset handler");amountDiv.val("");$("#result").html("<p>0.00</p>")}function toggleSwitch(b,a){if(stopDoubleSwipeEvent){return false}stopDoubleSwipeEvent=true;setTimeout(function(){stopDoubleSwipeEvent=false},500);console.log("e = "+b+". info = "+a);b.preventDefault();$(".switch-button").toggleClass("switchRight");if(fxCalcFlag){$("#calcToggle").prop("checked",false);$("#ratesToggle").prop("checked",true);fxCalcFlag=false;if(errorFlag==false){fxCalcDiv.hide();ratesDiv.show()}else{errorDiv.show()}}else{$("#calcToggle").prop("checked",true);$("#ratesToggle").prop("checked",false);fxCalcFlag=true;if(errorFlag==false){ratesDiv.hide();fxCalcDiv.show()}else{errorDiv.show()}}$("#calcToggleLabel").toggleClass("switchHighlight");$("#ratesToggleLabel").toggleClass("switchHighlight");refreshScroller();myScroll.scrollTo(0,0,0);return}var onBackPressed=function(a){if(fxPopupOpenFlag==true){a.preventDefault();console.log("removing event listener");document.removeEventListener("backbutton",onBackPressed,false);fxPopupOpenFlag=false;fxPopupDiv.hide();popupPaddingDiv.hide();fxCalcDiv.show();refreshScroller();return true}return false};var fxRatesTapHandler=function(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},300);fxPopupDiv.show();popupPaddingDiv.show();if(fxPopupOpenFlag==false){console.log("adding event listener");document.addEventListener("backbutton",onBackPressed,false);fxPopupOpenFlag=true}fxPopupDiv.focus();refreshScroller()};var selectCurrency=function(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},300);selected=this.getAttribute("id");markup='<img class="flagImage" src="images/flags/'+currencyCode[selected]+'_selected.png">';$(document).find(".fxRatesBox").html(markup);if(fxPopupOpenFlag==true){console.log("removing event listener");document.removeEventListener("backbutton",onBackPressed,false);fxPopupOpenFlag=false}fxcalculate();fxPopupDiv.hide();popupPaddingDiv.hide();refreshScroller()};






var twittersDiv=null;var externalUrl="";var username="FirstTrustBank";var count=10;var tweeturl="http://search.twitter.com/search.json?q=from:"+username+"&rpp="+count+"&callback=?";$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-blue.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();var a=webkitVersion();if(a=="534.30"){disableLinksByElement("twitterLink");setTimeout(function(){enableLinksByElement("twitterLink")},300)}twittersDiv=$("#twitters");errorDiv=$("#error");var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller();document.addEventListener("deviceready",performAJAXCall,false)});function performAJAXCall(){if(!checkConnection()){document.location.href="NetworkError.html";return false}$.ajax({type:"GET",timeout:10000,url:tweeturl,tryCount:0,cache:false,async:false,crossDomain:true,dataType:"xml",success:parseResponse,error:parseError})}function parseResponse(b){errorTimeout=null;console.log("Have Response");var a='<ul class="rounded whiteList">';$.each(b.results,function(d,h){console.log("Have Results");var h=b.results[d];var e=h.profile_image_url;var j=h.from_user;var g=h.text;g=g.linkify().atify().hashify();var f=h.created_at;f=twitterDateConverter(f);j='<a href="http://www.twitter.com/'+j+'" title="'+j+'">'+j+"</a>";var c='<li class="whiteListItem nohover"><div class="leftTweetsBox">'+j+'<div class="headerIcon"><img src="'+e+'" alt="Profile Picture"/></div></div><div class="rightTweetsBox"><p class="twitterText">'+g+'</p><p class="twitterTime"> - '+f+"</p></div></li>";a+=c});a+="</ul>";console.log("Before Loading");loadingDiv.hide();console.log("After Loading");$("#leftTwitter").show();$("#rightTwitter").show();twittersDiv.html(a);twittersDiv.show();refreshScroller();return}function parseError(){errorTimeout=null;console.log("ERROR");var a='<div class="leftTwitterBox .btcf"><div class="headerIcon .btcf"><img src="images/ftb/ftb_logo.png" alt="First Trust Bank Mobile Banking" /></div></div><div class="rightTwitterBox .btcf"><div class="twitterText .btcf"><p>There was a problem connecting to the @FirstTrustBank Twitter Feed.<br>Please try again later.</p></div></div>';htmlError(errorText)}function openExternalUrl(a){if(stopDoubleClickEvent){return}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);console.log("URL = "+a);externalUrl=a;navigator.notification.confirm("You will open your mobile web browser to complete this request?",confirmationCallback,"","Yes, No");return true}function confirmationCallback(a){if(a==1){console.log("Yes Pressed");window.location.href=externalUrl}else{console.log("Not Yes Pressed");return false}return true}String.prototype.hashify=function(){return this.replace(/#([A-Za-z0-9\/\.]*)/g,function(a){url="http://twitter.com/search?q="+a.replace("#","");return"<a target='_new' href='javascript:openExternalUrl(\""+url+"\")'>"+a+"</a>"})};String.prototype.linkify=function(){return this.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/,function(a){return a.link(a)})};String.prototype.atify=function(){return this.replace(/@[\w]+/g,function(a){url="http://twitter.com/"+a.replace("@","");return"<a href='javascript:openExternalUrl(\""+url+"\")'>"+a+"</a><br>"})};function twitterDateConverter(e){var b=new Date(e),d=(((new Date()).getTime()-b.getTime())/1000),a=Math.floor(d/86400);if(isNaN(a)||a<0||a>=31){return}var c=a==0&&(d<60&&"just now"||d<120&&"1 minute ago"||d<3600&&Math.floor(d/60)+" minutes ago"||d<7200&&"1 hour ago"||d<86400&&Math.floor(d/3600)+" hours ago")||a==1&&"Yesterday"||a<7&&a+" days ago"||a<31&&Math.ceil(a/7)+" weeks ago";return c};







var latitude=0;var longditude=0;var map=null;var atmPosition=null;var myPosition=null;var atmName=null;var atmID=null;var address=null;var ftbMarker="images/ftb/map/ftb-branch-location.png";var ftbShadow="images/ftb/map/shadow.png";var directionsService=null;var directionsDisplay=null;var request=null;var mapCanvasDiv=null;var mapHeaderDiv=null;var mapDiv=null;var geoSuccessFlag=false;var watchID=null;var jQT=new $.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png","images/icons/glyphish-icons/custom/75-phone-white.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();mapDiv=$("#map");mapCanvasDiv=$("#mapCanvas").hide();mapHeaderDiv=$("#mapHeader");errorDiv=$("#error").hide();var c=$(".container");if(c.height()<($(window).height()-60)){c.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller();latitude=sessionStorage.getItem("latitude");longditude=sessionStorage.getItem("longditude");if(typeof(google)=="undefined"){errorText="The Mapping server is currently not responding, please try again later.";htmlError(errorText);return false}atmPosition=new google.maps.LatLng(latitude,longditude);console.log("ATM Coordinates are :"+atmPosition+".");atmName=sessionStorage.getItem("atmName");atmID=sessionStorage.getItem("atmID");address=sessionStorage.getItem("address");var b="<h3>"+atmName+"</h3><p>"+address+"</p>";mapHeaderDiv=$("#mapHeader");mapHeaderDiv.html(b);directions=sessionStorage.getItem("directions");sessionStorage.setItem("directions",0);if(directions==1){if(navigator&&navigator.geolocation){var a={enableHighAccuracy:true,timeout:30000,maximumAge:10000};watchID=navigator.geolocation.watchPosition(onGeoSuccess,onGeoError,a);return}else{errorText="Location services must be enabled to use this service.";htmlError(errorText);return false}}loadingDiv.hide();mapCanvasDiv.show();initialiseMap();createFTBMarker();refreshScroller();myScroll.disable();return});function initialiseMap(){var b=window.innerHeight-$(".header").height()-$(".footer").height()-$("#mapHeader").height()-60;mapCanvasDiv.css("height",b);var a={zoom:16,center:atmPosition,panControl:true,sensor:true,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("mapCanvas"),a);google.maps.event.trigger(map,"resize")}function onGeoSuccess(a){if(geoSuccessFlag){return}geoSuccessFlag=true;navigator.geolocation.clearWatch(watchID);watchID=null;console.log("Geo Success: WatchID = "+watchID);var c=a.coords.latitude;var b=a.coords.longitude;myPosition=new google.maps.LatLng(c,b);console.log("My Coordinates are :"+myPosition+".");directionsService=new google.maps.DirectionsService();directionsDisplay=new google.maps.DirectionsRenderer();console.log("Are you driving or walking?");navigator.notification.confirm("Will you be driving or walking?",transitCallback,"","Driving, Walking");return}function transitCallback(a){if(a==1){console.log("Driving Pressed");request={origin:myPosition,destination:atmPosition,travelMode:google.maps.TravelMode.DRIVING}}else{console.log("Walking Pressed");request={origin:myPosition,destination:atmPosition,travelMode:google.maps.TravelMode.WALKING}}directionsService.route(request,function(c,b){if(b==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(c)}});initialiseMap();directionsDisplay.setMap(map);loadingDiv.hide();mapCanvasDiv.show();createFTBMarker();refreshScroller();myScroll.disable();return false}function createFTBMarker(){var b=new google.maps.MarkerImage(ftbMarker,new google.maps.Size(32,32),new google.maps.Point(0,0),new google.maps.Point(0,0));var a=new google.maps.MarkerImage(ftbShadow,new google.maps.Size(59,32),new google.maps.Point(0,0),new google.maps.Point(0,0));console.log("Marker Coordinates are :"+atmPosition+".");marker=new google.maps.Marker({map:map,draggable:false,animation:google.maps.Animation.DROP,position:atmPosition,shadow:a,icon:b})}function onGeoError(a){console.log("Unable to obtain user's postion");navigator.geolocation.clearWatch(watchID);watchID=null;console.log("code: "+a.code+"<br>message: "+a.message);errorText="The application cannot establish your current geographical position. Please ensure your device's location services are working correctly.";mapDiv.hide();htmlError(errorText)};






$.jQTouch({useFastTouch:false,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:true,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-blue.png","images/icons/glyphish-icons/custom/more-grey.png","images/icons/glyphish-icons/custom/75-phone-white.png","images/icons/glyphish-icons/custom/18-envelope-white.png"]});$(document).ready(function(){$("#webpage").show();var a=webkitVersion();if(a=="534.13"){$(".ftbbutton").addClass("rounded")}var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();simulateFakeActiveState("ftbbutton");initIscroller()});






var branchlistDiv=null;var fsearchDiv=null;var locatorOptionsDiv=null;var watchID=null;var branchList=new Array();$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();var a=webkitVersion();if(a=="534.13"){$("input").addClass("roundedInset");$(".ftbbutton").addClass("rounded")}errorDiv=$("#error");branchlistDiv=$("#branchlist");var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller();document.addEventListener("deviceready",findNearestBranch,false);return});function findNearestBranch(){if(!checkConnection()){document.location.href="NetworkError.html";return false}if(navigator&&navigator.geolocation){var a={enableHighAccuracy:true,timeout:30000,maximumAge:10000};watchID=navigator.geolocation.watchPosition(b,c,a);return}else{errorText="Location services must be enabled to use this service.";htmlError(errorText);return false}function b(d){navigator.geolocation.clearWatch(watchID);watchID=null;latitude=d.coords.latitude;londitude=d.coords.longitude;var f="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-android-near-branches&type=branch";var e=$.param({currentLat:latitude,currentLong:londitude});console.log("Ajax Find Branch");if(!checkConnection()){document.location.href="NetworkError.html";return false}$.ajax({type:"GET",url:f,data:e,timeout:10000,cache:false,async:false,crossDomain:true,dataType:"html",success:parseResponse,error:parseError});return}function c(d){console.log("Unable to obtain user's postion");navigator.geolocation.clearWatch(watchID);watchID=null;console.log("code: "+d.code+"<br>message: "+d.message);errorText="The application cannot establish your current geographical position. Please ensure your device's location services are working correctly.";htmlError(errorText)}}function parseResponse(i){errorTimeout=null;console.log("Parsing Response");i=i.replace(/^\s\s*/,"").replace(/\s\s*$/,"");parser=new DOMParser(i);i=parser.parseFromString(i,"text/xml");var d="";var b="";var f="";var c="";var g="";var e=0;var h="";var a='<ul class="rounded whiteList"><li class="whiteListItem nohover"><h3>Nearest Branches...</h3></li>';$(i).find("location").each(function(){e+=1;d=$(this).find("branchID").text();b=$(this).find("branchName").text();$(this).find("details").each(function(){f=$(this).find("address").text();c=$(this).find("lat").text();g=$(this).find("long").text()});branchList[e]={branchID:d,branchName:b,address:f,latitude:c,longditude:g};var l="0KM";if($(this).find("branchDistance").text()!=""){l=$(this).find("branchDistance").text()}l=l.replace(/ /g,"");l=l.replace(/([K])/g," $1");l=l.split(" ");var k=l[0];var j=l[1];h='<li class="whiteListItem arrow"><div class="leftBranchListBoxUpper"><a href="javascript:getBranchMap('+e+')"><p><span class="emphasis">'+k+"</span>"+j+'</p></a></div><div class="rightBranchListBoxUpper"><a href="javascript:getBranchDetails('+e+')">'+b+'</a></div><div class="leftBranchListBoxLower"><a href="javascript:getBranchMap('+e+')"><img src="images/icons/glyphish-icons/custom/103-map-orange.png" alt="Find on Map"/></a></div><div class="rightBranchListBoxLower"><a href="javascript:getBranchDetails('+e+')"><p>'+f+"</p></a></div></li>";a+=h});if(e===0){console.log("No results in Find Branch Ajax response.");parseError();return false}loadingDiv.hide();branchlistDiv.html(a);initIscroller()}function parseError(b){errorTimeout=null;var a="Unfortunately the Branch List is temporarily unavailable on our server, please try again later.<br><br>We apologise for any inconvenience this may cause.";htmlError(a)}function getBranchDetails(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);sessionStorage.setItem("branchID",branchList[a].branchID);sessionStorage.setItem("findBranchFlag",true);document.location.href="BranchDetails.html"}function getBranchMap(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);sessionStorage.setItem("branchID",branchList[a].branchID);sessionStorage.setItem("branchName",branchList[a].branchName);sessionStorage.setItem("address",branchList[a].address);sessionStorage.setItem("latitude",branchList[a].latitude);sessionStorage.setItem("longditude",branchList[a].longditude);sessionStorage.setItem("findBranchFlag",false);document.location.href="FindBranchOnMap.html"};






var branchList=new Array();var branchlistDiv=null;var loadingDiv=null;$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();var a=webkitVersion();if(a=="530.17"){webkitVersion53017=true}if(a=="534.13"){webkitVersion53413=true}if(a=="534.30"){webkitVersion53430=true}branchlistDiv=$("#branchlist").hide();errorDiv=$("#error").hide();var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller();document.addEventListener("deviceready",performAJAXCall,false)});function performAJAXCall(){console.log("Ajax List Branches Call");dataFeedURL="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-list-branches&type=branch";if(!checkConnection()){document.location.href="NetworkError.html";return false}$.ajax({type:"GET",url:dataFeedURL,timeout:10000,cache:false,async:false,crossDomain:true,dataType:"html",success:parseResponse,error:parseError})}function parseResponse(e){console.log("parsing branchlist response");e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var f=encodeURIComponent(e);var d=f.replace(/%26/g,"&amp;");var e=decodeURIComponent(d);parser=new DOMParser(e);var e=parser.parseFromString(e,"text/xml");var b="";var a="";var c=0;$(e).find("branch-area").each(function(){var g='<li class="whiteListItem"><div class="leftCollapsibleBox"><a href="#"><img id="collapsibleImage" src="images/icons/button_plus_mini.png" alt="Collapsible"/></a></div><div class="collapsibleHeader rightCollapsibleBox"><a href="#">'+$(this).attr("name")+"</a></div>";g+='<div class="collapsibleBody">';$(this).find("branch").each(function(){if($(this).find("branch-id").text()!=""){b=$(this).find("branch-id").text();branchList[c]={branchID:b};g+='<p><a href="javascript:getBranchDetails('+c+')">'+$(this).find("branch-name").text()+"</a></p>";c+=1}});g+="</div></li>";a+=g});if(c===0){console.log("No results in Browse All Branches Ajax response.");parseError();return false}loadingDiv.hide();branchlistDiv.html(a);branchlistDiv.show();refreshScroller();console.log("Using on Click");$(".leftCollapsibleBox").click(iconClick);$(".collapsibleHeader").click(headerClick);$(".collapsibleBody").hide();refreshScroller()}function parseError(b){var a="Unfortunately the Branch List is temporarily unavailable on our server, please try again later.<br><br>We apologise for any inconvenience this may cause.";htmlError(a)}function iconClick(){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);if($(this).children().children().prop("src")=="images/icons/button_plus_mini.png"){$(this).children().children().prop("src","images/icons/button_minus_mini.png")}else{if($(this).children().children().prop("src")=="images/icons/button_minus_mini.png"){$(this).children().children().prop("src","images/icons/button_plus_mini.png")}}$(this).next(".collapsibleHeader").next(".collapsibleBody").toggle();refreshScroller();return false}function headerClick(){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);if($(this).prev(".leftCollapsibleBox").children().children().prop("src")=="images/icons/button_plus_mini.png"){$(this).prev(".leftCollapsibleBox").children().children().prop("src","images/icons/button_minus_mini.png")}else{if($(this).prev(".leftCollapsibleBox").children().children().prop("src")=="images/icons/button_minus_mini.png"){$(this).prev(".leftCollapsibleBox").children().children().prop("src","images/icons/button_plus_mini.png")}}$(this).next(".collapsibleBody").toggle();refreshScroller();return false}function getBranchDetails(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);sessionStorage.setItem("branchID",branchList[a].branchID);document.location.href="BranchDetails.html"};






$.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-blue.png","images/icons/glyphish-icons/custom/06-magnify-grey.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png","images/icons/glyphish-icons/custom/54-lock-white.png","images/icons/glyphish-icons/custom/06-magnify-white.png","images/icons/glyphish-icons/custom/161-calculator-white.png","images/icons/glyphish-icons/custom/112-group-white.png"]});function onDeviceReady(){document.addEventListener("backbutton",onBackKeyDown,false);if(typeof(nativeAppUtils)!="undefined"){ftbMobileBankingHomepageUrl=nativeAppUtils.getMobileBankingHomepageUrl();if(debug){console.log("mobileBankingHomepageUrl = "+ftbMobileBankingHomepageUrl)}if(debug){console.log("nativeAppUtils defined in JS")}var a=new String(nativeAppUtils.getComplianceText());if(debug){console.log("Compliance text = "+a)}if(a!=""){$("#complianceText").html("<p>"+a+"</p>")}if(debug){console.log("Compliance text SET")}}}$(document).ready(function(){$("#webpage").show();var a=webkitVersion();if(a=="530.17"){webkitVersion53017=true}if(a=="534.13"){webkitVersion53413=true}if(a=="534.30"){webkitVersion53430=true}simulateFakeActiveState("homeButton");console.log("Listening for taps on homepage buttons.");$("#bankingButton").click(openMobileBanking);$("#calculatorsButton").click(getCalculators);$("#locatorButton").click(getLocator);$("#contactUsButton").click(getContactUs);var b=$(".container");if(b.height()<($(window).height()-60)){b.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller();document.addEventListener("deviceready",onDeviceReady,false)});function getCalculators(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},300);document.location.href="Calculators.html";return false}function getLocator(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},300);document.location.href="Locator.html";return false}function getContactUs(a){if(stopDoubleClickEvent){return false}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},300);document.location.href="Contact.html";return false}function openMobileBanking(b){if(stopDoubleClickEvent){return false}stopDoubleClick(800);stopCycleBanner=true;var a="https://mobilebanking.firsttrustbank.co.uk/mob/ft/login.htm";launchBrowser(a)}function externalSuccess(a){console.log("Success: "+a);return}function externalFailure(a){console.log("Error: "+a);document.location.href="homepage.html"}function onBackKeyDown(){if(stopDoubleClickEvent){return}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);navigator.notification.confirm("Exit the First Trust Bank Mobile app ?",confirmationCallback,"","Yes, No")}function confirmationCallback(a){if(a==1){console.log("Yes Pressed");localStorage.clear();navigator.app.exitApp()}else{console.log("No Pressed");return false}return true}window.onunload=function(){console.log("Leaving Page - Unloading Window");myScroll.destroy();myScroll=null;document.removeEventListener("backbutton",onBackKeyDown,false)};







var latitude=0;var longditude=0;var map=null;var branchPosition=null;var myPosition=null;var branchName=null;var branchID=null;var address=null;var ftbMarker="images/ftb/map/ftb-branch-location.png";var ftbShadow="images/ftb/map/shadow.png";var directionsService=null;var directionsDisplay=null;var request=null;var mapCanvasDiv=null;var mapHeaderDiv=null;var geoSuccessFlag=false;var watchID=null;var jQT=new $.jQTouch({useFastTouch:true,addGlossToIcon:false,fixedViewport:true,statusBar:"black-translucent",useTouchScroll:false,cacheGetRequests:false,useAnimations:false,preloadImages:["images/ftb/ftb_logo.png","images/ftb/background.gif","images/icons/glyphish-icons/custom/53-house-grey.png","images/icons/glyphish-icons/custom/06-magnify-blue.png","images/icons/glyphish-icons/custom/161-calculator-grey.png","images/icons/glyphish-icons/custom/112-group-grey.png","images/icons/glyphish-icons/custom/more-grey.png","images/icons/glyphish-icons/custom/75-phone-white.png"]});$(document).ready(function(){$("#webpage").show();loadingDiv=$("#loading");loadingDiv.css("padding-left",(($(window).width()/2)-25)+"px");loadingDiv.show();mapDiv=$("#map");mapCanvasDiv=$("#mapCanvas");mapHeaderDiv=$("#mapHeader");errorDiv=$("#error").hide();var c=$(".container");if(c.height()<($(window).height()-60)){c.css("min-height",$(window).height()-60+"px")}$("#navFooter").show();initIscroller();latitude=sessionStorage.getItem("latitude");longditude=sessionStorage.getItem("longditude");if(typeof(google)=="undefined"){errorText="The Mapping server is currently not responding, please try again later.";htmlError(errorText);return false}branchPosition=new google.maps.LatLng(latitude,longditude);console.log("Branch Coordinates are :"+branchPosition+".");branchName=sessionStorage.getItem("branchName");branchID=sessionStorage.getItem("branchID");address=sessionStorage.getItem("address");var b="<h3>"+branchName+"</h3><p>"+address+"</p>";mapHeaderDiv=$("#mapHeader");mapHeaderDiv.html(b);directions=sessionStorage.getItem("directions");sessionStorage.setItem("directions",0);if(directions==1){if(navigator&&navigator.geolocation){var a={enableHighAccuracy:true,timeout:30000,maximumAge:10000};watchID=navigator.geolocation.watchPosition(onGeoSuccess,onGeoError,a);return}else{errorText="Location services must be enabled to use this service.";htmlError(errorText);return false}}loadingDiv.hide();mapCanvasDiv.show();initialiseMap();createFTBMarker();refreshScroller();myScroll.disable();return});function initialiseMap(){var b=window.innerHeight-$(".header").height()-$(".footer").height()-$("#mapHeader").height()-60;mapCanvasDiv.css("height",b);var a={zoom:16,center:branchPosition,panControl:true,sensor:true,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("mapCanvas"),a);google.maps.event.trigger(map,"resize")}function onGeoSuccess(a){if(geoSuccessFlag){return}navigator.geolocation.clearWatch(watchID);watchID=null;geoSuccessFlag=true;var c=a.coords.latitude;var b=a.coords.longitude;myPosition=new google.maps.LatLng(c,b);console.log("My Coordinates are :"+myPosition+".");directionsService=new google.maps.DirectionsService();directionsDisplay=new google.maps.DirectionsRenderer();console.log("Are you driving or walking?");navigator.notification.confirm("Will you be driving or walking?",transitCallback,"","Driving, Walking");return}function transitCallback(a){if(a==1){console.log("Driving Pressed");request={origin:myPosition,destination:branchPosition,travelMode:google.maps.TravelMode.DRIVING}}else{console.log("Walking Pressed");request={origin:myPosition,destination:branchPosition,travelMode:google.maps.TravelMode.WALKING}}directionsService.route(request,function(c,b){if(b==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(c)}});initialiseMap();directionsDisplay.setMap(map);loadingDiv.hide();mapCanvasDiv.show();createFTBMarker();refreshScroller();myScroll.disable();return false}function createFTBMarker(){var b=new google.maps.MarkerImage(ftbMarker,new google.maps.Size(32,32),new google.maps.Point(0,0),new google.maps.Point(0,0));var a=new google.maps.MarkerImage(ftbShadow,new google.maps.Size(59,32),new google.maps.Point(0,0),new google.maps.Point(0,0));console.log("Marker Coordinates are :"+branchPosition+".");marker=new google.maps.Marker({map:map,draggable:false,animation:google.maps.Animation.DROP,position:branchPosition,shadow:a,icon:b})}function onGeoError(a){console.log("Unable to obtain user's postion");navigator.geolocation.clearWatch(watchID);watchID=null;console.log("code: "+a.code+"<br>message: "+a.message);errorText="The application cannot establish your current geographical position. Please ensure your device's location services are working correctly.";mapDiv.hide();htmlError(errorText);return false};

var myScroll=null;var telephone=null;var stopDoubleClickEvent=false;var stopDoubleSwipeEvent=false;var email=null;var webkitVersion53413=false;var webkitVersion53430=false;var webkitVersion53017=false;var loadingDiv=null;var errorDiv=null;var errorTimeout=null;var myOrientation=null;var androidVersion=null;var debug=false;var ftbMobileBankingHomepageUrl="";var fxCalculatorUrl="http://m.aib.ie/servlet/blobshare/ReutersNewsImages/iphone-fx-rates-ftgb.xml";var regulatoryInformationUrl="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-tandc&cid=1362139830363&search=aibiphoneapp";var privacyStatementUrl="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-tandc&cid=1362139812654&search=aibiphoneapp";var securityPolicyUrl="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-tandc&cid=1362139823549&search=aibiphoneapp";var fscsUrl="http://www.firsttrustbank.co.uk/servlet/Satellite?cid=1245398863650&pagename=FTBusinessPortal%2FFTBContent_C%2Fftb_article&channel=C001&c=FTBContent_C";var termsAndConditionsUrl="http://www.aib.ie/servlet/ContentServer?pagename=UK_MOBI/MobileApp/m-ft-tandc&cid=1362139831987&search=aibiphoneapp";function stopDoubleClick(a){if(typeof a==="undefined"){a=400}stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},a)}window.addEventListener("resize",function(){setTimeout(changeOrientation,0)},false);window.onunload=function(){console.log("Leaving Page - Unloading Window");myScroll.destroy();myScroll=null};$(document).bind("touchmove",function(a){a.preventDefault()});function callUs(a){if(!stopDoubleClickEvent){stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},800);telephone=a;console.log("Do you want to call us ? "+telephone);navigator.notification.confirm("Do you want to call us ?",confirmationCallback,"","Yes, No")}return false}function confirmationCallback(a){if(a==1){console.log("Yes Pressed");setTimeout(function(){document.location.href="tel:"+telephone},500)}else{console.log("Not Yes Pressed");return false}return true}function mailUs(a){if(!stopDoubleClickEvent){stopDoubleClickEvent=true;setTimeout(function(){stopDoubleClickEvent=false},500);email=a;console.log("Do you want to email us at?"+email);navigator.notification.confirm("Do you want to email us?",mailConfirmationCallback,"","Yes, No")}return false}function mailConfirmationCallback(a){if(a==1){console.log("Yes Pressed");console.log("mail:"+email);document.location.href="mailto:?to=alert%40aib.ie"}else{console.log("Not Yes Pressed");return false}return true}function changeOrientation(){var a=(window.orientation);if(a!=myOrientation){var b=navigator.userAgent;if(b.indexOf("Android")>=0){androidVersion=b.substr(b.indexOf("Android")+8,5);if(parseFloat(androidVersion)==4.2){window.location.reload(true)}}myOrientation=a;window.setTimeout(function(){window.scrollTo(0,0);var c=window.outerHeight/window.devicePixelRatio;$("body").css("min-height",c+"px");$("body").css("height","100%");var d=$("#footer").height();var e=c-(d);$("#container").css("min-height",e+"px");window.scrollTo(0,1);refreshScroller()},0)}}function simulateFakeActiveState(b){var c=document.getElementsByClassName(b);for(var a=0;a<c.length;a++){var d=c[a];d.addEventListener("touchstart",function(){addClass(this,"aibbuttonFakeActive")},false);d.addEventListener("touchmove",function(){removeClass(this,"aibbuttonFakeActive")},false);d.addEventListener("touchend",function(){removeClass(this,"aibbuttonFakeActive")},false);d.addEventListener("touchcancel",function(){removeClass(this,"aibbuttonFakeActive")},false)}}function hasClass(b,a){return b.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))}function addClass(b,a){if(!this.hasClass(b,a)){b.className+=" "+a}}function removeClass(c,a){if(hasClass(c,a)){var b=new RegExp("(\\s|^)"+a+"(\\s|$)");c.className=c.className.replace(b," ")}}function disableLinksByElement(c){if(document.getElementById&&document.getElementsByTagName){if(typeof(c)=="string"){c=document.getElementById(c)}var d=c.getElementsByTagName("a");for(var b=0,a=d.length;b<a;b++){d[b].onclick=function(){return false}}}}function enableLinksByElement(c){if(document.getElementById&&document.getElementsByTagName){if(typeof(c)=="string"){c=document.getElementById(c)}var d=c.getElementsByTagName("a");for(var b=0,a=d.length;b<a;b++){d[b].onclick=function(){return true}}}}function disableForms(b){for(var a=0;a<b.length;a++){b.elements[a].disabled=true}}function enableForms(b){for(var a=0;a<b.length;a++){b.elements[a].disabled=false}}function changeFocus(b){var a=b||window.event;var c=$("#"+a.srcElement.id);c.focus()}function onUpdateConfirm(a){if(a==1){window.location.href="market://details?id="+versionOutOfDate.getUpdateUrl()}else{navigator.app.exitApp()}}function showConfirm(){navigator.notification.confirm("You are the winner!",onConfirm,"Game Over","Restart,Exit")}function displayAppInfo(){console.log("Display Info");if(typeof(nativeAppUtils)!="undefined"){nativeAppUtils.displayAppInfo()}}function alertDismissed(){}function webkitVersion(){var d=RegExp("( AppleWebKit/)([^ ]+)").exec(navigator.userAgent);if(!d||d.length<3){return null}var a=d[2];var b=a.indexOf("+")!=-1;var c=RegExp("[^\\.0-9]").exec(a);if(c){a=a.slice(0,c.index)}return a}function refreshScroller(){setTimeout(function(){myScroll.refresh()},50)}function repaint(){myScroll.scrollTo(0,1,50,true);myScroll.scrollTo(0,-1,50,true)}function androidVersionCheck(){var b=navigator.userAgent;if(b.indexOf("Android")>=0){var a=b.substr(b.indexOf("Android")+8,5)}alert("Android Version = "+a)}function initIscroller(){myScroll=new iScroll("wrapper",{useTransform:false,onBeforeScrollStart:function(b){var a=b.target;while(a.nodeType!=1){a=a.parentNode}if(a.tagName!="SELECT"&&a.tagName!="INPUT"&&a.tagName!="TEXTAREA"&&a.tagName!="BUTTON"){b.preventDefault()}}})}function htmlError(a){var b='<ul class="rounded whiteList"><li class="whiteListItem nohover noborder error"><h3>'+a+"<br></h3></li></ul>";errorDiv.html(b);loadingDiv.hide();errorDiv.show();refreshScroller();myScroll.scrollTo(0,0,0)}function networkError(){var a='<ul class="rounded whiteList"><li class="whiteListItem nohover noborder error"><h3>Technical Difficulties have occured.</h3><p><br>You need a network connection to use this application. Please turn on mobile network or Wi-Fi. (Ref:A400)<p><p><br>If you require more information about Mobile Banking, please contact us at<br>028 9034 6034</p></li></ul>';errorDiv.html(a);loadingDiv.hide();errorDiv.show();refreshScroller();myScroll.scrollTo(0,0,0)}function validateKeyDown(d){var c=d||window.event;var b=c.keyCode||c.which;var f=$("#"+c.srcElement.id);if(b==13){f.blur()}if((b==110)||(b==190)){if(f.val()===""){f.val("0")}}if(b==46||b==8||b==9||b==27||b==13||(b==65&&b===true)||(b>=35&&b<=39)){return}else{if(c.shiftKey||((b<48||b>57)&&(b<96||b>105))&&((b!=110)&&(b!=190))){c.preventDefault()}else{var a=parseInt(f.val());if(a>99999999){f.val(f.val().slice(0,-1))}}}}function validateKeyUp(b){var a=b||window.event;var c=$("#"+a.srcElement.id);if(c.val()===""){c.val("0")}}function scollToTop(a){myScroll.scrollTo(0,0,0)}function clearField(b){var a=b||window.event;var c=$("#"+a.srcElement.id);if(c.val()==0){c.val("")}}function checkConnection(){var a=navigator.connection.type;var b={};b[Connection.UNKNOWN]="Unknown connection";b[Connection.ETHERNET]="Ethernet connection";b[Connection.WIFI]="WiFi connection";b[Connection.CELL_2G]="Cell 2G connection";b[Connection.CELL_3G]="Cell 3G connection";b[Connection.CELL_4G]="Cell 4G connection";b[Connection.NONE]="No network connection";if(a===Connection.NONE){return false}else{return true}}function createErrorTimeout(a){errorTimeout=setTimeout(function(){errorTimeoutFired()},a)}function errorTimeoutFired(){if(errorTimeout!=null){document.location.href="NetworkError.html"}errorTimeout=null}function launchBrowser(a){console.log("Attempting to open url: "+a);if(typeof(nativeAppUtils)!="undefined"){nativeAppUtils.openBankingApp(a)}else{alert("An error was encountered connecting to First Trust Mobile Banking. Please try again later")}}function calculateRate(f,c,k){var b=f;tier=0;var h=2499;var e=4999;var a=9999;var g=14999;var j=19999;var i=24999;if(b>i){tier=6}else{if(b>j){tier=5}else{if(b>g){tier=4}else{if(b>a){tier=3}else{if(b>e){tier=2}else{if(b>h){tier=1}else{tier=0}}}}}}loan=selectTerms.indexOf(c)-1;var d=parseFloat(Math.round(((b/1000)*k[loan][tier])*100)/100).toFixed(2);console.log("Amount = "+f);console.log("Term = "+c);console.log("Loan Index = "+loan);console.log("Tier = "+tier);console.log("nLoanUnProt = "+d);lr=d};

(function($){var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;function triggerAndReturn(context,eventName,data){var event=$.Event(eventName);$(context).trigger(event,data);return !event.defaultPrevented}function triggerGlobal(settings,context,eventName,data){if(settings.global){return triggerAndReturn(context||document,eventName,data)}}$.active=0;function ajaxStart(settings){if(settings.global&&$.active++===0){triggerGlobal(settings,null,"ajaxStart")}}function ajaxStop(settings){if(settings.global&&!(--$.active)){triggerGlobal(settings,null,"ajaxStop")}}function ajaxBeforeSend(xhr,settings){var context=settings.context;if(settings.beforeSend.call(context,xhr,settings)===false||triggerGlobal(settings,context,"ajaxBeforeSend",[xhr,settings])===false){return false}triggerGlobal(settings,context,"ajaxSend",[xhr,settings])}function ajaxSuccess(data,xhr,settings){var context=settings.context,status="success";settings.success.call(context,data,status,xhr);triggerGlobal(settings,context,"ajaxSuccess",[xhr,settings,data]);ajaxComplete(status,xhr,settings)}function ajaxError(error,type,xhr,settings){var context=settings.context;settings.error.call(context,xhr,type,error);triggerGlobal(settings,context,"ajaxError",[xhr,settings,error]);ajaxComplete(type,xhr,settings)}function ajaxComplete(status,xhr,settings){var context=settings.context;settings.complete.call(context,xhr,status);triggerGlobal(settings,context,"ajaxComplete",[xhr,settings]);ajaxStop(settings)}function empty(){}$.ajaxJSONP=function(options){if(!("type" in options)){return $.ajax(options)}var callbackName="jsonp"+(++jsonpID),script=document.createElement("script"),cleanup=function(){clearTimeout(abortTimeout);$(script).remove();delete window[callbackName]},abort=function(type){cleanup();if(!type||type=="timeout"){window[callbackName]=empty}ajaxError(null,type||"abort",xhr,options)},xhr={abort:abort},abortTimeout;if(ajaxBeforeSend(xhr,options)===false){abort("abort");return false}window[callbackName]=function(data){cleanup();ajaxSuccess(data,xhr,options)};script.onerror=function(){abort("error")};script.src=options.url.replace(/=\?/,"="+callbackName);$("head").append(script);if(options.timeout>0){abortTimeout=setTimeout(function(){abort("timeout")},options.timeout)}return xhr};$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:true,xhr:function(){return new window.XMLHttpRequest()},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:false,timeout:0,processData:true,cache:true};function mimeToDataType(mime){if(mime){mime=mime.split(";",2)[0]}return mime&&(mime==htmlType?"html":mime==jsonType?"json":scriptTypeRE.test(mime)?"script":xmlTypeRE.test(mime)&&"xml")||"text"}function appendQuery(url,query){return(url+"&"+query).replace(/[&?]{1,2}/,"?")}function serializeData(options){if(options.processData&&options.data&&$.type(options.data)!="string"){options.data=$.param(options.data,options.traditional)}if(options.data&&(!options.type||options.type.toUpperCase()=="GET")){options.url=appendQuery(options.url,options.data)}}$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings){if(settings[key]===undefined){settings[key]=$.ajaxSettings[key]}}ajaxStart(settings);if(!settings.crossDomain){settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host}if(!settings.url){settings.url=window.location.toString()}serializeData(settings);if(settings.cache===false){settings.url=appendQuery(settings.url,"_="+Date.now())}var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder){if(!hasPlaceholder){settings.url=appendQuery(settings.url,"callback=?")}return $.ajaxJSONP(settings)}var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),abortTimeout;if(!settings.crossDomain){baseHeaders["X-Requested-With"]="XMLHttpRequest"}if(mime){baseHeaders.Accept=mime;if(mime.indexOf(",")>-1){mime=mime.split(",",2)[0]}xhr.overrideMimeType&&xhr.overrideMimeType(mime)}if(settings.contentType||(settings.contentType!==false&&settings.data&&settings.type.toUpperCase()!="GET")){baseHeaders["Content-Type"]=(settings.contentType||"application/x-www-form-urlencoded")}settings.headers=$.extend(baseHeaders,settings.headers||{});xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty;clearTimeout(abortTimeout);var result,error=false;if((xhr.status>=200&&xhr.status<300)||xhr.status==304||(xhr.status==0&&protocol=="file:")){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type"));result=xhr.responseText;try{if(dataType=="script"){(1,eval)(result)}else{if(dataType=="xml"){result=xhr.responseXML}else{if(dataType=="json"){result=blankRE.test(result)?null:$.parseJSON(result)}}}}catch(e){error=e}if(error){ajaxError(error,"parsererror",xhr,settings)}else{ajaxSuccess(result,xhr,settings)}}else{ajaxError(null,xhr.status?"error":"abort",xhr,settings)}}};var async="async" in settings?settings.async:true;xhr.open(settings.type,settings.url,async);for(name in settings.headers){xhr.setRequestHeader(name,settings.headers[name])}if(ajaxBeforeSend(xhr,settings)===false){xhr.abort();return false}if(settings.timeout>0){abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty;xhr.abort();ajaxError(null,"timeout",xhr,settings)},settings.timeout)}xhr.send(settings.data?settings.data:null);return xhr};function parseArguments(url,data,success,dataType){var hasData=!$.isFunction(data);return{url:url,data:hasData?data:undefined,success:!hasData?data:$.isFunction(success)?success:undefined,dataType:hasData?dataType||success:success}}$.get=function(url,data,success,dataType){return $.ajax(parseArguments.apply(null,arguments))};$.post=function(url,data,success,dataType){var options=parseArguments.apply(null,arguments);options.type="POST";return $.ajax(options)};$.getJSON=function(url,data,success){var options=parseArguments.apply(null,arguments);options.dataType="json";return $.ajax(options)};$.fn.load=function(url,data,success){if(!this.length){return this}var self=this,parts=url.split(/\s/),selector,options=parseArguments(url,data,success),callback=options.success;if(parts.length>1){options.url=parts[0],selector=parts[1]}options.success=function(response){self.html(selector?$("<div>").html(response.replace(rscript,"")).find(selector):response);callback&&callback.apply(self,arguments)};$.ajax(options);return this};var escape=encodeURIComponent;function serialize(params,obj,traditional,scope){var type,array=$.isArray(obj);$.each(obj,function(key,value){type=$.type(value);if(scope){key=traditional?scope:scope+"["+(array?"":key)+"]"}if(!scope&&array){params.add(value.name,value.value)}else{if(type=="array"||(!traditional&&type=="object")){serialize(params,value,traditional,key)}else{params.add(key,value)}}})}$.param=function(obj,traditional){var params=[];params.add=function(k,v){this.push(escape(k)+"="+escape(v))};serialize(params,obj,traditional);return params.join("&").replace(/%20/g,"+")}})(Zepto);

(function(a){if(String.prototype.trim===a){String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}}if(Array.prototype.reduce===a){Array.prototype.reduce=function(c){if(this===void 0||this===null){throw new TypeError()}var f=Object(this),b=f.length>>>0,e=0,d;if(typeof c!="function"){throw new TypeError()}if(b==0&&arguments.length==1){throw new TypeError()}if(arguments.length>=2){d=arguments[1]}else{do{if(e in f){d=f[e++];break}if(++e>=b){throw new TypeError()}}while(true)}while(e<b){if(e in f){d=c.call(a,d,f[e],e,f)}e++}return d}}})();var Zepto=(function(){var i,o,L,a,F=[],k=F.slice,e=window.document,E={},G={},l=e.defaultView.getComputedStyle,O={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},s=/^\s*<(\w+)[^>]*>/,z=[1,9,11],t=["after","prepend","before","append"],p=e.createElement("table"),H=e.createElement("tr"),g={tr:e.createElement("tbody"),tbody:p,thead:p,tfoot:p,td:H,th:H,"*":e.createElement("div")},q=/complete|loaded|interactive/,C=/^\.([\w-]+)$/,r=/^#([\w-]+)$/,D=/^[\w-]+$/;function y(P){return({}).toString.call(P)=="[object Function]"}function v(P){return P instanceof Object}function B(P){return P instanceof Array}function w(P){return typeof P.length=="number"}function N(P){return P.filter(function(Q){return Q!==i&&Q!==null})}function x(P){return P.length>0?[].concat.apply([],P):P}function M(P){return P.replace(/-+(.)?/g,function(Q,R){return R?R.toUpperCase():""})}function j(P){return P.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function I(P){return P.filter(function(R,Q,S){return S.indexOf(R)==Q})}function J(P){return P in G?G[P]:(G[P]=new RegExp("(^|\\s)"+P+"(\\s|$)"))}function f(P,Q){return(typeof Q=="number"&&!O[j(P)])?Q+"px":Q}function K(R){var P,Q;if(!E[R]){P=e.createElement(R);e.body.appendChild(P);Q=l(P,"").getPropertyValue("display");P.parentNode.removeChild(P);Q=="none"&&(Q="block");E[R]=Q}return E[R]}function n(P){return P.children?k.call(P.children):k.call(P.childNodes).filter(function(Q){return Q.nodeType===1})}function d(R,Q){if(Q===i){Q=s.test(R)&&RegExp.$1}if(!(Q in g)){Q="*"}var P=g[Q];P.innerHTML=""+R;return k.call(P.childNodes)}function b(Q,P){Q=Q||F;Q.__proto__=b.prototype;Q.selector=P||"";return Q}function A(P,Q){if(!P){return b()}if(Q!==i){return A(Q).find(P)}else{if(y(P)){return A(e).ready(P)}else{if(P instanceof b){return P}else{var R;if(B(P)){R=N(P)}else{if(z.indexOf(P.nodeType)>=0||P===window){R=[P],P=null}else{if(s.test(P)){R=d(P.trim(),RegExp.$1),P=null}else{if(P.nodeType&&P.nodeType==3){R=[P]}else{R=L(e,P)}}}}return b(R,P)}}}}A.extend=function(P){k.call(arguments,1).forEach(function(Q){for(o in Q){P[o]=Q[o]}});return P};A.qsa=L=function(Q,P){var R;return(Q===e&&r.test(P))?((R=Q.getElementById(RegExp.$1))?[R]:F):k.call(C.test(P)?Q.getElementsByClassName(RegExp.$1):D.test(P)?Q.getElementsByTagName(P):Q.querySelectorAll(P))};function u(Q,P){return P===i?A(Q):A(Q).filter(P)}function m(R,Q,P,S){return y(Q)?Q.call(R,P,S):Q}A.isFunction=y;A.isObject=v;A.isArray=B;A.map=function(T,U){var S,P=[],R,Q;if(w(T)){for(R=0;R<T.length;R++){S=U(T[R],R);if(S!=null){P.push(S)}}}else{for(Q in T){S=U(T[Q],Q);if(S!=null){P.push(S)}}}return x(P)};A.each=function(R,S){var Q,P;if(w(R)){for(Q=0;Q<R.length;Q++){if(S.call(R[Q],Q,R[Q])===false){return R}}}else{for(P in R){if(S.call(R[P],P,R[P])===false){return R}}}return R};A.fn={forEach:F.forEach,reduce:F.reduce,push:F.push,indexOf:F.indexOf,concat:F.concat,map:function(P){return A.map(this,function(R,Q){return P.call(R,Q,R)})},slice:function(){return A(k.apply(this,arguments))},ready:function(P){if(q.test(e.readyState)){P(A)}else{e.addEventListener("DOMContentLoaded",function(){P(A)},false)}return this},get:function(P){return P===i?this:this[P]},size:function(){return this.length},remove:function(){return this.each(function(){if(this.parentNode!=null){this.parentNode.removeChild(this)}})},each:function(P){this.forEach(function(R,Q){P.call(R,Q,R)});return this},filter:function(P){return A([].filter.call(this,function(Q){return Q.parentNode&&L(Q.parentNode,P).indexOf(Q)>=0}))},end:function(){return this.prevObject||A()},andSelf:function(){return this.add(this.prevObject||A())},add:function(P,Q){return A(I(this.concat(A(P,Q))))},is:function(P){return this.length>0&&A(this[0]).filter(P).length>0},not:function(P){var Q=[];if(y(P)&&P.call!==i){this.each(function(S){if(!P.call(this,S)){Q.push(this)}})}else{var R=typeof P=="string"?this.filter(P):(w(P)&&y(P.item))?k.call(P):A(P);this.forEach(function(S){if(R.indexOf(S)<0){Q.push(S)}})}return A(Q)},eq:function(P){return P===-1?this.slice(P):this.slice(P,+P+1)},first:function(){var P=this[0];return P&&!v(P)?P:A(P)},last:function(){var P=this[this.length-1];return P&&!v(P)?P:A(P)},find:function(Q){var P;if(this.length==1){P=L(this[0],Q)}else{P=this.map(function(){return L(this,Q)})}return A(P)},closest:function(P,Q){var R=this[0],S=L(Q||e,P);if(!S.length){R=null}while(R&&S.indexOf(R)<0){R=R!==Q&&R!==e&&R.parentNode}return A(R)},parents:function(P){var R=[],Q=this;while(Q.length>0){Q=A.map(Q,function(S){if((S=S.parentNode)&&S!==e&&R.indexOf(S)<0){R.push(S);return S}})}return u(R,P)},parent:function(P){return u(I(this.pluck("parentNode")),P)},children:function(P){return u(this.map(function(){return n(this)}),P)},siblings:function(P){return u(this.map(function(Q,R){return n(R.parentNode).filter(function(S){return S!==R})}),P)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(P){return this.map(function(){return this[P]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null);if(l(this,"").getPropertyValue("display")=="none"){this.style.display=K(this.nodeName)}})},replaceWith:function(P){return this.each(function(){A(this).before(P).remove()})},wrap:function(P){return this.each(function(){A(this).wrapAll(A(P)[0].cloneNode(false))})},wrapAll:function(P){if(this[0]){A(this[0]).before(P=A(P));P.append(this)}return this},unwrap:function(){this.parent().each(function(){A(this).replaceWith(A(this).children())});return this},hide:function(){return this.css("display","none")},toggle:function(P){return(P===i?this.css("display")=="none":P)?this.show():this.hide()},prev:function(){return A(this.pluck("previousElementSibling"))},next:function(){return A(this.pluck("nextElementSibling"))},html:function(P){return P===i?(this.length>0?this[0].innerHTML:null):this.each(function(Q){var R=this.innerHTML;A(this).empty().append(m(this,P,Q,R))})},text:function(P){return P===i?(this.length>0?this[0].textContent:null):this.each(function(){this.textContent=P})},attr:function(P,R){var Q;return(typeof P=="string"&&R===i)?(this.length==0?i:(P=="value"&&this[0].nodeName=="INPUT")?this.val():(!(Q=this[0].getAttribute(P))&&P in this[0])?this[0][P]:Q):this.each(function(S){if(v(P)){for(o in P){this.setAttribute(o,P[o])}}else{this.setAttribute(P,m(this,R,S,this.getAttribute(P)))}})},removeAttr:function(P){return this.each(function(){this.removeAttribute(P)})},data:function(P,Q){return this.attr("data-"+P,Q)},val:function(P){return(P===i)?(this.length>0?this[0].value:null):this.each(function(Q){this.value=m(this,P,Q,this.value)})},offset:function(){if(this.length==0){return null}var P=this[0].getBoundingClientRect();return{left:P.left+window.pageXOffset,top:P.top+window.pageYOffset,width:P.width,height:P.height}},css:function(R,Q){if(Q===i&&typeof R=="string"){return(this.length==0?i:this[0].style[M(R)]||l(this[0],"").getPropertyValue(R))}var P="";for(o in R){P+=j(o)+":"+f(o,R[o])+";"}if(typeof R=="string"){P=j(R)+":"+f(R,Q)}return this.each(function(){this.style.cssText+=";"+P})},index:function(P){return P?this.indexOf(A(P)[0]):this.parent().children().indexOf(this[0])},hasClass:function(P){if(this.length<1){return false}else{return J(P).test(this[0].className)}},addClass:function(P){return this.each(function(Q){a=[];var S=this.className,R=m(this,P,Q,S);R.split(/\s+/g).forEach(function(T){if(!A(this).hasClass(T)){a.push(T)}},this);a.length&&(this.className+=(S?" ":"")+a.join(" "))})},removeClass:function(P){return this.each(function(Q){if(P===i){return this.className=""}a=this.className;m(this,P,Q,a).split(/\s+/g).forEach(function(R){a=a.replace(J(R)," ")});this.className=a.trim()})},toggleClass:function(Q,P){return this.each(function(R){var S=m(this,Q,R,this.className);(P===i?!A(this).hasClass(S):P)?A(this).addClass(S):A(this).removeClass(S)})}};"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings".split(",").forEach(function(Q){var P=A.fn[Q];A.fn[Q]=function(){var R=P.apply(this,arguments);R.prevObject=this;return R}});["width","height"].forEach(function(P){A.fn[P]=function(Q){var S,R=P.replace(/./,function(T){return T[0].toUpperCase()});if(Q===i){return this[0]==window?window["inner"+R]:this[0]==e?e.documentElement["offset"+R]:(S=this.offset())&&S[P]}else{return this.each(function(T){var U=A(this);U.css(P,m(this,Q,T,U[P]()))})}}});function h(P,S,R){var Q=(P%2)?S:S.parentNode;Q&&Q.insertBefore(R,!P?S.nextSibling:P==1?Q.firstChild:P==2?S:null)}function c(R,P){P(R);for(var Q in R.childNodes){c(R.childNodes[Q],P)}}t.forEach(function(R,Q){A.fn[R]=function(U){var S=v(U)?U:d(U);if(!("length" in S)||S.nodeType){S=[S]}if(S.length<1){return this}var T=this.length,V=T>1,W=Q<2;return this.each(function(X,aa){for(var Y=0;Y<S.length;Y++){var Z=S[W?S.length-Y-1:Y];c(Z,function(ab){if(ab.nodeName!=null&&ab.nodeName.toUpperCase()==="SCRIPT"&&(!ab.type||ab.type==="text/javascript")){window["eval"].call(window,ab.innerHTML)}});if(V&&X<T-1){Z=Z.cloneNode(true)}h(Q,aa,Z)}})};var P=(Q%2)?R+"To":"insert"+(Q?"Before":"After");A.fn[P]=function(S){A(S)[R](this);return this}});b.prototype=A.fn;return A})();window.Zepto=Zepto;"$" in window||(window.$=Zepto);(function(h){var o=h.qsa,b={},n=1,q={};q.click=q.mousedown=q.mouseup=q.mousemove="MouseEvents";function l(r){return r._zid||(r._zid=n++)}function c(s,u,t,r){u=e(u);if(u.ns){var v=k(u.ns)}return(b[l(s)]||[]).filter(function(w){return w&&(!u.e||w.e==u.e)&&(!u.ns||v.test(w.ns))&&(!t||w.fn==t)&&(!r||w.sel==r)})}function e(r){var s=(""+r).split(".");return{e:s[0],ns:s.slice(1).sort().join(" ")}}function k(r){return new RegExp("(?:^| )"+r.replace(" "," .* ?")+"(?: |$)")}function m(r,t,s){if(h.isObject(r)){h.each(r,s)}else{r.split(/\s/).forEach(function(u){s(u,t)})}}function p(u,t,v,s,r){var x=l(u),w=(b[x]||(b[x]=[]));m(t,v,function(B,A){var z=r&&r(A,B),D=z||A;var C=function(F){var E=D.apply(u,[F].concat(F.data));if(E===false){F.preventDefault()}return E};var y=h.extend(e(B),{fn:A,proxy:C,sel:s,del:z,i:w.length});w.push(y);u.addEventListener(y.e,C,false)})}function g(t,s,u,r){var v=l(t);m(s||"",u,function(x,w){c(t,x,w,r).forEach(function(y){delete b[v][y.i];t.removeEventListener(y.e,y.proxy,false)})})}h.event={add:p,remove:g};h.fn.bind=function(r,s){return this.each(function(){p(this,r,s)})};h.fn.unbind=function(r,s){return this.each(function(){g(this,r,s)})};h.fn.one=function(r,s){return this.each(function(u,t){p(this,r,s,null,function(w,v){return function(){var x=w.apply(t,arguments);g(t,v,w);return x}})})};var d=function(){return true},a=function(){return false},j={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function i(s){var r=h.extend({originalEvent:s},s);h.each(j,function(u,t){r[u]=function(){this[t]=d;return s[u].apply(s,arguments)};r[t]=a});return r}function f(s){if(!("defaultPrevented" in s)){s.defaultPrevented=false;var r=s.preventDefault;s.preventDefault=function(){this.defaultPrevented=true;r.call(this)}}}h.fn.delegate=function(r,s,t){return this.each(function(v,u){p(u,s,t,r,function(w){return function(z){var x,y=h(z.target).closest(r,u).get(0);if(y){x=h.extend(i(z),{currentTarget:y,liveFired:u});return w.apply(y,[x].concat([].slice.call(arguments,1)))}}})})};h.fn.undelegate=function(r,s,t){return this.each(function(){g(this,s,t,r)})};h.fn.live=function(r,s){h(document.body).delegate(this.selector,r,s);return this};h.fn.die=function(r,s){h(document.body).undelegate(this.selector,r,s);return this};h.fn.on=function(s,r,t){return r===undefined||h.isFunction(r)?this.bind(s,r):this.delegate(r,s,t)};h.fn.off=function(s,r,t){return r===undefined||h.isFunction(r)?this.unbind(s,r):this.undelegate(r,s,t)};h.fn.trigger=function(r,s){if(typeof r=="string"){r=h.Event(r)}f(r);r.data=s;return this.each(function(){this.dispatchEvent(r)})};h.fn.triggerHandler=function(s,t){var u,r;this.each(function(w,v){u=i(typeof s=="string"?h.Event(s):s);u.data=t;u.target=v;h.each(c(v,s.type||s),function(x,y){r=y.proxy(u);if(u.isImmediatePropagationStopped()){return false}})});return r};("focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error").split(" ").forEach(function(r){h.fn[r]=function(s){return this.bind(r,s)}});["focus","blur"].forEach(function(r){h.fn[r]=function(t){if(t){this.bind(r,t)}else{if(this.length){try{this.get(0)[r]()}catch(s){}}}return this}});h.Event=function(u,t){var v=document.createEvent(q[u]||"Events"),r=true;if(t){for(var s in t){(s=="bubbles")?(r=!!t[s]):(v[s]=t[s])}}v.initEvent(u,r,true,null,null,null,null,null,null,null,null,null,null,null,null);return v}})(Zepto);(function(b){function a(c){var f=(this.os={}),g=(this.browser={}),j=c.match(/WebKit\/([\d.]+)/),e=c.match(/(Android)\s+([\d.]+)/),k=c.match(/(iPad).*OS\s([\d_]+)/),i=!k&&c.match(/(iPhone\sOS)\s([\d_]+)/),l=c.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),h=l&&c.match(/TouchPad/),d=c.match(/(BlackBerry).*Version\/([\d.]+)/);if(j){g.version=j[1]}g.webkit=!!j;if(e){f.android=true,f.version=e[2]}if(i){f.ios=true,f.version=i[2].replace(/_/g,"."),f.iphone=true}if(k){f.ios=true,f.version=k[2].replace(/_/g,"."),f.ipad=true}if(l){f.webos=true,f.version=l[2]}if(h){f.touchpad=true}if(d){f.blackberry=true,f.version=d[2]}}a.call(b,navigator.userAgent);b.__detect=a})(Zepto);(function(e,c){var g="",j,b,h,l={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},i=window.document,d=i.createElement("div"),k=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function a(m){return m.toLowerCase()}function f(m){return j?j+m:a(m)}e.each(l,function(n,m){if(d.style[n+"TransitionProperty"]!==c){g="-"+a(n)+"-";j=m;return false}});e.fx={off:(j===c&&d.style.transitionProperty===c),cssPrefix:g,transitionEnd:f("TransitionEnd"),animationEnd:f("AnimationEnd")};e.fn.animate=function(m,n,o,p){if(e.isObject(n)){o=n.easing,p=n.complete,n=n.duration}if(n){n=n/1000}return this.anim(m,n,o,p)};e.fn.anim=function(r,o,n,t){var q,v={},s,p=this,m,u=e.fx.transitionEnd;if(o===c){o=0.4}if(e.fx.off){o=0}if(typeof r=="string"){v[g+"animation-name"]=r;v[g+"animation-duration"]=o+"s";u=e.fx.animationEnd}else{for(s in r){if(k.test(s)){q||(q=[]);q.push(s+"("+r[s]+")")}else{v[s]=r[s]}}if(q){v[g+"transform"]=q.join(" ")}if(!e.fx.off){v[g+"transition"]="all "+o+"s "+(n||"")}}m=function(){var w={};w[g+"transition"]=w[g+"animation-name"]="none";e(this).css(w);t&&t.call(this)};if(o>0){this.one(u,m)}setTimeout(function(){p.css(v);if(o<=0){setTimeout(function(){p.each(function(){m.call(this)})},0)}},0);return this};d=null})(Zepto);(function(e){var f=0,o=e.isObject,h=window.document,j,a;function b(s,r,u){var t=e.Event(r);e(s).trigger(t,u);return !t.defaultPrevented}function i(t,s,r,u){if(t.global){return b(s||h,r,u)}}e.active=0;function d(r){if(r.global&&e.active++===0){i(r,null,"ajaxStart")}}function c(r){if(r.global&&!(--e.active)){i(r,null,"ajaxStop")}}function q(t,s){var r=s.context;if(s.beforeSend.call(r,t,s)===false||i(s,r,"ajaxBeforeSend",[t,s])===false){return false}i(s,r,"ajaxSend",[t,s])}function n(u,v,t){var s=t.context,r="success";t.success.call(s,u,r,v);i(t,s,"ajaxSuccess",[v,t,u]);l(r,v,t)}function m(r,u,v,t){var s=t.context;t.error.call(s,v,u,r);i(t,s,"ajaxError",[v,t,r]);l(u,v,t)}function l(r,u,t){var s=t.context;t.complete.call(s,u,r);i(t,s,"ajaxComplete",[u,t]);c(t)}function g(){}e.ajaxJSONP=function(s){var u="jsonp"+(++f),r=h.createElement("script"),w=function(){e(r).remove();if(u in window){window[u]=g}l("abort",v,s)},v={abort:w},t;window[u]=function(x){clearTimeout(t);e(r).remove();delete window[u];n(x,v,s)};r.src=s.url.replace(/=\?/,"="+u);e("head").append(r);if(s.timeout>0){t=setTimeout(function(){v.abort();l("timeout",v,s)},s.timeout)}return v};e.ajaxSettings={type:"GET",beforeSend:g,success:g,error:g,complete:g,context:null,global:true,xhr:function(){return new window.XMLHttpRequest()},accepts:{script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:false,timeout:0};e.ajax=function(C){var t=e.extend({},C||{});for(j in e.ajaxSettings){if(t[j]===undefined){t[j]=e.ajaxSettings[j]}}d(t);if(!t.crossDomain){t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!=window.location.host}if(/=\?/.test(t.url)){return e.ajaxJSONP(t)}if(!t.url){t.url=window.location.toString()}if(t.data&&!t.contentType){t.contentType="application/x-www-form-urlencoded"}if(o(t.data)){t.data=e.param(t.data)}if(t.type.match(/get/i)&&t.data){var r=t.data;if(t.url.match(/\?.*=/)){r="&"+r}else{if(r[0]!="?"){r="?"+r}}t.url+=r}if(t.cache===false){var x=Date.now(),y=/\?/,u=/([?&])_=[^&]*/,v=t.url.replace(u,"$1_="+x);t.url=v+((v===t.url)?(y.test(t.url)?"&":"?")+"_="+x:"")}var s=t.accepts[t.dataType],w={},B=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:window.location.protocol,A=e.ajaxSettings.xhr(),z;if(!t.crossDomain){w["X-Requested-With"]="XMLHttpRequest"}if(s){w.Accept=s}t.headers=e.extend(w,t.headers||{});A.onreadystatechange=function(){if(A.readyState==4){clearTimeout(z);var D,E=false;if((A.status>=200&&A.status<300)||(A.status==0&&B=="file:")){if(s=="application/json"&&!(/^\s*$/.test(A.responseText))){try{D=JSON.parse(A.responseText)}catch(F){E=F}}else{D=A.responseText}if(E){m(E,"parsererror",A,t)}else{n(D,A,t)}}else{m(null,"error",A,t)}}};A.open(t.type,t.url,true);if(t.withCredentials){A.withCredentials=true}if(t.contentType){t.headers["Content-Type"]=t.contentType}for(a in t.headers){A.setRequestHeader(a,t.headers[a])}if(q(A,t)===false){A.abort();return false}if(t.timeout>0){z=setTimeout(function(){A.onreadystatechange=g;A.abort();m(null,"timeout",A,t)},t.timeout)}A.send(t.data);return A};e.get=function(r,s){return e.ajax({url:r,success:s})};e.post=function(s,t,u,r){if(e.isFunction(t)){r=r||u,u=t,t=null}return e.ajax({type:"POST",url:s,data:t,success:u,dataType:r})};e.getJSON=function(r,s){return e.ajax({url:r,success:s,dataType:"json"})};e.fn.load=function(t,v){if(!this.length){return this}var s=this,u=t.split(/\s/),r;if(u.length>1){t=u[0],r=u[1]}e.get(t,function(w){s.html(r?e(h.createElement("div")).html(w).find(r).html():w);v&&v.call(s)});return this};var k=encodeURIComponent;function p(u,t,s,r){var v=e.isArray(t);e.each(t,function(w,x){if(r){w=s?r:r+"["+(v?"":w)+"]"}if(!r&&v){u.add(x.name,x.value)}else{if(s?e.isArray(x):o(x)){p(u,x,s,w)}else{u.add(w,x)}}})}e.param=function(s,r){var t=[];t.add=function(w,u){this.push(k(w)+"="+k(u))};p(t,s,r);return t.join("&").replace("%20","+")}})(Zepto);(function(a){a.fn.serializeArray=function(){var b=[],c;a(Array.prototype.slice.call(this.get(0).elements)).each(function(){c=a(this);var d=c.attr("type");if(this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&d!="submit"&&d!="reset"&&d!="button"&&((d!="radio"&&d!="checkbox")||this.checked)){b.push({name:c.attr("name"),value:c.val()})}});return b};a.fn.serialize=function(){var b=[];this.serializeArray().forEach(function(c){b.push(encodeURIComponent(c.name)+"="+encodeURIComponent(c.value))});return b.join("&")};a.fn.submit=function(c){if(c){this.bind("submit",c)}else{if(this.length){var b=a.Event("submit");this.eq(0).trigger(b);if(!b.defaultPrevented){this.get(0).submit()}}}return this}})(Zepto);(function(e){var d={},f=e.fn.data,c=e.uuid=+new Date(),g=e.expando="Zepto"+c;function a(j,i){var k=j[g],h=k&&d[k];return i===undefined?h||b(j):(h&&h[i])||f.call(e(j),i)}function b(j,i,k){var l=j[g]||(j[g]=++c),h=d[l]||(d[l]={});if(i!==undefined){h[i]=k}return h}e.fn.data=function(h,i){return i===undefined?this.length==0?undefined:a(this[0],h):this.each(function(j){b(this,h,e.isFunction(i)?i.call(this,j,a(this,h)):i)})}})(Zepto);(function(f){var g={},c;function a(h){return"tagName" in h?h:h.parentNode}function b(i,h,k,j){var m=Math.abs(i-h),l=Math.abs(k-j);if(m>=l){return(i-h>0?"Left":"Right")}else{return(k-j>0?"Up":"Down")}}var e=750;function d(){if(g.last&&(Date.now()-g.last>=e)){g.el.trigger("longTap");g={}}}f(document).ready(function(){f(document.body).bind("touchstart",function(i){var h=Date.now(),j=h-(g.last||h);g.el=f(a(i.touches[0].target));c&&clearTimeout(c);g.x1=i.touches[0].pageX;g.y1=i.touches[0].pageY;if(j>0&&j<=250){g.isDoubleTap=true}g.last=h;setTimeout(d,e)}).bind("touchmove",function(h){g.x2=h.touches[0].pageX;g.y2=h.touches[0].pageY}).bind("touchend",function(h){if(g.isDoubleTap){g.el.trigger("doubleTap");g={}}else{if(g.x2>0||g.y2>0){(Math.abs(g.x1-g.x2)>30||Math.abs(g.y1-g.y2)>30)&&g.el.trigger("swipe")&&g.el.trigger("swipe"+(b(g.x1,g.x2,g.y1,g.y2)));g.x1=g.x2=g.y1=g.y2=g.last=0}else{if("last" in g){g.el.trigger("tap");c=setTimeout(function(){c=null;g.el.trigger("singleTap");g={}},250)}}}}).bind("touchcancel",function(){g={}})});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(h){f.fn[h]=function(i){return this.bind(h,i)}})})(Zepto);
