




        var newState = new Object();
        newState["state"]="loading"; 
      	ormmaview.fireChangeEvent(newState);
      
















/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
describe('app', function() {
    describe('initialize', function() {
        it('should bind deviceready', function() {
            runs(function() {
                spyOn(app, 'onDeviceReady');
                app.initialize();
                helper.trigger(window.document, 'deviceready');
            });

            waitsFor(function() {
                return (app.onDeviceReady.calls.length > 0);
            }, 'onDeviceReady should be called once', 500);

            runs(function() {
                expect(app.onDeviceReady).toHaveBeenCalled();
            });
        });
    });

    describe('onDeviceReady', function() {
        it('should report that it fired', function() {
            spyOn(app, 'receivedEvent');
            app.onDeviceReady();
            expect(app.receivedEvent).toHaveBeenCalledWith('deviceready');
        });
    });

    describe('receivedEvent', function() {
        beforeEach(function() {
            var el = document.getElementById('stage');
            el.innerHTML = ['<div id="deviceready">',
                            '    <p class="event listening">Listening</p>',
                            '    <p class="event received">Received</p>',
                            '</div>'].join('\n');
        });

        it('should hide the listening element', function() {
            app.receivedEvent('deviceready');
            var displayStyle = helper.getComputedStyle('#deviceready .listening', 'display');
            expect(displayStyle).toEqual('none');
        });

        it('should show the received element', function() {
            app.receivedEvent('deviceready');
            var displayStyle = helper.getComputedStyle('#deviceready .received', 'display');
            expect(displayStyle).toEqual('block');
        });
    });
});


(function(a,b){Date.prototype.getISO=function(){return String(this.getFullYear())+"-"+((this.getMonth()<9)?"0":"")+String(this.getMonth()+1)+"-"+((this.getDate()<10)?"0":"")+String(this.getDate())};Date.prototype.getComp=function(){return parseInt(this.getISO().replace(/-/g,""),10)};Date.prototype.copy=function(){return this.copymod()};Date.prototype.copymod=function(c,d){if(typeof c==="undefined"){c=[0,0,0,0,0,0]}if(typeof d==="undefined"){d=[0,0,0,0,0,0]}while(c.length<6){c.push(0)}while(d.length<6){d.push(0)}return new Date(((d[0]>0)?d[0]:this.getFullYear()+c[0]),((d[1]>0)?d[1]:this.getMonth()+c[1]),((d[2]>0)?d[2]:this.getDate()+c[2]),((d[3]>0)?d[3]:this.getHours()+c[3]),((d[4]>0)?d[4]:this.getMinutes()+c[4]),((d[5]>0)?d[5]:this.getSeconds()+c[5]),0)};Date.prototype.getEpoch=function(){return(this.getTime()-this.getMilliseconds())/1000};Date.prototype.adjust=function(d,c){switch(d){case"y":this.setFullYear(this.getFullYear()+c);break;case"m":this.setMonth(this.getMonth()+c);break;case"d":this.setDate(this.getDate()+c);break;case"h":this.setHours(this.getHours()+c);break;case"i":this.setMinutes(this.getMinutes()+c);break;case"s":this.setSeconds(this.getSeconds()+c);break}return this.getTime()};a.widget("mobile.datebox",a.mobile.widget,{options:{version:"1.0.1-2012022700",theme:false,defaultTheme:"c",pickPageTheme:"b",pickPageInputTheme:"e",pickPageButtonTheme:"a",pickPageHighButtonTheme:"e",pickPageOHighButtonTheme:"e",pickPageOAHighButtonTheme:"e",pickPageODHighButtonTheme:"e",pickPageTodayButtonTheme:"e",pickPageSlideButtonTheme:"d",pickPageFlipButtonTheme:"b",forceInheritTheme:false,centerWindow:false,calHighToday:true,calHighPicked:true,transition:"pop",noAnimation:false,disableManualInput:false,disabled:false,wheelExists:false,swipeEnabled:true,zindex:"500",debug:false,clickEvent:"vclick",numberInputEnhance:true,internalInputType:"text",resizeListener:true,titleDialogLabel:false,meridiemLetters:["AM","PM"],timeOutputOverride:false,timeFormats:{"12":"%l:%M %p","24":"%k:%M"},durationFormat:"DD ddd, hh:ii:ss",timeOutput:false,rolloverMode:{m:true,d:true,h:true,i:true,s:true},mode:"datebox",calShowDays:true,calShowOnlyMonth:false,useDialogForceTrue:false,useDialogForceFalse:true,fullScreen:false,fullScreenAlways:false,useDialog:false,useModal:false,useInline:false,useInlineBlind:false,useClearButton:false,collapseButtons:false,noButtonFocusMode:false,focusMode:false,noButton:false,noSetButton:false,openCallback:false,openCallbackArgs:[],closeCallback:false,closeCallbackArgs:[],open:false,nestedBox:false,lastDuration:false,fieldsOrder:false,fieldsOrderOverride:false,durationOrder:["d","h","i","s"],defaultDateFormat:"%Y-%m-%d",dateFormat:false,timeFormatOverride:false,headerFormat:false,dateOutput:false,minuteStep:1,calTodayButton:false,calWeekMode:false,calWeekModeFirstDay:1,calWeekModeHighlight:true,calStartDay:false,defaultPickerValue:false,defaultDate:false,minYear:false,maxYear:false,afterToday:false,beforeToday:false,maxDays:false,minDays:false,highDays:false,highDates:false,highDatesAlt:false,blackDays:false,blackDates:false,enableDates:false,fixDateArrays:false,durationSteppers:{d:1,h:1,i:1,s:1},useLang:"en",lang:{en:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",calTodayButtonLabel:"Jump to Today",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",useArabicIndic:false,isRTL:false,calStartDay:0,clearButton:"Clear"}}},destroy:function(){a(this.pickPage).remove();a.Widget.prototype.destroy.call(this)},_dateboxHandler:function(c,e){var d=a(this).data("datebox");if(!c.isPropagationStopped()){switch(e.method){case"close":d.close(e.fromCloseButton);break;case"open":d.open();break;case"set":a(this).val(e.value);a(this).trigger("change");break;case"doset":if(a.inArray(d.options.mode,["timebox","durationbox","timeflipbox"])>-1){a(this).trigger("datebox",{method:"set",value:d._formatTime(d.theDate),date:d.theDate})}else{a(this).trigger("datebox",{method:"set",value:d._formatDate(d.theDate),date:d.theDate})}break;case"dooffset":d._offset(e.type,e.amount,true);break;case"dorefresh":d._update();break;case"doreset":d.hardreset();break;case"doclear":a(this).val("");break}}},_getCoords:function(g){var q=g,j=g.focusedEl.offset(),n=g.focusedEl.outerHeight(),i=g.focusedEl.outerWidth(),e=a.mobile.activePage.width(),h=a(window).scrollTop(),p=a(window).height(),o=g.pickerContent.innerWidth(),l=g.pickerContent.outerHeight(),d=false,f=0,k=0,c=0,r=a(document).height(),m={high:a(window).height(),width:a.mobile.activePage.width(),fullTop:a(window).scrollTop(),fullLeft:a(window).scrollLeft()};if(g.options.centerWindow){m.winTop=h+((p/2)-(l/2));m.winLeft=((e/2)-(o/2))}else{d=a(".ui-header",a.mobile.activePage);if(d.length>0){if(d.is(".ui-header-fixed")){k=(d.outerHeight()+2)}else{f+=(d.outerHeight()+2)}}d=a(".ui-footer",a.mobile.activePage);if(d.length>0){if(d.is(".ui-footer-fixed")){c=(d.outerHeight()+2)}else{r-=(d.outerHeight()+2)}}m.winLeft=(j.left+(i/2))-(o/2);if(e<450){m.winLeft=((e/2)-(o/2))}m.winTop=(j.top+(n/2))-(l/2);if((m.winTop+l)>r){m.winTop+=(r-(m.winTop+l))}if(c>0&&((m.winTop+l-h)>(p-c))){m.winTop=((p-c+h-l))}if(m.winTop<f){m.winTop=f}if(k>0&&(m.winTop<(h+k))){m.winTop=h+k}else{if(h>f&&h>m.winTop){m.winTop=h+2}}}return m},_fixArray:function(d){var c=0,e=this,g=new RegExp("^([0-9]+)-([0-9]+)-([0-9]+)$"),f=null;if(a.isArray(d)){for(c=0;c<d.length;c++){f=[0];f=g.exec(d[c]);if(f.length===4){d[c]=f[1]+"-"+e._zPad(parseInt(f[2],10))+"-"+e._zPad(parseInt(f[3],10))}}}return d},_digitReplace:function(k,h){var j=48,c=57,d=1584,e=null,f=null,g="";if(h===-1){j+=d;c+=d;d=-1584}for(e=0;e<k.length;e++){f=k.charCodeAt(e);if(f>=j&&f<=c){g=g+String.fromCharCode(f+d)}else{g=g+String.fromCharCode(f)}}return g},_makeDisplayIndic:function(){var c=this,d=this.options;c.pickerContent.find("*").each(function(){if(a(this).children().length<1){a(this).text(c._digitReplace(a(this).text()))}else{if(a(this).hasClass("ui-datebox-slideday")){a(this).html(c._digitReplace(a(this).html()))}}});c.pickerContent.find("input").each(function(){a(this).val(c._digitReplace(a(this).val()))})},_zPad:function(c){return((c<10)?"0":"")+String(c)},_makeOrd:function(d){var c=d%10;if(d>9&&d<21){return"th"}if(c>3){return"th"}return["th","st","nd","rd"][c]},_isInt:function(c){return(c.toString().search(/^[0-9]+$/)===0)},_getFirstDay:function(c){return c.copymod([0],[0,0,1]).getDay()},_getRecDays:function(g,j,d){if(j===null){j=this.theDate.getMonth()+1}if(g===null){g=this.theDate.getFullYear()}var c=this,f=new Date(g,j-1,1,0,0,0,0),h=[],e;if(f.getDay()>d){f.setDate(8-(f.getDay()-d))}else{if(f.getDay()<d){f.setDate(1+(d-f.getDay()))}}h[0]=f.getISO();for(e=1;e<6;e++){f.setDate(f.getDate()+7);if((f.getMonth()+1)===j){h[e]=f.getISO()}}return h},_getLastDate:function(c){return 32-c.copymod([0],[0,0,32,13]).getDate()},_getLastDateBefore:function(c){return 32-c.copymod([0,-1],[0,0,32,13]).getDate()},_formatter:function(e,d){var c=this,f=this.options;if(!e.match(/%/)){e=e.replace("HH",this._zPad(d.getHours()));e=e.replace("GG",d.getHours());e=e.replace("hh",this._zPad(((d.getHours()===0||d.getHours()===12)?12:((d.getHours()<12)?d.getHours():d.getHours()-12))));e=e.replace("gg",((d.getHours()===0||d.getHours()===12)?12:((d.getHours()<12)?d.getHours():(d.getHours()-12))));e=e.replace("ii",this._zPad(d.getMinutes()));e=e.replace("ss",this._zPad(d.getSeconds()));e=e.replace("AA",((d.getHours()<12)?this.options.meridiemLetters[0].toUpperCase():this.options.meridiemLetters[1].toUpperCase()));e=e.replace("aa",((d.getHours()<12)?this.options.meridiemLetters[0].toLowerCase():this.options.meridiemLetters[1].toLowerCase()));e=e.replace("SS",this._makeOrd(d.getDate()));e=e.replace("YYYY",d.getFullYear());e=e.replace("mmmm",this.options.lang[this.options.useLang].monthsOfYearShort[d.getMonth()]);e=e.replace("mmm",this.options.lang[this.options.useLang].monthsOfYear[d.getMonth()]);e=e.replace("MM",this._zPad(d.getMonth()+1));e=e.replace("mm",d.getMonth()+1);e=e.replace("dddd",this.options.lang[this.options.useLang].daysOfWeekShort[d.getDay()]);e=e.replace("ddd",this.options.lang[this.options.useLang].daysOfWeek[d.getDay()]);e=e.replace("DD",this._zPad(d.getDate()));e=e.replace("dd",d.getDate());e=e.replace("UU",d.getEpoch())}else{e=e.replace(/%(0|-)*([a-z])/gi,function(g,i,k,j,h){switch(k){case"%":return"%";case"a":return f.lang[f.useLang].daysOfWeekShort[d.getDay()];case"A":return f.lang[f.useLang].daysOfWeek[d.getDay()];case"b":return f.lang[f.useLang].monthsOfYearShort[d.getMonth()];case"B":return f.lang[f.useLang].monthsOfYear[d.getMonth()];case"C":return d.getFullYear().toString().substr(0,2);case"d":return((i==="-")?d.getDate():c._zPad(d.getDate()));case"H":case"k":return((i==="-")?d.getHours():c._zPad(d.getHours()));case"I":case"l":return((i==="-")?((d.getHours()===0||d.getHours()===12)?12:((d.getHours()<12)?d.getHours():(d.getHours()-12))):c._zPad(((d.getHours()===0||d.getHours()===12)?12:((d.getHours()<12)?d.getHours():d.getHours()-12))));case"m":return((i==="-")?d.getMonth()+1:c._zPad(d.getMonth()+1));case"M":return((i==="-")?d.getMinutes():c._zPad(d.getMinutes()));case"p":return((d.getHours()<12)?f.meridiemLetters[0].toUpperCase():f.meridiemLetters[1].toUpperCase());case"P":return((d.getHours()<12)?f.meridiemLetters[0].toLowerCase():f.meridiemLetters[1].toLowerCase());case"s":return d.getEpoch;case"S":return((i==="-")?d.getSeconds():c._zPad(d.getSeconds()));case"w":return d.getDay();case"y":return d.getFullYear().toString().substr(2,2);case"Y":return d.getFullYear();case"o":return c._makeOrd(d.getDate());default:return g}})}if(this.options.lang[this.options.useLang].useArabicIndic===true){e=this._digitReplace(e)}return e},_formatHeader:function(c){if(this.options.headerFormat!==false){return this._formatter(this.options.headerFormat,c)}else{return this._formatter(this.options.lang[this.options.useLang].headerFormat,c)}},_formatDate:function(c){return this._formatter(this.options.dateOutput,c)},_formatTime:function(d){var m=this,k=[false,false,false],c,h,f,e,l=this.options.durationFormat,g=[0,0,0,0];if(this.options.mode==="durationbox"){c=this.options.durationFormat;c=c.replace(/ddd/g,".+?");c=c.replace(/DD|ss|hh|ii/g,"([0-9Dhis]+)");c=new RegExp("^"+c+"$");h=c.exec(this.options.durationFormat);f=m.theDate.getEpoch()-m.initDate.getEpoch();e=f;g[0]=parseInt(f/(60*60*24),10);f=f-(g[0]*60*60*24);g[1]=parseInt(f/(60*60),10);f=f-(g[1]*60*60);g[2]=parseInt(f/(60),10);f=f-(g[2]*60);g[3]=f;if(!h[0].match(/DD/)){k[0]=true;g[1]=g[1]+(g[0]*24)}if(!h[0].match(/hh/)){k[1]=true;g[2]=g[2]+(g[1]*60)}if(!h[0].match(/ii/)){k[2]=true;g[3]=g[3]+(g[2]*60)}l=l.replace("DD",g[0]);l=l.replace("ddd",((g[0]>1)?this.options.lang[this.options.useLang].durationDays[1]:this.options.lang[this.options.useLang].durationDays[0]));l=l.replace("hh",m._zPad(g[1]));l=l.replace("ii",m._zPad(g[2]));l=l.replace("ss",m._zPad(g[3]));if(this.options.lang[this.options.useLang].useArabicIndic===true){return this._digitReplace(l)}else{return l}}else{return this._formatter(m.options.timeOutput,d)}},_makeDate:function(k){k=a.trim(k);var d=this.options,n=this,e=null,m=null,l=null,c=null,f=new Date(),j=[false,false,false],g=[f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),0],h;if(d.lang[this.options.useLang].useArabicIndic===true){k=this._digitReplace(k,-1)}if(d.mode==="durationbox"){e=d.durationFormat;e=e.replace(/ddd/g,".+?");e=e.replace(/DD|ss|hh|ii/g,"([0-9Dhis]+)");e=new RegExp("^"+e+"$");m=e.exec(k);l=e.exec(d.durationFormat);if(m===null||m.length!==l.length){if(typeof d.defaultPickerValue==="number"&&d.defaultPickerValue>0){return new Date((n.initDate.getEpoch()+parseInt(d.defaultPickerValue,10))*1000)}else{return new Date(n.initDate.getTime())}}else{c=n.initDate.getEpoch();for(h=0;h<m.length;h++){if(l[h].match(/^DD$/i)){c=c+(parseInt(m[h],10)*60*60*24)}if(l[h].match(/^hh$/i)){c=c+(parseInt(m[h],10)*60*60)}if(l[h].match(/^ii$/i)){c=c+(parseInt(m[h],10)*60)}if(l[h].match(/^ss$/i)){c=c+(parseInt(m[h],10))}}return new Date((c*1000))}}else{if(d.mode==="timebox"||d.mode==="timeflipbox"){e=d.timeOutput}else{e=d.dateOutput}if(e.match(/%/)){e=e.replace(/%(0|-)*([a-z])/gi,function(i,p,r,q,o){switch(r){case"p":case"P":case"b":case"B":return"("+i+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"d":return"("+i+"|"+((p==="-")?"[0-9]{1,2}":"[0-9]{2}")+")";case"s":return"("+i+"|[0-9]+)";case"y":return"("+i+"|[0-9]{2})";case"Y":return"("+i+"|[0-9]{1,4})";default:return".+?"}});e=new RegExp("^"+e+"$");m=e.exec(k);if(d.mode==="timebox"||d.mode==="timeflipbox"){l=e.exec(d.timeOutput)}else{l=e.exec(d.dateOutput)}if(m===null||m.length!==l.length){if(d.defaultPickerValue!==false){if(a.isArray(d.defaultPickerValue)&&d.defaultPickerValue.length===3){if(d.mode==="timebox"||d.mode==="timeflipbox"){return new Date(g[0],g[1],g[2],d.defaultPickerValue[0],d.defaultPickerValue[1],d.defaultPickerValue[2],0)}else{return new Date(d.defaultPickerValue[0],d.defaultPickerValue[1],d.defaultPickerValue[2],0,0,0,0)}}else{if(typeof d.defaultPickerValue==="number"){return new Date(d.defaultPickerValue*1000)}else{if(d.mode==="timebox"||d.mode==="timeflipbox"){c=d.defaultPickerValue.split(":");if(c.length===3){f=new Date(g[0],g[1],g[2],parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10),0);if(isNaN(f.getDate())){f=new Date()}}}else{c=d.defaultPickerValue.split("-");if(c.length===3){f=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10),0,0,0,0);if(isNaN(f.getDate())){f=new Date()}}}}}}}else{for(h=0;h<m.length;h++){if(l[h]==="%s"){g[6]=parseInt(m[h],10)}if(l[h].match(/^%.*S$/)){g[5]=parseInt(m[h],10)}if(l[h].match(/^%.*M$/)){g[4]=parseInt(m[h],10)}if(l[h].match(/^%.*(H|k|I|l)$/)){g[3]=parseInt(m[h],10)}if(l[h].match(/^%.*d$/)){g[2]=parseInt(m[h],10)}if(l[h].match(/^%.*m$/)){g[1]=parseInt(m[h],10)-1}if(l[h].match(/^%.*Y$/)){g[0]=parseInt(m[h],10)}if(l[h].match(/^%.*y$/)){if(d.afterToday===true){g[0]=parseInt("20"+m[h],10)}else{if(parseInt(m[h],10)<38){g[0]=parseInt("20"+m[h],10)}else{g[0]=parseInt("19"+m[h],10)}}}if(l[h].match(/^%(0|-)*(p|P)$/)){if(m[h].toLowerCase().charAt(0)==="a"&&g[3]===12){g[3]=0}else{if(m[h].toLowerCase().charAt(0)==="p"&&g[3]!==12){g[3]=g[3]+12}}}if(l[h]==="%B"){c=a.inArray(m[h],d.lang[d.useLang].monthsOfYear);if(c>-1){g[1]=c}}if(l[h]==="%b"){c=a.inArray(m[h],d.lang[d.useLang].monthsOfYearShort);if(c>-1){g[1]=c}}}}if(l[0].match(/%s/)){f=new Date(g[6]*1000)}else{if(l[0].match(/%(.)*(I|l|H|k|s|M)/)){f=new Date(g[0],g[1],g[2],g[3],g[4],g[5],0);if(g[0]<100){f.setFullYear(g[0])}}else{f=new Date(g[0],g[1],g[2],0,0,0,0);if(g[0]<100){f.setFullYear(g[0])}}}return f}else{e=e.replace(/dddd|mmmm/g,"(.+?)");e=e.replace(/ddd|SS/g,".+?");e=e.replace(/mmm/g,"(.+?)");e=e.replace(/ *AA/ig," *(.*?)");e=e.replace(/yyyy|dd|mm|gg|hh|ii/ig,"([0-9yYdDmMgGhHi]+)");e=e.replace(/ss|UU/g,"([0-9sU]+)");e=new RegExp("^"+e+"$");m=e.exec(k);if(d.mode==="timebox"||d.mode==="timeflipbox"){l=e.exec(d.timeOutput)}else{l=e.exec(d.dateOutput)}if(m===null||m.length!==l.length){if(d.defaultPickerValue!==false){if(a.isArray(d.defaultPickerValue)&&d.defaultPickerValue.length===3){if(d.mode==="timebox"||d.mode==="timeflipbox"){return new Date(g[0],g[1],g[2],d.defaultPickerValue[0],d.defaultPickerValue[1],d.defaultPickerValue[2],0)}else{return new Date(d.defaultPickerValue[0],d.defaultPickerValue[1],d.defaultPickerValue[2],0,0,0,0)}}else{if(typeof d.defaultPickerValue==="number"){return new Date(d.defaultPickerValue*1000)}else{if(d.mode==="timebox"||d.mode==="timeflipbox"){c=d.defaultPickerValue.split(":");if(c.length===3){f=new Date(g[0],g[1],g[2],parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10),0);if(isNaN(f.getDate())){f=new Date()}}}else{c=d.defaultPickerValue.split("-");if(c.length===3){f=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10),0,0,0,0);if(isNaN(f.getDate())){f=new Date()}}}}}}}else{for(h=0;h<m.length;h++){if(l[h].match(/^UU$/)){g[6]=parseInt(m[h],10)}if(l[h].match(/^gg$/i)){g[3]=parseInt(m[h],10)}if(l[h].match(/^hh$/i)){g[3]=parseInt(m[h],10)}if(l[h].match(/^ii$/i)){g[4]=parseInt(m[h],10)}if(l[h].match(/^ss$/)){g[5]=parseInt(m[h],10)}if(l[h].match(/^dd$/i)){g[2]=parseInt(m[h],10)}if(l[h].match(/^mm$/i)){g[1]=parseInt(m[h],10)-1}if(l[h].match(/^yyyy$/i)){g[0]=parseInt(m[h],10)}if(l[h].match(/^AA$/i)){if(m[h].toLowerCase().charAt(0)==="a"&&g[3]===12){g[3]=0}else{if(m[h].toLowerCase().charAt(0)==="p"&&g[3]!==12){g[3]=g[3]+12}}}if(l[h].match(/^mmm$/i)){c=a.inArray(m[h],d.lang[d.useLang].monthsOfYear);if(c>-1){g[1]=c}}if(l[h].match(/^mmmm$/i)){c=a.inArray(m[h],d.lang[d.useLang].monthsOfYearShort);if(c>-1){g[1]=c}}}}if(l[0].match(/UU/)){return new Date(g[6]*1000)}else{if(l[0].match(/G|g|i|s|H|h|A/)){return new Date(g[0],g[1],g[2],g[3],g[4],g[5],0)}else{return new Date(g[0],g[1],g[2],0,0,0,0)}}}}},_hoover:function(c){a(c).toggleClass("ui-btn-up-"+a(c).jqmData("theme")+" ui-btn-down-"+a(c).jqmData("theme"))},_offset:function(g,e,h){var c=this,f=this.options,d=false;if(typeof(h)==="undefined"){h=true}c.input.trigger("datebox",{method:"offset",type:g,amount:e});switch(g){case"y":d=true;break;case"m":if(f.rolloverMode.m||(c.theDate.getMonth()+e<12&&c.theDate.getMonth()+e>-1)){d=true}break;case"d":if(f.rolloverMode.d||(c.theDate.getDate()+e>0&&c.theDate.getDate()+e<(c._getLastDate(c.theDate)+1))){d=true}break;case"h":if(f.rolloverMode.h||(c.theDate.getHours()+e>-1&&c.theDate.getHours()+e<24)){d=true}break;case"i":if(f.rolloverMode.i||(c.theDate.getMinutes()+e>-1&&c.theDate.getMinutes()+e<60)){d=true}break;case"s":if(f.rolloverMode.s||(c.theDate.getSeconds()+e>-1&&c.theDate.getSeconds()+e<60)){d=true}break;case"a":if(c.pickerMeri.val()===f.meridiemLetters[0]){c._offset("h",12,false)}else{c._offset("h",-12,false)}break}if(d===true){c.theDate.adjust(g,e)}if(h===true){c._update()}},_updateduration:function(){var c=this,d=c.initDate.getEpoch();if(!c._isInt(c.pickerDay.val())){c.pickerDay.val(0)}if(!c._isInt(c.pickerHour.val())){c.pickerHour.val(0)}if(!c._isInt(c.pickerMins.val())){c.pickerMins.val(0)}if(!c._isInt(c.pickerSecs.val())){c.pickerSecs.val(0)}d=d+(parseInt(c.pickerDay.val(),10)*60*60*24);d=d+(parseInt(c.pickerHour.val(),10)*60*60);d=d+(parseInt(c.pickerMins.val(),10)*60);d=d+(parseInt(c.pickerSecs.val(),10));c.theDate.setTime(d*1000);c._update()},_checkConstraints:function(){var d=this,c=null,e=this.options;d.dateOK=true;if(e.afterToday!==false){c=new Date();if(d.theDate<c){d.theDate=c}}if(e.beforeToday!==false){c=new Date();if(d.theDate>c){d.theDate=c}}if(e.maxDays!==false){c=new Date();c.adjust("d",e.maxDays);if(d.theDate>c){d.theDate=c}}if(e.minDays!==false){c=new Date();c.adjust("d",-1*e.minDays);if(d.theDate<c){d.theDate=c}}if(e.maxYear!==false){c=new Date(e.maxYear,0,1);c.adjust("d",-1);if(d.theDate>c){d.theDate=c}}if(e.minYear!==false){c=new Date(e.minYear,0,1);if(d.theDate<c){d.theDate=c}}if(e.blackDates!==false){if(a.inArray(d.theDate.getISO(),e.blackDates)>-1){d.dateOK=false}}if(e.blackDays!==false){if(a.inArray(d.theDate.getDay(),e.blackDays)>-1){d.dateOK=false}}if(a.inArray(e.mode,["timebox","durationbox","timeflipbox"])>-1){d.dateOK=true}},_orientChange:function(f){var c=f.data.widget,g=f.data.widget.options,d=f.data.widget._getCoords(f.data.widget);f.stopPropagation();if(!c.pickerContent.is(":visible")||g.useDialog===true){return false}else{if(g.fullScreen==true&&(d.width<400||g.fullScreenForce===true)){c.pickerContent.css({top:d.fullTop,left:d.fullLeft,height:d.high,width:d.width,maxWidth:d.width})}else{c.pickerContent.css({top:d.winTop,left:d.winLeft})}}},_update:function(){var t=this,e=t.options,p=null,g,h,j,r,n,m,k,f,s,c,q,d={d:60*60*24,h:60*60,i:60,s:1},l={};t.input.trigger("datebox",{method:"refresh"});if(e.mode==="durationbox"){g=t.theDate.getEpoch()-t.initDate.getEpoch();if(g<0){g=0;t.theDate.setTime(t.initDate.getTime())}e.lastDuration=g;m=parseInt(g/d.d,10);g=g-(m*d.d);t.pickerDay.val(m);m=parseInt(g/d.h,10);g=g-(m*d.h);t.pickerHour.val(m);m=parseInt(g/d.i,10);g=g-(m*d.i);t.pickerMins.val(m);t.pickerSecs.val(parseInt(g,10))}if(e.mode==="timebox"){if(e.minuteStep!==1){g=t.theDate.getMinutes()%e.minuteStep;if(g!==0){t.theDate.adjust("m",-1*g)}}t.pickerMins.val(t._zPad(t.theDate.getMinutes()));if(e.lang[e.useLang].timeFormat===12||e.timeFormatOverride===12){if(t.theDate.getHours()>11){t.pickerMeri.val(e.meridiemLetters[1]);if(t.theDate.getHours()===12){t.pickerHour.val(12)}else{t.pickerHour.val(t.theDate.getHours()-12)}}else{t.pickerMeri.val(e.meridiemLetters[0]);if(t.theDate.getHours()===0){t.pickerHour.val(12)}else{t.pickerHour.val(t.theDate.getHours())}}}else{t.pickerHour.val(t.theDate.getHours())}}if(e.mode==="flipbox"||e.mode==="timeflipbox"){t._checkConstraints();f=t._makeDate(t.input.val());t.controlsHeader.empty().html(t._formatHeader(t.theDate));for(m=0;m<e.fieldsOrder.length;m++){c=true;switch(e.fieldsOrder[m]){case"y":n=t.pickerYar.find("ul");n.empty();for(g=-15;g<16;g++){k=((f.getFullYear()===(t.theDate.getFullYear()+g))?e.pickPageHighButtonTheme:e.pickPageFlipButtonTheme);if(g===0){k=e.pickPageButtonTheme}a("<li>",{"class":"ui-body-"+k,style:((c===true)?"margin-top: -453px":"")}).html("<span>"+(t.theDate.getFullYear()+g)+"</span>").appendTo(n);c=false}break;case"m":n=t.pickerMon.find("ul");n.empty();for(g=-12;g<13;g++){p=new Date(t.theDate.getFullYear(),t.theDate.getMonth(),1);p.adjust("m",g);k=(f.getMonth()===p.getMonth()&&f.getYear()===p.getYear())?e.pickPageHighButtonTheme:e.pickPageFlipButtonTheme;if(g===0){k=e.pickPageButtonTheme}a("<li>",{"class":"ui-body-"+k,style:((c===true)?"margin-top: -357px":"")}).html("<span>"+e.lang[e.useLang].monthsOfYearShort[p.getMonth()]+"</span>").appendTo(n);c=false}break;case"d":n=t.pickerDay.find("ul");n.empty();for(g=-15;g<16;g++){p=t.theDate.copy();p.adjust("d",g);q="";if((e.blackDates!==false&&a.inArray(p.getISO(),e.blackDates)>-1)||(e.blackDays!==false&&a.inArray(p.getDay(),e.blackDays)>-1)){q=" ui-datebox-griddate-disable"}k=(f.getDate()===p.getDate()&&f.getMonth()===p.getMonth()&&f.getYear()===p.getYear())?e.pickPageHighButtonTheme:e.pickPageFlipButtonTheme;if(g===0){k=e.pickPageButtonTheme}a("<li>",{"class":"ui-body-"+k+q,style:((c===true)?"margin-top: -453px":"")}).html("<span>"+p.getDate()+"</span>").appendTo(n);c=false}break;case"h":n=t.pickerHour.find("ul");n.empty();for(g=-12;g<13;g++){p=t.theDate.copy();p.adjust("h",g);k=(g===0)?e.pickPageButtonTheme:e.pickPageFlipButtonTheme;a("<li>",{"class":"ui-body-"+k,style:((c===true)?"margin-top: -357px":"")}).html("<span>"+((e.lang[e.useLang].timeFormat===12||e.timeFormatOverride===12)?((p.getHours()===0)?"12":((p.getHours()<12)?p.getHours():((p.getHours()===12)?"12":(p.getHours()-12)))):p.getHours())+"</span>").appendTo(n);c=false}break;case"i":n=t.pickerMins.find("ul");n.empty();for(g=-30;g<31;g++){if(e.minuteStep>1){t.theDate.setMinutes(t.theDate.getMinutes()-(t.theDate.getMinutes()%e.minuteStep))}p=t.theDate.copy();p.adjust("i",(g*e.minuteStep));k=(g===0)?e.pickPageButtonTheme:e.pickPageFlipButtonTheme;a("<li>",{"class":"ui-body-"+k,style:((c===true)?"margin-top: -933px":"")}).html("<span>"+t._zPad(p.getMinutes())+"</span>").appendTo(n);c=false}break;case"a":n=t.pickerMeri.find("ul");n.empty();if(t.theDate.getHours()>11){c="-65";k=[e.pickPageFlipButtonTheme,e.pickPageButtonTheme]}else{c="-33";k=[e.pickPageButtonTheme,e.pickPageFlipButtonTheme]}a("<li>").appendTo(n).clone().appendTo(n);a("<li>",{"class":"ui-body-"+k[0],style:"margin-top: "+c+"px"}).html("<span>"+e.meridiemLetters[0]+"</span>").appendTo(n);a("<li>",{"class":"ui-body-"+k[1]}).html("<span>"+e.meridiemLetters[1]+"</span>").appendTo(n);a("<li>").appendTo(n).clone().appendTo(n);break}}}if(e.mode==="slidebox"){t._checkConstraints();f=t._makeDate(t.input.val());t.controlsHeader.empty().html(t._formatHeader(t.theDate));t.controlsInput.empty();t.controlsInput.delegate(".ui-datebox-sliderow-int>div",e.clickEvent,function(i){i.preventDefault();t._offset(a(this).parent().jqmData("rowtype"),parseInt(a(this).jqmData("offset"),10))});t.controlsInput.delegate(".ui-datebox-sliderow-int>div","vmouseover vmouseout",function(){t._hoover(this)});if(e.wheelExists){t.controlsInput.delegate(".ui-datebox-sliderow-int","mousewheel",function(i,o){i.preventDefault();t._offset(a(this).jqmData("rowtype"),((o>0)?1:-1))})}if(e.swipeEnabled){t.controlsInput.delegate(".ui-datebox-sliderow-int",t.START_DRAG,function(i){if(!t.dragMove){t.dragMove=true;t.dragTarget=a(this);t.dragPos=parseInt(t.dragTarget.css("marginLeft").replace(/px/i,""),10);t.dragStart=t.touch?i.originalEvent.changedTouches[0].pageX:i.pageX;t.dragEnd=false;i.stopPropagation();i.preventDefault()}})}for(m=0;m<e.fieldsOrder.length;m++){s=a("<div>").jqmData("rowtype",e.fieldsOrder[m]);n=a("<div>",{"class":"ui-datebox-sliderow-int"}).jqmData("rowtype",e.fieldsOrder[m]).appendTo(s);if(e.lang[e.useLang].isRTL===true){n.css("direction","rtl")}switch(e.fieldsOrder[m]){case"y":s.addClass("ui-datebox-sliderow-ym");n.css("marginLeft","-333px");for(g=-5;g<6;g++){k=((f.getFullYear()===(t.theDate.getFullYear()+g))?e.pickPageHighButtonTheme:e.pickPageSlideButtonTheme);if(g===0){k=e.pickPageButtonTheme}a("<div>",{"class":"ui-datebox-slideyear ui-corner-all ui-btn-up-"+k}).html(t.theDate.getFullYear()+g).jqmData("offset",g).jqmData("theme",k).appendTo(n)}break;case"m":s.addClass("ui-datebox-sliderow-ym");n.css("marginLeft","-204px");for(g=-6;g<7;g++){p=new Date(t.theDate.getFullYear(),t.theDate.getMonth(),1);p.adjust("m",g);k=(f.getMonth()===p.getMonth()&&f.getYear()===p.getYear())?e.pickPageHighButtonTheme:e.pickPageSlideButtonTheme;if(g===0){k=e.pickPageButtonTheme}a("<div>",{"class":"ui-datebox-slidemonth ui-corner-all ui-btn-up-"+k}).jqmData("offset",g).jqmData("theme",k).html(e.lang[e.useLang].monthsOfYearShort[p.getMonth()]).appendTo(n)}break;case"d":s.addClass("ui-datebox-sliderow-d");n.css("marginLeft","-386px");for(g=-15;g<16;g++){p=t.theDate.copy();p.adjust("d",g);q="";if((e.blackDates!==false&&a.inArray(p.getISO(),e.blackDates)>-1)||(e.blackDays!==false&&a.inArray(p.getDay(),e.blackDays)>-1)){q=" ui-datebox-griddate-disable"}k=(f.getDate()===p.getDate()&&f.getMonth()===p.getMonth()&&f.getYear()===p.getYear())?e.pickPageHighButtonTheme:e.pickPageSlideButtonTheme;if(g===0){k=e.pickPageButtonTheme}a("<div>",{"class":"ui-datebox-slideday ui-corner-all ui-btn-up-"+k+q}).jqmData("offset",g).jqmData("theme",k).html(p.getDate()+'<br /><span class="ui-datebox-slidewday">'+e.lang[e.useLang].daysOfWeekShort[p.getDay()]+"</span>").appendTo(n)}break;case"h":s.addClass("ui-datebox-sliderow-hi");n.css("marginLeft","-284px");for(g=-12;g<13;g++){p=t.theDate.copy();p.adjust("h",g);k=(g===0)?e.pickPageButtonTheme:e.pickPageSlideButtonTheme;a("<div>",{"class":"ui-datebox-slidehour ui-corner-all ui-btn-up-"+k}).jqmData("offset",g).jqmData("theme",k).html(((e.lang[e.useLang].timeFormat===12||e.timeFormatOverride===12)?((p.getHours()===0)?'12<span class="ui-datebox-slidewday">AM</span>':((p.getHours()<12)?p.getHours()+'<span class="ui-datebox-slidewday">AM</span>':((p.getHours()===12)?'12<span class="ui-datebox-slidewday">PM</span>':(p.getHours()-12)+'<span class="ui-datebox-slidewday">PM</span>'))):p.getHours())).appendTo(n)}break;case"i":s.addClass("ui-datebox-sliderow-hi");n.css("marginLeft","-896px");for(g=-30;g<31;g++){p=t.theDate.copy();p.adjust("i",g);k=(g===0)?e.pickPageButtonTheme:e.pickPageSlideButtonTheme;a("<div>",{"class":"ui-datebox-slidemins ui-corner-all ui-btn-up-"+k}).jqmData("offset",g).jqmData("theme",k).html(t._zPad(p.getMinutes())).appendTo(n)}break}s.appendTo(t.controlsInput)}}if(e.mode==="datebox"){t._checkConstraints();t.controlsHeader.empty().html(t._formatHeader(t.theDate));t.pickerMon.val(t.theDate.getMonth()+1);t.pickerDay.val(t.theDate.getDate());t.pickerYar.val(t.theDate.getFullYear());if(t.dateOK!==true){t.controlsInput.find("input").addClass("ui-datebox-griddate-disable")}else{t.controlsInput.find(".ui-datebox-griddate-disable").removeClass("ui-datebox-griddate-disable")}}if(e.mode==="calbox"){t.controlsInput.empty().html(e.lang[e.useLang].monthsOfYear[t.theDate.getMonth()]+" "+t.theDate.getFullYear());t.controlsPlus.empty();l={today:-1,highlightDay:-1,presetDay:-1,nexttoday:1,thisDate:new Date(),maxDate:new Date(),minDate:new Date(),startDay:false,currentMonth:false,weekMode:0,weekDays:null,thisTheme:e.pickPageButtonTheme};l.start=t._getFirstDay(t.theDate);l.end=t._getLastDate(t.theDate);l.lastend=t._getLastDateBefore(t.theDate);l.presetDate=t._makeDate(t.input.val());if(e.calStartDay!==false||typeof e.lang[e.useLang].calStartDay==="number"){if(e.calStartDay!==false){l.start=l.start-e.calStartDay;l.startDay=e.calStartDay}else{l.start=l.start-e.lang[e.useLang].calStartDay;l.startDay=e.lang[e.useLang].calStartDay}if(l.start<0){l.start=l.start+7}}l.prevtoday=l.lastend-(l.start-1);l.checkDates=(e.enableDates===false&&(e.afterToday!==false||e.beforeToday!==false||e.notToday!==false||e.maxDays!==false||e.minDays!==false||e.blackDates!==false||e.blackDays!==false));if(l.thisDate.getMonth()===t.theDate.getMonth()&&l.thisDate.getFullYear()===t.theDate.getFullYear()){l.currentMonth=true;l.highlightDay=l.thisDate.getDate()}if(l.presetDate.getComp()===t.theDate.getComp()){l.presetDay=l.presetDate.getDate()}t.calNoPrev=false;t.calNoNext=false;if(e.afterToday===true&&(l.currentMonth===true||(l.thisDate.getMonth()>=t.theDate.getMonth()&&t.theDate.getFullYear()===l.thisDate.getFullYear()))){t.calNoPrev=true}if(e.beforeToday===true&&(l.currentMonth===true||(l.thisDate.getMonth()<=t.theDate.getMonth()&&t.theDate.getFullYear()===l.thisDate.getFullYear()))){t.calNoNext=true}if(e.minDays!==false){l.minDate.adjust("d",-1*e.minDays);if(t.theDate.getFullYear()===l.minDate.getFullYear()&&t.theDate.getMonth()<=l.minDate.getMonth()){t.calNoPrev=true}}if(e.maxDays!==false){l.maxDate.adjust("d",e.maxDays);if(t.theDate.getFullYear()===l.maxDate.getFullYear()&&t.theDate.getMonth()>=l.maxDate.getMonth()){t.calNoNext=true}}if(e.calShowDays){if(e.lang[e.useLang].daysOfWeekShort.length<8){e.daysOfWeekShort=e.lang[e.useLang].daysOfWeekShort.concat(e.lang[e.useLang].daysOfWeekShort)}l.weekDays=a("<div>",{"class":"ui-datebox-gridrow"}).appendTo(t.controlsPlus);if(e.lang[e.useLang].isRTL===true){l.weekDays.css("direction","rtl")}for(g=0;g<=6;g++){a("<div>"+e.lang[e.useLang].daysOfWeekShort[(g+l.startDay)%7]+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty ui-datebox-griddate-label").appendTo(l.weekDays)}}if(e.fixDateArrays===true){e.blackDates=t._fixArray(e.blackDates);e.highDates=t._fixArray(e.highDates);e.highDatesAlt=t._fixArray(e.highDatesAlt);e.enableDates=t._fixArray(e.enableDates)}for(h=0;h<=5;h++){if(h===0||(h>0&&(l.today>0&&l.today<=l.end))){n=a("<div>",{"class":"ui-datebox-gridrow"});if(e.lang[e.useLang].isRTL===true){n.css("direction","rtl")}for(j=0;j<=6;j++){if(j===0){l.weekMode=(l.today<1)?(l.prevtoday-l.lastend+e.calWeekModeFirstDay):(l.today+e.calWeekModeFirstDay)}if(j===l.start&&h===0){l.today=1}if(l.today>l.end){l.today=-1}if(l.today<1){if(e.calShowOnlyMonth){a("<div>",{"class":"ui-datebox-griddate ui-datebox-griddate-empty"}).appendTo(n)}else{if(e.enableDates!==false){if((a.inArray(t.theDate.copymod([0,-1],[0,0,l.prevtoday]).getISO(),e.enableDates)>-1)||(a.inArray(t.theDate.copymod([0,1],[0,0,l.nexttoday]).getISO(),e.enableDates)>-1)){r=false}else{r=true}}else{if((e.afterToday!==false&&h===0&&l.thisDate.getMonth()>=t.theDate.getMonth()-1&&t.theDate.getFullYear()===l.thisDate.getFullYear()&&l.thisDate.getDate()>l.prevtoday)||(e.beforeToday!==false&&h!==0&&l.thisDate.getMonth()<=t.theDate.getMonth()+1&&t.theDate.getFullYear()===l.thisDate.getFullYear()&&l.thisDate.getDate()<l.nexttoday)||(e.blackDays!==false&&a.inArray(j,e.blackDays)>-1)||(e.blackDates!==false&&a.inArray(t.theDate.copymod([0,-1],[0,0,l.prevtoday]).getISO(),e.blackDates)>-1)||(e.blackDates!==false&&a.inArray(t.theDate.copymod([0,1],[0,0,l.nexttoday]).getISO(),e.blackDates)>-1)){r=true}else{r=false}}if(h===0){a("<div>"+String(l.prevtoday)+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty").appendTo(n).jqmData("date",((e.calWeekMode)?(l.weekMode+l.lastend):l.prevtoday)).jqmData("enabled",(!r&&!t.calNoPrev)).jqmData("month",-1);l.prevtoday++}else{a("<div>"+String(l.nexttoday)+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty").appendTo(n).jqmData("date",((e.calWeekMode)?l.weekMode:l.nexttoday)).jqmData("enabled",(!r&&!t.calNoNext)).jqmData("month",1);l.nexttoday++}}}else{r=false;if(e.enableDates){if(a.inArray(t.theDate.copymod([0],[0,0,l.today]).getISO(),e.enableDates)<0){r=true}}if(l.checkDates){if(e.afterToday&&l.thisDate.getComp()>(t.theDate.getComp()+l.today-t.theDate.getDate())){r=true}if(!r&&e.beforeToday&&l.thisDate.getComp()<(t.theDate.getComp()+l.today-t.theDate.getDate())){r=true}if(!r&&e.notToday&&l.today===l.highlightDay){r=true}if(!r&&e.maxDays!==false&&l.maxDate.getComp()<(t.theDate.getComp()+l.today-t.theDate.getDate())){r=true}if(!r&&e.minDays!==false&&l.minDate.getComp()>(t.theDate.getComp()+l.today-t.theDate.getDate())){r=true}if(!r&&(e.blackDays!==false||e.blackDates!==false)){if((a.inArray(j,e.blackDays)>-1)||(a.inArray(t.theDate.copymod([0],[0,0,l.today]).getISO(),e.blackDates)>-1)){r=true}}}if(e.calHighPicked&&l.today===l.presetDay){l.thisTheme=e.pickPageHighButtonTheme}else{if(e.calHighToday&&l.today===l.highlightDay){l.thisTheme=e.pickPageTodayButtonTheme}else{if(a.isArray(e.highDatesAlt)&&(a.inArray(t.theDate.copymod([0],[0,0,l.today]).getISO(),e.highDatesAlt)>-1)){l.thisTheme=e.pickPageOAHighButtonTheme}else{if(a.isArray(e.highDates)&&(a.inArray(t.theDate.copymod([0],[0,0,l.today]).getISO(),e.highDates)>-1)){l.thisTheme=e.pickPageOHighButtonTheme}else{if(a.isArray(e.highDays)&&a.inArray(j,e.highDays)>-1){l.thisTheme=e.pickPageODHighButtonTheme}else{l.thisTheme=e.pickPageButtonTheme}}}}}a("<div>"+String(l.today)+"</div>").addClass("ui-datebox-griddate ui-corner-all ui-btn-up-"+l.thisTheme+((r)?" ui-datebox-griddate-disable":"")).jqmData("date",((e.calWeekMode)?l.weekMode:l.today)).jqmData("theme",l.thisTheme).jqmData("enabled",!r).jqmData("month",0).appendTo(n);l.today++}}}n.appendTo(t.controlsPlus)}t.controlsPlus.delegate("div.ui-datebox-griddate",e.clickEvent+" vmouseover vmouseout",function(i){if(i.type===e.clickEvent){i.preventDefault();if(a(this).jqmData("enabled")){if(a(this).jqmData("month")<0){t.theDate.adjust("m",-1);t.theDate.setDate(a(this).jqmData("date"))}else{if(a(this).jqmData("month")>0){t.theDate.setDate(a(this).jqmData("date"));if(!e.calWeekMode){t.theDate.adjust("m",1)}}else{t.theDate.setDate(a(this).jqmData("date"))}}t.input.trigger("datebox",{method:"set",value:t._formatDate(t.theDate),date:t.theDate});t.input.trigger("datebox",{method:"close"})}}else{if(a(this).jqmData("enabled")&&typeof a(this).jqmData("theme")!=="undefined"){if(e.calWeekMode!==false&&e.calWeekModeHighlight===true){a(this).parent().find("div").each(function(){t._hoover(this)})}else{t._hoover(this)}}}})}if(e.lang[this.options.useLang].useArabicIndic===true){t._makeDisplayIndic()}},_getLongOptions:function(e){var d,f={},g,c;if(a.mobile.ns==""){g="datebox"}else{g=a.mobile.ns.substr(0,a.mobile.ns.length-1)+"Datebox"}for(d in e.data()){if(d.substr(0,g.length)===g&&d.length>g.length){c=d.substr(g.length);c=c.charAt(0).toLowerCase()+c.slice(1);f[c]=e.data(d)}}return f},_create:function(){a(document).trigger("dateboxcreate");var c=this,d=a.extend(this.options,this.element.jqmData("options")),d=((typeof this.element.jqmData("options")==="undefined")?a.extend(d,this._getLongOptions(this.element)):d);input=this.element,thisTheme=(d.theme===false&&typeof(a(c).jqmData("theme"))==="undefined")?((typeof(input.parentsUntil(":jqmData(theme)").parent().jqmData("theme"))==="undefined")?d.defaultTheme:input.parentsUntil(":jqmData(theme)").parent().jqmData("theme")):d.theme,focusedEl=input.wrap('<div class="ui-input-datebox ui-shadow-inset ui-corner-all ui-body-'+thisTheme+'"></div>').parent(),theDate=new Date(),initDate=new Date(theDate.getTime()),openbutton=a('<a href="#" class="ui-input-clear" title="'+((typeof d.lang[d.useLang].tooltip!=="undefined")?d.lang[d.useLang].tooltip:d.lang.en.tooltip)+'">'+((typeof d.lang[d.useLang].tooltip!=="undefined")?d.lang[d.useLang].tooltip:d.lang.en.tooltip)+"</a>").bind(d.clickEvent,function(f){f.preventDefault();if(!d.disabled){c.input.trigger("datebox",{method:"open"});c.focusedEl.addClass("ui-focus")}setTimeout(function(){a(f.target).closest("a").removeClass(a.mobile.activeBtnClass)},300)}).appendTo(focusedEl).buttonMarkup({icon:"grid",iconpos:"notext",corners:true,shadow:true}).css({"vertical-align":"middle",display:"inline-block"}),thisPage=input.closest(".ui-page"),ns=(typeof a.mobile.ns!=="undefined")?a.mobile.ns:"",pickPage=a("<div data-"+ns+"role='dialog' class='ui-dialog-datebox' data-"+ns+"theme='"+((d.forceInheritTheme===false)?d.pickPageTheme:thisTheme)+"' ><div data-"+ns+"role='header' data-"+ns+"backbtn='false' data-"+ns+"theme='a'><div class='ui-title'>PlaceHolder</div></div><div data-"+ns+"role='content'></div></div>").appendTo(a.mobile.pageContainer).page().css("minHeight","0px").css("zIndex",d.zindex).addClass(d.transition),pickPageTitle=pickPage.find(".ui-title"),pickPageContent=pickPage.find(".ui-content"),touch=(typeof window.ontouchstart!=="undefined"),START_EVENT=touch?"touchstart":"mousedown",MOVE_EVENT=touch?"touchmove":"mousemove",END_EVENT=touch?"touchend":"mouseup",dragMove=false,dragStart=false,dragEnd=false,dragPos=false,dragTarget=false,dragThisDelta=0;d.theme=thisTheme;a.extend(c,{input:input,focusedEl:focusedEl});if(d.forceInheritTheme){d.pickPageTheme=thisTheme;d.pickPageInputTheme=thisTheme;d.pickPageButtonTheme=thisTheme}if(d.defaultPickerValue===false&&d.defaultDate!==false){d.defaultPickerValue=d.defaultDate}if(d.numberInputEnhance===true){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)){d.internalInputType="number"}}a("label[for='"+input.attr("id")+"']").addClass("ui-input-text").css("verticalAlign","middle");if(d.mode==="timeflipbox"){d.lang[d.useLang].headerFormat=" "}if(d.noButtonFocusMode||d.useInline||d.noButton){openbutton.hide()}c.focusedEl.bind(d.clickEvent,function(){if(!d.disabled&&(d.noButtonFocusMode||d.focusMode)){c.input.trigger("datebox",{method:"open"});c.focusedEl.addClass("ui-focus");c.input.removeClass("ui-focus")}});c.input.removeClass("ui-corner-all ui-shadow-inset").focus(function(){if(!d.disabled){c.focusedEl.addClass("ui-focus")}c.input.removeClass("ui-focus")}).blur(function(){c.focusedEl.removeClass("ui-focus");c.input.removeClass("ui-focus")}).change(function(){c.theDate=c._makeDate(c.input.val());c._update()});c.input.bind("datebox",c._dateboxHandler);pickPage.find(".ui-header a").unbind("click vclick").bind(d.clickEvent,function(f){f.preventDefault();f.stopImmediatePropagation();c.input.trigger("datebox",{method:"close",fromCloseButton:false})});a.extend(c,{pickPage:pickPage,thisPage:thisPage,pickPageContent:pickPageContent,pickPageTitle:pickPageTitle,theDate:theDate,initDate:initDate,touch:touch,START_DRAG:START_EVENT,MOVE_DRAG:MOVE_EVENT,END_DRAG:END_EVENT,dragMove:dragMove,dragStart:dragStart,dragEnd:dragEnd,dragPos:dragPos});if(typeof a.event.special.mousewheel!=="undefined"){d.wheelExists=true}c._buildPage();if(d.swipeEnabled){a(document).bind(c.MOVE_DRAG,function(f){if(c.dragMove){if(d.mode==="slidebox"){c.dragEnd=c.touch?f.originalEvent.changedTouches[0].pageX:f.pageX;c.dragTarget.css("marginLeft",(c.dragPos+c.dragEnd-c.dragStart)+"px");f.preventDefault();f.stopPropagation();return false}else{if(d.mode==="flipbox"||d.mode==="timeflipbox"){c.dragEnd=c.touch?f.originalEvent.changedTouches[0].pageY:f.pageY;c.dragTarget.css("marginTop",(c.dragPos+c.dragEnd-c.dragStart)+"px");f.preventDefault();f.stopPropagation();return false}else{if(d.mode==="durationbox"||d.mode==="timebox"||d.mode==="datebox"){c.dragEnd=c.touch?f.originalEvent.changedTouches[0].pageY:f.pageY;if((c.dragEnd-c.dragStart)%2===0){dragThisDelta=(c.dragEnd-c.dragStart)/-2;if(dragThisDelta<c.dragPos){c._offset(c.dragTarget,-1*(c.dragTarget==="i"?d.minuteStep:1))}else{if(dragThisDelta>c.dragPos){c._offset(c.dragTarget,(c.dragTarget==="i"?d.minuteStep:1))}}c.dragPos=dragThisDelta}f.preventDefault();f.stopPropagation();return false}}}}});a(document).bind(c.END_DRAG,function(h){if(c.dragMove){c.dragMove=false;if(d.mode==="slidebox"){if(c.dragEnd!==false&&Math.abs(c.dragStart-c.dragEnd)>25){h.preventDefault();h.stopPropagation();switch(c.dragTarget.parent().jqmData("rowtype")){case"y":c._offset("y",parseInt((c.dragStart-c.dragEnd)/84,10));break;case"m":c._offset("m",parseInt((c.dragStart-c.dragEnd)/51,10));break;case"d":c._offset("d",parseInt((c.dragStart-c.dragEnd)/32,10));break;case"h":c._offset("h",parseInt((c.dragStart-c.dragEnd)/32,10));break;case"i":c._offset("i",parseInt((c.dragStart-c.dragEnd)/32,10));break}}}else{if(d.mode==="flipbox"||d.mode==="timeflipbox"){if(c.dragEnd!==false){h.preventDefault();h.stopPropagation();var g=c.dragTarget.parent().parent().jqmData("field"),f=parseInt((c.dragStart-c.dragEnd)/30,10);c._offset(g,f*((g==="i")?d.minuteStep:1))}}}c.dragStart=false;c.dragEnd=false}})}if(c.input.is(":disabled")){c.disable()}if(d.disableManualInput===true){c.input.attr("readonly",true)}a(document).trigger("dateboxaftercreate")},_makeElement:function(f,g){var c=this,d=false,e=false;e=f.clone();if(typeof g.attr!=="undefined"){for(d in g.attr){if(g.attr.hasOwnProperty(d)){e.jqmData(d,g.attr[d])}}}return e},_eventEnterValue:function(d){var c=this,e=c.options,f=false;if(d.val()!==""&&c._isInt(d.val())){switch(d.jqmData("field")){case"m":c.theDate.setMonth(parseInt(d.val(),10)-1);break;case"d":c.theDate.setDate(parseInt(d.val(),10));break;case"y":c.theDate.setFullYear(parseInt(d.val(),10));break;case"i":c.theDate.setMinutes(parseInt(d.val(),10));break;case"h":f=parseInt(d.val(),10);if(f===12){if((e.lang[e.useLang].timeFormat===12||e.timeFormatOverride===12)&&c.pickerMeri.val()===e.meridiemLetters[0]){f=0}}c.theDate.setHours(f);break}c._update()}},_buildInternals:function(){var p=this,r=p.options,m,k,v,e,w=a("<div><a href='#'></a></div>"),f=a("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden pop ui-body-"+r.pickPageTheme}).css("zIndex",r.zindex),z=a("<input type='"+r.internalInputType+"' />").addClass("ui-input-text ui-corner-all ui-shadow-inset ui-datebox-input ui-body-"+r.pickPageInputTheme),t=a("<input type='text' />").addClass("ui-input-text ui-corner-all ui-shadow-inset ui-datebox-input ui-body-"+r.pickPageInputTheme),j=a("<div>",{"class":"ui-datebox-controls"}),i=a("<div class='ui-overlay-shadow'><ul></ul></div>"),h,B,n,s,u,d,g,l,A,C,q,c;p.calNoNext=false;p.calNoPrev=false;p.setButton=false;p.clearButton=false;p.dateOK=true;if(r.fieldsOrderOverride===false){switch(r.mode){case"timebox":case"timeflipbox":r.fieldsOrder=r.lang[r.useLang].timeFieldOrder;break;case"slidebox":r.fieldsOrder=r.lang[r.useLang].slideFieldOrder;break;default:r.fieldsOrder=r.lang[r.useLang].dateFieldOrder}}else{r.fieldsOrder=r.fieldsOrderOverride}if(r.timeOutputOverride!==false){r.timeOutput=r.timeOutputOverride}else{if(r.timeFormatOverride===false){r.timeOutput=r.timeFormats[r.lang[r.useLang].timeFormat]}else{r.timeOutput=r.timeFormats[r.timeFormatOverride]}}if(r.dateFormat!==false){r.dateOutput=r.dateFormat}else{if(typeof r.lang[r.useLang].dateFormat!=="undefined"){r.dateOutput=r.lang[r.useLang].dateFormat}else{r.dateOutput=r.defaultDateFormat}}p.pickerContent.empty();if(r.mode==="datebox"||r.mode==="timebox"){u=a("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(p.pickerContent).find("h4");h=j.clone().appendTo(p.pickerContent);B=j.clone().appendTo(p.pickerContent);n=j.clone().appendTo(p.pickerContent);s=j.clone().appendTo(p.pickerContent);if(r.mode==="timebox"){u.parent().empty()}A=p._makeElement(z,{attr:{field:"m",amount:1}});C=p._makeElement(z,{attr:{field:"d",amount:1}});q=p._makeElement(z,{attr:{field:"y",amount:1}});d=p._makeElement(z,{attr:{field:"h",amount:1}});g=p._makeElement(z,{attr:{field:"i",amount:1}});l=p._makeElement(t,{attr:{field:"a",amount:r.minuteStep}});B.delegate("input","keyup",function(){p._eventEnterValue(a(this))});if(r.wheelExists){B.delegate("input","mousewheel",function(o,x){o.preventDefault();p._offset(a(this).jqmData("field"),((x<0)?-1:1)*a(this).jqmData("amount"))})}for(m=0;m<=r.fieldsOrder.length;m++){if(r.fieldsOrder[m]==="y"){q.appendTo(B)}if(r.fieldsOrder[m]==="m"){A.appendTo(B)}if(r.fieldsOrder[m]==="d"){C.appendTo(B)}if(r.fieldsOrder[m]==="h"){d.appendTo(B)}if(r.fieldsOrder[m]==="i"){g.appendTo(B)}if(r.fieldsOrder[m]==="a"&&(r.lang[r.useLang].timeFormat===12||r.timeFormatOverride===12)){l.appendTo(B)}}if(r.swipeEnabled){B.delegate("input",p.START_DRAG,function(o){if(!p.dragMove){p.dragMove=true;p.dragTarget=a(this).jqmData("field");p.dragPos=0;p.dragStart=p.touch?o.originalEvent.changedTouches[0].pageY:o.pageY;p.dragEnd=false;o.stopPropagation()}})}if(r.noSetButton===false){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(p.dateOK===true){if(r.mode==="timebox"){p.input.trigger("datebox",{method:"set",value:p._formatTime(p.theDate),date:p.theDate})}else{p.input.trigger("datebox",{method:"set",value:p._formatDate(p.theDate),date:p.theDate})}p.input.trigger("datebox",{method:"close"})}})}for(m=0;m<p.options.fieldsOrder.length;m++){if(r.fieldsOrder[m]!=="a"||r.lang[r.useLang].timeFormat===12||r.timeFormatOverride===12){for(k=0;k<2;k++){w.clone().appendTo(((k===0)?h:n)).buttonMarkup({theme:r.pickPageButtonTheme,icon:((k===0)?"plus":"minus"),iconpos:"bottom",corners:true,shadow:true}).jqmData("field",r.fieldsOrder[m]).jqmData("amount",((r.fieldsOrder[m]==="i")?r.minuteStep:1))}}}h.delegate("div",r.clickEvent,function(o){o.preventDefault();p._offset(a(this).jqmData("field"),a(this).jqmData("amount"))});n.delegate("div",r.clickEvent,function(o){o.preventDefault();p._offset(a(this).jqmData("field"),a(this).jqmData("amount")*-1)});a.extend(p,{controlsHeader:u,pickerDay:C,pickerMon:A,pickerYar:q,pickerHour:d,pickerMins:g,pickerMeri:l,controlsInput:B});p.pickerContent.appendTo(p.thisPage)}if(r.mode==="durationbox"){h=j.clone().removeClass("ui-datebox-controls").addClass("ui-datebox-scontrols").appendTo(p.pickerContent);B=h.clone().appendTo(p.pickerContent);n=h.clone().appendTo(p.pickerContent);s=j.clone().appendTo(p.pickerContent);C=z.removeClass("ui-datebox-input");d=C.clone();g=C.clone();c=C.clone();B.delegate("input","keyup",function(){if(a(this).val()!==""){p._updateduration()}});if(r.wheelExists){B.delegate("input","mousewheel",function(o,x){o.preventDefault();p._offset(a(this).parent().jqmData("field"),((x<0)?-1:1))})}for(m=0;m<r.durationOrder.length;m++){switch(r.durationOrder[m]){case"d":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","d").append(C).appendTo(B).prepend("<label>"+r.lang[r.useLang].durationLabel[0]+"</label>");break;case"h":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","h").append(d).appendTo(B).prepend("<label>"+r.lang[r.useLang].durationLabel[1]+"</label>");break;case"i":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","i").append(g).appendTo(B).prepend("<label>"+r.lang[r.useLang].durationLabel[2]+"</label>");break;case"s":a("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","s").append(c).appendTo(B).prepend("<label>"+r.lang[r.useLang].durationLabel[3]+"</label>");break}}if(r.swipeEnabled){B.delegate("input",p.START_DRAG,function(o){if(!p.dragMove){p.dragMove=true;p.dragTarget=a(this).parent().jqmData("field");p.dragPos=0;p.dragStart=p.touch?o.originalEvent.changedTouches[0].pageY:o.pageY;p.dragEnd=false;o.stopPropagation()}})}if(r.noSetButton===false){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();p.input.trigger("datebox",{method:"set",value:p._formatTime(p.theDate),date:p.theDate});p.input.trigger("datebox",{method:"close"})})}for(m=0;m<r.durationOrder.length;m++){for(k=0;k<2;k++){w.clone().appendTo(((k===0)?h:n)).buttonMarkup({theme:r.pickPageButtonTheme,icon:((k===0)?"plus":"minus"),iconpos:"bottom",corners:true,shadow:true}).jqmData("field",r.durationOrder[m])}}h.delegate("div",r.clickEvent,function(o){o.preventDefault();p._offset(a(this).jqmData("field"),r.durationSteppers[a(this).jqmData("field")])});n.delegate("div",r.clickEvent,function(o){o.preventDefault();p._offset(a(this).jqmData("field"),r.durationSteppers[a(this).jqmData("field")]*-1)});a.extend(p,{pickerHour:d,pickerMins:g,pickerDay:C,pickerSecs:c});p.pickerContent.appendTo(p.thisPage)}if(r.mode==="slidebox"){u=a("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(p.pickerContent).find("h4");B=a("<div>").addClass("ui-datebox-slide").appendTo(p.pickerContent);s=a("<div>",{"class":"ui-datebox-controls"}).appendTo(p.pickerContent);if(r.noSetButton===false){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(p.dateOK===true){p.input.trigger("datebox",{method:"set",value:p._formatDate(p.theDate),date:p.theDate});p.input.trigger("datebox",{method:"close"})}})}a.extend(p,{controlsHeader:u,controlsInput:B});p.pickerContent.appendTo(p.thisPage)}if(r.mode==="flipbox"||r.mode==="timeflipbox"){u=a("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(p.pickerContent).find("h4");B=a("<div>",{"class":"ui-datebox-flipcontent"}).appendTo(p.pickerContent);h=a("<div>",{"class":"ui-datebox-flipcenter ui-overlay-shadow"}).css("pointerEvents","none").appendTo(p.pickerContent);s=j.clone().appendTo(p.pickerContent);C=p._makeElement(i,{attr:{field:"d",amount:1}});A=p._makeElement(i,{attr:{field:"m",amount:1}});q=p._makeElement(i,{attr:{field:"y",amount:1}});d=p._makeElement(i,{attr:{field:"h",amount:1}});g=p._makeElement(i,{attr:{field:"i",amount:r.minuteStep}});l=p._makeElement(i,{attr:{field:"a",amount:1}});if(r.wheelExists){B.delegate("div","mousewheel",function(o,x){o.preventDefault();p._offset(a(this).jqmData("field"),((x<0)?-1:1)*a(this).jqmData("amount"))})}for(m=0;m<=r.fieldsOrder.length;m++){if(r.fieldsOrder[m]==="y"){q.appendTo(B)}if(r.fieldsOrder[m]==="m"){A.appendTo(B)}if(r.fieldsOrder[m]==="d"){C.appendTo(B)}if(r.fieldsOrder[m]==="h"){d.appendTo(B)}if(r.fieldsOrder[m]==="i"){g.appendTo(B)}if(r.fieldsOrder[m]==="a"&&(r.lang[r.useLang].timeFormat===12||r.timeFormatOverride===12)){l.appendTo(B)}}if(r.swipeEnabled){B.delegate("ul",p.START_DRAG,function(x,o){if(!p.dragMove){if(typeof o!=="undefined"){x=o}p.dragMove=true;p.dragTarget=a(this).find("li").first();p.dragPos=parseInt(p.dragTarget.css("marginTop").replace(/px/i,""),10);p.dragStart=p.touch?x.originalEvent.changedTouches[0].pageY:x.pageY;p.dragEnd=false;x.stopPropagation();x.preventDefault()}});h.bind(p.START_DRAG,function(o){if(!p.dragMove){p.dragTarget=p.touch?o.originalEvent.changedTouches[0].pageX-a(o.currentTarget).offset().left:o.pageX-a(o.currentTarget).offset().left;if(r.fieldsOrder.length===3){a(p.controlsInput.find("ul").get(parseInt(p.dragTarget/87,10))).trigger(p.START_DRAG,o)}else{if(r.fieldsOrder.length===2){a(p.controlsInput.find("ul").get(parseInt(p.dragTarget/130,10))).trigger(p.START_DRAG,o)}}}})}if(r.noSetButton===false){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(p.dateOK===true){if(r.mode==="timeflipbox"){p.input.trigger("datebox",{method:"set",value:p._formatTime(p.theDate),date:p.theDate})}else{p.input.trigger("datebox",{method:"set",value:p._formatDate(p.theDate),date:p.theDate})}p.input.trigger("datebox",{method:"close"})}})}a.extend(p,{controlsHeader:u,controlsInput:B,pickerDay:C,pickerMon:A,pickerYar:q,pickerHour:d,pickerMins:g,pickerMeri:l});p.pickerContent.appendTo(p.thisPage)}if(r.mode==="calbox"){u=a("<div>",{"class":"ui-datebox-gridheader"}).appendTo(p.pickerContent);h=a("<div>",{"class":"ui-datebox-grid"}).appendTo(p.pickerContent);s=j.clone().appendTo(p.pickerContent);B=a("<div class='ui-datebox-gridlabel'><h4>Uninitialized</h4></div>").appendTo(u).find("h4");if(r.swipeEnabled){p.pickerContent.bind("swipeleft",function(){if(!p.calNoNext){p._offset("m",1)}}).bind("swiperight",function(){if(!p.calNoPrev){p._offset("m",-1)}})}if(r.wheelExists){p.pickerContent.bind("mousewheel",function(o,x){o.preventDefault();if(x>0&&!p.calNoNext){if(p.theDate.getDate()>28){p.theDate.setDate(1)}p._offset("m",1)}if(x<0&&!p.calNoPrev){if(p.theDate.getDate()>28){p.theDate.setDate(1)}p._offset("m",-1)}})}a("<div class='ui-datebox-gridplus"+((r.lang[r.useLang].isRTL===true)?"-rtl":"")+"'><a href='#'>"+((typeof r.lang[r.useLang].nextMonth!=="undefined")?r.lang[r.useLang].nextMonth:r.lang.en.nextMonth)+"</a></div>").prependTo(u).buttonMarkup({theme:r.pickPageButtonTheme,icon:"plus",inline:true,iconpos:"notext",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(!p.calNoNext){if(p.theDate.getDate()>28){p.theDate.setDate(1)}p._offset("m",1)}});a("<div class='ui-datebox-gridminus"+((r.lang[r.useLang].isRTL===true)?"-rtl":"")+"'><a href='#'>"+((typeof r.lang[r.useLang].prevMonth!=="undefined")?r.lang[r.useLang].prevMonth:r.lang.en.prevMonth)+"</a></div>").prependTo(u).buttonMarkup({theme:r.pickPageButtonTheme,icon:"minus",inline:true,iconpos:"notext",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();if(!p.calNoPrev){if(p.theDate.getDate()>28){p.theDate.setDate(1)}p._offset("m",-1)}});if(r.calTodayButton===true){p.setButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"check",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();p.theDate=new Date();p.theDate=new Date(p.theDate.getFullYear(),p.theDate.getMonth(),p.theDate.getDate(),0,0,0,0);p.input.trigger("datebox",{method:"doset"})})}a.extend(p,{controlsInput:B,controlsPlus:h});p.pickerContent.appendTo(p.thisPage)}if(r.useClearButton===true){p.clearButton=a("<a href='#'>PlaceHolder</a>").appendTo(s).buttonMarkup({theme:r.pickPageTheme,icon:"delete",iconpos:"left",corners:true,shadow:true}).bind(r.clickEvent,function(o){o.preventDefault();p.input.val("");p.input.trigger("datebox",{method:"clear"});p.input.trigger("datebox",{method:"close"})})}if(r.collapseButtons&&(p.clearButton!==false&&p.setButton!==false)){s.addClass("ui-datebox-collapse")}},_buttonsTitle:function(){var c=this,d=this.options;if(d.titleDialogLabel===false){if(typeof this.element.attr("title")!=="undefined"){c.pickPageTitle.html(this.element.attr("title"))}else{if(this.focusedEl.parent().find("label").text()!==""){c.pickPageTitle.html(this.focusedEl.parent().find("label").text())}else{switch(d.mode){case"timebox":case"timeflipbox":c.pickPageTitle.html(d.lang[d.useLang].titleTimeDialogLabel);break;default:c.pickPageTitle.html(d.lang[d.useLang].titleDateDialogLabel);break}}}}else{c.pickPageTitle.html(d.titleDialogLabel)}if(c.clearButton!==false){c.clearButton.find(".ui-btn-text").html(d.lang[d.useLang].clearButton)}if(c.setButton!==false){switch(d.mode){case"timebox":case"timeflipbox":c.setButton.find(".ui-btn-text").html(d.lang[d.useLang].setTimeButtonLabel);break;case"durationbox":c.setButton.find(".ui-btn-text").html(d.lang[d.useLang].setDurationButtonLabel);break;case"calbox":c.setButton.find(".ui-btn-text").html(d.lang[d.useLang].calTodayButtonLabel);break;default:c.setButton.find(".ui-btn-text").html(d.lang[d.useLang].setDateButtonLabel);break}}},_buildPage:function(){var d=this,e=d.options,f=a("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden "+e.transition+" ui-body-"+e.pickPageTheme}).css("zIndex",e.zindex),c=a("<div>",{"class":"ui-datebox-screen ui-datebox-hidden"+((e.useModal)?" ui-datebox-screen-modal":"")}).css({"z-index":e.zindex-1}).appendTo(d.thisPage).bind(e.clickEvent,function(g){g.preventDefault();d.input.trigger("datebox",{method:"close"})});if(e.noAnimation){f.removeClass(e.transition)}a.extend(d,{pickerContent:f,screen:c});d._buildInternals();if(e.useInline||e.useInlineBlind){d.input.parent().parent().append(d.pickerContent);if(e.useInlineHideInput){d.input.parent().hide()}d.input.trigger("change");d.pickerContent.removeClass("ui-datebox-hidden")}else{if(e.centerWindow&&e.useInlineHideInput){d.input.parent().hide()}}if(e.useInline){d.pickerContent.addClass("ui-datebox-inline");d.open()}if(e.useInlineBlind){d.pickerContent.addClass("ui-datebox-inlineblind");d.pickerContent.hide()}},hardreset:function(){this._buildInternals();this.refresh();this._buttonsTitle()},refresh:function(){if(this.options.useInline===true){this.input.trigger("change")}this._update()},open:function(){var c=this,f=this.options,d=false,e=f.noAnimation?"none":f.transition,h,g;if(f.openCallback!==false){if(!a.isFunction(this.options.openCallback)){if(typeof window[f.openCallback]!=="undefined"){f.openCallback=window[f.openCallback]}else{f.openCallback=new Function(f.openCallback)}}h=f.openCallback.apply(c,a.merge([c.theDate],f.openCallbackArgs));if(h==false){return false}}c._buttonsTitle();if(this.options.useInlineBlind){this.pickerContent.slideDown();return false}if(this.options.useInline){return true}if(this.pickPage.is(":visible")){return false}this.theDate=this._makeDate(this.input.val());this._update();this.input.blur();if((a(document).width()>400&&!f.useDialogForceTrue)||f.useDialogForceFalse||f.fullScreen){d=this._getCoords(this);f.useDialog=false;if(f.nestedBox===true&&f.fullScreen===false){g=a(".ui-page-active").first();a(g).append(c.pickerContent);a(g).append(c.screen)}if(f.fullScreenAlways===false||d.width>399){if(f.useModal===true){c.screen.fadeIn("slow")}else{setTimeout(function(){c.screen.removeClass("ui-datebox-hidden")},500)}}if(f.fullScreenAlways===true||(f.fullScreen===true&&d.width<400)){c.pickerContent.addClass("in").css({position:"absolute","text-align":"center",top:d.fullTop-5,left:d.fullLeft-5,height:d.high,width:d.width}).removeClass("ui-datebox-hidden")}else{c.pickerContent.addClass("ui-overlay-shadow in").css({position:"absolute",top:d.winTop,left:d.winLeft}).removeClass("ui-datebox-hidden");a(document).bind("orientationchange.datebox",{widget:c},function(i){c._orientChange(i)});if(f.resizeListener===true){a(window).bind("resize.datebox",{widget:c},function(i){c._orientChange(i)})}}}else{c.thisPage.unbind("pagehide.remove");f.useDialog=true;c.pickPageContent.append(c.pickerContent);c.pickerContent.css({top:"auto",left:"auto",marginLeft:"auto",marginRight:"auto"}).removeClass("ui-overlay-shadow ui-datebox-hidden");a.mobile.changePage(c.pickPage,{transition:e})}},close:function(c){var d=this,e=this.options,f;if(e.useInlineBlind){d.pickerContent.slideUp();return false}if(e.useInline){return true}if(e.useDialog){if(!c){a(d.pickPage).dialog("close")}if(!d.thisPage.jqmData("page").options.domCache){d.thisPage.bind("pagehide.remove",function(){a(d).remove()})}d.pickerContent.addClass("ui-datebox-hidden").removeAttr("style").css("zIndex",d.options.zindex);d.thisPage.append(d.pickerContent)}else{if(e.useModal){d.screen.fadeOut("slow")}else{d.screen.addClass("ui-datebox-hidden")}d.pickerContent.addClass("ui-datebox-hidden").removeAttr("style").css("zIndex",d.options.zindex).removeClass("in")}d.focusedEl.removeClass("ui-focus");a(document).unbind("orientationchange.datebox");if(e.resizeListener===true){a(window).unbind("resize.datebox")}if(e.closeCallback!==false){if(!a.isFunction(e.closeCallback)){if(typeof window[e.closeCallback]!=="undefined"){e.closeCallback=window[e.closeCallback]}else{e.closeCallback=new Function(e.closeCallback)}}e.closeCallback.apply(d,a.merge([d.theDate],e.closeCallbackArgs))}},disable:function(){this.element.attr("disabled",true);this.element.parent().addClass("ui-disabled");this.options.disabled=true;this.element.blur();this.input.trigger("datebox",{method:"disable"})},enable:function(){this.element.attr("disabled",false);this.element.parent().removeClass("ui-disabled");this.options.disabled=false;this.input.trigger("datebox",{method:"enable"})},_setOption:function(d,e){var c=["minYear","maxYear","afterToday","beforeToday","maxDays","minDays","highDays","highDates","blackDays","blackDates","enableDates"];a.Widget.prototype._setOption.apply(this,arguments);if(a.inArray(d,c)>-1){this.refresh()}else{this.hardreset()}}});a(document).bind("pagebeforecreate",function(c){a(":jqmData(role='datebox')",c.target).each(function(){a(this).prop("type","text")})});a(document).bind("pagecreate create",function(c){a(document).trigger("dateboxbeforecreate");a(":jqmData(role='datebox')",c.target).each(function(){if(typeof(a(this).data("datebox"))==="undefined"){a(this).datebox()}})})})(jQuery);

var Analytics=function(){};Analytics.prototype.start=function(a,b){return cordova.exec(a,b,"GoogleAnalyticsTracker","start",[])};Analytics.prototype.stop=function(a,b){return cordova.exec(a,b,"GoogleAnalyticsTracker","stop",[])};Analytics.prototype.trackPageView=function(b,a,c){return cordova.exec(a,c,"GoogleAnalyticsTracker","trackPageView",[b])};Analytics.prototype.trackEvent=function(c,e,b,d,a,f){return cordova.exec(a,f,"GoogleAnalyticsTracker","trackEvent",[c,e,typeof b==="undefined"?"":b,(isNaN(parseInt(d,10)))?0:parseInt(d,10)])};Analytics.prototype.trackTiming=function(e,d,c,b,a,f){return cordova.exec(a,f,"GoogleAnalyticsTracker","trackTiming",[e,d,c,typeof b==="undefined"?"":b])};Analytics.prototype.setCustomDimension=function(b,c,a,d){return cordova.exec(a,d,"GoogleAnalyticsTracker","setCustomDimension",[parseInt(b,10)||0,typeof c==="undefined"?"":c])};if(!window.plugins){window.plugins={}}if(!window.plugins.analytics){window.plugins.analytics=new Analytics()};

Globals=(function(){return{LOGGING:false,USELOCATION:false,ADS_ON:false,USER_NAME:"username",USER_ID:"userid",APP_TYPE:"Android App JC",APP_LEVEL_PARAM:"level=jc",APP_LEVEL:"jc",APP_VERSION:3,VIDEO_TABID:554,SERVER_URL:"http://www.mocks.ie",CONTENT_PROVIDER:"/mobileappcontentprovider/",MCQ_IMAGE_SERVER_DIR:"/data/mcq/images/",HOSTED_PAPERS_DIR:"/data/uploadedpapers/",STUDYTREATS_IMAGE_SERVER_DIR:"/data/studytreats/",SUMMERACTIVITIES_IMAGE_SERVER_DIR:"/data/SummerActivities/",DAYS_CREATED:"dayscreated",TTCOLOURS_CREATED:"ttcolourscreated",TTDEFAULTVIEW:"ttdefaultview",TTSHOWSAT:"ttshowsat",TTSHOWSUN:"ttshowsun",TTCLASSSTARTTIME:"ttclassstarttime",TTCLASSENDTIME:"ttclassendtime",TTSTUDYSTARTTIME:"ttstudystarttime",TTSTUDYENDTIME:"ttstudyendtime",TT_USER_COL_UPDATED:"ttusercolupdated",CURRENT_AVAILABLE_APP_VERSION:"currentappversion",CONTENTSYNCED:"contentsync",REGCONTENTSYNCED:"regcontentsync",PROFILEVALID:"profilevalid",LOADINGMESSAGE:"Please wait",FOOTERCOPYRIGHT:"<h4>&copy;mocks.ie&nbsp;"+new Date().getFullYear()+"</h4>",CHANGED:"1",}})();UserPreferences=(function(){var k="18";var c="23";var a="9";var i="16";var b=false;var h=false;var d="week";var f="";var e="";var m="false";var g="false";var l="false";var j="1";return{init:function(){DebugLogging.ConsoleLog("AppInfoOutput: Init UserPreferences");MocksMobApp.Storage.getUserPreferences(UserPreferences.setPreferences);DebugLogging.ConsoleLog("AppInfoOutput: UserPerf is initilized")},setPreferences:function(o){var n=true;for(var p=0;p<o.length;p++){DebugLogging.ConsoleLog("AppInfoOutput: SetUserPref"+JSON.stringify(o.item(p)));UserPreferences.setItem(o.item(p).keyname,o.item(p).value);if(o.item(p).keyname==Globals.TT_USER_COL_UPDATED&&o.item(p).value=="true"){n=false}}if(n){MocksMobApp.Storage.upDateTimeTableUserCol()}},setItem:function(n,o){switch(n){case Globals.USER_NAME:f=o;break;case Globals.USER_ID:e=o;break;case Globals.TTSTUDYSTARTTIME:k=o;break;case Globals.TTSTUDYENDTIME:c=o;break;case Globals.TTCLASSSTARTTIME:a=o;break;case Globals.TTCLASSENDTIME:i=o;break;case Globals.TTDEFAULTVIEW:d=o;break;case Globals.TTSHOWSAT:b=o;break;case Globals.TTSHOWSUN:h=o;break;case Globals.CONTENTSYNCED:m=o;break;case Globals.REGCONTENTSYNCED:regcontentsynced=o;break;case Globals.PROFILEVALID:l=o;break;case Globals.CURRENT_AVAILABLE_APP_VERSION:j=o;break}MocksMobApp.Storage.saveUserPreference(n,o)},getItem:function(n){switch(n){case Globals.USER_NAME:return f;break;case Globals.USER_ID:return(parseInt(e)).toString();break;case Globals.TTSTUDYSTARTTIME:return k;break;case Globals.TTSTUDYENDTIME:return c;break;case Globals.TTCLASSSTARTTIME:return a;break;case Globals.TTCLASSENDTIME:return i;break;case Globals.TTDEFAULTVIEW:return d;break;case Globals.TTSHOWSAT:return b;break;case Globals.TTSHOWSUN:return h;break;case Globals.CONTENTSYNCED:return m;break;case Globals.REGCONTENTSYNCED:return g;break;case Globals.PROFILEVALID:return l;break;case Globals.CURRENT_AVAILABLE_APP_VERSION:return j;break}return""},}})();ShortTermGlobals=(function(){var b=false;var a;var c;return{setVidBack:function(d){b=d},getVidBack:function(){return b},setVidTopic:function(d){c=d},getVidTopic:function(){return c},setVidSubject:function(d){a=d},getVidSubject:function(){return a}}})();DebugLogging=(function(){return{ConsoleLog:function(a){if(Globals.LOGGING){console.log(a)}}}})(),HelperFns=(function(){return{is_array:function(a){return typeof(a)=="object"&&(a instanceof Array)},getSubscriptions:function(a,e){var b;var c={service:a,user:Encrypt.GetEncryptedUserName(),id:Encrypt.GetEncryptedUserID()};var d={requestService:"getsubscription",requestCallback:e,requestParam:c,requestType:"post"};b=new MocksMobApp.SeverRequestManager.Request(d);MocksMobApp.SeverRequestManager.AddRequest(b);MocksMobApp.SeverRequestManager.Start()},openExternalPage:function(a){if(MocksMobApp.Network.hasConnection(true)){window.plugins.childBrowser.showWebPage(a)}},convertExternalLinks:function(a){$(a).find('a[href^="http://"]').each(function(){var b="";$(this).addClass("ui-link");$(this).attr("rel","external")});$(a).find('a[href^="https://"]').each(function(){var b="";$(this).addClass("ui-link");$(this).attr("rel","external")})}}})();Encrypt=(function(){return{GetEncryptedUserName:function(){var a="";a+=Date.parse(new Date().toString())/1000;a+=";"+UserPreferences.getItem(Globals.USER_NAME)+";";a+=Date.parse(new Date().toString())/1000;var b=encryptedString(base64encode(a));return b},GetEncryptedUserID:function(){var b="";DebugLogging.ConsoleLog("AppInfoOutput: UID befor encrypt:"+UserPreferences.getItem(Globals.USER_ID));b+=Date.parse(new Date().toString())/1000;b+=";"+UserPreferences.getItem(Globals.USER_ID)+";";b+=Date.parse(new Date().toString())/1000;var a=encryptedString(base64encode(b));return a}}})();GAnalytics=(function(){return{start:function(){DebugLogging.ConsoleLog("AppInfoOutput: GAnalytics.Start called...");if((BrowserDetect.browser!="Chrome")&&(BrowserDetect.browser!="Firefox")){window.plugins.analytics.start(function(){DebugLogging.ConsoleLog("AppInfoOutput: Analytics Started")},function(){DebugLogging.ConsoleLog("AppInfoOutput: Analytics Failed To Start")})}},recordPageView:function(){if((BrowserDetect.browser!="Chrome")&&(BrowserDetect.browser!="Firefox")){window.plugins.analytics.trackPageView("/MobileApp/"+Globals.APP_TYPE.replace(/ /g,"_")+"/"+$(".ui-page-active").attr("id"),function(){DebugLogging.ConsoleLog("AppInfoOutput: googleAnalytics tracked page view")},function(){DebugLogging.ConsoleLog("AppInfoOutput: googleAnalytics didn't track page view")})}},recordEvent:function(c,a,b){if((BrowserDetect.browser!="Chrome")&&(BrowserDetect.browser!="Firefox")){if(b==""){b=0}window.plugins.analytics.trackEvent(Globals.APP_TYPE.replace(/ /g,"_"),c,a,b,function(){DebugLogging.ConsoleLog("AppInfoOutput: tracked event")},function(){DebugLogging.ConsoleLog("AppInfoOutput: didn't track event")})}}}})();Location=(function(){var c="";var b="";var a="";return{requestLocation:function(){if(Globals.USELOCATION){navigator.geolocation.getCurrentPosition(Location.requestLocationSuccessCB,Location.requestLocationErrorCB,{maximumAge:9000,timeout:10000})}},requestLocationSuccessCB:function(d){c=d.coords.latitude;b=d.coords.longitude;a=d.coords.accuracy;DebugLogging.ConsoleLog("AppInfoOutput: Location: "+c+" "+b+" "+a)},requestLocationErrorCB:function(d){DebugLogging.ConsoleLog("AppInfoOutput: LocationError code: "+d.code);DebugLogging.ConsoleLog("AppInfoOutput: LocationError message: "+d.message)},getLatitude:function(){return c},getLongitude:function(){return b},getAccuracy:function(){return a}}})();InAppBilling=(function(){var a=null;return{initalize:function(){DebugLogging.ConsoleLog("AppInfoOutput: InAppBilling.initalize called....");inappbilling.init(InAppBilling.initSuccessCB,InAppBilling.initFailCB)},purchase:function(b,f,d){var c="";if(!a){DebugLogging.ConsoleLog("AppInfoOutput: Inappbilling purchase called: Billing not supported billingSupported="+a);MocksMobApp.UI.showToast("Sorry your phone does not support In App Purchases",true);return}if(!MocksMobApp.Network.hasConnection(true)){DebugLogging.ConsoleLog("NoConnection");return}var e="";switch(d.service){case"notes":e="-NotesId-"+d.notesid;c="mocks_"+Globals.APP_LEVEL+"_r_notes_"+d.price;c=c.replace(".","_");d.itemId=c;break;case"mcqs":e="-McqSubjectId-"+d.mcqsubjectid;c="mocks_"+Globals.APP_LEVEL+"_mcq_subject";d.itemId=c;break;case"aurals":e="-AuralExamId-"+d.auralexamid;c="mocks_"+Globals.APP_LEVEL+"_aural_exam";d.itemId=c;break;case"orals":e="";c="mocks_"+Globals.APP_LEVEL+"_oral_credit";d.itemId=c;break;case"corrections":e="";c="mocks_"+Globals.APP_LEVEL+"_corrections_credit";d.itemId=c;DebugLogging.ConsoleLog("Corrections Purchase. ItemID ="+d.itemId);break;default:e="";break}GAnalytics.recordEvent("PurchaseStart",d.service+e,"");inappbilling.purchase(b,f,d)},initSuccessCB:function(b){DebugLogging.ConsoleLog(b);a=true;DebugLogging.ConsoleLog("AppInfoOutput: billingSupported="+a)},initFailCB:function(b){DebugLogging.ConsoleLog("AppInfoOutput: billing init Fail")},addSubscriptionCB:function(b){if(b.result){switch(b.service){case"notes":HelperFns.getSubscriptions("notes",MocksMobApp.Notes.getSubscriptionsCB);MocksMobApp.UI.openMainMenu();break;case"mcqs":HelperFns.getSubscriptions("mcqs",MocksMobApp.Mcq.getSubscriptionsCB);if($.mobile.activePage.attr("id")=="mcqsDetails"){backKeyDown()}break;case"aurals":HelperFns.getSubscriptions("aurals",MocksMobApp.Aural.getSubscriptionsCB);if($.mobile.activePage.attr("id")=="auralsSections"){backKeyDown()}break;case"orals":HelperFns.getSubscriptions("orals",MocksMobApp.Orals.getSubscriptionsCB);break;case"corrections":HelperFns.getSubscriptions("corrections",MocksMobApp.Corrections.getSubscriptionsCB);break;default:break}}else{DebugLogging.ConsoleLog("AppInfoOutput: result is false")}},purchaseSuccessCB:function(b){var f;DebugLogging.ConsoleLog(JSON.stringify(b));DebugLogging.ConsoleLog("AppInfoOutput: result: "+b.service+" "+b.state+" "+b.itemId);if((b.state=="purchased")&&(b.itemId!=null)){if((b.service!="notes")&&(b.service!="mcqs")&&(b.service!="aurals")&&(b.service!="orals")&&(b.service!="corrections")){DebugLogging.ConsoleLog("AppInfoOutput: purchaseSuccessCB unknown service: "+b.service)}b.user=Encrypt.GetEncryptedUserName();b.id=Encrypt.GetEncryptedUserID();var e=new MocksMobApp.SeverRequestManager.Request({requestService:"addsubscription",requestCallback:InAppBilling.addSubscriptionCB,requestParam:b,requestType:"post"});MocksMobApp.SeverRequestManager.AddRequest(e);MocksMobApp.SeverRequestManager.Start();var d=b.service;switch(b.service){case"notes":d+="-NotesId-"+b.notesid;break;case"mcqs":d+="-McqSubjectId-"+b.mcqsubjectid;break;case"aurals":d+="-AuralExamId-"+b.auralexamid;break;default:break}var c="AndroidPurchaseCallback-"+b.state;GAnalytics.recordEvent(c,d,"")}else{DebugLogging.ConsoleLog("AppInfoOutput: ***purchaseSuccessCB called but we are already waiting for a response from the server!!!")}},purchaseRequestFailedCB:function(b){DebugLogging.ConsoleLog("AppInfoOutput: purchaseRequestFailedCB");MocksMobApp.UI.showToast("Sorry, there was an error when requesting your purchase, you have not been charged.",true)},isBillingSupported:function(){DebugLogging.ConsoleLog("AppInfoOutput: InAppBilling.isBillingSupported called.... Returning"+a);return a},}})();MocksMobApp=(function(){var a={Network:(function(){return{hasConnection:function(d){if((BrowserDetect.browser=="Chrome")||(BrowserDetect.browser=="Firefox")){return true}var c=navigator.connection.type;var b=false;switch(c){case Connection.UNKNOWN:b=false;break;case Connection.ETHERNET:b=true;break;case Connection.WIFI:b=true;break;case Connection.CELL_2G:b=true;break;case Connection.CELL_3G:b=true;break;case Connection.CELL_4G:b=true;break;case Connection.NONE:b=false;break;default:b=false;break}if((b==false)&&(d==true)){MocksMobApp.UI.openNoNetworkDialog()}DebugLogging.ConsoleLog("AppInfoOutput: Connection is: "+b);return b},isSlowConnection:function(){if((BrowserDetect.browser=="Chrome")||(BrowserDetect.browser=="Firefox")){return false}var b=navigator.network.connection.type;if(b==Connection.CELL_2G){return true}return false}}})(),SeverRequestManager:(function(){var q=Globals.SERVER_URL+Globals.CONTENT_PROVIDER;var b="get";var j="jsonp";var c="MocksMobApp.SeverRequestManager.requestCallback";var n="MocksMobApp.SeverRequestManager.priorityRequestCallback";var f="20000";var e=-1;var d=0;var m=new Array();var o=null;var r;var g;var s;var p=true;var h=0;function l(x,w,v,u){DebugLogging.ConsoleLog("AppInfoOutput: Issue Request. Service:"+u+"  Type:"+v+"  Params:"+JSON.stringify(w));$.ajax({type:v,dataType:j,url:q+u,jsonpCallback:x,data:w})}function t(){if(MocksMobApp.Network.hasConnection(false)){if(p){e+=1}if(e<d){l(c,m[e].requestParam,m[e].requestType,m[e].requestService);s=setTimeout(function(){MocksMobApp.SeverRequestManager.RequestError()},k(false))}else{i()}}else{if(r==null){r=setInterval(function(){DebugLogging.ConsoleLog("AppInfoOutput: checking Connection"+h);h+=1;if(MocksMobApp.Network.hasConnection(false)){clearInterval(r);r=null;t()}else{if(h>5){clearInterval(r);r=null}}},15000)}}}function k(u){var v=MocksMobApp.Network.isSlowConnection();if(u){return(v)?30000:10000}else{return(v)?60000:10000}return}function i(){e=-1;d=0;if(m.length>0){m.splice(0,m.length)}m=new Array()}return{Request:function(v){v=jQuery.extend({requestService:"jsonrequest",requestParam:"",requestCallback:null,requestType:"get"},v);var u={requestService:v.requestService,requestParam:v.requestParam,requestCallback:v.requestCallback,requestType:v.requestType};return u},RequestError:function(){DebugLogging.ConsoleLog("AppInfoOutput: RequestError move to next request!!!");DebugLogging.ConsoleLog(q);s=null;p=!(p);t()},GetRequestParams:function(z,A){var u=Globals.APP_LEVEL_PARAM;var w="lastupdated=";var y="service=";var v="";var x="";y=y+z;if(typeof(A)!="undefined"){u="level="+A;if(A=="dtt"){z=z.replace("mcqs","dtt")}}v=MocksMobApp.Storage.getTableLastUpdated(z+"LastUpdated");if(v==null||(v=="undefined")||(typeof(v)=="undefined")){w=w+"0"}else{w=w+v}if(z=="mcqs"){x=UserPreferences.getItem("AlteredTable");DebugLogging.ConsoleLog("AppInfoOutput: Altered table = "+x);if(x==""){DebugLogging.ConsoleLog("AppInfoOutput: First Run");UserPreferences.setItem("AlteredTable","true");w="lastupdated=0"}}DebugLogging.ConsoleLog(u+"&"+w+"&"+y);return u+"&"+w+"&"+y},AddRequest:function(u){m.push(u);d+=1},Start:function(){DebugLogging.ConsoleLog("AppInfoOutput: Request Start: "+d);if(e==-1){p=true;t()}},issuePriorityRequest:function(w,u){if(MocksMobApp.Network.hasConnection(false)){if(o==null){DebugLogging.ConsoleLog("AppInfoOutput: Priority req null")}else{DebugLogging.ConsoleLog("AppInfoOutput: Priority req not null "+o.requestCallback);u()}if(o==null){o=w;var v=l(n,o.requestParam,o.requestType,o.requestService);g=setTimeout(function(){MocksMobApp.SeverRequestManager.PriorityRequestError(u)},k(true));return true}}return false},PriorityRequestError:function(u){DebugLogging.ConsoleLog("AppInfoOutput: PriorityRequestError timeout ");g=null;o=null;u()},priorityRequestCallback:function(w,v){clearTimeout(g);if(o!=null){var u=o;o=null;if((typeof(v)!="undefined")){DebugLogging.ConsoleLog("AppInfoOutput: PriorityReqCB with timestamp");u.requestCallback(w,v)}else{DebugLogging.ConsoleLog("AppInfoOutput: PriorityReqCB without timestamp");u.requestCallback(w)}}},requestCallback:function(w,v){try{DebugLogging.ConsoleLog("AppInfoOutput: RequestCallback: "+e+" num: "+d);if(s!=null){clearTimeout(s)}if((typeof(v)!="undefined")){m[e].requestCallback(w,v)}else{m[e].requestCallback(w)}p=true;t()}catch(u){DebugLogging.ConsoleLog("AppInfoOutput: RequestCallback Exception: "+u.message);DebugLogging.ConsoleLog("AppInfoOutput: Callback: "+m[e].requestCallback)}},Stop:function(){i()}}})(),Account:(function(){var d=[];function j(q,p,n,m){var o=MocksMobApp.Account.getRegItem(q);DebugLogging.ConsoleLog("AppInfoOutput: dataEntered: "+o+o.length);if(p){if(o==null){MocksMobApp.Account.setRegItem(q+"Valid",false);return false}}if(o.length<n||o.length>m){MocksMobApp.Account.setRegItem(q+"Valid",false);return false}MocksMobApp.Account.setRegItem(q+"Valid",true);return true}function l(n,m){var p=MocksMobApp.Account.getRegItem(n);var o=MocksMobApp.Account.getRegItem(m);var q=true;MocksMobApp.Account.setRegItem("regPassValid",true);MocksMobApp.Account.setRegItem("regPassLenValid",true);DebugLogging.ConsoleLog("AppInfoOutput: checkPassInput: "+p+" "+o);if(p!=o){DebugLogging.ConsoleLog("Password not equal");MocksMobApp.Account.setRegItem("regPassValid",false);q=false}if(p==null||p.length<7){DebugLogging.ConsoleLog("Password not long");MocksMobApp.Account.setRegItem("regPassLenValid",false);q=false}return q}function b(o){DebugLogging.ConsoleLog("AppInfoOutput: checkEmailAddr");var n=MocksMobApp.Account.getRegItem(o);var m=n.indexOf("@");var p=n.lastIndexOf(".");if(m<1||p<m+2||p+2>=n.length){DebugLogging.ConsoleLog("AppInfoOutput: checkEmailAddr returning false");MocksMobApp.Account.setRegItem(o+"Valid",false);return false}MocksMobApp.Account.setRegItem(o+"Valid",true);return true}function c(o){var n=MocksMobApp.Account.getRegItem(o);var m;var p=MocksMobApp.Account.getRegItem("regUserType");if(p!="Teacher"){if(Globals.APP_LEVEL=="lc"){m=6}else{m=8}}else{m=1}if(n<m){MocksMobApp.Account.setRegItem(o+"Valid",false);return false}else{MocksMobApp.Account.setRegItem(o+"Valid",true);return true}}function g(m){var n=MocksMobApp.Account.getRegItem(m);if(n<1){MocksMobApp.Account.setRegItem(m+"Valid",false);return false}else{MocksMobApp.Account.setRegItem(m+"Valid",true);return true}}function h(n){var m=MocksMobApp.Account.getRegItem(n);if(m.length>0){MocksMobApp.Account.setRegItem(n+"Valid",true);return true}else{MocksMobApp.Account.setRegItem(n+"Valid",false);return false}}function k(m){if((m.id>0)&&(m.result==true)){var n=MocksMobApp.Account.getRegItem("regUserName");UserPreferences.setItem(Globals.USER_NAME,n);MocksMobApp.Account.ClearRegValues();DebugLogging.ConsoleLog("AppInfoOutput: UserID = "+m.id);UserPreferences.setItem(Globals.USER_ID,m.id);UserPreferences.setItem(Globals.PROFILEVALID,true);UserPreferences.getItem(Globals.CONTENTSYNCED);DebugLogging.ConsoleLog("UserName = "+UserPreferences.getItem(Globals.USER_NAME));if(UserPreferences.getItem(Globals.CONTENTSYNCED)=="true"){MocksMobApp.UI.changePage("mainMenu",false)}else{MocksMobApp.UI.changePage("mainMenu",true)}InAppBilling.isBillingSupported()}else{if(m.result==false){MocksMobApp.Account.setRegItem("regServerValidationFail",true);MocksMobApp.Account.setRegItem("regServerValidationMsg",m.msg);MocksMobApp.UI.changePage("regPage1",false);$.mobile.hidePageLoadingMsg()}else{DebugLogging.ConsoleLog("AppInfoOutput: createAccountFail unknown error")}}$.mobile.hidePageLoadingMsg()}function f(m){DebugLogging.ConsoleLog(JSON.Stringify(m));DebugLogging.ConsoleLog("Registration Fail Callback")}function e(){var m=true;if(!i("#username",true,1,50)){m=false}if(!i("#password",true,7,50)){m=false}if(!m){$("#signInErrorMsg").show();MocksMobApp.UI.refreshScroll()}return m}function i(q,p,n,m){var o=$(q).val();DebugLogging.ConsoleLog("AppInfoOutput: dataEntered: "+o+o.length);if(p){if(o==null){return false}}if(o.length<n||o.length>m){return false}return true}return{signIn:function(){if(e()){if(MocksMobApp.Network.hasConnection(true)){DebugLogging.ConsoleLog("Sign in, Has Connection");$.mobile.showPageLoadingMsg();var o=$("#username").val();var r=$("#password").val();var n=encryptedString(base64encode(o));var q=encryptedString(base64encode(r));var m=new MocksMobApp.SeverRequestManager.Request({requestService:"signin",requestCallback:MocksMobApp.Account.signInResult,requestParam:{user:n,pass:q},requestType:"post"});var p=(function(){MocksMobApp.Account.signInResult({result:false,errorCallBack:true})});MocksMobApp.SeverRequestManager.issuePriorityRequest(m,p)}}},signInResult:function(p){if(p.result==false){$("#signInErrorMsg").show()}else{if(p.id>0){UserPreferences.setItem(Globals.USER_NAME,$("#username").val());DebugLogging.ConsoleLog("AppInfoOutput: UserID = "+p.id);UserPreferences.setItem(Globals.USER_ID,p.id);MocksMobApp.Account.ClearRegValues();var o="";o=p.id;var n=Encrypt.GetEncryptedUserName();var m=Encrypt.GetEncryptedUserID();var q=new MocksMobApp.SeverRequestManager.Request({requestService:"checkprofilefields",requestCallback:MocksMobApp.Account.setProfileStatusCB,requestParam:{user:n,id:m},requestType:"post"});MocksMobApp.SeverRequestManager.issuePriorityRequest(q,function(){DebugLogging.ConsoleLog("AppInfoOutput: ProfilePriorityRequest Error")});InAppBilling.isBillingSupported()}else{DebugLogging.ConsoleLog("AppInfoOutput: signInResult unknown error")}}$.mobile.hidePageLoadingMsg()},SignOut:function(m){DebugLogging.ConsoleLog("AppInfoOutput: SignOut: "+m);if(m){UserPreferences.setItem(Globals.USER_NAME,"");UserPreferences.setItem(Globals.USER_ID,"");MocksMobApp.UI.changePage("signIn",false)}else{$("#signOutBtnPH").hide();setTimeout(function(){$("#signOutConfirmBtns").show()},1000)}},StoreRegValues:function(m){DebugLogging.ConsoleLog("AppInfoOutput: Store Registration Values Called");switch(m){case"regPage1":MocksMobApp.Account.setRegItem("regUserName",$("#reg_username").val());MocksMobApp.Account.setRegItem("regFirstName",$("#firstname").val());MocksMobApp.Account.setRegItem("regLastName",$("#lastname").val());MocksMobApp.Account.setRegItem("regEmail",$("#email_addr").val());if(MocksMobApp.Account.getRegItem("CreateAcc")==true){MocksMobApp.Account.setRegItem("regPassword",$("#reg_password").val());MocksMobApp.Account.setRegItem("regPasswordConfirm",$("#reg_passwordConfirm").val())}MocksMobApp.Account.setRegItem("regUserType",$("#UserType").val());MocksMobApp.Account.setRegItem("regUserDOB",$("#UserDOB").val());MocksMobApp.Account.setRegItem("regUserLocation",$("#UserCounty").val());break;case"regPage2":var q="";var n=0;$("#subjectsRegList").find("input:checked").each(function(){DebugLogging.ConsoleLog("AppInfoOutput: Each Subject Ticked id = "+$(this).val());q+=$(this).val();q+="|";n++});q=q.substr(0,q.length-1);if(MocksMobApp.Account.getRegItem("regUserType")=="Student"){var p=$("#StudentYear").val();MocksMobApp.Account.setRegItem("regStudentYear",p)}MocksMobApp.Account.setRegItem("regSubjects",q);MocksMobApp.Account.setRegItem("regNumSubjects",n);break;case"regPage3":switch(MocksMobApp.Account.getRegItem("regUserType")){case"Student":DebugLogging.ConsoleLog("AppInfoOutput: StudyArea Val = "+$("#StudyArea").val());MocksMobApp.Account.setRegItem("regStudyArea",$("#StudyArea").val());case"Parent":var r="";var o=0;$("#chkGrpCollege").find("input:checked").each(function(){DebugLogging.ConsoleLog("AppInfoOutput: County ID = "+$(this).val());r+=$(this).val();r+="|";o++});r=r.substr(0,r.length-1);DebugLogging.ConsoleLog("AppInfoOutput: County IDs = "+r);DebugLogging.ConsoleLog("AppInfoOutput: regNumCollegeAreas = "+o);MocksMobApp.Account.setRegItem("regCollegeAreas",r);MocksMobApp.Account.setRegItem("regNumCollegeAreas",o);break;default:}break;default:}},RegisterAccount:function(u,C){$.mobile.showPageLoadingMsg();var E=MocksMobApp.Account.getRegItem("regUserName");var D=MocksMobApp.Account.getRegItem("regFirstName");var t=MocksMobApp.Account.getRegItem("regLastName");var z=MocksMobApp.Account.getRegItem("regEmail");var m=MocksMobApp.Account.getRegItem("regPassword");var A=MocksMobApp.Account.getRegItem("regUserType");var w=MocksMobApp.Account.getRegItem("regUserDOB");var r=MocksMobApp.Account.getRegItem("regUserLocation");var o=MocksMobApp.Account.getRegItem("regStudentYear");var x=MocksMobApp.Account.getRegItem("regSubjects");var q=MocksMobApp.Account.getRegItem("regStudyArea");var y=MocksMobApp.Account.getRegItem("regCollegeAreas");var n="";var B="";if(Globals.APP_LEVEL=="lc"){n=x;B="NULL";if(A=="Student"){A=A+" - Leaving Cert Cycle"}}else{if(Globals.APP_LEVEL=="jc"){n="NULL";B=x;if(A=="Student"){A=A+" - Junior Cert Cycle"}}}var p=encryptedString(base64encode(E));var s=encryptedString(base64encode(m));DebugLogging.ConsoleLog("Request New Account\nValues:\n");DebugLogging.ConsoleLog("UserName = "+E);DebugLogging.ConsoleLog("First Name = "+D);DebugLogging.ConsoleLog("Last Name = "+t);DebugLogging.ConsoleLog("Email = "+z);DebugLogging.ConsoleLog("Pass = "+m);DebugLogging.ConsoleLog("UserType = "+A);DebugLogging.ConsoleLog("UserDOB = "+w);DebugLogging.ConsoleLog("County = "+r);DebugLogging.ConsoleLog("Study Year = "+o);DebugLogging.ConsoleLog("Study Area = "+q);DebugLogging.ConsoleLog("Colleges = "+y);DebugLogging.ConsoleLog("LC_Subjects = "+n);DebugLogging.ConsoleLog("JC_Subjects = "+B);var v=new MocksMobApp.SeverRequestManager.Request({requestService:"newuser",requestCallback:u,requestParam:{user:p,pass:s,firstname:D,lastname:t,email:z,UserType:A,DateOfBirth:w,County:r,StudyYear:o,StudyArea:q,ThirdLevel:y,LCSubjects:n,JCSubjects:B,app_type:Globals.APP_TYPE},requestType:"post"});MocksMobApp.SeverRequestManager.issuePriorityRequest(v,C)},UpdateAccount:function(x,t){$.mobile.showPageLoadingMsg();var n=MocksMobApp.Account.getRegItem("regUserType");var o=MocksMobApp.Account.getRegItem("regUserDOB");var s=MocksMobApp.Account.getRegItem("regUserLocation");var r=MocksMobApp.Account.getRegItem("regStudentYear");DebugLogging.ConsoleLog("AppInfoOutput: StudentYear = "+r);var q=MocksMobApp.Account.getRegItem("regSubjects");var p=MocksMobApp.Account.getRegItem("regStudyArea");var v=MocksMobApp.Account.getRegItem("regCollegeAreas");var z="";var u="";if(Globals.APP_LEVEL=="lc"){z=q;u="NULL";if(n=="Student"){n=n+" - Leaving Cert Cycle"}}else{if(Globals.APP_LEVEL=="jc"){z="NULL";u=q;if(n=="Student"){n=n+" - Junior Cert Cycle"}}}DebugLogging.ConsoleLog("UserType = "+n);DebugLogging.ConsoleLog("UserDOB = "+o);DebugLogging.ConsoleLog("County = "+s);DebugLogging.ConsoleLog("Study Year = "+r);DebugLogging.ConsoleLog("Study Area = "+p);DebugLogging.ConsoleLog("Colleges = "+v);DebugLogging.ConsoleLog("LC_Subjects = "+z);DebugLogging.ConsoleLog("JC_Subjects = "+u);var m=Encrypt.GetEncryptedUserID();var w=Encrypt.GetEncryptedUserName();var y=new MocksMobApp.SeverRequestManager.Request({requestService:"updateuser",requestCallback:x,requestParam:{id:m,user:w,UserType:n,Date_Of_Birth:o,County:s,Year_Of_Study:r,Study_Area:p,Third_Level_Location:v,LC_Subjects:z,JC_Subjects:u,Register_Location:Globals.APP_TYPE},requestType:"post"});MocksMobApp.SeverRequestManager.issuePriorityRequest(y,t)},ValidateRegInfo:function(){var n=true;var m=true;var p=true;var o=MocksMobApp.Account.getRegItem("regUserType");if(!j("regUserName",true,3,30)){n=false}if(!j("regFirstName",true,1,30)){n=false}if(!j("regLastName",true,1,30)){n=false}if(!b("regEmail")){n=false}if(MocksMobApp.Account.getRegItem("CreateAcc")==true){if(!l("regPassword","regPasswordConfirm")){n=false}}DebugLogging.ConsoleLog("regPassValid = "+MocksMobApp.Account.getRegItem("regPassValid"));DebugLogging.ConsoleLog("regPassLenValid = "+MocksMobApp.Account.getRegItem("regPassLenValid"));if(!j("regUserDOB",true,8,10)){n=false}if(!j("regUserLocation",true,4,20)){n=false}DebugLogging.ConsoleLog("regNumSubjects = "+MocksMobApp.Account.getRegItem("regNumSubjects"));if(!c("regNumSubjects")){m=false;DebugLogging.ConsoleLog("2 False Num Subjects")}if(o=="Student"){DebugLogging.ConsoleLog("regStudentYear = "+MocksMobApp.Account.getRegItem("regStudentYear"));if(!j("regStudentYear",true,2,15)){m=false;DebugLogging.ConsoleLog("2 False Student Year")}}switch(o){case"Student":if(!h("regStudyArea")){p=false}case"Parent":if(!g("regNumCollegeAreas")){p=false}case"Teacher":default:}DebugLogging.ConsoleLog("AppInfoOutput: Page 1 Valid"+n);DebugLogging.ConsoleLog("AppInfoOutput: Page 2 Valid"+m);DebugLogging.ConsoleLog("AppInfoOutput: Page 3 Valid"+p);if(!n){MocksMobApp.UI.changePage("regPage1",false)}else{if(!m){MocksMobApp.UI.changePage("regPage2",false)}else{if(!p){MocksMobApp.UI.changePage("regPage3",false)}else{if(MocksMobApp.Account.getRegItem("CreateAcc")!=true){MocksMobApp.Account.UpdateAccount(k,f)}else{MocksMobApp.Account.RegisterAccount(k,f)}}}}},setRegItem:function(n,p){for(var m=0;m<d.length;m++){var o=d[m];var r=o.keyName;if(n==r){o.keyValue=p;return}}var q={};q.keyName=n;q.keyValue=p;d.push(q);return},getRegItem:function(n){for(var m=0;m<d.length;m++){var o=d[m];var q=o.keyName;if(n==q){return o.keyValue}}var p="NULL";DebugLogging.ConsoleLog("AppInfoOutput: GetRegItem: "+n+"  Returning "+p);return p},removeRegItem:function(n){for(var m=0;m<d.length;m++){var o=d[m];var p=o.keyName;if(n==p){d.splice(m,1)}}},ClearRegValues:function(){DebugLogging.ConsoleLog("Clear Local Storage Called");d=[];DebugLogging.ConsoleLog("Clear Local Storage Finished")},setProfileStatusCB:function(o){DebugLogging.ConsoleLog("AppInfoOutput: setProfileStatusCB");DebugLogging.ConsoleLog(JSON.stringify(o));if(o.result==true){DebugLogging.ConsoleLog("AppInfoOutput: Profile is Valid CB");UserPreferences.setItem(Globals.PROFILEVALID,true);if(UserPreferences.getItem(Globals.CONTENTSYNCED)=="true"){MocksMobApp.UI.changePage("mainMenu",false)}else{MocksMobApp.UI.changePage("mainMenu",true)}}else{UserPreferences.setItem(Globals.PROFILEVALID,false);DebugLogging.ConsoleLog("AppInfoOutput: Profile is not Valid CB.");var n=Encrypt.GetEncryptedUserName();var m=Encrypt.GetEncryptedUserID();var p=new MocksMobApp.SeverRequestManager.Request({requestService:"usersprofile",requestCallback:MocksMobApp.Account.getProfilePropertiesCB,requestParam:{user:n,id:m},requestType:"post"});MocksMobApp.SeverRequestManager.issuePriorityRequest(p,function(){DebugLogging.ConsoleLog("AppInfoOutput: ProfilePriorityRequest Error")})}},getProfilePropertiesCB:function(m){DebugLogging.ConsoleLog("AppInfoOutput: get properties callback");if((m.UserName!="NULL")&&(m.UserName!="")&&!(m.UserName===undefined)){MocksMobApp.Account.setRegItem("regUserName",m.UserName);MocksMobApp.Account.setRegItem("regUserNameValid",true)}if((m.FirstName!="NULL")&&(m.FirstName!="")&&!(m.FirstName===undefined)){MocksMobApp.Account.setRegItem("regFirstName",m.FirstName);MocksMobApp.Account.setRegItem("regFirstNameValid",true)}if((m.LastName!="NULL")&&(m.LastName!="")&&!(m.LastName===undefined)){MocksMobApp.Account.setRegItem("regLastName",m.LastName);MocksMobApp.Account.setRegItem("regLastNameValid",true)}if((m.Email!="NULL")&&(m.Email!="")&&!(m.Email===undefined)){MocksMobApp.Account.setRegItem("regEmail",m.Email);MocksMobApp.Account.setRegItem("regEmailValid",true)}if((m.UserType!="NULL")&&(m.UserType!="")&&!(m.UserType===undefined)){MocksMobApp.Account.setRegItem("regUserType",m.UserType);MocksMobApp.Account.setRegItem("regUserTypeValid",true)}if((m.Date_Of_Birth!="NULL")&&(m.Date_Of_Birth!="")&&!(m.Date_Of_Birth===undefined)){MocksMobApp.Account.setRegItem("regUserDOB",m.Date_Of_Birth);MocksMobApp.Account.setRegItem("regUserDOBValid",true)}if((m.County!="NULL")&&(m.County!="")&&!(m.County===undefined)){MocksMobApp.Account.setRegItem("regUserLocation",m.County);MocksMobApp.Account.setRegItem("regUserLocationValid",true)}var o=UserPreferences.getItem(Globals.APP_LEVEL);if(o=="lc"){if((m.LC_Subjects!="NULL")&&(m.LC_Subjects!="")&&!(m.LC_Subjects===undefined)){var n=m.LC_Subjects.split("|");var p=n.length;MocksMobApp.Account.setRegItem("regSubjects",m.LC_Subjects);MocksMobApp.Account.setRegItem("regSubjectsValid",true);MocksMobApp.Account.setRegItem("regNumSubjects",p);MocksMobApp.Account.setRegItem("regNumSubjectsValid",true)}}else{if(o=="jc"){if((m.JC_Subjects!="NULL")&&(m.JC_Subjects!="")&&!(m.JC_Subjects===undefined)){var n=m.JC_Subjects.split("|");var p=n.length;MocksMobApp.Account.setRegItem("regSubjects",m.JC_Subjects);MocksMobApp.Account.setRegItem("regSubjectsValid",true);MocksMobApp.Account.setRegItem("regNumSubjects",p);MocksMobApp.Account.setRegItem("regNumSubjectsValid",true)}}}if((m.StudyArea!="NULL")&&(m.StudyArea!="")&&!(m.StudyArea===undefined)){DebugLogging.ConsoleLog("AppInfoOutput: Study Area = "+m.StudyArea);MocksMobApp.Account.setRegItem("regStudyArea",m.StudyArea);MocksMobApp.Account.setRegItem("regStudyAreaValid",true)}if((m.Third_Level_Location!="NULL")&&(m.Third_Level_Location!="")&&!(m.Third_Level_Location===undefined)){MocksMobApp.Account.setRegItem("regCollegeAreas",m.Third_Level_Location);MocksMobApp.Account.setRegItem("regCollegeAreasValid",true)}if((m.Year_Of_Study!="NULL")&&(m.Year_Of_Study!="")&&!(m.Year_Of_Study===undefined)){MocksMobApp.Account.setRegItem("regStudentYear",m.Year_Of_Study);MocksMobApp.Account.setRegItem("regStudentYearValid",true)}DebugLogging.ConsoleLog("AppInfoOutput: ProfileProperties Set.");if(UserPreferences.getItem(Globals.REGCONTENTSYNCHED)=="true"){MocksMobApp.UI.changePage("regPage1",false)}else{MocksMobApp.UI.changePage("regPage1",true)}}}})(),Ads:(function(){return{requestNewAd:function(){if(Globals.ADS_ON){DebugLogging.ConsoleLog("AppInfoOutput: requestNewAdd");var d;var c={service:"newAd",app_type:Globals.APP_TYPE,latitude:Location.getLatitude(),longitude:Location.getLongitude()};var e={requestService:"adRequest",requestCallback:MocksMobApp.Ads.newAdReceivedCB,requestParam:c,requestType:"post"};d=new MocksMobApp.SeverRequestManager.Request(e);var b=(function(){DebugLogging.ConsoleLog("AppInfoOutput: Ad Requested failed or timed out")});MocksMobApp.SeverRequestManager.issuePriorityRequest(d,b)}},newAdReceivedCB:function(b){DebugLogging.ConsoleLog("AppInfoOutput: newAdReceivedCB"+MocksMobApp.UI.currentPage().serviceName);var c=$("#"+MocksMobApp.UI.currentPage().serviceName+"Footer");if((typeof(b)!="string")||(b.length<=0)||(b.error==true)||(c.length<=0)){DebugLogging.ConsoleLog("AppInfoOutput: Error With Ad, use default");c.empty();c.append(Globals.FOOTERCOPYRIGHT)}else{}}}})(),UI:(function(){var c=null;var e=0;var i="cat_";var w="_d";var v="_li";var z="";var y="*ID*";var t='<li id="'+y+'">';var x="</li>";var n='<a id="'+y+'" href="#" DD>';var b="</a>";var k='<div id="'+y+'">';var g="</div>";var r='data-role="button"';var p="refresh";var h="";var s="";var q=0;var f=0;var d="";var l=0;var m;var u=false;var o=new Object();var j=false;function A(B){j=B}return{windowWidth:function(){return $(window).width()},windowHeight:function(){return $(window).height()},headerHeight:function(){var B=$("#"+MocksMobApp.UI.currentPage().serviceName+"Header");if(B.length>0){return B.outerHeight(true)}else{return $(".ui-page-active").find('[data-role="header"]').outerHeight(true)}},footerHeight:function(){return $(".ui-page-active").find('[data-role="footer"]').outerHeight(true)},contentHeight:function(){var D=$(window).height();var B=MocksMobApp.UI.headerHeight();var C=MocksMobApp.UI.footerHeight();return Math.floor(D-B-C)},setSubjectsPageID:function(C,B){f=C;d=B},setSubjectsPageExamBreakdownID:function(B){l=B},subjectsPageID:function(){return f},subjectsPageName:function(){return d},examBreakdownID:function(){return l},setPageParams:function(B,E,D,C){h=B;q=E;s=D;u=C;DebugLogging.ConsoleLog("AppInfoOutput: setPageParams->"+h)},currentPage:function(){var B={serviceName:h,subjectId:q,subjectName:s,scrollerDiv:(u)?h+"Scroller":"",wrapperDiv:(u)?h+"Wrapper":""};return B},addNewLi:function(F,C,D,B){var E="";E=t.replace(y,C+v)+F+x;$(E).appendTo(B);if(D!=""){$("#"+C+v).addClass(D)}},createAnchor:function(E,D,C){var B="";B=n.replace(y,D+z)+E+b;B=B.replace("DD",C);return B},createBtn:function(C,B){return this.createAnchor(C,B,r)},createAnsBtn:function(G,I,H,F,J){var D="";var C=G+"-q-"+H+"-ans-"+F;var B="vclick";if(G=="mcq"){C=G+"-ans-"+F;B="touchstart"}var E="answer ans_not_selected";D+='<div class="'+E+'" id="'+C+'">';D+=I;D+="</div>";$("#"+C).die(B).live(B,{q:H,a:F},function(K){J(K.data.q,K.data.a)});return D},createCheckBox:function(F,D,B,C){var E="<input type='checkbox' name='"+F+"' id='"+D+"' value='"+C+"' class='custom' /><label for='"+D+"'>"+B+"</label>";return E},initAnchorClick:function(C,B){DebugLogging.ConsoleLog("AppInfoOutput: initAnchorClick: "+C);$("#"+C).die();$("#"+C).live("click",function(){B()})},appendElementToPH:function(D,C,B){DebugLogging.ConsoleLog("AppInfoOutput: appendElementToPH: "+D);if(!B){C.empty()}C.append(D)},initScroll:function(){if((MocksMobApp.UI.currentPage().serviceName!="")&&(MocksMobApp.UI.currentPage().serviceName!="regPage1")&&(MocksMobApp.UI.currentPage().serviceName!="regPage2")&&(MocksMobApp.UI.currentPage().serviceName!="regPage3")&&(MocksMobApp.UI.currentPage().serviceName!="addClassTT")&&(MocksMobApp.UI.currentPage().serviceName!="addClassDetails")){if(o[MocksMobApp.UI.currentPage().serviceName]==null){DebugLogging.ConsoleLog(MocksMobApp.UI.currentPage().serviceName+" creating scroller");if(MocksMobApp.UI.currentPage().serviceName!="examBreakdown"){o[MocksMobApp.UI.currentPage().serviceName]=new iScroll(MocksMobApp.UI.currentPage().wrapperDiv,{hScroll:false,bounce:false,hideScrollbar:false,scrollbarClass:"myScrollbar"})}else{o[MocksMobApp.UI.currentPage().serviceName]=new iScroll(MocksMobApp.UI.currentPage().wrapperDiv,{hScroll:true,bounce:false,hideScrollbar:false,scrollbarClass:"myScrollbar"})}}var D=MocksMobApp.UI.contentHeight();var B=MocksMobApp.UI.headerHeight();$(".wrapper").css("height",D+"px");$(".wrapper").css("top",B+"px");$(".scroller").css("width","100%");if(MocksMobApp.UI.currentPage().serviceName=="examBreakdown"){var C=$("#ExamBreakdownPH").width()+20;$(".scroller").css("width",C+"px")}MocksMobApp.UI.refreshScroll()}},scrollToElement:function(B){if(o[MocksMobApp.UI.currentPage().serviceName]!=null){o[MocksMobApp.UI.currentPage().serviceName].scrollToElement(B,10)}},refreshScroll:function(){DebugLogging.ConsoleLog("AppInfoOutput: in refreshScroll:"+MocksMobApp.UI.currentPage().serviceName);if(o[MocksMobApp.UI.currentPage().serviceName]!=null){if(e!=0){clearInterval(e);e=0}e=setInterval(function(){if(document.readyState!="loaded"&&document.readyState!="complete"){DebugLogging.ConsoleLog("AppInfoOutput: document.readyState: "+document.readyState);return}clearInterval(e);e=0;DebugLogging.ConsoleLog("AppInfoOutput: document.readyState: "+document.readyState);DebugLogging.ConsoleLog("AppInfoOutput: Scroll Refresh called");o[MocksMobApp.UI.currentPage().serviceName].refresh()},100)}},scrollToPageTop:function(){if(o[MocksMobApp.UI.currentPage().serviceName]!=null){o[MocksMobApp.UI.currentPage().serviceName].scrollTo(0,0,10)}},getIntroText:function(B){MocksMobApp.Storage.getServicesIntro(B,MocksMobApp.UI.addIntroText)},addIntroText:function(H){var E="#"+H.ServicesInfoName+"IntroShortPH";var D="#"+H.ServicesInfoName+"IntroLongPH";$(E).empty();$(E).append(H.ServicesInfoShortDetails);if(H.ServicesInfoLongDetails.length>0){var G=H.ServicesInfoName+"_show_more";var C=MocksMobApp.UI.createBtn("Show More",G);$(E).append(C);$("#"+G).attr("data-icon","arrow-d");$("#"+G).attr("data-iconpos","right");$("#"+G).attr("data-theme","n");$("#"+G).die("click").live("click",{sName:H.ServicesInfoName},function(I){MocksMobApp.UI.toggleServiceIntro(I.data.sName,true)});$(D).empty();$(D).append(H.ServicesInfoLongDetails);var B=H.ServicesInfoName+"_show_less";var F=MocksMobApp.UI.createBtn("Hide",B);$(D).append(F);$("#"+B).attr("data-icon","arrow-u");$("#"+B).attr("data-iconpos","right");$("#"+B).attr("data-theme","n");$("#"+B).die("click").live("click",{sName:H.ServicesInfoName},function(I){MocksMobApp.UI.toggleServiceIntro(I.data.sName,false)})}$(D).trigger("create");$(E).trigger("create");$(D).hide();$(E).show()},toggleServiceIntro:function(D,E){var C="#"+D+"IntroShortPH";var B="#"+D+"IntroLongPH";if(E){$(C).hide();$(B).show()}else{$(B).hide();$(C).show()}MocksMobApp.UI.refreshScroll()},changePage:function(C,B){DebugLogging.ConsoleLog("AppInfoOutput: changePageDebug: "+C);if((C!="regPage1")&&(C!="regPage2")&&(C!="regPage3")&&(C!="signIn")&&(C!="addClassDetails")&&(C!="addClassTT")){$(".ui-page").css("-webkit-backface-visibility","hidden")}$("#"+$(".ui-page-active").attr("id")+"Scroller").hide();$("#"+C+"Scroller").hide();A(B);if((C=="regPage2")||(C=="regPage3")){$.mobile.changePage("#"+C,{allowSamePageTransition:true})}else{DebugLogging.ConsoleLog("AppInfoOutput: change page "+C);$.mobile.changePage("#"+C)}},openMainMenu:function(){$("#"+$(".ui-page-active").attr("id")+"Scroller").hide();$("#mainMenuScroller").hide();A(false);$.mobile.changePage("#mainMenu",{reverse:true})},openLoadingDialog:function(){if(j==true){$.mobile.showPageLoadingMsg()}else{MocksMobApp.UI.closeLoadingDialog()}},closeLoadingDialog:function(){j=false;$.mobile.hidePageLoadingMsg()},showToast:function(B,D){if(B!=""){var C=$("<div id='toastDialog' class='ui-loader-m ui-body-a ui-corner-all'><h2></h2></div>");C.find("h2").text(B).end().appendTo($.mobile.pageContainer).css({top:MocksMobApp.UI.windowHeight()-150})}$("html").addClass("ui-loading-m");if(D){setTimeout("MocksMobApp.UI.hideToast()",2500)}else{setTimeout("MocksMobApp.UI.hideToast()",1500)}},hideToast:function(){$("html").removeClass("ui-loading-m");$("#toastDialog").remove()},openNoNetworkDialog:function(){var B="No internet connection, this action can not be completed";MocksMobApp.UI.showToast(B,true)},showInfoBox:function(B){navigator.notification.alert(B,"","Error")},getInfoMessage:function(){return m}}})(),TimeTable:(function(){var z=-1;var f="class";var y="week";var k=false;var h=true;var p=[{DayID:0,DayNameLong:"Monday",DayNameShort:"Mon"},{DayID:1,DayNameLong:"Tuesday",DayNameShort:"Tue"},{DayID:2,DayNameLong:"Wednesday",DayNameShort:"Wed"},{DayID:3,DayNameLong:"Thursday",DayNameShort:"Thu"},{DayID:4,DayNameLong:"Friday",DayNameShort:"Fri"},{DayID:5,DayNameLong:"Saturday",DayNameShort:"Sat"},{DayID:6,DayNameLong:"Sunday",DayNameShort:"Sun"}];var l=[{ColourID:0,ColourCSS:"tt-bg-black",ColourName:"Black"},{ColourID:1,ColourCSS:"tt-bg-white",ColourName:"White"},{ColourID:2,ColourCSS:"tt-bg-red",ColourName:"Red"},{ColourID:3,ColourCSS:"tt-bg-green",ColourName:"Green"},{ColourID:4,ColourCSS:"tt-bg-blue",ColourName:"Blue"},{ColourID:5,ColourCSS:"tt-bg-pink",ColourName:"Pink"},{ColourID:6,ColourCSS:"tt-bg-orange",ColourName:"Orange"},{ColourID:7,ColourCSS:"tt-bg-grey",ColourName:"Grey"},{ColourID:8,ColourCSS:"tt-bg-purple",ColourName:"Purple"},{ColourID:9,ColourCSS:"tt-bg-yellow",ColourName:"Yellow"},{ColourID:10,ColourCSS:"tt-bg-brown",ColourName:"Brown"},{ColourID:11,ColourCSS:"tt-bg-maroon",ColourName:"Maroon"}];var A={ClassID:-1,ClassDay:-1,ClassColour:0,TimeTableType:"class",ClassName:"",ClassLocation:"",ClassComments:"",ClassStart:9*60,ClassEnd:9*60};function I(J){this.ClassID=J.ClassID;this.ClassDay=J.ClassDay;this.ClassColour=J.ClassColour;this.TimeTableType=J.TimeTableType;this.ClassName=J.ClassName;this.ClassLocation=J.ClassLocation;this.ClassComments=J.ClassComments;this.ClassStart=J.ClassStart;this.ClassEnd=J.ClassEnd}function i(){A.setClass({ClassID:-1,ClassDay:-1,ClassColour:0,TimeTableType:"class",ClassName:"",ClassLocation:"",ClassComments:"",ClassStart:9*60,ClassEnd:9*60})}A.setClass=I;function G(J){DebugLogging.ConsoleLog("AppInfoOutput: openEditClassPage");MocksMobApp.TimeTable.setClassID(J);MocksMobApp.UI.changePage("addClassTT",false)}function D(){DebugLogging.ConsoleLog("AppInfoOutput: saveClass");var L=false;A.ClassName=$("input#addClassSubject").val();if((A.ClassName=="")||(A.ClassName.length<=0)){$("#errorPH").text("Error! Please enter Subject Name");$("#errorPH").show();MocksMobApp.UI.refreshScroll();return false}$("#errorPH").empty();A.ClassLocation=$("input#addClassLocation").val();A.ClassComments=$("#subjectDetailsPH").html();if(A.ClassComments=="Details:"){A.ClassComments=""}if($("select#ttClassType")[0].selectedIndex==0){A.TimeTableType="class"}else{A.TimeTableType="study"}var J="";var O="";var N="";for(var M=0;M<7;M++){N="timeDiv-"+M;A.ClassDay=M;J=A.ClassStart=e(N+"start");O=A.ClassEnd=e(N+"end");DebugLogging.ConsoleLog("AppInfoOutput: Day: "+M);DebugLogging.ConsoleLog("AppInfoOutput: Start Time = "+J);DebugLogging.ConsoleLog("AppInfoOutput: End Time = "+O);if(A.ClassStart>=0&&A.ClassEnd>=0){var K=A;MocksMobApp.Storage.insertClass(K,M,J,O);L=true}}if(!L){$("#errorPH").text("Error! Please enter a start and end time for at least one day");$("#errorPH").show();MocksMobApp.UI.refreshScroll()}return L}function d(){MocksMobApp.Storage.deleteClass(A.ClassID)}function b(){if(h==true){h=false;MocksMobApp.UI.showToast("Swipe left/right to view the next/prev day",true)}}function e(P){var O=$("input#"+P).val();DebugLogging.ConsoleLog("AppInfoOutput: Input String Time = "+O);var M=O.split(":",2);var K=M[1].indexOf("PM");var J=parseInt(M[0],10);var L=parseInt(M[1],10);if(K!==-1){J+=12}if((isNaN(J))||(isNaN(L))){return -1}var N=0;N=(J*60)+L;return N}function v(L,M){if(isNaN(L)){return}var J=0;var K=0;if(L!=0){J=Math.floor(L/60);K=Math.floor(L%60)}if(K<9){K="0"+K}$("input#"+M).val(J+":"+K)}function u(){$("#ttClassesBtn").die("click").live("click",function(J){f="class";MocksMobApp.TimeTable.switchTTView(y)});$("#ttStudyBtn").die("click").live("click",function(J){f="study";MocksMobApp.TimeTable.switchTTView(y)});$("#ttClassAndStudyBtn").die("click").live("click",function(J){f="both";MocksMobApp.TimeTable.switchTTView(y)});$("#openAddClassTT").die("click").live("click",function(J){$("#openAddClassTT").removeClass("ui-btn-active");G(-1)})}function w(){DebugLogging.ConsoleLog("AppInfoOutput: openWeekTTView");var L;var K;var N;var M;var J;$("#conTimeTableDay").hide();$("#conTimeTableWeek").hide();$("#openTimeTableBtn").die();$("#openTimeTableBtn").empty();$("#openTimeTableBtn").append('<span class="ui-btn-inner"><span class="ui-btn-text">Today</span></span>');$("#openTimeTableBtn").die("click").live("click",function(O){$("#openTimeTableBtn").removeClass("ui-btn-active");DebugLogging.ConsoleLog("AppInfoOutput: openTimeTableBtn changing to day");z=n();MocksMobApp.TimeTable.switchTTView("day")});z=-1;MocksMobApp.TimeTable.addDaysToTTPage(p);m($("#weekTimeLinePH"));MocksMobApp.Storage.getTTClasses(-1,MocksMobApp.TimeTable.addClassesToWeekPage);MocksMobApp.TimeTable.changeCssStyle();$("#conTimeTableWeek").show();MocksMobApp.UI.refreshScroll()}function m(M){var L,J;var N="";J=g();L=F();DebugLogging.ConsoleLog("AppInfoOutput: Hrs: "+J+"start "+L);M.empty();for(var K=0;K<J;K++){N='<div class="tt-bg-white ttTimeSlot">';N+=x(L+K);N+="</div>";M.append(N)}}function x(J){if(J>23){J-=24}return J+":00"}function j(){var J;if(z==-1){J=5;if(UserPreferences.getItem(Globals.TTSHOWSAT)==true){J++}if(UserPreferences.getItem(Globals.TTSHOWSUN)==true){J++}}else{J=1}return J}function C(){var K=MocksMobApp.UI.contentHeight();var J=$(".ttDayColHdr").outerHeight(true);return K-J-2}function c(){return 60}function B(L,J){var M=0;L=parseInt(L,10);J=parseInt(J,10);if(F()*60>L){L=F()*60}if(s()*60<J){J=s()*60}numHrs=(J-L)/60;if(numHrs<=0){return false}var K=c();return Math.round(numHrs*K)}function r(J){var K=F()*60;var L=c();J=parseInt(J,10);if(J<K){J=K}hrsSinceTTStart=(J-K)/60;return Math.round(hrsSinceTTStart*(L+2))}function t(){$("#conTimeTableWeek").hide();$("#conTimeTableDay").hide();$("#openTimeTableBtn").die();$("#openTimeTableBtn").empty();$("#openTimeTableBtn").append('<span class="ui-btn-inner"><span class="ui-btn-text">Week</span></span>');$("#openTimeTableBtn").die("click").live("click",function(J){DebugLogging.ConsoleLog("AppInfoOutput: openTimeTableBtn changing to week");$("#openTimeTableBtn").removeClass("ui-btn-active");z=-1;MocksMobApp.TimeTable.switchTTView("week");J.stopPropagation();return false});H();m($("#dayTimeLinePH"));MocksMobApp.Storage.getTTClasses(z,MocksMobApp.TimeTable.addClassesToDayPage);MocksMobApp.TimeTable.changeCssStyleDay();$("#conTimeTableDay").show();b()}function H(){$("#dayTTDayHeaderPH").empty();$("#dayTTDayHeaderPH").append(p[z].DayNameLong);$("#dayTTDayHeaderPH").addClass("ttDayColHdr ui-body-m")}function n(){var K=new Date();var J=K.getDay()-1;if(J<0){J=6}if(UserPreferences.getItem(Globals.TTSHOWSAT)==false&&J==5){J=0}else{if(UserPreferences.getItem(Globals.TTSHOWSUN)==false&&J==6){J=0}}return J}function o(J,K){var L=":00";K.attr("value",J);if(J>=24){J-=24}if(J==0){L="00:00"}else{L=J+":00"}K.empty().append(L)}function g(){var J;J=s()-F();if(J<=0){J+=24}return J}function F(){if(f=="class"){return parseInt(UserPreferences.getItem(Globals.TTCLASSSTARTTIME),10)}else{if(f=="study"){return parseInt(UserPreferences.getItem(Globals.TTSTUDYSTARTTIME),10)}else{var K=parseInt(UserPreferences.getItem(Globals.TTCLASSSTARTTIME),10);var J=parseInt(UserPreferences.getItem(Globals.TTSTUDYSTARTTIME),10);return K<J?K:J}}}function s(){if(f=="class"){return parseInt(UserPreferences.getItem(Globals.TTCLASSENDTIME),10)}else{if(f=="study"){return parseInt(UserPreferences.getItem(Globals.TTSTUDYENDTIME),10)}else{var M=parseInt(UserPreferences.getItem(Globals.TTCLASSENDTIME),10);var L=parseInt(UserPreferences.getItem(Globals.TTCLASSSTARTTIME),10);var K=parseInt(UserPreferences.getItem(Globals.TTSTUDYENDTIME),10);var J=parseInt(UserPreferences.getItem(Globals.TTSTUDYSTARTTIME),10);return M>K?M:K}}}function q(){var J=--z;if(J<0){J=6}if((J==6)&&(UserPreferences.getItem(Globals.TTSHOWSUN)==false)){J--}if((J==5)&&(UserPreferences.getItem(Globals.TTSHOWSAT)==false)){J--}return J}function E(){var J=++z;if((J==5)&&(UserPreferences.getItem(Globals.TTSHOWSAT)==false)){J++}if((J==6)&&(UserPreferences.getItem(Globals.TTSHOWSUN)==false)){J++}if(J>6){J=0}return J}return{incrementHrPH:function(J,L){var K=parseInt(L.attr("value"),10)+J;DebugLogging.ConsoleLog("AppInfoOutput: incrementHrPH: "+J);if(K>23){K=0}else{if(K<0){K=23}}o(K,L)},loadTimeTableOptions:function(){DebugLogging.ConsoleLog("AppInfoOutput: loadTimeTableOptions");if(UserPreferences.getItem(Globals.TTDEFAULTVIEW)=="week"){$("select#ttOptDefaultView")[0].selectedIndex=0}else{$("select#ttOptDefaultView")[0].selectedIndex=1}$("select#ttOptDefaultView").slider("refresh");DebugLogging.ConsoleLog(UserPreferences.getItem(Globals.TTSHOWSAT));if(UserPreferences.getItem(Globals.TTSHOWSAT)==true){DebugLogging.ConsoleLog("AppInfoOutput: Show Sat true");$("select#ttOptShowSat")[0].selectedIndex=1}else{DebugLogging.ConsoleLog("AppInfoOutput: Show Sat false");$("select#ttOptShowSat")[0].selectedIndex=0}$("select#ttOptShowSat").slider("refresh");if(UserPreferences.getItem(Globals.TTSHOWSUN)==true){$("select#ttOptShowSun")[0].selectedIndex=1}else{$("select#ttOptShowSun")[0].selectedIndex=0}$("select#ttOptShowSun").slider("refresh");o(UserPreferences.getItem(Globals.TTCLASSSTARTTIME),$("#ttOptClassStart"));o(UserPreferences.getItem(Globals.TTCLASSENDTIME),$("#ttOptClassEnd"));o(UserPreferences.getItem(Globals.TTSTUDYSTARTTIME),$("#ttOptStudyStart"));o(UserPreferences.getItem(Globals.TTSTUDYENDTIME),$("#ttOptStudyEnd"))},initOptionsPage:function(){var J="touchstart";$("#ttOptnSaveBtn").die("click").live("click",function(K){$("#ttOptnSaveBtn").removeClass("ui-btn-active");MocksMobApp.TimeTable.saveTimeTableOptions()});$("#ttOptnCancelBtn").die("click").live("click",function(K){$("#ttOptnCancelBtn").removeClass("ui-btn-active");window.history.back()});$("#pHrClassStart").die(J).live(J,function(K){DebugLogging.ConsoleLog("AppInfoOutput: pHrClassStart pressed");MocksMobApp.TimeTable.incrementHrPH(1,$("#ttOptClassStart"));return false});$("#mHrClassStart").die(J);$("#mHrClassStart").live(J,function(K){MocksMobApp.TimeTable.incrementHrPH(-1,$("#ttOptClassStart"));return false});$("#pHrClassEnd").die(J);$("#pHrClassEnd").live(J,function(K){MocksMobApp.TimeTable.incrementHrPH(1,$("#ttOptClassEnd"));return false});$("#mHrClassEnd").die(J);$("#mHrClassEnd").live(J,function(K){MocksMobApp.TimeTable.incrementHrPH(-1,$("#ttOptClassEnd"));return false});$("#pHrStudyStart").die(J);$("#pHrStudyStart").live(J,function(K){MocksMobApp.TimeTable.incrementHrPH(1,$("#ttOptStudyStart"));return false});$("#mHrStudyStart").die(J);$("#mHrStudyStart").live(J,function(K){MocksMobApp.TimeTable.incrementHrPH(-1,$("#ttOptStudyStart"));return false});$("#pHrStudyEnd").die(J);$("#pHrStudyEnd").live(J,function(K){MocksMobApp.TimeTable.incrementHrPH(1,$("#ttOptStudyEnd"));return false});$("#mHrStudyEnd").die(J);$("#mHrStudyEnd").live(J,function(K){MocksMobApp.TimeTable.incrementHrPH(-1,$("#ttOptStudyEnd"));K.stopImmediatePropagation();return false})},saveTimeTableOptions:function(){if($("select#ttOptDefaultView")[0].selectedIndex==0){UserPreferences.setItem(Globals.TTDEFAULTVIEW,"week")}else{UserPreferences.setItem(Globals.TTDEFAULTVIEW,"day")}DebugLogging.ConsoleLog("AppInfoOutput: saveTToptions");if($("select#ttOptShowSat")[0].selectedIndex==1){DebugLogging.ConsoleLog("AppInfoOutput: Show Sat set true");UserPreferences.setItem(Globals.TTSHOWSAT,true)}else{DebugLogging.ConsoleLog("AppInfoOutput: Show Sat set false");UserPreferences.setItem(Globals.TTSHOWSAT,false)}if($("select#ttOptShowSun")[0].selectedIndex==1){DebugLogging.ConsoleLog("AppInfoOutput: Show Sun set true");UserPreferences.setItem(Globals.TTSHOWSUN,true)}else{DebugLogging.ConsoleLog("AppInfoOutput: Show ~Sun set false");UserPreferences.setItem(Globals.TTSHOWSUN,false)}var K=0;var J=0;K=parseInt($("#ttOptClassStart").attr("value"),10);UserPreferences.setItem(Globals.TTCLASSSTARTTIME,K);J=parseInt($("#ttOptClassEnd").attr("value"),10);if(K>=J){J+=24}UserPreferences.setItem(Globals.TTCLASSENDTIME,J);K=parseInt($("#ttOptStudyStart").attr("value"),10);UserPreferences.setItem(Globals.TTSTUDYSTARTTIME,K);J=parseInt($("#ttOptStudyEnd").attr("value"),10);if(K>=J){J+=24}UserPreferences.setItem(Globals.TTSTUDYENDTIME,J);w();window.history.back()},defaultTTSetting:function(){UserPreferences.setItem(Globals.TTDEFAULTVIEW,"week");UserPreferences.setItem(Globals.TTSHOWSAT,false);UserPreferences.setItem(Globals.TTSHOWSUN,false);UserPreferences.setItem(Globals.TTCLASSSTARTTIME,9);UserPreferences.setItem(Globals.TTCLASSENDTIME,16);UserPreferences.setItem(Globals.TTSTUDYSTARTTIME,18);UserPreferences.setItem(Globals.TTSTUDYENDTIME,23)},openTTPage:function(){y=UserPreferences.getItem(Globals.TTDEFAULTVIEW);DebugLogging.ConsoleLog("AppInfoOutput: openTTPage: "+y);MocksMobApp.UI.setPageParams("schoolTimeTable",0,"",true);MocksMobApp.TimeTable.initTTPage()},switchTTView:function(J){DebugLogging.ConsoleLog("AppInfoOutput: switchTTView: "+J);y=J;MocksMobApp.UI.scrollToPageTop();MocksMobApp.TimeTable.initTTPage()},initTTPage:function(){u();DebugLogging.ConsoleLog("AppInfoOutput: initTTPage");if((y=="week")){w()}else{if(z!=-1){DebugLogging.ConsoleLog("AppInfoOutput: init Day curDayID= "+z);MocksMobApp.TimeTable.openDayTT(z)}else{DebugLogging.ConsoleLog("AppInfoOutput: init Day");var J=n();DebugLogging.ConsoleLog("AppInfoOutput: init Day today= "+J);MocksMobApp.TimeTable.openDayTT(J)}}},NxtDay:function(J){MocksMobApp.TimeTable.openDayTT((J==1)?E():q())},setClassID:function(J){i();if(J>=0){A.ClassID=J}},createAddClassPage:function(){DebugLogging.ConsoleLog("AppInfoOutput: createAddClassPage");MocksMobApp.TimeTable.addTTDaysToAddClassPage(p);MocksMobApp.TimeTable.addTTColoursToAddClassPage(l);$("#errorPH").empty();$("#errorPH").hide();$("input#addClassSubject").val("");$("input#addClassLocation").val("");$("#subjectDetailsPH").text("Details:");MocksMobApp.TimeTable.initBtns();if(A.ClassID>0){MocksMobApp.Storage.getTTClass(A.ClassID,MocksMobApp.TimeTable.fillAddClassForm)}MocksMobApp.UI.refreshScroll()},fillAddClassForm:function(M){MocksMobApp.TimeTable.colourSelected(M.ClassColour);if(M.TimeTableType=="class"){$("select#ttClassType")[0].selectedIndex=0}else{$("select#ttClassType")[0].selectedIndex=1}$("select#ttClassType").slider("refresh");$("input#addClassSubject").val(M.ClassName);if(M.ClassLocation!=""){$("input#addClassLocation").val(M.ClassLocation)}else{$("input#addClassLocation").val("")}if(M.ClassComments!=""){$("#subjectDetailsPH").html(M.ClassComments)}else{$("#subjectDetailsPH").html("Details:")}$("#errorPH").empty();$("#errorPH").hide();var J="timeDiv-"+M.ClassDay;v(M.ClassStart,J+"start");v(M.ClassEnd,J+"end");var K="";for(var L=0;L<7;L++){if(L!=M.ClassDay){K="#dayDiv-"+L;$(K).hide()}}A.setClass(M)},addColourToPage:function(K){var J="colourDiv-"+K.ColourID;var L="";L+='<div id="'+J+'">';L+="</div>";$("#addClassColoursPH").append(L);$("#"+J).addClass("ttColorSelectionBox");$("#"+J).addClass(K.ColourCSS);if(K.ColourID==A.ClassColour){MocksMobApp.TimeTable.colourSelected(K.ColourID)}$("#"+J).die("click").live("click",function(){MocksMobApp.TimeTable.colourSelected(K.ColourID);return})},addTTColoursToAddClassPage:function(K){DebugLogging.ConsoleLog("AppInfoOutput: addTTColoursToPage: "+K.length);$("#addClassColoursPH").empty();for(var J=0;J<K.length;J++){if(J==0){$("#addClassColoursPH").append('<div style="clear: both;">')}else{if((J%6)==0){$("#addClassColoursPH").append('</div><div style="clear: both;">')}}$("#addClassColoursPH").append("</div>");MocksMobApp.TimeTable.addColourToPage(K[J])}$("#addClassColoursPH").trigger("create")},colourSelected:function(K){var J="";if(A.ClassColour>=0){J="colourDiv-"+A.ClassColour;$("#"+J).removeClass("ttColorSelectionBoxSelected")}A.ClassColour=K;J="colourDiv-"+A.ClassColour;$("#"+J).addClass("ttColorSelectionBoxSelected")},addDayToAddClassPage:function(M){var L="dayDiv-"+M.DayID;var O="timeDiv-"+M.DayID;var N="";var K;if(BrowserDetect.browser!="Chrome"){K=MocksMobApp.UI.windowWidth()}else{K=700}tmpWinWidth=K-20;var J=((tmpWinWidth-(tmpWinWidth%3))/3)-10;N+='<div style="clear: both;"></div>';N+='<div id="'+L+'">';N+='<div class="ui-content ui-body-m dayButton" style="width:'+J+'px;" data-theme="m">';N+=M.DayNameLong;N+="</div>";N+='<div class="timeInputBox" style="width:'+J+'px;"><input type="text" name="'+O+'start" id="'+O+'start" readonly="readonly" value="--:--" style="text-align:center"/></div>';N+='<div class="timeInputBox" style="width:'+J+'px;"><input type="text" name="'+O+'end" id="'+O+'end" readonly="readonly" value="--:--" style="text-align:center" /></div>';N+="</div>";$("#addClassDaysPH").append(N);$("#"+O+"start").scroller({preset:"time",theme:"android",ampm:false});$("#"+O+"end").scroller({preset:"time",theme:"android",ampm:false})},addTTDaysToAddClassPage:function(N){$("#addClassDaysPH").empty();var K;if(BrowserDetect.browser!="Chrome"){K=MocksMobApp.UI.windowWidth()}else{K=700}tmpWinWidth=K-20;var J=((tmpWinWidth-(tmpWinWidth%3))/3)-10;var M="";M='<div style="clear: both;"><div class="TTaddClassHeader" style="width: '+J+'px;">&nbsp;</div><div class="TTaddClassHeader" style="width: '+J+'px;">Start Time</div><div class="TTaddClassHeader" style="width: '+J+'px;">End Time</div></div>';$("#addClassDaysPH").append(M);for(var L=0;L<N.length;L++){MocksMobApp.TimeTable.addDayToAddClassPage(N[L])}$("#addClassDaysPH").trigger("create")},openTimeDialog:function(J){$("#"+J).datebox("open")},addDaysToTTPage:function(K){DebugLogging.ConsoleLog("AppInfoOutput: Empty ttDayHeaderPH");$("#ttDayHeaderPH").empty();$("#ttDayHeaderPH").append('<div class="ttTimeColHdr ui-body-m">Time</div>');for(var J=0;J<K.length;J++){if(J==5){if(UserPreferences.getItem(Globals.TTSHOWSAT)==true){DebugLogging.ConsoleLog("AppInfoOutput: Add Saturday");MocksMobApp.TimeTable.addDayToTTPage(K[J])}}else{if(J==6){if(UserPreferences.getItem(Globals.TTSHOWSUN)==true){DebugLogging.ConsoleLog("AppInfoOutput: Add Sunday");MocksMobApp.TimeTable.addDayToTTPage(K[J])}}else{MocksMobApp.TimeTable.addDayToTTPage(K[J])}}}$("#ttDayHeaderPH").trigger("create");MocksMobApp.UI.refreshScroll()},addClassesToWeekPage:function(L){DebugLogging.ConsoleLog("AppInfoOutput: Add Classes to Week: "+JSON.stringify(L));$("#schoolTTPHDay-0").empty();$("#schoolTTPHDay-1").empty();$("#schoolTTPHDay-2").empty();$("#schoolTTPHDay-3").empty();$("#schoolTTPHDay-4").empty();$("#schoolTTPHDay-5").empty();$("#schoolTTPHDay-6").empty();for(var K=0;K<L.length;K++){DebugLogging.ConsoleLog("AppInfoOutput: Adding Class "+L.item(K).TimeTableType);if(f=="both"){DebugLogging.ConsoleLog("AppInfoOutput: Added both"+L.item(K).TimeTableType);MocksMobApp.TimeTable.addClassToTTPage(L.item(K))}else{if(f==L.item(K).TimeTableType){DebugLogging.ConsoleLog("AppInfoOutput: Added other"+L.item(K).TimeTableType);MocksMobApp.TimeTable.addClassToTTPage(L.item(K))}}}if(UserPreferences.getItem(Globals.TTSHOWSAT)==false){$("#schoolTTPHDay-5").hide()}else{$("#schoolTTPHDay-5").show()}if(UserPreferences.getItem(Globals.TTSHOWSUN)==false){$("#schoolTTPHDay-6").hide()}else{$("#schoolTTPHDay-6").show()}for(var J=0;J<7;J++){DebugLogging.ConsoleLog($("#schoolTTPHDay-"+J).html())}},addClassToTTPage:function(L){var N="ttClassDiv-"+L.ClassID;var K="";var R=0;var P=0;var M;var O;var Q;var J;R=B(L.ClassStart,L.ClassEnd);if(R==false){return}P=r(L.ClassStart)+32;M=$("#schoolTTPHDay-"+L.ClassDay).width();O=$("#weekTimeLinePH").width();if((L.ClassDay==6)&&(UserPreferences.getItem(Globals.TTSHOWSAT)==false)){J=parseInt(L.ClassDay)}else{J=parseInt(L.ClassDay)+1}Q=(M+2)*(J-1)+O+2;DebugLogging.ConsoleLog("AppInfoOutput: Column Width = "+O);DebugLogging.ConsoleLog("AppInfoOutput: daySlot Width = "+M);DebugLogging.ConsoleLog("AppInfoOutput: timeSlotLeft Width = "+Q);DebugLogging.ConsoleLog("AppInfoOutput: colNum  = "+J);DebugLogging.ConsoleLog("AppInfoOutput: timeSlotHeight: "+R+"timeSlotPos: "+P+" "+M+" "+Q);K+='<div id="'+N+'" class="ttSubjectSlot">';K+=L.ClassName;if(L.ClassLocation!=""){K+="<br />"+L.ClassLocation}K+="</div>";DebugLogging.ConsoleLog("AppInfoOutput: html="+K);DebugLogging.ConsoleLog("AppInfoOutput: Added to #schoolTTPHDay-"+L.ClassDay);$("#schoolTTPHDay-"+L.ClassDay).append(K);$("#"+N).addClass(l[L.ClassColour].ColourCSS);$("#"+N).css("top",P+"px");$("#"+N).css("height",R+"px");$("#"+N).css("width",M+"px");$("#"+N).css("left",Q+"px");$("#schoolTTPHDay-"+L.ClassDay).trigger("refresh");$("#"+N).die("click").live("click",function(S){G(L.ClassID);return false})},addClassesToDayPage:function(K){$("#dayTTClassesPH").empty();for(var J=0;J<K.length;J++){DebugLogging.ConsoleLog("AppInfoOutput: Adding Class "+K.item(J).TimeTableType);if(f=="both"){MocksMobApp.TimeTable.addClassToTTDayPage(K.item(J))}else{if(f==K.item(J).TimeTableType){MocksMobApp.TimeTable.addClassToTTDayPage(K.item(J))}}}},addClassToTTDayPage:function(L){var K="ttDayClassDiv-"+L.ClassID;var P="";var O=0;var N=0;var J;var M;P+='<div id="'+K+'" class="ttSubjectSlotDay">';P+=L.ClassName;if(L.ClassLocation!=""){P+="<br />"+L.ClassLocation}P+="</div>";O=B(L.ClassStart,L.ClassEnd);if(O==false){return}$("#dayTTClassesPH").append(P);$("#"+K).addClass(l[L.ClassColour].ColourCSS);N=r(L.ClassStart)+$("#dayTTDayHeaderPH").outerHeight();M=$("#dayTimeLinePH").width()+2;J=$("#dayTTClassesPH").width();DebugLogging.ConsoleLog(O+"-"+N+"-"+J+"-"+M+"-"+$("#dayTimeTableWrapper").outerWidth());$("#"+K).css("top",N+"px");$("#"+K).css("height",O+"px");$("#"+K).css("width",J+"px");$("#"+K).css("left",M+"px");$("#"+K).die("click").live("click",function(){G(L.ClassID);return false})},changeCssStyle:function(){var L;var K,J;var M;K=Math.floor(MocksMobApp.UI.windowWidth()/(j()+1))-2;J=MocksMobApp.UI.windowWidth()-(j()*(K+2))-2;L=g()*(c()+2);M=c();$(".ttDayCol").css("width",K+"px");$(".ttDayColHdr").css("width",K+"px");$(".ttTimeCol").css("width",J+"px");$(".ttTimeColHdr").css("width",J+"px");$(".ttDayCol").css("height",L+"px");$(".ttTimeSlot").css("height",M+"px")},changeCssStyleDay:function(){var K;var J;var L;K=g()*(c()+2);L=c();J=MocksMobApp.UI.windowWidth()-$("#dayTimeLinePH").width()-4;DebugLogging.ConsoleLog("AppInfoOutput: changeCssStyleDay: "+J+" "+K);$(".ttDayCol").css("width",J+"px");$(".ttDayColHdr").css("width","100%");$(".ttDayCol").css("height",K+"px");$(".ttTimeSlot").css("height",L+"px")},addDayToTTPage:function(K){var J="ttDayDiv-"+K.DayID;var L="";L+='<div id="'+J+'" class="ttDayColHdr ui-body-m">';L+=K.DayNameShort;L+="</div>";$("#ttDayHeaderPH").append(L);$("#"+J).die("click").live("click",function(){z=K.DayID;MocksMobApp.TimeTable.switchTTView("day");return false})},openDayTT:function(J){z=J;t();MocksMobApp.UI.refreshScroll()},initBtns:function(){$("#addClassSaveBtn").die("click").live("click",function(){$("#addClassSaveBtn").removeClass("ui-btn-active");if(D()){window.history.back()}});$("#addClassDelBtn").die("click").live("click",function(){$("#addClassDelBtn").removeClass("ui-btn-active");d();window.history.back()});$("#addClassCancelBtn").die("click").live("click",function(){$("#addClassCancelBtn").removeClass("ui-btn-active");window.history.back()})},changeHr:function(J,L){var K=parseInt($(J).val(),10);K+=L;if(K>12){K=1}else{if(K<1){K=12}}$(J).val(K)},changeMin:function(J,L){var K=parseInt($(J).val(),10);K+=L;if(K>59){K=0}else{if(K<0){K=59}}if(K<10){K="0"+K}$(J).val(K)},changeAMPM:function(J){if($(J).val()=="PM"){$(J).val("AM")}else{$(J).val("PM")}},calculatetextBoxHeight:function(){var J=MocksMobApp.UI.windowHeight()-MocksMobApp.UI.headerHeight()-MocksMobApp.UI.Height()-$("#addClassBtns").outerHeight()-60;$(".classDetailsTxtArea").css("height",J+"px")}}})(),PointsCalculator:(function(){var g=new Array();var k=new Array();var b;var h;var e=6;var c=5;var l=new Object();l=[{text:"(H)"},{text:"(O)"},{text:"(F)"}];var i=new Object();i=[{hons:100,ord:60,fond:20,text:"A1"},{hons:90,ord:50,fond:15,text:"A2"},{hons:85,ord:45,fond:10,text:"B1"},{hons:80,ord:40,fond:5,text:"B2"},{hons:75,ord:35,fond:0,text:"B3"},{hons:70,ord:30,fond:0,text:"C1"},{hons:65,ord:25,fond:0,text:"C2"},{hons:60,ord:20,fond:0,text:"C3"},{hons:55,ord:15,fond:0,text:"D1"},{hons:50,ord:10,fond:0,text:"D2"},{hons:45,ord:5,fond:0,text:"D3"},{hons:0,ord:0,fond:0,text:"E"},{hons:0,ord:0,fond:0,text:"F"},{hons:0,ord:0,fond:0,text:"NG"}];function j(n){for(var o=0;o<i.length;o++){if(i[o].text==n){return i[o]}}}function d(o,n){if(o.text==l[0].text){return n.hons}else{if(o.text==l[1].text){return n.ord}else{return n.fond}}}function m(){g.splice(0,g.length);k.splice(0,k.length);b=l[0];h=0}function f(){h=0;for(var n=0;n<e&&n<g.length;n++){h+=d(k[n],g[n])}}return{getTotalPoints:function(){f();return h},getUsedGrades:function(){var n;var o="<b>Grades:</b>";o+='<span style="color: #159542;"><b>';for(n=0;n<g.length&&n<e;n++){o+="<br />"+g[n].text+k[n].text}o+="</b></span>";if((n<g.length)&&(n>=e)){o+="<hr />";o+='<span style="color: #ff0000;"><b>';for(;n<g.length&&n<e+c;n++){o+=g[n].text+k[n].text+"<br />"}o+="</b></span>"}return o},addGrade:function(o){var n=false;var q=j(o);for(var p=0;p<g.length;p++){if(d(b,q)>d(k[p],g[p])){g.splice(p,0,q);k.splice(p,0,b);n=true;break}}if(!n){g.push(q);k.push(b)}},getLevel:function(){return b.text},setLevel:function(n){for(var o=0;o<l.length;o++){if(l[o].text==n){b=l[o];break}}},reset:function(){m()}}})(),Notes:(function(){var b;return{getSubscriptionsCB:function(c){if((HelperFns.is_array(c))&&(c.length>0)){if(HelperFns.is_array(b)){b.splice(0,b.length)}b=c}},hasSubscription:function(c){if((HelperFns.is_array(b))&&(b.length>0)){for(var d=0;d<b.length;d++){if(c==b[d].NotesID){DebugLogging.ConsoleLog("AppInfoOutput: returning true");return true}}return false}else{return false}}}})(),Mcq:(function(){var j;var p;var c;var b=new Array();var h=new Array();var d;var o="";var e;function r(){c=-1;b.splice(0,b.length);h.splice(0,h.length);DebugLogging.ConsoleLog("AppInfoOutput: answeredQuestions.length: "+h.length);d=0;$("#mcqQuizNamePH").empty();$("#mcqQuizQuestionNumPH").empty();$("#mcqQuizScorePH").empty();$("#mcqQuizQuestionsPH").empty();$("#mcqQuizQuestionImagePH").empty();$("#mcqQuizAnswerImagePH").empty();$("#mcqQuizAnswersPH").empty()}function u(){var y="";y+="<h1>";y+=MocksMobApp.UI.currentPage().subjectName;y+=" - ";y+=o;y+="</h1>";MocksMobApp.UI.appendElementToPH(y,$("#mcqQuizNamePH"),false)}function t(){var z="";var y=0;if((d!=0)&&(x()!=0)){y=(d/x())*100}z=d+" / "+x()+"("+y.toFixed(2)+"%)";$("#mcqQuizScorePH").empty();$("#mcqQuizScorePH").append(z)}function s(){var y="";y="Question: "+(c+1)+" / "+x();$("#mcqQuizQuestionNumPH").empty();$("#mcqQuizQuestionNumPH").append(y)}function w(z){var B;var y={level:Globals.APP_LEVEL,service:"mcqsquiz",subjectId:j,topicId:p,free:"false",user:Encrypt.GetEncryptedUserName(),id:Encrypt.GetEncryptedUserID()};if(z==true){y.free="true"}var A={requestService:"jsonexamrequest",requestCallback:initMcqQuizPage,requestParam:y,requestType:"post"};B=new MocksMobApp.SeverRequestManager.Request(A);MocksMobApp.SeverRequestManager.AddRequest(B);MocksMobApp.SeverRequestManager.Start();return true}function v(y){j=y}function q(y){p=y}function k(y){o=y}function x(){return b.length}function i(z){var y="";$("#mcqQuizQuestionsPH").empty();y+='<div class="questionWrapper">';y+='<div class="question">';y+=z.Question;y+="</div></div>";$("#mcqQuizQuestionsPH").append(y)}function f(y){var z="";$("#mcqQuizQuestionImagePH").empty();DebugLogging.ConsoleLog("AppInfoOutput: addQuestionImageToPage"+y.QuestionImage);DebugLogging.ConsoleLog(y);if(y.QuestionImage!=""){z='<img id="mcqQuizQuestionImg" src="'+Globals.SERVER_URL+Globals.MCQ_IMAGE_SERVER_DIR+y.QuestionImage+'" />';DebugLogging.ConsoleLog("AppInfoOutput: image str: "+z);$("#mcqQuizQuestionImagePH").append(z);$("#mcqQuizQuestionImg").width(300);$("#mcqQuizQuestionImg").load(function(){MocksMobApp.UI.refreshScroll()})}}function m(z,y){var A="";var D="";A+='<div class="questionWrapper">';A+='<div class="question">';if(z.AnswerA!=""){A+=MocksMobApp.UI.createAnsBtn("mcq",z.AnswerA,y,"A",MocksMobApp.Mcq.correctQuestion);D="A"}if(z.AnswerB!=""){A+=MocksMobApp.UI.createAnsBtn("mcq",z.AnswerB,y,"B",MocksMobApp.Mcq.correctQuestion);D="B"}if(z.AnswerC!=""){A+=MocksMobApp.UI.createAnsBtn("mcq",z.AnswerC,y,"C",MocksMobApp.Mcq.correctQuestion);D="C"}if(z.AnswerD!=""){A+=MocksMobApp.UI.createAnsBtn("mcq",z.AnswerD,y,"D",MocksMobApp.Mcq.correctQuestion);D="D"}A+="</div></div>";$("#mcqQuizAnswersPH").empty();$("#mcqQuizAnswersPH").append(A);var C="mcq-ans-A";$("#"+C).addClass("ui-corner-top");var B="mcq-ans-"+D;$("#"+B).addClass("ui-corner-bottom");l(y,h[y])}function g(){if((c>=0)&&(x()>0)){i(b[c]);f(b[c]);m(b[c],c);t();s();MocksMobApp.UI.refreshScroll()}}function l(z,A){if(h[z]!=null){var y="#mcq-ans-";$(y+b[z].CorrectAnswer).addClass("ans_correct");DebugLogging.ConsoleLog("AppInfoOutput: answerSelected: "+b[z].CorrectAnswer+" "+z+" "+h[z]);if(A!=b[z].CorrectAnswer){DebugLogging.ConsoleLog(y+A);$(y+A).addClass("ans_incorrect");$("#mcqQuizQuestionResult").empty();$("#mcqQuizQuestionResult").append('<b><span style="color: #2C82C4">X &nbsp;Incorrect</span></b>');$("#mcqQuizQuestionResult").show()}else{$("#mcqQuizQuestionResult").empty();$("#mcqQuizQuestionResult").append('<b><span style="color: #39B151">&#10004;&nbsp;Correct</span></b>');$("#mcqQuizQuestionResult").show()}MocksMobApp.UI.refreshScroll()}else{$("#mcqQuizQuestionResult").empty();$("#mcqQuizQuestionResult").hide()}}function n(E){var D="";switch(E){case 0:return;break;case 1:D="Question";break;case 2:D="Image";break;case 3:return;break;default:return;break}var C=b[c].McqQuestionID;var B=MocksMobApp.UI.currentPage().subjectName;var A=Globals.APP_LEVEL;var z=UserPreferences.getItem(Globals.USER_NAME);var y=new MocksMobApp.SeverRequestManager.Request({requestService:"reportMcq",requestCallback:MocksMobApp.Mcq.ReportIncorrectRequestCB,requestParam:{type:D,questionid:C,level:A,subjectname:B,username:z},requestType:"post"});MocksMobApp.SeverRequestManager.AddRequest(y);MocksMobApp.SeverRequestManager.Start()}return{ReportIncorrectRequestCB:function(y){DebugLogging.ConsoleLog("AppInfoOutput: Report Incorrect Callback Result:");DebugLogging.ConsoleLog(y)},correctQuestion:function(y,z){if(h[y]==null){h[y]=z;if(z==b[y].CorrectAnswer){d++}l(y,z);t();s();MocksMobApp.Mcq.markQuestionAnswered(y);MocksMobApp.UI.refreshScroll()}},getSubscriptionsCB:function(y){DebugLogging.ConsoleLog("AppInfoOutput: SubscriptionsCB: "+$.mobile.activePage.attr("id"));if((HelperFns.is_array(y))&&(y.length>0)){if(HelperFns.is_array(e)){e.splice(0,e.length)}e=y;if($.mobile.activePage.attr("id")=="mcqs"){MocksMobApp.Storage.getSubjects("mcqs",addMcqSubjectToSubBtnList,addSubjectsToBtnListFinished)}}},hasSubscription:function(z){if((HelperFns.is_array(e))&&(e.length>0)){for(var y=0;y<e.length;y++){if(z==e[y].McqSubjectID){DebugLogging.ConsoleLog("AppInfoOutput: returning true");return true}}return false}else{return false}},markQuestionAnswered:function(z){var A;var y={service:"mcqs",subjectid:b[z].McqSubjectID,questionid:b[z].McqQuestionID,user:Encrypt.GetEncryptedUserName(),id:Encrypt.GetEncryptedUserID()};var B={requestService:"questionanswered",requestCallback:MocksMobApp.Mcq.markQuestionAnsweredCB,requestParam:y,requestType:"post"};A=new MocksMobApp.SeverRequestManager.Request(B);MocksMobApp.SeverRequestManager.AddRequest(A);MocksMobApp.SeverRequestManager.Start()},markQuestionAnsweredCB:function(y){DebugLogging.ConsoleLog("AppInfoOutput: MarkQuestionAnswered:"+y.result)},setMcqQuiz:function(y){if(HelperFns.is_array(y)){b=y;h=new Array(b.length)}else{b=new Array(0);h=new Array(0)}},openFirstQuestion:function(){c=0;g()},openNextQuestion:function(){c++;if(c>=x()){c=0}g()},openPrevQuestion:function(){c--;if(c<0){c=x()-1}g()},createPage:function(A,z,y,B){r();v(A);q(z);k(y);w(B);u();t();s()},clearQuizPage:function(){r()},reportIncorrect:function(){navigator.notification.confirm("What is the nature of the error?",n,"MCQ Error","Question Error,Image Error,Cancel")}}})(),Aural:(function(){var e=-1;var D="";var E=false;var m=-1;var z=-1;var i;var l=false;var s;var p=null;var c=null;var g=false;var f=true;var t=0;var F=null;var A=null;var w;function x(){DebugLogging.ConsoleLog("AppInfoOutput: Aural.init()");currentSectionID=-1;t=0;MocksMobApp.Aural.releaseAudio();g=false;if(p!=null){p.splice(0,p.length);p=null}l=false;if(i!=null){i.splice(0,i.length);p=null}$("#auralExamNamePH").empty();$("#auralExamResultPH").empty();$("#auralExamSectionNamePH").empty();$("#audioDetails").empty();$("#audioDetails").append("Aural Exam");$("#auralExamQuestionsPH").empty();f=true}function h(J,I){DebugLogging.ConsoleLog("AppInfoOutput: markCorrectAnswer: "+J+I);var H="#aural-q-"+J+"-ans-"+I;$(H).removeClass("ans_selected");$(H).removeClass("ans_not_selected");$(H).addClass("ans_correct")}function u(J,I){DebugLogging.ConsoleLog("AppInfoOutput: markCorrectAnswer: "+J+I);var H="#aural-q-"+J+"-ans-"+I;$(H).removeClass("ans_selected");$(H).removeClass("ans_not_selected");$(H).addClass("ans_incorrect")}function G(J,I){var H="#aural-q-"+J+"-ans-"+I;$(H).removeClass("ans_not_selected");$(H).addClass("ans_selected")}function d(J,I){DebugLogging.ConsoleLog("AppInfoOutput: unselectAnswer: "+J+I);if(l==false){var H="#aural-q-"+J+"-ans-"+I;$(H).removeClass("ans_selected");$(H).addClass("ans_not_selected")}}function b(I,H){var J="#auralQuestionResult"+I;$(J).empty();if(H=="incorrect"){$(J).append('<h2><span style="color: #2C82C4">X &nbsp;Incorrect</span></h2>')}else{if(H=="correct"){$(J).append('<h3><span style="color: #39B151">&#10004;&nbsp;Correct</span></h3>')}else{$(J).append('<h3><span style="color: #2C82C4">X&nbsp;Not Answered!</span></h3>')}}$(J).show()}function y(H){DebugLogging.ConsoleLog("AppInfoOutput: cur sId: "+m+"nxt: "+H);if(H>0){$("#auralsExamNxtSection").show();$("#auralsExamNxtSection").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: auralsExamNxtSection clicked");MocksMobApp.Aural.createPage(H);$("#auralsExamNxtSection").removeClass("ui-btn-active")});$("#auralsExam").die("swipeleft").live("swipeleft",function(){DebugLogging.ConsoleLog("AppInfoOutput: ExamNxtSection swipeleft");MocksMobApp.Aural.createPage(H)})}else{$("#auralsExam").die("swipeleft");$("#auralsExamNxtSection").die("click");$("#auralsExamNxtSection").hide()}}function o(H){DebugLogging.ConsoleLog("AppInfoOutput: cur sId: "+m+"pre: "+H);if(H>0){$("#auralsExamPrevSection").show();$("#auralsExamPrevSection").die("click").live("click",function(){MocksMobApp.Aural.createPage(H);$("#auralsExamPrevSection").removeClass("ui-btn-active")});$("#auralsExam").die("swiperight").live("swiperight",function(){DebugLogging.ConsoleLog("AppInfoOutput: ExamNxtSection swiperight");MocksMobApp.Aural.createPage(H)})}else{$("#auralsExam").die("swiperight");$("#auralsExamPrevSection").die("click");$("#auralsExamPrevSection").hide()}}function r(){var H=s.length;if(H<=1){return -1}if(s[H-1].AuralSectionID==m){return s[0].AuralSectionID}else{for(var I=0;I<H;I++){if(s[I].AuralSectionID==m){return s[++I].AuralSectionID}}}}function n(){var H=s.length;if(H<=1){return -1}if(m==s[0].AuralSectionID){return s[H-1].AuralSectionID}else{for(var I=H-1;I>0;I--){if(s[I].AuralSectionID==m){return s[--I].AuralSectionID}}}}function v(){for(var H=0;H<s.length;H++){if(s[H].AuralSectionID==m){return H}}return -1}function C(){DebugLogging.ConsoleLog("AppInfoOutput: getAudioPosition Called, mediaTimer = "+(F==null));if((F==null)&&(c!=null)){F=setInterval(function(){c.getCurrentPosition(function(H){DebugLogging.ConsoleLog("AppInfoOutput: getAudioPosition Success");if(H>-1){j(Math.round(H))}},function(H){DebugLogging.ConsoleLog("AppInfoOutput: Error getting pos="+H);setAudioPosition("Error: "+H)})},1000)}}function k(){var H=0;if((A==null)&&(t==0)){A=setInterval(function(){DebugLogging.ConsoleLog("AppInfoOutput: getAudioLength"+H);H=H+1000;if(H>60000){clearInterval(A)}var I=c.getDuration();if(I>0){clearInterval(A);t=Math.round(I)}},1000)}}function j(J){var K=0;var I=0;var H=0;var L=0;K=Math.floor(J/60);I=Math.round(J-(K*60));if(I<10){I="0"+I}H=Math.floor(t/60);L=Math.round(t-(H*60));if((L<=0)&&(H<=0)){L="--";H="--"}else{if(L<10){L="0"+L}}if(J>1){$("#audioDetails").empty();$("#audioDetails").append(K+"."+I+" / "+H+"."+L);k()}else{$("#audioDetails").empty();$("#audioDetails").append("Loading Audio...")}}function B(J,K,I){var H="";var O=J+1;var N="";H+='<div class="questionWrapper">';H+='<div class="question">';H+=O+":&nbsp;"+K.Question+" ("+K.Marks+" marks)";H+="</div>";H+='<div id="auralQuestionResult'+J+'" style="text-align: center;"></div>';H+='<div class="ansControlGroup">';if(K.Answer1!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer1,J,1,MocksMobApp.Aural.answerSelected);N=1}if(K.Answer2!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer2,J,2,MocksMobApp.Aural.answerSelected);N=2}if(K.Answer3!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer3,J,3,MocksMobApp.Aural.answerSelected);N=3}if(K.Answer4!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer4,J,4,MocksMobApp.Aural.answerSelected);N=4}if(K.Answer5!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer5,J,5,MocksMobApp.Aural.answerSelected);N=5}if(K.Answer6!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer6,J,6,MocksMobApp.Aural.answerSelected);N=6}if(K.Answer7!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer7,J,7,MocksMobApp.Aural.answerSelected);N=7}if(K.Answer8!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer8,J,8,MocksMobApp.Aural.answerSelected);N=8}if(K.Answer9!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer9,J,9,MocksMobApp.Aural.answerSelected);N=9}if(K.Answer10!=""){H+=MocksMobApp.UI.createAnsBtn("aural",K.Answer10,J,10,MocksMobApp.Aural.answerSelected);N=10}H+="</div>";H+="</div>";I.append(H);var M="aural-q-"+J+"-ans-1";$("#"+M).addClass("ui-corner-top");var L="aural-q-"+J+"-ans-"+N;$("#"+L).addClass("ui-corner-bottom")}function q(H){var I;var J={service:"aurals",examid:e,examresult:H.toFixed(2),user:Encrypt.GetEncryptedUserName(),id:Encrypt.GetEncryptedUserID()};var K={requestService:"questionanswered",requestCallback:MocksMobApp.Aural.saveResultCB,requestParam:J,requestType:"post"};I=new MocksMobApp.SeverRequestManager.Request(K);MocksMobApp.SeverRequestManager.AddRequest(I);MocksMobApp.SeverRequestManager.Start()}return{saveResultCB:function(H){DebugLogging.ConsoleLog("AppInfoOutput: saveResultCB:"+H.result)},getSubscriptionsCB:function(H){if((HelperFns.is_array(H))&&(H.length>0)){if(HelperFns.is_array(w)){w.splice(0,w.length)}w=H;if($.mobile.activePage.attr("id")=="auralsDetails"){MocksMobApp.Storage.getServiceSubjectDetails(MocksMobApp.UI.currentPage().serviceName,MocksMobApp.UI.currentPage().subjectId,populateAuralsDetailsPage,populateAuralsDetailsPageFinished)}}},hasSubscription:function(I){if((HelperFns.is_array(w))&&(w.length>0)){for(var H=0;H<w.length;H++){if(I==w[H].AuralExamID){DebugLogging.ConsoleLog("AppInfoOutput: returning true");return true}}return false}else{return false}},getResult:function(){DebugLogging.ConsoleLog("AppInfoOutput: getResult called");var M="";l=true;$("#btnGetResults").die("click");$("#auralAudioStartBtn").die("click");$("#auralAudioStopBtn").die("click");this.releaseAudio();var L,K;var J,I,H;J=0;I=0;H=0;if(HelperFns.is_array(p)){for(L=0;L<p.length;L++){if(HelperFns.is_array(p[L])){for(K=0;K<p[L].length;K++){H+=p[L][K].Marks;if(i[L][K]==p[L][K].CorrectAnswer){DebugLogging.ConsoleLog("AppInfoOutput: correct : "+K);I+=p[L][K].Marks;if(L==z){h(K,p[L][K].CorrectAnswer);b(K,"correct")}}else{if(L==z){h(K,p[L][K].CorrectAnswer);if((i[L][K]!=null)&&(i[L][K]!="undefined")){u(K,i[L][K]);b(K,"incorrect")}else{b(K,"notanswered")}}}}}}}if(I!=0&&H!=0){J=(I/H)*100}$("#auralExamResultPH").empty();$("#auralExamResultPH").append("Result: "+I+" / "+H+"("+J.toFixed(2)+"%)");$("#audioDetails").empty();$("#audioDetails").append("Aural Exam");MocksMobApp.UI.initScroll();MocksMobApp.UI.scrollToPageTop();q(J)},requestExamSections:function(){if(e!=-1){var H={level:Globals.APP_LEVEL,service:"auralsexamsections",examId:e};var J={requestService:"jsonrequest",requestCallback:populateAuralsSectionsPage,requestParam:H,requestType:"get"};var I=new MocksMobApp.SeverRequestManager.Request(J);MocksMobApp.SeverRequestManager.AddRequest(I);MocksMobApp.SeverRequestManager.Start();return true}else{return false}},requestSectionQuestions:function(){if((e!=-1)&&(m!=-1)){var H={level:Globals.APP_LEVEL,service:"auralexamsectionquiz",examid:e,sectionid:m,user:Encrypt.GetEncryptedUserName(),id:Encrypt.GetEncryptedUserID()};var J={requestService:"jsonexamrequest",requestCallback:populateAuralsExamsPage,requestParam:H,requestType:"get"};var I=new MocksMobApp.SeverRequestManager.Request(J);MocksMobApp.SeverRequestManager.AddRequest(I);MocksMobApp.SeverRequestManager.Start();return true}else{return false}},answerSelected:function(I,H){if(l==false){DebugLogging.ConsoleLog("AppInfoOutput: answerSelected called");if(i[z][I]>0){d(I,i[z][I])}i[z][I]=H;G(I,H);DebugLogging.ConsoleLog("AppInfoOutput: ans: "+i[z][I])}},setExam:function(I,H,J){e=I;D=H;E=J},getExamName:function(){return D},hasAccess:function(){return E},getExamID:function(){return e},appendSectionNameAndDescription:function(){for(var H=0;H<s.length;H++){if(s[H].AuralSectionID==m){var I="";I+="<h2>";I+=s[H].Name;I+="</h2>";I+="<p>";I+=s[H].Description;I+="</p>";MocksMobApp.UI.appendElementToPH(I,$("#auralExamSectionNamePH"),false);break}}},addQuestionsToPage:function(){$("#auralExamQuestionsPH").empty();DebugLogging.ConsoleLog("AppInfoOutput: addQuestionsToPage: ");if((HelperFns.is_array(p[z]))&&(p[z].length>0)){if(i[z]==null){i[z]=new Array(p[z].length)}for(var H=0;H<p[z].length;H++){B(H,p[z][H],$("#auralExamQuestionsPH"));G(H,i[z][H]);if(l){h(H,p[z][H].CorrectAnswer);if(i[z][H]==p[z][H].CorrectAnswer){b(H,"correct")}else{if((i[z][H]!=null)&&(i[z][H]!="undefined")){u(H,i[z][H]);b(H,"incorrect")}else{b(H,"notanswered")}}}}$("#auralExamQuestionsPH").trigger("create");MocksMobApp.UI.refreshScroll()}},addExamDetailsHeading:function(){DebugLogging.ConsoleLog("AppInfoOutput: addExamDetailsHeading");var H="";H+="<h1>";H+=MocksMobApp.UI.currentPage().subjectName;H+=" - ";H+=D;H+="</h1>";MocksMobApp.UI.appendElementToPH(H,$("#auralExamNamePH"),false)},getSectionID:function(){return m},setSectionID:function(H){m=H;z=v()},getExamSections:function(){return s},setExamSections:function(H){s=H},getSectionQuiz:function(){if(p!==null){return p[z]}else{return null}},setSectionQuiz:function(H){DebugLogging.ConsoleLog("AppInfoOutput: setSectionQuiz");if(p===null){p=new Array(s.length);i=new Array(s.length);DebugLogging.ConsoleLog("AppInfoOutput: setSectionQuiz created new arrays")}if(p[z]==null){DebugLogging.ConsoleLog("AppInfoOutput: setSectionQuiz saving questions from server");p[z]=H}},haveSectionQuiz:function(H){DebugLogging.ConsoleLog("AppInfoOutput: haveSectionQuiz");var I=v(H);DebugLogging.ConsoleLog("AppInfoOutput: sectionNum: "+I);if(p==null){DebugLogging.ConsoleLog("AppInfoOutput:  array is null");return false}else{if(p[I]!=null){DebugLogging.ConsoleLog("AppInfoOutput: haveSectionQuiz returning true");return true}else{DebugLogging.ConsoleLog("AppInfoOutput: haveSectionQuiz returning false");return false}}},initAudio:function(){DebugLogging.ConsoleLog("AppInfoOutput: init Audio");if(c==null){DebugLogging.ConsoleLog("AppInfoOutput: StreamingAudio = null, init streamingAudio");var H=Globals.SERVER_URL+Globals.CONTENT_PROVIDER+"filerequest?service=aural&sectionid="+m;DebugLogging.ConsoleLog("AppInfoOutput: StreamingURL = "+H);c=new Media(H,MocksMobApp.Aural.onInitAudioSuccess,MocksMobApp.Aural.onInitAudioError,MocksMobApp.Aural.mediaStatus)}},mediaStatus:function(H){DebugLogging.ConsoleLog("AppInfoOutput: Status Code change:"+H)},onInitAudioSuccess:function(){DebugLogging.ConsoleLog("onInitAudioSuccess audio success")},onInitAudioError:function(H){DebugLogging.ConsoleLog("onInitAudioError:"+JSON.stringify(H));DebugLogging.ConsoleLog("onInitAudioError audio code: "+H.code+"\nmessage: "+H.message+"\n")},startStopAudio:function(){DebugLogging.ConsoleLog("AppInfoOutput: startStopAudio called. Audio Playing = "+g);if(!g){this.startAudio()}else{this.pauseAudio()}},startAudio:function(){DebugLogging.ConsoleLog("AppInfoOutput: startAudio called. audioPlaying = "+g);if((c!=null)&&(!g)){c.play();DebugLogging.ConsoleLog("AppInfoOutput: After Audio.play");g=true;$("#auralAudioStartBtn").html('<span class="ui-btn-inner"><span class="ui-btn-text">Pause</span></span>');C()}},stopAudio:function(){DebugLogging.ConsoleLog("AppInfoOutput: stopAudio called");if((c!=null)&&(g)){c.stop();g=false;DebugLogging.ConsoleLog("AppInfoOutput: Auto Stopped");$("#auralAudioStartBtn").html('<span class="ui-btn-inner"><span class="ui-btn-text">Play</span></span>')}if(F!=null){clearInterval(F);F=null}if(A!=null){clearInterval(A);A=null}},pauseAudio:function(){DebugLogging.ConsoleLog("AppInfoOutput: pauseAudio called");if((c!=null)&&(g)){c.pause();g=false;DebugLogging.ConsoleLog("AppInfoOutput: Audio Paused");$("#auralAudioStartBtn").html('<span class="ui-btn-inner"><span class="ui-btn-text">Play</span></span>')}},releaseAudio:function(){DebugLogging.ConsoleLog("AppInfoOutput: releaseAudio called");this.stopAudio();if(c!=null){c.release();c=null;DebugLogging.ConsoleLog("AppInfoOutput: Audio should now be released")}},setSectionBtns:function(){y(r());o(n())},setMainBtns:function(){$("#auralAudioStartBtn").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: auralAudioStartBtn clicked");if(!g){$("#audioDetails").empty();$("#audioDetails").append("Loading Audio...")}MocksMobApp.Aural.startStopAudio();$("#auralAudioStartBtn").removeClass("ui-btn-active")});$("#auralAudioStopBtn").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: auralAudioStopBtn clicked");MocksMobApp.Aural.stopAudio();$("#auralAudioStopBtn").removeClass("ui-btn-active");$("#audioDetails").empty();$("#audioDetails").append("Aural Exam")});$("#btnGetResults").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: Get Results Btn Clicked");MocksMobApp.Aural.getResult();$("#btnGetResults").removeClass("ui-btn-active")})},openSwipeMsg:function(){if((f==true)&&(s.length>1)){f=false;MocksMobApp.UI.showToast("Swipe left/right to view the next/prev section",true)}else{f=false}},createPage:function(H){$.mobile.showPageLoadingMsg();this.setSectionID(H);DebugLogging.ConsoleLog("AppInfoOutput: createPage: "+H);if(this.haveSectionQuiz(H)){DebugLogging.ConsoleLog("AppInfoOutput: createPage using local");populateAuralsExamsPage(this.getSectionQuiz())}else{DebugLogging.ConsoleLog("AppInfoOutput: createPage requesting from server");this.requestSectionQuestions()}},reset:function(){DebugLogging.ConsoleLog("AppInfoOutput: Aural.reset");x()}}})(),Orals:(function(){var c='<h2 class="textaligncenter">You have ??? CREDITPH for mocks.ie Oral service. To redeem this credit, please visit <a href="http://www.mocks.ie" rel="external" class="ui-link">www.mocks.ie</a> to book an Oral Exam</h2>';var b=0;return{getSubscriptionsCB:function(d){if((HelperFns.is_array(d))&&(d.length>0)){b=d[0].NumCredits;if($.mobile.activePage.attr("id")=="orals"){MocksMobApp.Orals.displayCredits()}}},numCredits:function(){return b},displayCredits:function(){if(b<=0){$("#oralsCreditsPH").hide();$("#oralsBookNowBtn").hide();$("#oralsBuyNowBtn").show()}else{var d="";d=c;d=d.replace("???",b);if(b==1){d=d.replace("CREDITPH","credit")}else{d=d.replace("CREDITPH","credits")}$("#oralsCreditsPH").empty();$("#oralsCreditsPH").append(d);$("#oralsCreditsPH").show();$("#oralsBookNowBtn").show();$("#oralsBuyNowBtn").hide()}MocksMobApp.UI.refreshScroll()}}})(),Corrections:(function(){var d='<a href="'+Globals.SERVER_URL+Globals.CONTENT_PROVIDER+"filerequest?subjectid=ID&service=corrections&"+Globals.APP_LEVEL_PARAM+'" data-role="button" rel="external">NAME</a>';var b='<h2 class="textaligncenter">You have ??? CREDITPH for mocks.ie Exam Correction & Feedback service. To redeem this credit, please visit <a href="http://www.mocks.ie" rel="external" class="ui-link">www.mocks.ie</a> to book an Exam</h2>';var c=0;return{getSubscriptionsCB:function(e){if((HelperFns.is_array(e))&&(e.length>0)){c=e[0].NumCredits;if($.mobile.activePage.attr("id")=="corrections"){MocksMobApp.Corrections.displayCredits()}}},numCredits:function(){return c},displayCredits:function(){if(c<=0){$("#correctionsCreditsPH").hide();$("#correctionsBookNowBtn").hide();$("#correctionsBuyNowBtn").show()}else{var e="";e=b;e=e.replace("???",c);if(c==1){e=e.replace("CREDITPH","credit")}else{e=e.replace("CREDITPH","credits")}$("#correctionsCreditsPH").empty();$("#correctionsCreditsPH").append(e);$("#correctionsCreditsPH").show();$("#correctionsBookNowBtn").show();$("#correctionsBuyNowBtn").hide()}MocksMobApp.UI.refreshScroll()},DownloadSampleLink:function(g,f){var e="";e=d;e=e.replace("ID",g);e=e.replace("NAME",f);return e}}})(),Subjects:(function(){var b="";function c(e){var f="";if(e.Marks>0){f+='<div style="float: right;">';f+='<h2 class="txtPink">Marks:</h2>';f+='<div style="float: right;">'+e.Marks+"</div>";f+='</div><div style="clear:both;"></div>'}if((e.NoQuestions>0)&&(e.NoQuestionsToAnswer>0)){f+='<h2 style="float: right;">Answer&nbsp;'+e.NoQuestionsToAnswer+" / "+e.NoQuestions+' Questions</h2><div style="clear:both;"></div>'}if(e.Duration!==""){f+='<div style="float: right;">';f+='<h2 class="txtPink">Time Allocated:</h2>';f+='<div style="float: right;">'+e.Duration+"</div>";f+='</div><div style="clear:both;"></div>'}return f}function d(h){var m="";var f;var g=0;var l=0;DebugLogging.ConsoleLog(JSON.stringify(h));if(h.length<=0){m='<h2 class="textaligncenter">Sorry No Papers Available</h2>';return m}var e=MocksMobApp.UI.windowWidth();if(e>=700){numColumsPerRow=4}else{numColumsPerRow=2}for(var k=0;k<h.length;k++){if((h[k].Links.length>0)&&(h[k].Active==true)){f=h[k].Links;m+='<div class="lnksColumn">'+h[k].Title+"<br />";l+=1;for(g=0;g<f.length;g++){if(f[g].Active==true){if(f[g].Downloadable==true){m+='<a href="'+Globals.SERVER_URL+Globals.HOSTED_PAPERS_DIR+f[g].Url+'" rel="external">'+f[g].Title+"</a>"}else{m+='<a href="'+f[g].Url+'" rel="external">'+f[g].Title+"</a>"}m+="<br />"}}m+="</div>";if(l%numColumsPerRow==0){m+='<div style="clear: both;"><br /></div>'}}}m+='<div style="clear: both;"><br /></div>';return m}return{getSubjectInfoDetails:function(f,e){b=e;if((b!="exambreakdown")&&(b!="downloadpapers")){MocksMobApp.Storage.getSubjectsPagePageDetails(e,f,MocksMobApp.Subjects.populateSubjectInfoPage)}else{MocksMobApp.Subjects.requestSubjectsInfoDetails(f,b)}},requestSubjectsInfoDetails:function(i,f){var j="";var h="";b=f;switch(f){case"general":j="subjectspagedetails";break;case"stats":j="statsdetails";break;case"def":j="definitionsdetails";break;case"exambreakdown":j="exambreakdowndetails";break;case"timebreakdown":j="timebreakdowndetails";break;case"topics":j="topicscovereddetails";break;case"paper":j="subjectspapersdetails";break;case"downloadpapers":j="subjectspagelinks";break;default:DebugLogging.ConsoleLog("AppInfoOutput: requestSubjectsInfoDetails error: "+i+" "+f);return;break}var g={service:j,level:Globals.APP_LEVEL,itemid:i};var k={requestService:"jsonrequest",requestCallback:MocksMobApp.Subjects.populateSubjectInfoPage,requestParam:g,requestType:"get"};var e=new MocksMobApp.SeverRequestManager.Request(k);MocksMobApp.SeverRequestManager.AddRequest(e);MocksMobApp.SeverRequestManager.Start()},populateExamBreakdownPage:function(g,f){if(MocksMobApp.UI.currentPage().serviceName=="examBreakdown"){if(HelperFns.is_array(g)&&g.length>0){$("#ExamBreakdownPH").empty();$("#ExamBreakdownContentHdr").empty();$("#ExamBreakdownContentHdr").append("&nbsp;&nbsp;&nbsp;&nbsp;"+g[0].ExamBreakdownName);$("#ExamBreakdownPH").append(g[0].ExamBreakdownDetails);var e=$("#ExamBreakdownPH").width()+20;$(".scroller").css("width",e+"px");DebugLogging.ConsoleLog("AppInfoOutput: hrWidth --> "+e);MocksMobApp.UI.refreshScroll()}$("#examBreakdownHdrTitle").empty();$("#examBreakdownHdrTitle").append(MocksMobApp.UI.subjectsPageName());MocksMobApp.UI.closeLoadingDialog()}},populateSubjectInfoPage:function(g,j){if(b=="exambreakdown"){MocksMobApp.Subjects.populateExamBreakdownPage(g,j)}else{if(MocksMobApp.UI.currentPage().serviceName=="subjectsInfo"){var f=false;$("#SubjectsInfoNamePH").empty();$("#SubjectsInfoDetailsPH").empty();if(HelperFns.is_array(g)&&g.length>0){var e="";var k="";var i="";var h=null;switch(b){case"general":e="General Information";k=g[0].ShortDescription;h=MocksMobApp.Storage.insertSubjectsPage;break;case"stats":e="Statistics";k=g[0].StatsDetails;h=MocksMobApp.Storage.insertSubjectStats;break;case"def":e="Definitions";k=g[0].DefinitionsDetails;h=MocksMobApp.Storage.insertSubjectDefinitions;break;case"timebreakdown":e=g[0].TimeBreakdownName;k=g[0].TimeBreakdownDetails;h=MocksMobApp.Storage.insertSubjectTimeBreakdown;break;case"topics":e=g[0].TopicsCoveredName;k=g[0].TopicsCoveredDetails;h=MocksMobApp.Storage.insertSubjectTopicsCovered;break;case"paper":e=g[0].PaperName;k=g[0].ShortDescription;i=c(g[0]);h=MocksMobApp.Storage.insertSubjectPagePapers;break;case"downloadpapers":e="Download Past Papers";k=d(g);break;default:DebugLogging.ConsoleLog("AppInfoOutput: requestSubjectsInfoDetails error: "+b);return;break}if(k.length>0){$("#SubjectsInfoNamePH").append(e);if(i.length>0){$("#SubjectsInfoDetailsPH").append(i)}$("#SubjectsInfoDetailsPH").append(k);HelperFns.convertExternalLinks("#SubjectsInfoDetailsPH");MocksMobApp.UI.refreshScroll();$("#subjectsInfoHdrTitle").empty();$("#subjectsInfoHdrTitle").append(MocksMobApp.UI.subjectsPageName());MocksMobApp.UI.closeLoadingDialog();if((j!=null)&&(j>0)){if(h!=null){g[0].IsNew=false;h(g,null)}}}else{if(j==null){if(MocksMobApp.Network.hasConnection(true)){MocksMobApp.Subjects.requestSubjectsInfoDetails(g[0].ID,b)}else{f=true}}else{f=true}}}else{f=true}if(f){DebugLogging.ConsoleLog("AppInfoOutput: ---PageInfo == NULL");$("#subjectsInfoHdrTitle").empty();$("#subjectsInfoHdrTitle").append("Sorry");$("#SubjectsInfoDetailsPH").append('<div style="text-align: center;">No content available at the moment!</div>');MocksMobApp.UI.closeLoadingDialog()}}}}}})(),InfoPages:(function(){return{getInfoPageDetails:function(b){MocksMobApp.Storage.getInfoPageDetails(b,MocksMobApp.InfoPages.populateInfoPageDetails)},requestInfoPageDetails:function(c){DebugLogging.ConsoleLog("AppInfoOutput: requestInfoPageDetails called: "+c);var b={service:"infopagedetails",level:Globals.APP_LEVEL,itemid:c};var e={requestService:"jsonrequest",requestCallback:MocksMobApp.InfoPages.populateInfoPageDetails,requestParam:b,requestType:"get"};var d=new MocksMobApp.SeverRequestManager.Request(e);MocksMobApp.SeverRequestManager.AddRequest(d);MocksMobApp.SeverRequestManager.Start()},populateInfoPageDetails:function(d,c){if(MocksMobApp.UI.currentPage().serviceName=="infoPagesDetails"){$("#InfoPageNamePH").empty();$("#InfoPageDetailsPH").empty();var b=false;if(HelperFns.is_array(d)&&d.length>0){if(d[0].InfoPageDetails.length>0){$("#InfoPageNamePH").append(d[0].InfoPageName);$("#InfoPageDetailsPH").append(d[0].InfoPageDetails);HelperFns.convertExternalLinks("#InfoPageDetailsPH");MocksMobApp.UI.refreshScroll();MocksMobApp.UI.closeLoadingDialog();if((c!=null)&&(c>0)){d[0].IsNew=false;MocksMobApp.Storage.insertInfoPage(d,null)}}else{if(c==null){if(MocksMobApp.Network.hasConnection(true)){MocksMobApp.InfoPages.requestInfoPageDetails(d[0].InfoPageID)}else{b=true}}else{b=true}}}else{b=true}if(b){DebugLogging.ConsoleLog("AppInfoOutput: ---PageInfo == NULL");$("#subjectsInfoHdrTitle").empty();$("#subjectsInfoHdrTitle").append("Sorry");$("#SubjectsInfoDetailsPH").append('<div style="text-align: center;">No content available at the moment!</div>');MocksMobApp.UI.closeLoadingDialog()}}}}})(),StudyTreats:(function(){var b=null;return{openTreatLink:function(d,c){MocksMobApp.StudyTreats.recordAdsClick(d);HelperFns.openExternalPage(c)},startPremiumTreatsSlideShow:function(){$("#premiumTreatsPH > div:gt(0)").hide();if(b!=null){MocksMobApp.StudyTreats.stopPremiumTreatsSlideShow()}b=setInterval(function(){$("#premiumTreatsPH > div:first").fadeOut(1000).next().fadeIn(1000).end().appendTo("#premiumTreatsPH")},5000)},stopPremiumTreatsSlideShow:function(){if(b!=null){clearInterval(b);b=null}},recordAdsImpression:function(){var c;var d={};var e={requestService:"treatsimpression",requestCallback:MocksMobApp.StudyTreats.recordAdsImpressionCB,requestParam:d,requestType:"get"};c=new MocksMobApp.SeverRequestManager.Request(e);MocksMobApp.SeverRequestManager.AddRequest(c);MocksMobApp.SeverRequestManager.Start()},recordAdsClick:function(d){var c;var e={treatsid:d};var f={requestService:"treatsclick",requestCallback:MocksMobApp.StudyTreats.recordAdsImpressionCB,requestParam:e,requestType:"get"};c=new MocksMobApp.SeverRequestManager.Request(f);MocksMobApp.SeverRequestManager.AddRequest(c);MocksMobApp.SeverRequestManager.Start()},recordAdsImpressionCB:function(c){return}}})(),SummerActivities:(function(){var b=null;return{openActivityLink:function(d,c){MocksMobApp.SummerActivities.recordAdsClick(d);HelperFns.openExternalPage(c)},startPremiumActivitiesSlideShow:function(){$("#premiumActivitiesPH > div:gt(0)").hide();if(b!=null){MocksMobApp.SummerActivities.stopPremiumActivitiesSlideShow()}b=setInterval(function(){$("#premiumActivitiesPH > div:first").fadeOut(1000).next().fadeIn(1000).end().appendTo("#premiumActivitiesPH")},5000)},stopPremiumActivitiesSlideShow:function(){if(b!=null){clearInterval(b);b=null}},recordAdsImpression:function(){var c;var d={};var e={requestService:"activitiesimpression",requestCallback:MocksMobApp.SummerActivities.recordAdsImpressionCB,requestParam:d,requestType:"get"};saImpressionRequest=new MocksMobApp.SeverRequestManager.Request(e);MocksMobApp.SeverRequestManager.AddRequest(saImpressionRequest);MocksMobApp.SeverRequestManager.Start()},recordAdsClick:function(e){var c;var d={treatsid:e};var f={requestService:"activitiesclick",requestCallback:MocksMobApp.SummerActivities.recordAdsImpressionCB,requestParam:d,requestType:"get"};c=new MocksMobApp.SeverRequestManager.Request(f);MocksMobApp.SeverRequestManager.AddRequest(c);MocksMobApp.SeverRequestManager.Start()},recordAdsImpressionCB:function(c){return}}})(),Storage:(function(){var i=null;var c;var f=false;function j(k,l){DebugLogging.ConsoleLog("AppInfoOutput: initDB");try{i.transaction(function(n){n.executeSql("CREATE TABLE IF NOT EXISTS MocksUserPreferences(keyname UNIQUE, value text)");n.executeSql("CREATE TABLE IF NOT EXISTS MocksTableLastUpdated(keyname UNIQUE, value text)");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjects(SubjectID INTEGER PRIMARY KEY, name TEXT, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjectQualifications(SubjectQualificationID INTEGER PRIMARY KEY, SubjectID INTEGER, EducationalQualificationID INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjectsPage(SubjectsPageID INTEGER PRIMARY KEY, SubjectName TEXT, LongDescription TEXT, ShortDescription TEXT, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjectsPageSubject(SubjectsPage2MocksSubjectID INTEGER PRIMARY KEY, SubjectsID INTEGER, SubjectsPageID INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjectsBreakdown(ExamBreakdownID INTEGER PRIMARY KEY, SubjectsPageID INTEGER, ExamBreakdownName TEXT, ExamBreakdownDetails TEXT, SortOrder INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjectsPaper(SubjectsPaperID INTEGER PRIMARY KEY, SubjectsPageID INTEGER, PaperName TEXT, Marks INTEGER, Duration TEXT, NoQuestions INTEGER, NoQuestionsToAnswer INTEGER, LongDescription TEXT, ShortDescription TEXT, SortOrder INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjectTimeBreakdown(TimeBreakdownID INTEGER PRIMARY KEY, SubjectsPageID INTEGER, TimeBreakdownName TEXT, TimeBreakdownDetails TEXT, SortOrder INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjectTopicsCovered(TopicsCoveredID INTEGER PRIMARY KEY, SubjectsPageID INTEGER, TopicsCoveredName TEXT, TopicsCoveredDetails TEXT, SortOrder INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjectDefinitions(DefinitionsID INTEGER PRIMARY KEY, SubjectsPageID INTEGER, DefinitionsDetails TEXT, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSubjectStats(StatsID INTEGER PRIMARY KEY, SubjectsPageID INTEGER, StatsDetails TEXT, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksLevels(LevelID INTEGER PRIMARY KEY, LevelLong TEXT, LevelShort TEXT, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksNotes(NotesID INTEGER PRIMARY KEY, NotesAuthorID INTEGER, Name TEXT, Description TEXT, FileName TEXT, SampleFileName TEXT, Cost REAL, SubjectID INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksNotesAuthors(NotesAuthorID INTEGER PRIMARY KEY, Name TEXT, DescriptionBrief TEXT, DescriptionDetailed TEXT, ImageFile TEXT, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksOrals(OralSubjectID INTEGER PRIMARY KEY, SubjectID INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksCorrections(ExamSubjectID INTEGER PRIMARY KEY, SubjectID INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksMcqs(McqSubjectID INTEGER PRIMARY KEY, SubjectID INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksMcqsTopics(McqTopicID INTEGER PRIMARY KEY, McqSubjectID INTEGER, Description TEXT, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksAurals(AuralSubjectID INTEGER PRIMARY KEY, SubjectID INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksAuralsExams(AuralExamID INTEGER PRIMARY KEY, AuralSubjectID INTEGER, Name TEXT, LevelID INTEGER, Free INTEGER, Text TEXT, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksServicesInfo(ServicesInfoID INTEGER PRIMARY KEY, ServicesInfoName TEXT, ServicesInfoShortDetails TEXT, ServicesInfoLongDetails TEXT, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksInfoPage(InfoPageID INTEGER PRIMARY KEY, InfoPageName INTEGER, InfoPageDetails TEXT, SortOrder INTEGER, Active INTEGER);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksTTClass(ClassID INTEGER PRIMARY KEY, ClassDay INTEGER, ClassName TEXT, ClassLocation TEXT, ClassColour INTEGER, ClassStart INTEGER, ClassEnd INTEGER, ClassComments TEXT, TimeTableType TEXT);");n.executeSql("CREATE TABLE IF NOT EXISTS MocksDtt(McqSubjectID INTEGER PRIMARY KEY, SubjectID INTEGER, IsFree INTEGER, Active INTEGER)");n.executeSql("CREATE TABLE IF NOT EXISTS MocksDttTopics(McqTopicID INTEGER PRIMARY KEY, McqSubjectID INTEGER, Description TEXT, Active INTEGER)");n.executeSql("CREATE TABLE IF NOT EXISTS MocksStudyTreats(StudyTreatsID INTEGER PRIMARY KEY, StudyTreatsType INTEGER, StudyTreatsCatID INTEGER, Name TEXT, Description TEXT, ImageFileName TEXT, PremiumImageFileName TEXT, ImageWidth INTEGER, ImageHeight INTEGER, Url TEXT, SortOrder INTEGER, EndDate DATE, Active INTEGER)");n.executeSql("CREATE TABLE IF NOT EXISTS MocksSummerActivities(SummerActivitiesID INTEGER PRIMARY KEY, SummerActivitiesType INTEGER, SummerActivitiesCatID INTEGER, Name TEXT, Description TEXT, ImageFileName TEXT, PremiumImageFileName TEXT, ImageWidth INTEGER, ImageHeight INTEGER, Url TEXT, SortOrder INTEGER, EndDate DATE, Active INTEGER)");n.executeSql("CREATE TABLE IF NOT EXISTS MocksVideoLinksTopics(VideoTopicID INTEGER PRIMARY KEY, Title TEXT, QualID INTEGER, SubjectID INTEGER, Active INTEGER)");n.executeSql("CREATE TABLE IF NOT EXISTS MocksVideoLinksTopicSubheadings(VideoSubheadingID INTEGER PRIMARY KEY, VideoTopicID INTEGER, Title TEXT, Active INTEGER)");n.executeSql("CREATE TABLE IF NOT EXISTS MocksVideoLinks(VideoLinkID INTEGER PRIMARY KEY, LinkHTML TEXT, VideoSubheadingID INTEGER, Title TEXT, Active INTEGER)");DebugLogging.ConsoleLog("AppInfoOutput: Tables Created")});l()}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error initDB: "+m.message);k()}}function d(){DebugLogging.ConsoleLog("AppInfoOutput: InitDB_v2 Called");try{i.transaction(function(l){l.executeSql("ALTER TABLE MocksMcqs ADD COLUMN IsFree INTEGER DEFAULT 0")},function(){DebugLogging.ConsoleLog("AppInfoOutput: Alter Table Transaction Error CB (Column Should Already Exist)");UserPreferences.init();g()},function(){DebugLogging.ConsoleLog("AppInfoOutput: Alter Table Transaction Success CB (Column Created)");UserPreferences.init();g()})}catch(k){DebugLogging.ConsoleLog("AppInfoOutput: Error initDB_v2: "+k.message)}}function e(k){DebugLogging.ConsoleLog("AppInfoOutput: Error processing SQL: "+k.message);alert("Error processing SQL: "+k)}function b(){DebugLogging.ConsoleLog("AppInfoOutput: successCB, Start Reqs");MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjectQualifications,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjectqualifications"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjects,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjects"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjectsPage,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjectspage"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjectPageSubjects,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjectpagesubjects"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjectPagePapers,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjectspagepapers"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjectBreakdown,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjectsbreakdown"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjectTimeBreakdown,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjectstimebreakdown"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjectTopicsCovered,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjectstopicscovered"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjectDefinitions,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjectsdefinitions"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSubjectStats,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("subjectsstats"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertInfoPage,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("infopage"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertServicesInfo,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("servicesinfo"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertLevels,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("levels"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertNotes,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("notes"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertNotesAuthors,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("notesauthors"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertOrals,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("orals"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertCorrections,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("corrections"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertMcqs,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("mcqs"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertMcqsTopics,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("mcqstopics"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertAurals,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("aurals"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertAuralsExams,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("auralsexams"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertDtt,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("mcqs","dtt"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertDttTopics,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("mcqstopics","dtt"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertStudyTreats,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("studytreats"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertSummerActivities,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("summeractivities"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertVideoLinks,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("videolinks"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertVideoTopics,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("videotopics"),requestType:"get"}));MocksMobApp.SeverRequestManager.AddRequest(new MocksMobApp.SeverRequestManager.Request({requestService:"jsonrequest",requestCallback:MocksMobApp.Storage.insertVideoSubheadings,requestParam:MocksMobApp.SeverRequestManager.GetRequestParams("videosubheadings"),requestType:"get"}));MocksMobApp.SeverRequestManager.Start()}function h(){DebugLogging.ConsoleLog("AppInfoOutput: incheckAppVersion():");var k=MocksMobApp.Storage.getTableLastUpdated("AppInfo");if((k==null)||(k=="undefined")||(typeof(k)=="undefined")){DebugLogging.ConsoleLog("AppInfoOutput: incheckAppVersion():");k="0"}DebugLogging.ConsoleLog("AppInfoOutput: Got last update:"+k);var l=new MocksMobApp.SeverRequestManager.Request({requestService:"AppInfo",requestCallback:MocksMobApp.Storage.AppInfoResult,requestParam:{LastUpdated:k,AppType:Globals.APP_TYPE},requestType:"post"});MocksMobApp.SeverRequestManager.issuePriorityRequest(l,b)}function g(){DebugLogging.ConsoleLog("AppInfoOutput: dbGetTableLastUpdated");i.transaction(function(k){var l="SELECT * FROM MocksTableLastUpdated";k.executeSql(l,[],function(m,n){DebugLogging.ConsoleLog("AppInfoOutput: In dbGetTableLastUpdated SQL");if(n.rows.length>0){c=n.rows;DebugLogging.ConsoleLog("AppInfoOutput: Results Len > 0")}else{c=new Array();DebugLogging.ConsoleLog("AppInfoOutput: Results Len !> 0")}h()},function(m){DebugLogging.ConsoleLog("AppInfoOutput: GetTablesLastUpdated Err "+m.message)},function(){DebugLogging.ConsoleLog("AppInfoOutput: GetTablesLastUpdated Success ")})})}return{AppInfoResult:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: logAppInfoResult "+JSON.stringify(k)+" time= "+l+"Checks = "+k.AppVersion);if((k.AppVersion!="undefined")&&(l!="undefined")&&(typeof(k.AppVersion)!="undefined")&&(typeof(l)!="undefined")){DebugLogging.ConsoleLog("AppInfoOutput: logAppInfoResult result not undef");MocksMobApp.Storage.saveTableLastUpdated("AppInfo",l);UserPreferences.setItem(Globals.CURRENT_AVAILABLE_APP_VERSION,k.AppVersion);if(k.BootUsers==true){DebugLogging.ConsoleLog("AppInfoOutput: Boot Users...");UserPreferences.setItem(Globals.USER_NAME,null);UserPreferences.setItem(Globals.USER_ID,null);MocksMobApp.Storage.deleteUserPreference(Globals.USER_NAME);MocksMobApp.Storage.deleteUserPreference(Globals.USER_ID);DebugLogging.ConsoleLog("AppInfoOutput: After Users Booted")}b()}else{DebugLogging.ConsoleLog("AppInfoOutput: No AppInfoResults...");b()}},upDateTimeTableUserCol:function(){try{var k=UserPreferences.getItem(Globals.USER_ID);if(k!==null&&k.length>0){i.transaction(function(m){m.executeSql("UPDATE MocksTTClass SET UserID=? WHERE UserID='0'",[k])});UserPreferences.setItem(Globals.TT_USER_COL_UPDATED,"true")}}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error upDateTimeTableUserCol: "+l.message)}},getTableLastUpdated:function(k){DebugLogging.ConsoleLog("AppInfoOutput: getTableLastUpdated");for(var l=0;l<c.length;l++){if(c.item(l).keyname==k){DebugLogging.ConsoleLog("AppInfoOutput: getTableLastUpdated"+k+" "+c.item(l).value);return c.item(l).value}}return"0"},saveTableLastUpdated:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: saveTableLastUpdated "+l+" "+k);i.transaction(function(m){m.executeSql("SELECT * FROM MocksTableLastUpdated WHERE keyname=?",[l],function(n,o){if(o.rows.length>0){MocksMobApp.Storage.updateTableLastUpdated(l,k)}else{MocksMobApp.Storage.insertTableLastUpdated(l,k)}},function(n){DebugLogging.ConsoleLog("AppInfoOutput: saveTableLastUpdated "+n.message)})})},insertTableLastUpdated:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: insertTableLastUpdated "+l+" "+k);i.transaction(function(m){m.executeSql("INSERT INTO MocksTableLastUpdated(keyname, value) VALUES (?, ?)",[l,k])})},updateTableLastUpdated:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: updateTableLastUpdated "+l+" "+k);i.transaction(function(m){m.executeSql("UPDATE MocksTableLastUpdated SET value=? WHERE keyname=?",[k,l])})},deleteUserPreference:function(k){DebugLogging.ConsoleLog("AppInfoOutput: deleteUserPreference "+k);i.transaction(function(l){l.executeSql("DELETE FROM MocksUserPreferences WHERE keyname=?",[k])})},getUserPreferences:function(k){DebugLogging.ConsoleLog("AppInfoOutput: getUserPreferences ");i.transaction(function(l){var m="SELECT * FROM MocksUserPreferences";l.executeSql(m,[],function(n,o){DebugLogging.ConsoleLog("AppInfoOutput: getUserPreferences CB");k(o.rows)})})},saveUserPreference:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: saveUserPreference "+k+" "+l);i.transaction(function(m){m.executeSql("SELECT keyname FROM MocksUserPreferences WHERE keyname=?",[k],function(n,o){if(o.rows.length==1){MocksMobApp.Storage.updateUserPreference(k,l.toString())}else{MocksMobApp.Storage.insertUserPreference(k,l.toString())}},function(n){DebugLogging.ConsoleLog("AppInfoOutput: saveUserPreference "+n.message)})})},insertUserPreference:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertUserPreference "+k+" "+l);i.transaction(function(m){m.executeSql("INSERT INTO MocksUserPreferences(keyname, value) VALUES (?, ?)",[k,l])})},updateUserPreference:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: updateUserPreference "+k+" "+l);i.transaction(function(m){m.executeSql("UPDATE MocksUserPreferences SET value=? WHERE keyname=?",[l,k])})},openDB:function(){i=window.openDatabase("mocksMobAppDb","0.1","Offline storage for Mocks.ie Mobile App",5*1024*1024);DebugLogging.ConsoleLog("AppInfoOutput: OpenDB");j(e,d)},insertSubjectQualifications:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectQualifications");try{i.transaction(function(n){for(var o=0;o<k.length;o++){if(k[o].IsNew==true){n.executeSql("INSERT INTO MocksSubjectQualifications(SubjectQualificationID, SubjectID, EducationalQualificationID, Active) VALUES (?, ?, ?, ?)",[k[o].SubjectQualificationID,k[o].SubjectID,k[o].EducationalQualificationID,k[o].Active])}else{n.executeSql("UPDATE MocksSubjectQualifications SET SubjectID=?, EducationalQualificationID=?, Active=? WHERE SubjectQualificationID=?",[k[o].SubjectID,k[o].EducationalQualificationID,k[o].Active,k[o].SubjectQualificationID])}}},function(n){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectQualifications Error: "+n.message+" "+n.code);regContentSyncComplete()},function(){DebugLogging.ConsoleLog("AppInfoOutput: QualInsertSuccess");regContentSyncComplete();if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectQualificationsLastUpdated",l)}})}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjectQualifications: "+m.message)}},insertSubjects:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjects");try{i.transaction(function(n){for(var o=0;o<m.length;o++){if(m[o].IsNew==true){n.executeSql("INSERT INTO MocksSubjects(SubjectID, name, Active) VALUES (?, ?, ?)",[m[o].SubjectId,m[o].SubjectName,m[o].Active],function(){DebugLogging.ConsoleLog("AppInfoOutput: Subjects Insert Row Success")},function(){DebugLogging.ConsoleLog("AppInfoOutput: Subjects Insert Row Fail")})}else{n.executeSql("UPDATE MocksSubjects SET name=?, Active=? WHERE SubjectID=?",[m[o].SubjectName,m[o].Active,m[o].SubjectId],function(){DebugLogging.ConsoleLog("AppInfoOutput: Subjects Update Row Success")},function(){DebugLogging.ConsoleLog("AppInfoOutput: Subjects Update Row Fail")})}}},function(n){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjects Error: "+n.message+" "+n.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectsLastUpdated",k)}})}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjects: "+l.message)}},insertSubjectsPage:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectsPage");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksSubjectsPage(SubjectsPageID, SubjectName, LongDescription, ShortDescription, Active) VALUES (?, ?, ?, ?, ?)",[n[p].SubjectsPageID,n[p].SubjectName,n[p].LongDescription,n[p].ShortDescription,n[p].Active])}else{o.executeSql("UPDATE MocksSubjectsPage SET SubjectName=?, LongDescription=?, ShortDescription=?, Active=? WHERE SubjectsPageID=?",[n[p].SubjectName,n[p].LongDescription,n[p].ShortDescription,n[p].Active,n[p].SubjectsPageID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectsPage Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectspageLastUpdated",k)}})})(m)}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjectsPage: "+l.message)}},insertVideoLinks:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertVidLinks: "+JSON.stringify(k));try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksVideoLinks(VideoLinkID, LinkHTML, VideoSubheadingID, Title, Active) VALUES (?, ?, ?, ?, ?)",[n[p].VideoLinkID,n[p].LinkHTML,n[p].VideoSubheadingID,n[p].Title,n[p].Active])}else{o.executeSql("UPDATE MocksVideoLinks SET LinkHTML=?, VideoSubheadingID=?, Title=?, Active=? WHERE VideoLinkID=?",[n[p].LinkHTML,n[p].VideoSubheadingID,n[p].Title,n[p].Active,n[p].VideoLinkID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertVideoLinks Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("videolinksLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertVideoLinks: "+m.message)}},insertVideoTopics:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertvideoTopics"+JSON.stringify(k));try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksVideoLinksTopics(VideoTopicID, Title, QualID, SubjectID, Active) VALUES (?, ?, ?, ?, ?)",[n[p].VideoTopicID,n[p].Title,n[p].QualID,n[p].SubjectID,n[p].Active])}else{o.executeSql("UPDATE MocksVideoLinksTopics SET Title=?, QualID=?, SubjectID=?, Active=? WHERE VideoTopicID=?",[n[p].Title,n[p].QualID,n[p].SubjectID,n[p].Active,n[p].VideoTopicID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertVideoTopics Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("videotopicsLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertVideoTopics: "+m.message)}},insertVideoSubheadings:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertvideoSubheadings"+JSON.stringify(k));try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksVideoLinksTopicSubheadings(VideoSubheadingID, VideoTopicID, Title, Active) VALUES (?, ?, ?, ?)",[n[p].VideoSubheadingID,n[p].VideoTopicID,n[p].Title,n[p].Active])}else{o.executeSql("UPDATE MocksVideoLinksTopicSubheadings SET VideoTopicID=?, Title=?, Active=? WHERE VideoSubheadingID=?",[n[p].VideoTopicID,n[p].Title,n[p].Active,n[p].VideoSubheadingID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertVideoSubheadings Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("videosubheadingsLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertVideoSubheadings: "+m.message)}},insertSubjectPageSubjects:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectPageSubjects");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksSubjectsPageSubject(SubjectsPage2MocksSubjectID, SubjectsID, SubjectsPageID, Active) VALUES (?, ?, ?, ?)",[n[p].SubjectsPage2MocksSubjectID,n[p].SubjectsID,n[p].SubjectsPageID,n[p].Active])}else{o.executeSql("UPDATE MocksSubjectsPageSubject SET SubjectsID=?, SubjectsPageID=?, Active=? WHERE SubjectsPage2MocksSubjectID=?",[n[p].SubjectsID,n[p].SubjectsPageID,n[p].Active,n[p].SubjectsPage2MocksSubjectID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectPageSubjects Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectpagesubjectsLastUpdated",k)}})})(m)}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjectPageSubjects: "+l.message)}},insertSubjectPagePapers:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectPagePapers");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksSubjectsPaper(SubjectsPaperID, SubjectsPageID, PaperName, Marks, Duration, NoQuestions, NoQuestionsToAnswer, LongDescription, ShortDescription, SortOrder, Active) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ? ,?)",[n[p].SubjectsPaperID,n[p].SubjectsPageID,n[p].PaperName,n[p].Marks,n[p].Duration,n[p].NoQuestions,n[p].NoQuestionsToAnswer,n[p].LongDescription,n[p].ShortDescription,n[p].SortOrder,n[p].Active])}else{o.executeSql("UPDATE MocksSubjectsPaper SET SubjectsPageID=?, PaperName=?, Marks=?, Duration=?, NoQuestions=?, NoQuestionsToAnswer=?, LongDescription=?, ShortDescription=?, SortOrder=?, Active=? WHERE SubjectsPaperID=?",[n[p].SubjectsPageID,n[p].PaperName,n[p].Marks,n[p].Duration,n[p].NoQuestions,n[p].NoQuestionsToAnswer,n[p].LongDescription,n[p].ShortDescription,n[p].SortOrder,n[p].Active,n[p].SubjectsPaperID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectPagePapers Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectspagepapersLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjectPagePapers: "+m.message)}},insertSubjectBreakdown:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectBreakdown");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksSubjectsBreakdown(ExamBreakdownID, SubjectsPageID, ExamBreakdownName, ExamBreakdownDetails, SortOrder, Active) VALUES (?, ?, ?, ?, ?, ?)",[n[p].ExamBreakdownID,n[p].SubjectsPageID,n[p].ExamBreakdownName,n[p].ExamBreakdownDetails,n[p].SortOrder,n[p].Active])}else{o.executeSql("UPDATE MocksSubjectsBreakdown SET SubjectsPageID=?, ExamBreakdownName=?, ExamBreakdownDetails=?, SortOrder=?, Active=? WHERE ExamBreakdownID=?",[n[p].SubjectsPageID,n[p].ExamBreakdownName,n[p].ExamBreakdownDetails,n[p].SortOrder,n[p].Active,n[p].ExamBreakdownID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectBreakdown Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectsbreakdownLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjectBreakdown: "+m.message)}},insertSubjectTimeBreakdown:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectTimeBreakdown");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksSubjectTimeBreakdown(TimeBreakdownID, SubjectsPageID, TimeBreakdownName, TimeBreakdownDetails, SortOrder, Active) VALUES (?, ?, ?, ?, ?, ?)",[n[p].TimeBreakdownID,n[p].SubjectsPageID,n[p].TimeBreakdownName,n[p].TimeBreakdownDetails,n[p].SortOrder,n[p].Active])}else{o.executeSql("UPDATE MocksSubjectTimeBreakdown SET SubjectsPageID=?, TimeBreakdownName=?, TimeBreakdownDetails=?, SortOrder=?, Active=? WHERE TimeBreakdownID=?",[n[p].SubjectsPageID,n[p].TimeBreakdownName,n[p].TimeBreakdownDetails,n[p].SortOrder,n[p].Active,n[p].TimeBreakdownID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectTimeBreakdown Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectstimebreakdownLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjectTimeBreakdown: "+m.message)}},insertSubjectTopicsCovered:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectTopicsCovered");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksSubjectTopicsCovered(TopicsCoveredID, SubjectsPageID, TopicsCoveredName, TopicsCoveredDetails, SortOrder, Active) VALUES (?, ?, ?, ?, ?, ?)",[n[p].TopicsCoveredID,n[p].SubjectsPageID,n[p].TopicsCoveredName,n[p].TopicsCoveredDetails,n[p].SortOrder,n[p].Active])}else{o.executeSql("UPDATE MocksSubjectTopicsCovered SET SubjectsPageID=?, TopicsCoveredName=?, TopicsCoveredDetails=?, SortOrder=?, Active=? WHERE TopicsCoveredID=?",[n[p].SubjectsPageID,n[p].TopicsCoveredName,n[p].TopicsCoveredDetails,n[p].SortOrder,n[p].Active,n[p].TopicsCoveredID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectTopicsCovered Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectstopicscoveredLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjectTopicsCovered: "+m.message)}},insertSubjectDefinitions:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectDefinitions");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksSubjectDefinitions(DefinitionsID, SubjectsPageID, DefinitionsDetails, Active) VALUES (?, ?, ?, ?)",[n[p].DefinitionsID,n[p].SubjectsPageID,n[p].DefinitionsDetails,n[p].Active])}else{o.executeSql("UPDATE MocksSubjectDefinitions SET SubjectsPageID=?, DefinitionsDetails=?, Active=? WHERE DefinitionsID=?",[n[p].SubjectsPageID,n[p].DefinitionsDetails,n[p].Active,n[p].DefinitionsID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectDefinitions Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectsdefinitionsLastUpdated",k)}})})(m)}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjectDefinitions: "+l.message)}},insertSubjectStats:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: insertSubjectStats");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksSubjectStats(StatsID, SubjectsPageID, StatsDetails, Active) VALUES (?, ?, ?, ?)",[n[p].StatsID,n[p].SubjectsPageID,n[p].StatsDetails,n[p].Active])}else{o.executeSql("UPDATE MocksSubjectStats SET SubjectsPageID=?, StatsDetails=?, Active=? WHERE StatsID=?",[n[p].SubjectsPageID,n[p].StatsDetails,n[p].Active,n[p].StatsID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertStats Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("subjectsstatsLastUpdated",k)}})})(m)}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSubjectStats: "+l.message)}},insertServicesInfo:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: insertServicesInfo");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksServicesInfo(ServicesInfoID, ServicesInfoName, ServicesInfoShortDetails, ServicesInfoLongDetails, Active) VALUES (?, ?, ?, ?, ?)",[n[p].ServicesInfoID,n[p].ServicesInfoName,n[p].ServicesInfoShortDetails,n[p].ServicesInfoLongDetails,n[p].Active])}else{o.executeSql("UPDATE MocksServicesInfo SET ServicesInfoName=?, ServicesInfoShortDetails=?, ServicesInfoLongDetails=?, Active=? WHERE ServicesInfoID=?",[n[p].ServicesInfoName,n[p].ServicesInfoShortDetails,n[p].ServicesInfoLongDetails,n[p].Active,n[p].ServicesInfoID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertServicesInfo Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("servicesinfoLastUpdated",k)}})})(m)}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error insertServicesInfo: "+l.message)}},insertInfoPage:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: insertInfoPage");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksInfoPage(InfoPageID, InfoPageName, InfoPageDetails, SortOrder, Active) VALUES (?, ?, ?, ?, ?)",[n[p].InfoPageID,n[p].InfoPageName,n[p].InfoPageDetails,n[p].SortOrder,n[p].Active])}else{o.executeSql("UPDATE MocksInfoPage SET InfoPageName=?, InfoPageDetails=?, SortOrder=?, Active=? WHERE InfoPageID=?",[n[p].InfoPageName,n[p].InfoPageDetails,n[p].SortOrder,n[p].Active,n[p].InfoPageID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertInfoPage Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("infopageLastUpdated",k)}})})(l)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertInfoPage: "+m.message)}},insertLevels:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertLevels");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksLevels(LevelID, LevelLong, LevelShort, Active) VALUES (?, ?, ?, ?)",[n[p].LevelID,n[p].LevelLong,n[p].LevelShort,n[p].Active])}else{o.executeSql("UPDATE MocksLevels SET LevelLong=?, LevelShort=?, Active=? WHERE LevelID=?",[n[p].LevelLong,n[p].LevelShort,n[p].Active,n[p].LevelID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertLevels Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("levelsLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertLevels: "+m.message)}},insertNotes:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertNotes");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksNotes(NotesID, NotesAuthorID, Name, Description, FileName, SampleFileName, Cost, SubjectID, Active) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)",[n[p].NotesID,n[p].NotesAuthorID,n[p].Name,n[p].Description,n[p].FileName,n[p].SampleFileName,n[p].Cost,n[p].SubjectID,n[p].Active])}else{o.executeSql("UPDATE MocksNotes SET NotesAuthorID=?, Name=?, Description=?, FileName=?, SampleFileName=?, Cost=?, SubjectID=?, Active=? WHERE NotesID=?",[n[p].NotesAuthorID,n[p].Name,n[p].Description,n[p].FileName,n[p].SampleFileName,n[p].Cost,n[p].SubjectID,n[p].Active,n[p].NotesID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertNotes Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("notesLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertNotes: "+m.message)}},insertNotesAuthors:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: insertNotesAuthors");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksNotesAuthors(NotesAuthorID, Name, DescriptionBrief, DescriptionDetailed, ImageFile, Active) VALUES (?, ?, ?, ?, ?, ?)",[n[p].NotesAuthorID,n[p].Name,n[p].DescriptionBrief,n[p].DescriptionDetailed,n[p].ImageFile,n[p].Active])}else{o.executeSql("UPDATE MocksNotesAuthors SET Name=?, DescriptionBrief=?, DescriptionDetailed=?, ImageFile=?, Active=? WHERE NotesAuthorID=?",[n[p].Name,n[p].DescriptionBrief,n[p].DescriptionDetailed,n[p].ImageFile,n[p].Active,n[p].NotesAuthorID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertNotesAuthors Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("notesauthorsLastUpdated",k)}})})(m)}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error insertNotesAuthors: "+l.message)}},insertOrals:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertOrals");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksOrals(OralSubjectID, SubjectID, Active) VALUES (?, ?, ?)",[n[p].OralSubjectID,n[p].SubjectID,n[p].Active])}else{o.executeSql("UPDATE MocksOrals SET SubjectID=?, Active=? WHERE OralSubjectID=?",[n[p].SubjectID,n[p].Active,n[p].OralSubjectID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertOrals Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("oralsLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertOrals: "+m.message)}},insertCorrections:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertCorrections");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksCorrections(ExamSubjectID, SubjectID, Active) VALUES (?, ?, ?)",[n[p].ExamSubjectID,n[p].SubjectID,n[p].Active])}else{o.executeSql("UPDATE MocksCorrections SET SubjectID=?, Active=? WHERE ExamSubjectID=?",[n[p].SubjectID,n[p].Active,n[p].ExamSubjectID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertCorrections Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("correctionsLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertCorrections: "+m.message)}},insertMcqs:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: insertMcqs");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksMcqs(McqSubjectID, SubjectID, IsFree, Active) VALUES (?, ?, ?, ?)",[n[p].McqSubjectID,n[p].SubjectID,n[p].IsFree,n[p].Active])}else{o.executeSql("UPDATE MocksMcqs SET SubjectID=?, IsFree=?, Active=? WHERE McqSubjectID=?",[n[p].SubjectID,n[p].IsFree,n[p].Active,n[p].McqSubjectID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertDMcqs Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("mcqsLastUpdated",k)}})})(l)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertMcqs: "+m.message)}},insertDtt:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: insertDtt:"+l.length);try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksDtt(McqSubjectID, SubjectID, IsFree, Active) VALUES (?, ?, ?, ?)",[n[p].McqSubjectID,n[p].SubjectID,n[p].IsFree,n[p].Active])}else{o.executeSql("UPDATE MocksDtt SET SubjectID=?, IsFree=?, Active=? WHERE McqSubjectID=?",[n[p].SubjectID,n[p].IsFree,n[p].Active,n[p].McqSubjectID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertDTT Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("dttLastUpdated",k)}})})(l)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertDtt: "+m.message)}},insertDttTopics:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: insertDttTopics:"+l.length);try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksDttTopics(McqTopicID, McqSubjectID, Description, Active) VALUES (?, ?, ?, ?)",[n[p].McqTopicID,n[p].McqSubjectID,n[p].Description,n[p].Active])}else{o.executeSql("UPDATE MocksDttTopics SET McqSubjectID=?, Description=?, Active=? WHERE McqTopicID=?",[n[p].McqSubjectID,n[p].Description,n[p].Active,n[p].McqTopicID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertDTTtopics Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("dtttopicsLastUpdated",k)}})})(l)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertDttTopics: "+m.message)}},insertMcqsTopics:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: insertMcqsTopics");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksMcqsTopics(McqTopicID, McqSubjectID, Description, Active) VALUES (?, ?, ?, ?)",[n[p].McqTopicID,n[p].McqSubjectID,n[p].Description,n[p].Active])}else{o.executeSql("UPDATE MocksMcqsTopics SET McqSubjectID=?, Description=?, Active=? WHERE McqTopicID=?",[n[p].McqSubjectID,n[p].Description,n[p].Active,n[p].McqTopicID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertMcqsTopics Error: "+o.message+" "+o.code)},function(){if((k!=null)&&(k>0)){MocksMobApp.Storage.saveTableLastUpdated("mcqstopicsLastUpdated",k)}})})(l)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertMcqsTopics: "+m.message)}},insertAurals:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertAurals");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksAurals(AuralSubjectID, SubjectID, Active) VALUES (?, ?, ?)",[n[p].AuralSubjectID,n[p].SubjectID,n[p].Active])}else{o.executeSql("UPDATE MocksAurals SET SubjectID=?, Active=? WHERE AuralSubjectID=?",[n[p].SubjectID,n[p].Active,n[p].AuralSubjectID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertAurals Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("auralsLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertAurals: "+m.message)}},insertAuralsExams:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertAuralsExams");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksAuralsExams(AuralExamID, AuralSubjectID, Name, LevelID, Free, Text, Active) VALUES (?, ?, ?, ?, ?, ?, ?)",[n[p].AuralExamID,n[p].AuralSubjectID,n[p].Name,n[p].LevelID,n[p].Free,n[p].Text,n[p].Active])}else{o.executeSql("UPDATE MocksAuralsExams SET AuralSubjectID=?, Name=?, LevelID=?, Free=?, Text=?, Active=? WHERE AuralExamID=?",[n[p].AuralSubjectID,n[p].Name,n[p].LevelID,n[p].Free,n[p].Text,n[p].Active,n[p].AuralExamID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertAuralsExams Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("auralsexamsLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertAuralsExams: "+m.message)}},insertStudyTreats:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertStudyTreats");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksStudyTreats(StudyTreatsID, StudyTreatsType, StudyTreatsCatID, Name, Description, ImageFileName, PremiumImageFileName, ImageWidth, ImageHeight, Url, SortOrder, EndDate, Active) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n[p].StudyTreatsID,n[p].StudyTreatsType,n[p].StudyTreatsCatID,n[p].Name,n[p].Description,n[p].ImageFileName,n[p].PremiumImageFileName,n[p].ImageWidth,n[p].ImageHeight,n[p].Url,n[p].SortOrder,n[p].EndDate,n[p].Active])}else{o.executeSql(["UPDATE MocksStudyTreats SET StudyTreatsType=?, StudyTreatsCatID=?, Name=?, Description=?, ImageFileName=?, PremiumImageFileName=?, ImageWidth=?, ImageHeight=?, Url=?, SortOrder=?, EndDate=?, Active=? WHERE StudyTreatsID=?",n[p].StudyTreatsType,n[p].StudyTreatsCatID,n[p].Name,n[p].Description,n[p].ImageFileName,n[p].PremiumImageFileName,n[p].ImageWidth,n[p].ImageHeight,n[p].Url,n[p].SortOrder,n[p].EndDate,n[p].Active,n[p].StudyTreatsID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertStudyTreats Error: "+o.message+" "+o.code)},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("studytreatsLastUpdated",l)}})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertStudyTreats: "+m.message)}},insertSummerActivities:function(k,l){DebugLogging.ConsoleLog("AppInfoOutput: insertSummerActivities");try{(function(n){i.transaction(function(o){for(var p=0;p<n.length;p++){if(n[p].IsNew==true){o.executeSql("INSERT INTO MocksSummerActivities(SummerActivitiesID, SummerActivitiesType, SummerActivitiesCatID, Name, Description, ImageFileName, PremiumImageFileName, ImageWidth, ImageHeight, Url, SortOrder, EndDate, Active) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[n[p].SummerActivitiesID,n[p].SummerActivitiesType,n[p].SummerActivitiesCatID,n[p].Name,n[p].Description,n[p].ImageFileName,n[p].PremiumImageFileName,n[p].ImageWidth,n[p].ImageHeight,n[p].Url,n[p].SortOrder,n[p].EndDate,n[p].Active])}else{o.executeSql(["UPDATE MocksSummerActivities SET SummerActivitiesType=?, SummerActivitiesCatID=?, Name=?, Description=?, ImageFileName=?, PremiumImageFileName=?, ImageWidth=?, ImageHeight=?, Url=?, SortOrder=?, EndDate=?, Active=? WHERE SummerActivitiesID=?",n[p].SummerActivitiesType,n[p].SummerActivitiesCatID,n[p].Name,n[p].Description,n[p].ImageFileName,n[p].PremiumImageFileName,n[p].ImageWidth,n[p].ImageHeight,n[p].Url,n[p].SortOrder,n[p].EndDate,n[p].Active,n[p].SummerActivitiesID])}}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: insertSummerActivities Error: "+o.message+" "+o.code);contentSyncComplete()},function(){if((l!=null)&&(l>0)){MocksMobApp.Storage.saveTableLastUpdated("summeractivitiesLastUpdated",l)}contentSyncComplete()})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error insertSummerActivities: "+m.message)}},insertClass:function(n,l,m,k){try{if(n.ClassID<0){DebugLogging.ConsoleLog("AppInfoOutput: Add new class");i.transaction(function(p){p.executeSql("INSERT INTO MocksTTClass(ClassID, ClassDay, ClassName, ClassLocation, ClassComments, ClassColour, ClassStart, ClassEnd, TimeTableType) VALUES (null, ?, ?, ?, ?, ?, ?, ?, ?)",[l,n.ClassName,n.ClassLocation,n.ClassComments,n.ClassColour,m,k,n.TimeTableType])},function(p){DebugLogging.ConsoleLog("AppInfoOutput: insertClass Error: "+p.message+" "+p.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: insertClass success")})}else{i.transaction(function(p){p.executeSql("UPDATE MocksTTClass SET ClassDay=?, ClassName=?, ClassLocation=?, ClassComments=?, ClassColour=?, ClassStart=?, ClassEnd=?, TimeTableType=? WHERE ClassID=?",[l,n.ClassName,n.ClassLocation,n.ClassComments,n.ClassColour,m,k,n.TimeTableType,n.ClassID])},function(p){DebugLogging.ConsoleLog("AppInfoOutput: insertClass Error: "+p.message+" "+p.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: insertClass success")})}}catch(o){DebugLogging.ConsoleLog("AppInfoOutput: Error insertClass: "+o.message)}},getRegSubjects:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: getRegSubjects called");try{i.transaction(function(n){var p="";var o="";if(Globals.APP_LEVEL=="lc"){p=2}else{p=1}o+="SELECT MocksSubjects.SubjectID, name ";o+="FROM MocksSubjectQualifications, MocksSubjects ";o+="WHERE MocksSubjectQualifications.SubjectID = MocksSubjects.SubjectID ";o+="AND MocksSubjectQualifications.EducationalQualificationID = "+p+" ";o+="AND MocksSubjectQualifications.Active = 'true' AND MocksSubjects.Active = 'true'";DebugLogging.ConsoleLog(o);n.executeSql(o,[],function(q,r){m(r.rows)})},function(n){DebugLogging.ConsoleLog("AppInfoOutput: getRegSubjects Error: "+n.message+"-"+n.code);return false},function(){k();return true})}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error getRegSubjects: "+l.message)}},getTTClasses:function(k,m){try{i.transaction(function(n){var o="";if((k>=0)&&(k<7)){o="SELECT ClassID, ClassDay, ClassName, ClassLocation, ClassStart, ClassEnd, ClassColour, TimeTableType FROM MocksTTClass WHERE ClassDay='"+k+"'"}else{o="SELECT ClassID, ClassDay, ClassName, ClassLocation, ClassStart, ClassEnd, ClassColour, TimeTableType FROM MocksTTClass"}n.executeSql(o,[],function(p,q){m(q.rows)})},function(n){DebugLogging.ConsoleLog("AppInfoOutput: getTTClasses Error: "+n.message+" "+n.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: getTTClasses success")})}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error getTTClasses: "+l.message)}},getTTClass:function(k,m){try{i.transaction(function(n){if(k>0){var o="SELECT ClassID, ClassDay, ClassName, ClassLocation, ClassComments, ClassStart, ClassEnd, ClassColour, TimeTableType FROM MocksTTClass WHERE ClassID='"+k+"'";n.executeSql(o,[],function(p,q){if(q.rows.length>0){m(q.rows.item(0))}})}},function(n){DebugLogging.ConsoleLog("AppInfoOutput: getTTClass Error: "+n.message+" "+n.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: getTTClass success")})}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error getTTClass: "+l.message)}},deleteClass:function(k){try{i.transaction(function(m){if(k>0){var n="DELETE FROM MocksTTClass WHERE ClassID='"+k+"'";m.executeSql(n,[],function(o,p){if(p.rows.length>0){DebugLogging.ConsoleLog("AppInfoOutput: Class Deleted")}})}},function(m){DebugLogging.ConsoleLog("AppInfoOutput: deleteClass Error: "+m.message+" "+m.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: deleteClass success")})}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error deleteClass: "+l.message)}},getSubjects:function(k,n,l){DebugLogging.ConsoleLog("AppInfoOutput: getSubjects called -> "+k);try{i.transaction(function(o){var p="";DebugLogging.ConsoleLog("AppInfoOutput: getSubjects transaction called for service "+k);switch(k){case"subjects":p="SELECT DISTINCT SubjectsPageID, SubjectName FROM MocksSubjectsPage WHERE Active='true' ORDER BY SubjectName";break;case"notes":p="SELECT DISTINCT MocksSubjects.SubjectID, MocksSubjects.name as SubjectName FROM MocksSubjects INNER JOIN MocksNotes ON MocksSubjects.SubjectID=MocksNotes.SubjectID WHERE MocksSubjects.Active='true' AND MocksNotes.Active='true' ORDER BY MocksSubjects.name";break;case"mcqs":p="SELECT DISTINCT MocksSubjects.SubjectID,  MocksMcqs.McqSubjectID, MocksSubjects.name as SubjectName, MocksMcqs.IsFree FROM MocksSubjects INNER JOIN MocksMcqs ON MocksSubjects.SubjectID=MocksMcqs.SubjectID WHERE MocksSubjects.Active='true' AND MocksMcqs.Active='true' ORDER BY MocksSubjects.name";break;case"aurals":p="SELECT DISTINCT MocksSubjects.SubjectID, MocksSubjects.name as SubjectName FROM MocksSubjects INNER JOIN MocksAurals ON MocksSubjects.SubjectID=MocksAurals.SubjectID WHERE MocksSubjects.Active='true' AND MocksAurals.Active='true' ORDER BY MocksSubjects.name";break;case"orals":p="SELECT DISTINCT MocksSubjects.SubjectID, MocksSubjects.name as SubjectName FROM MocksSubjects INNER JOIN MocksOrals ON MocksSubjects.SubjectID=MocksOrals.SubjectID WHERE MocksSubjects.Active='true' AND MocksOrals.Active='true' ORDER BY MocksSubjects.name";break;case"corrections":p="SELECT DISTINCT MocksCorrections.ExamSubjectID AS SubjectID, MocksSubjects.name as SubjectName FROM MocksSubjects INNER JOIN MocksCorrections ON MocksSubjects.SubjectID=MocksCorrections.SubjectID WHERE MocksSubjects.Active='true' AND MocksCorrections.Active='true' ORDER BY MocksSubjects.name";break;case"videos":p="SELECT DISTINCT MocksVideoLinksTopics.SubjectID AS SubjectID, MocksSubjects.name AS SubjectName FROM MocksSubjects JOIN MocksVideoLinksTopics ON (MocksSubjects.SubjectID = MocksVideoLinksTopics.SubjectID) JOIN MocksVideoLinksTopicSubheadings ON (MocksVideoLinksTopics.VideoTopicID = MocksVideoLinksTopicSubheadings.VideoTopicID) JOIN MocksVideoLinks ON (MocksVideoLinksTopicSubheadings.VideoSubheadingID = MocksVideoLinks.VideoSubheadingID) WHERE MocksSubjects.Active = 'true' AND MocksVideoLinks.Active = 'true' ";break}DebugLogging.ConsoleLog("AppInfoOutput: Subjects Query ->"+p);if(p!=""){o.executeSql(p,[],function(q,r){n(k,r.rows)})}else{DebugLogging.ConsoleLog("AppInfoOutput: getSubjects err")}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getSubjects error: "+o.message)},function(){DebugLogging.ConsoleLog("AppInfoOutput: getSubjects Success: "+k);l()})}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getsubjects: "+m.message)}},getVideoTopics:function(l,n,k){DebugLogging.ConsoleLog("AppInfoOutput: getVideoTopics Called subjectID = "+l);try{i.transaction(function(o){var p="";p="SELECT DISTINCT MocksVideoLinksTopics.VideoTopicID, MocksVideoLinksTopics.Title FROM MocksVideoLinksTopics JOIN MocksVideoLinksTopicSubheadings ON (MocksVideoLinksTopics.VideoTopicID=MocksVideoLinksTopicSubheadings.VideoTopicID) JOIN MocksVideoLinks ON (MocksVideoLinksTopicSubheadings.VideoSubheadingID=MocksVideoLinks.VideoSubheadingID) WHERE MocksVideoLinks.Active='true' AND MocksVideoLinksTopics.SubjectID="+l;o.executeSql(p,[],function(q,r){DebugLogging.ConsoleLog("AppInfoOutput: executeSql videoTopics results:"+JSON.stringify(r.rows));if(r.rows.length>0){n(r.rows)}})},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getVideoTopics Error: "+o.message+" "+o.code)},k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getVideoTopics: "+m.message)}},getVideoSubheadings:function(k,n,l){DebugLogging.ConsoleLog("AppInfoOutput: getVideoSubheadings Called topicID = "+k);try{i.transaction(function(o){var p="";p="SELECT DISTINCT MocksVideoLinksTopicSubheadings.VideoSubheadingID, MocksVideoLinksTopicSubheadings.Title FROM MocksVideoLinksTopicSubheadings JOIN MocksVideoLinks ON (MocksVideoLinksTopicSubheadings.VideoSubheadingID=MocksVideoLinks.VideoSubheadingID) WHERE MocksVideoLinks.Active='true' AND  MocksVideoLinksTopicSubheadings.VideoTopicID="+k;o.executeSql(p,[],function(q,r){if(r.rows.length>0){n(r.rows)}})},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getVideoSubheadings Error: "+o.message+" "+o.code)},l)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getVideoSubheadings: "+m.message)}},getVideoLinks:function(k,n,l){DebugLogging.ConsoleLog("AppInfoOutput: getVideoLinks Called subheadID = "+k);try{i.transaction(function(o){var p="";p="SELECT VideoLinkID, Title FROM MocksVideoLinks WHERE VideoSubheadingID="+k+" AND Active='true'";o.executeSql(p,[],function(q,r){if(r.rows.length>0){n(r.rows)}})},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getVideoLinks Error: "+o.message+" "+o.code)},l)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getVideoLinks: "+m.message)}},getSubjectPageInfo:function(l,k,n){DebugLogging.ConsoleLog("AppInfoOutput: getSubjectPageInfo called -> "+l);try{i.transaction(function(o){var p="";p="SELECT SubjectsPageID AS ID FROM MocksSubjectsPage WHERE SubjectsPageID=? AND Active='true'";DebugLogging.ConsoleLog(p);o.executeSql(p,[l],function(q,r){k(r.rows,"general")});p="SELECT StatsID AS ID FROM MocksSubjectStats WHERE SubjectsPageID=? AND Active='true'";DebugLogging.ConsoleLog(p);o.executeSql(p,[l],function(q,r){k(r.rows,"stats")});p="SELECT DefinitionsID AS ID FROM MocksSubjectDefinitions WHERE SubjectsPageID=? AND Active='true'";DebugLogging.ConsoleLog(p);o.executeSql(p,[l],function(q,r){k(r.rows,"def")});p="SELECT ExamBreakdownID AS ID, ExamBreakdownName AS Name FROM MocksSubjectsBreakdown WHERE SubjectsPageID=? AND Active='true' ORDER BY SortOrder, ExamBreakdownName";DebugLogging.ConsoleLog(p);o.executeSql(p,[l],function(q,r){k(r.rows,"exambreakdown")});p="SELECT TimeBreakdownID AS ID, TimeBreakdownName AS Name FROM MocksSubjectTimeBreakdown WHERE SubjectsPageID=? AND Active='true' ORDER BY SortOrder, TimeBreakdownName";DebugLogging.ConsoleLog(p);o.executeSql(p,[l],function(q,r){k(r.rows,"timebreakdown")});p="SELECT TopicsCoveredID AS ID, TopicsCoveredName AS Name FROM MocksSubjectTopicsCovered WHERE SubjectsPageID=? AND Active='true' ORDER BY SortOrder, TopicsCoveredName";DebugLogging.ConsoleLog(p);o.executeSql(p,[l],function(q,r){k(r.rows,"topics")});p="SELECT SubjectsPaperID AS ID, PaperName AS Name FROM MocksSubjectsPaper WHERE SubjectsPageID=? AND Active='true' ORDER BY SortOrder, PaperName";DebugLogging.ConsoleLog(p);o.executeSql(p,[l],function(q,r){k(r.rows,"paper");n()})},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getSubjectPageInfo Error: "+o.message+" "+o.code)},function(){})}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getSubjectPageInfo: "+m.message)}},getSubjectsPagePageDetails:function(l,n,k){DebugLogging.ConsoleLog("AppInfoOutput: getSubjectsPagePageDetails called -> "+l+"+"+n);try{i.transaction(function(o){var p="";switch(l){case"general":p="SELECT SubjectsPageID AS ID, ShortDescription FROM MocksSubjectsPage WHERE SubjectsPageID=?";break;case"stats":p="SELECT StatsID AS ID, StatsDetails FROM MocksSubjectStats WHERE StatsID=?";break;case"def":p="SELECT DefinitionsID AS ID, DefinitionsDetails FROM MocksSubjectDefinitions WHERE DefinitionsID=?";break;case"timebreakdown":p="SELECT TimeBreakdownID AS ID, TimeBreakdownName, TimeBreakdownDetails FROM MocksSubjectTimeBreakdown WHERE TimeBreakdownID=?";break;case"topics":p="SELECT TopicsCoveredID AS ID, TopicsCoveredName, TopicsCoveredDetails FROM MocksSubjectTopicsCovered WHERE TopicsCoveredID=?";break;case"paper":p="SELECT SubjectsPaperID AS ID, PaperName, Marks, NoQuestionsToAnswer, NoQuestions, Duration, ShortDescription FROM MocksSubjectsPaper WHERE SubjectsPaperID=?";break}DebugLogging.ConsoleLog("AppInfoOutput: Subjects Query ->"+p);if(p!=""){o.executeSql(p,[n],function(q,r){var s=new Array();if(r.rows.length>0){s.push(r.rows.item(0))}k(s,null)})}else{DebugLogging.ConsoleLog("AppInfoOutput: getSubjectsPagePageDetails err")}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getSubjectsPagePageDetails Error: "+o.message+" "+o.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: getSubjectsPagePageDetails Success")})}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getSubjectsPagePageDetails: "+m.message)}},getInfoPageDetails:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: getInfoPageDetails called -> "+m);try{i.transaction(function(n){var o="";o="SELECT InfoPageID, InfoPageName, InfoPageDetails, SortOrder, Active FROM MocksInfoPage WHERE InfoPageID=?";if(o!=""){n.executeSql(o,[m],function(p,q){var r=new Array();if(q.rows.length>0){r.push(q.rows.item(0))}k(r,null)})}else{DebugLogging.ConsoleLog("AppInfoOutput: getInfoPageDetails err")}},function(n){DebugLogging.ConsoleLog("AppInfoOutput: getInfoPageDetails Error: "+n.message+" "+n.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: getInfoPageDetails Success")})}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error getInfoPageDetails: "+l.message)}},getSubjectPagePapersInfo:function(l,k,n){DebugLogging.ConsoleLog("AppInfoOutput: getSubjectPagePapersInfo called -> "+l);try{i.transaction(function(o){var p="";p="SELECT SubjectsPaperID, PaperName, Marks, Duration, NoQuestions, NoQuestionsToAnswer, LongDescription, ShortDescription FROM MocksSubjectsPaper WHERE SubjectsPageID="+l+" AND Active='true' ORDER BY SortOrder";DebugLogging.ConsoleLog(p);o.executeSql(p,[],function(q,r){k(r.rows)})},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getSubjectPagePapersInfo Error: "+o.message+" "+o.code)},n)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getSubjectPagePapersInfo: "+m.message)}},getSubjectPageBreakdownInfo:function(n,k,m){DebugLogging.ConsoleLog("AppInfoOutput: getSubjectPageBreakdownInfo called -> "+n);try{i.transaction(function(o){var p="";p="SELECT ExamBreakdownID, ExamBreakdownName FROM MocksSubjectsBreakdown WHERE SubjectsPageID="+n+" AND Active='true' ORDER BY SortOrder";DebugLogging.ConsoleLog(p);o.executeSql(p,[],function(q,r){k(r.rows)})},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getSubjectPageBreakdownInfo Error: "+o.message+" "+o.code)},m)}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error getSubjectPageBreakdownInfo: "+l.message)}},getExamBreakdownInfo:function(l,k,n){DebugLogging.ConsoleLog("AppInfoOutput: getExamBreakdownInfo called -> "+l);try{i.transaction(function(o){var p="";p="SELECT ExamBreakdownID, ExamBreakdownName, ExamBreakdownDetails FROM MocksSubjectsBreakdown WHERE ExamBreakdownID="+l+" AND Active='true'";DebugLogging.ConsoleLog(p);o.executeSql(p,[],function(q,r){if(r.rows.length>0){k(r.rows.item(0))}})},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getExamBreakdownInfo Error: "+o.message+" "+o.code)},n)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getExamBreakdownInfo: "+m.message)}},getServiceSubjectDetails:function(k,m,l,o){DebugLogging.ConsoleLog("AppInfoOutput: getServiceSubjectDetails called -> "+k+"+"+m);try{i.transaction(function(p){var q="";switch(k){case"subjects":q="SELECT DISTINCT SubjectID, name as SubjectName FROM MocksSubjects WHERE Active='true'";break;case"notesDetails":q="SELECT MocksSubjects.name as SubjectName, MocksNotes.NotesID, MocksNotes.Name as NotesName FROM MocksSubjects, MocksNotes WHERE MocksSubjects.SubjectID=MocksNotes.SubjectID AND MocksNotes.Active='true' AND MocksNotes.SubjectID='"+m+"'";break;case"mcqsDetails":q="SELECT MocksMcqs.McqSubjectID, MocksMcqsTopics.McqTopicID, MocksMcqsTopics.Description FROM MocksMcqs, MocksMcqsTopics WHERE MocksMcqs.McqSubjectID=MocksMcqsTopics.McqSubjectID AND MocksMcqs.Active='true' AND MocksMcqsTopics.Active='true' AND MocksMcqs.McqSubjectID='"+m+"' ORDER BY MocksMcqsTopics.Description";break;case"mcqsQuizSelection":q="SELECT MocksMcqs.McqSubjectID, MocksMcqsTopics.McqTopicID, MocksMcqsTopics.Description FROM MocksMcqs, MocksMcqsTopics WHERE MocksMcqs.McqSubjectID=MocksMcqsTopics.McqSubjectID AND MocksMcqs.Active='true' AND MocksMcqsTopics.Active='true' AND MocksMcqsTopics.McqSubjectID='"+m+"' ORDER BY MocksMcqsTopics.Description";break;case"dtt":q="SELECT MocksSubjects.name as SubjectName, MocksDtt.McqSubjectID, MocksDtt.IsFree, MocksDttTopics.McqTopicID, MocksDttTopics.Description FROM MocksDtt, MocksDttTopics, MocksSubjects WHERE MocksDtt.SubjectID=MocksSubjects.SubjectID AND MocksDtt.McqSubjectID=MocksDttTopics.McqSubjectID AND MocksDtt.Active='true' AND MocksDttTopics.Active='true' AND MocksDtt.McqSubjectID='"+m+"' ORDER BY MocksDttTopics.Description";break;case"auralsDetails":q="SELECT MocksAurals.AuralSubjectID, MocksSubjects.name as SubjectName, MocksAuralsExams.AuralExamID, MocksAuralsExams.Name AS AuralExamName, MocksAuralsExams.Free, MocksLevels.LevelLong FROM MocksAurals, MocksAuralsExams, MocksLevels, MocksSubjects WHERE MocksAurals.SubjectID=MocksSubjects.SubjectID AND MocksAurals.AuralSubjectID=MocksAuralsExams.AuralSubjectID AND MocksLevels.LevelID=MocksAuralsExams.LevelID AND MocksAurals.Active='true' AND MocksAuralsExams.Active='true' AND MocksAurals.SubjectID='"+m+"'";break}DebugLogging.ConsoleLog("AppInfoOutput: Subjects Query ->"+q);if(q!=""){p.executeSql(q,[],function(r,s){l(s.rows)})}else{DebugLogging.ConsoleLog("AppInfoOutput: getServiceSubjectDetails err")}},function(p){DebugLogging.ConsoleLog("AppInfoOutput: getServiceSubjectDetails Error: "+p.message+" "+p.code)},o)}catch(n){DebugLogging.ConsoleLog("AppInfoOutput: Error getServiceSubjectDetails: "+n.message)}},getServicesIntro:function(k,m){DebugLogging.ConsoleLog("AppInfoOutput: getServicesIntro called:"+k);try{(function(n){i.transaction(function(o){var p="";p="SELECT ServicesInfoName, ServicesInfoShortDetails, ServicesInfoLongDetails FROM MocksServicesInfo WHERE Active<>0 AND ServicesInfoName='"+n+"'";DebugLogging.ConsoleLog(p);o.executeSql(p,[],function(q,r){if(r.rows.length>0){m(r.rows.item(0))}})},function(o){DebugLogging.ConsoleLog("AppInfoOutput: getServicesIntro Error: "+o.message+"-"+o.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: getServicesIntro Success")})})(k)}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error getServicesIntro: "+l.message)}},getInfoPagesList:function(m,k){DebugLogging.ConsoleLog("AppInfoOutput: getInfoPages called");try{i.transaction(function(n){var o="";o="SELECT InfoPageID, InfoPageName FROM MocksInfoPage WHERE Active<>0 ORDER BY SortOrder";DebugLogging.ConsoleLog(o);n.executeSql(o,[],function(p,q){m(q.rows)})},function(n){DebugLogging.ConsoleLog("AppInfoOutput: getInfoPages Error: "+n.message+"-"+n.code)},function(){k()})}catch(l){DebugLogging.ConsoleLog("AppInfoOutput: Error getInfoPages: "+l.message)}},getStudyTreatsDetails:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: getStudyTreatsDetails called");try{i.transaction(function(n){var o="";if((k==null)||(k=="undefined")||(typeof(k)=="undefined")){o="SELECT StudyTreatsID, StudyTreatsType, StudyTreatsCatID, Name, Description, ImageFileName, PremiumImageFileName, ImageWidth, ImageHeight, Url, EndDate, Active FROM MocksStudyTreats WHERE Active='true' Order by StudyTreatsType, SortOrder"}else{o="SELECT StudyTreatsID, StudyTreatsType, StudyTreatsCatID, Name, Description, ImageFileName, PremiumImageFileName, ImageWidth, ImageHeight, Url, EndDate, Active FROM MocksStudyTreats WHERE StudyTreatsID='"+k+"' AND Active='true'"}if(o!=""){n.executeSql(o,[],function(p,q){l(q.rows)})}else{DebugLogging.ConsoleLog("AppInfoOutput: getStudyTreatsDetails err")}},function(n){DebugLogging.ConsoleLog("AppInfoOutput: getStudyTreatsDetails Error: "+n.message+"-"+n.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: getStudyTreatsDetails Success ")})}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getStudyTreatsDetails: "+m.message)}},getSummerActivitiesDetails:function(l,k){DebugLogging.ConsoleLog("AppInfoOutput: getSummerActivitiesDetails called");try{i.transaction(function(n){var o="";if((k==null)||(k=="undefined")||(typeof(k)=="undefined")){o="SELECT SummerActivitiesID, SummerActivitiesType, SummerActivitiesCatID, Name, Description, ImageFileName, PremiumImageFileName, ImageWidth, ImageHeight, Url, EndDate, Active FROM MocksSummerActivities WHERE Active='true' Order by SummerActivitiesType, SortOrder"}else{o="SELECT SummerActivitiesID, SummerActivitiesType, SummerActivitiesCatID, Name, Description, ImageFileName, PremiumImageFileName, ImageWidth, ImageHeight, Url, EndDate, Active FROM MocksSummerActivities WHERE SummerActivitiesID='"+k+"' AND Active='true'"}if(o!=""){n.executeSql(o,[],function(p,q){l(q.rows)})}else{DebugLogging.ConsoleLog("AppInfoOutput: getSummerActivitiesDetails err")}},function(n){DebugLogging.ConsoleLog("AppInfoOutput: getSummerActivitiesDetails Error: "+n.message+"-"+n.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: getSummerActivitiesDetails Success ")})}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getSummerActivitiesDetails: "+m.message)}},getNotesDetails:function(k,n,l){DebugLogging.ConsoleLog("AppInfoOutput: getNotesDetails called:"+k);try{(function(o){i.transaction(function(p){var q="";q="SELECT MocksSubjects.name as SubjectName, MocksNotes.NotesID, MocksNotesAuthors.Name as AuthorName, MocksNotes.Name as NotesName, MocksNotes.Description, MocksNotes.Cost, MocksNotesAuthors.DescriptionBrief AS AuthorDesc FROM MocksSubjects, MocksNotes, MocksNotesAuthors WHERE MocksSubjects.SubjectID=MocksNotes.SubjectID AND MocksNotesAuthors.NotesAuthorID=MocksNotes.NotesAuthorID AND MocksNotes.Active='true' AND MocksNotes.NotesID='"+o+"'";DebugLogging.ConsoleLog(q);p.executeSql(q,[],function(r,s){if(s.rows.length>0){n(s.rows.item(0))}})},function(p){DebugLogging.ConsoleLog("AppInfoOutput: getNotesDetails Error: "+p.message+"-"+p.code)},function(){DebugLogging.ConsoleLog("AppInfoOutput: getNotesDetails Success")})})(k)}catch(m){DebugLogging.ConsoleLog("AppInfoOutput: Error getNotesDetails: "+m.message)}},IsServiceForSubject:function(k,m,l){DebugLogging.ConsoleLog("AppInfoOutput: IsServiceForSubject called -> "+k+"+"+m);try{i.transaction(function(o){var p="";switch(k){case"notes":p="SELECT MocksNotes.SubjectID FROM MocksNotes JOIN MocksSubjectsPageSubject ON (MocksNotes.SubjectID=MocksSubjectsPageSubject.SubjectsID) WHERE MocksNotes.Active='true' AND MocksSubjectsPageSubject.SubjectsPageID="+m+"";break;case"mcqs":p="SELECT MocksMcqs.SubjectID, MocksMcqs.McqSubjectID FROM MocksMcqs JOIN MocksSubjectsPageSubject ON (MocksMcqs.SubjectID=MocksSubjectsPageSubject.SubjectsID) WHERE MocksMcqs.Active='true' AND MocksSubjectsPageSubject.SubjectsPageID="+m+"";break;case"aurals":p="SELECT MocksAurals.SubjectID FROM MocksAurals JOIN MocksSubjectsPageSubject ON (MocksAurals.SubjectID=MocksSubjectsPageSubject.SubjectsID) WHERE MocksAurals.Active='true' AND MocksSubjectsPageSubject.SubjectsPageID="+m+"";break;case"orals":p="SELECT MocksOrals.SubjectID FROM MocksOrals JOIN MocksSubjectsPageSubject ON (MocksOrals.SubjectID=MocksSubjectsPageSubject.SubjectsID) WHERE MocksOrals.Active='true' AND MocksSubjectsPageSubject.SubjectsPageID="+m+"";break;case"corrections":p="SELECT MocksCorrections.SubjectID FROM MocksCorrections JOIN MocksSubjectsPageSubject ON (MocksCorrections.SubjectID=MocksSubjectsPageSubject.SubjectsID) WHERE MocksCorrections.Active='true' AND MocksSubjectsPageSubject.SubjectsPageID="+m+"";break;case"videos":p="SELECT MocksVideoLinksTopics.SubjectID FROM MocksVideoLinksTopics JOIN MocksSubjectsPageSubject ON (MocksSubjectsPageSubject.SubjectsID=MocksVideoLinksTopics.SubjectID) JOIN MocksVideoLinksTopicSubheadings ON (MocksVideoLinksTopics.VideoTopicID=MocksVideoLinksTopicSubheadings.VideoTopicID) JOIN MocksVideoLinks ON (MocksVideoLinksTopicSubheadings.VideoSubheadingID=MocksVideoLinks.VideoSubheadingID) WHERE MocksVideoLinks.Active='true' AND MocksSubjectsPageSubject.SubjectsPageID="+m+"";break}DebugLogging.ConsoleLog("AppInfoOutput: Subjects Query ->"+p);if(p!=""){o.executeSql(p,[],function(q,r){l(r.rows,k)})}else{DebugLogging.ConsoleLog("AppInfoOutput: IsServiceForSubject err")}},function(o){DebugLogging.ConsoleLog("AppInfoOutput: IsServiceForSubject Error: "+o.message+" "+o.code)})}catch(n){DebugLogging.ConsoleLog("AppInfoOutput: Error IsServiceForSubject: "+n.message)}}}})()};return a})();

var key=null;function RSAKeyPair(){this.e=biFromHex("010001");this.d=biFromHex("");this.m=biFromHex("EFAF7C9ACAB1359BE9A8C483830E067FFC7A7F3700EDF7B94F2126D2F07936A00A29DBD43043FD10990BDA06FB7FE1D9A8FECB9BC831726CF849AC8FD1CEA692ECF6424FB56BF06437EF1C52B9591FD48FEE02007B2732A971CE3841F4CF3FCD81C16B14EA03EB2735A8E3AC992EC05D2B56D15159C8D68FF621F49A187A7259");this.digitSize=2*biHighIndex(this.m)+2;this.chunkSize=this.digitSize-11;this.radix=16;this.barrett=new BarrettMu(this.m)}function twoDigit(a){return(a<10?"0":"")+String(a)}function encryptedString(t){if(key==null){setMaxDigits(130);key=new RSAKeyPair()}if(key.chunkSize>key.digitSize-11){return"Error"}var p=new Array();var c=t.length;var g=0;while(g<c){p[g]=t.charCodeAt(g);g++}var h=p.length;var u="";var f,e,d;for(g=0;g<h;g+=key.chunkSize){d=new BigInt();f=0;var o;var n=(g+key.chunkSize)>h?h%key.chunkSize:key.chunkSize;var l=new Array();for(o=0;o<n;o++){l[o]=p[g+n-1-o]}l[n]=0;var m=Math.max(8,key.digitSize-3-n);for(o=0;o<m;o++){l[n+1+o]=Math.floor(Math.random()*254)+1}l[key.digitSize-2]=2;l[key.digitSize-1]=0;for(e=0;e<key.digitSize;++f){d.digits[f]=l[e++];d.digits[f]+=l[e++]<<8}var r=key.barrett.powMod(d,key.e);var q=key.radix==16?biToHex(r):biToString(r,key.radix);u+=q+" "}return u.substring(0,u.length-1)}function decryptedString(e){if(key==null){setMaxDigits(130);key=new RSAKeyPair()}var g=e.split(" ");var a="";var d,c,f;for(d=0;d<g.length;++d){var b;if(key.radix==16){b=biFromHex(g[d])}else{b=biFromString(g[d],key.radix)}f=key.barrett.powMod(b,key.d);for(c=0;c<=biHighIndex(f);++c){a+=String.fromCharCode(f.digits[c]&255,f.digits[c]>>8)}}if(a.charCodeAt(a.length-1)==0){a=a.substring(0,a.length-1)}return a};

(function(d){function z(K,h,G){var I=this,M=G,J,L,l,H={},m=false;this.settings=M;this.values=null;this.val=null;this.temp=null;this.setDefaults=function(N){d.extend(i,N)};this.enable=function(){M.disabled=false;if(d(K).is(":input")){d(K).prop("disabled",false)}};this.scroll=function(P,S,R,T,N){P.attr("style",(R?(w+"-transition:all "+R.toFixed(1)+"s ease-out;"):"")+(k?(w+"-transform:translate3d(0,"+(S*y)+"px,0);"):("top:"+(S*y)+"px;")));function Q(V,U,X,W){return X*Math.sin(V/W*(Math.PI/2))+U}if(R){var O=0;clearInterval(H[N]);H[N]=setInterval(function(){O+=0.1;P.data("pos",Math.round(Q(O,T,S-T,R)));if(O>=R){clearInterval(H[N]);P.data("pos",S)}},100)}else{P.data("pos",S)}};this.disable=function(){M.disabled=true;if(d(K).is(":input")){d(K).prop("disabled",true)}};this.formatDate=function(W,O,P){if(!O){return null}var X=d.extend({},this.settings,P),U=function(Y){var Z=0;while(S+1<W.length&&W.charAt(S+1)==Y){Z++;S++}return Z},R=function(Z,aa,Y){var ab=""+aa;if(U(Z)){while(ab.length<Y){ab="0"+ab}}return ab},Q=function(Y,ab,aa,Z){return(U(Y)?Z[ab]:aa[ab])},N="",V=false;for(var S=0;S<W.length;S++){if(V){if(W.charAt(S)=="'"&&!U("'")){V=false}else{N+=W.charAt(S)}}else{switch(W.charAt(S)){case"d":N+=R("d",O.getDate(),2);break;case"D":N+=Q("D",O.getDay(),X.dayNamesShort,X.dayNames);break;case"o":N+=R("o",(O.getTime()-new Date(O.getFullYear(),0,0).getTime())/86400000,3);break;case"m":N+=R("m",O.getMonth()+1,2);break;case"M":N+=Q("M",O.getMonth(),X.monthNamesShort,X.monthNames);break;case"y":N+=(U("y")?O.getFullYear():(O.getYear()%100<10?"0":"")+O.getYear()%100);break;case"h":var T=O.getHours();N+=R("h",(T>12?(T-12):(T==0?12:T)),2);break;case"H":N+=R("H",O.getHours(),2);break;case"i":N+=R("i",O.getMinutes(),2);break;case"s":N+=R("s",O.getSeconds(),2);break;case"a":N+=O.getHours()>11?"pm":"am";break;case"A":N+=O.getHours()>11?"PM":"AM";break;case"'":if(U("'")){N+="'"}else{V=true}break;default:N+=W.charAt(S)}}}return N};this.parseDate=function(ad,W,af){var R=new Date();if(!ad||!W){return R}W=(typeof W=="object"?W.toString():W+"");var T=d.extend({},this.settings,af),O=R.getFullYear(),ah=R.getMonth()+1,ab=R.getDate(),Q=-1,ae=R.getHours(),X=R.getMinutes(),P=R.getSeconds(),U=-1,aa=false,V=function(aj){var ak=(N+1<ad.length&&ad.charAt(N+1)==aj);if(ak){N++}return ak},ai=function(ak){V(ak);var al=(ak=="@"?14:(ak=="!"?20:(ak=="y"?4:(ak=="o"?3:2))));var am=new RegExp("^\\d{1,"+al+"}");var aj=W.substr(ac).match(am);if(!aj){throw"Missing number at position "+ac}ac+=aj[0].length;return parseInt(aj[0],10)},S=function(ak,am,aj){var an=(V(ak)?aj:am);for(var al=0;al<an.length;al++){if(W.substr(ac,an[al].length).toLowerCase()==an[al].toLowerCase()){ac+=an[al].length;return al+1}}throw"Unknown name at position "+ac},Z=function(){if(W.charAt(ac)!=ad.charAt(N)){throw"Unexpected literal at position "+ac}ac++},ac=0;for(var N=0;N<ad.length;N++){if(aa){if(ad.charAt(N)=="'"&&!V("'")){aa=false}else{Z()}}else{switch(ad.charAt(N)){case"d":ab=ai("d");break;case"D":S("D",T.dayNamesShort,T.dayNames);break;case"o":Q=ai("o");break;case"m":ah=ai("m");break;case"M":ah=S("M",T.monthNamesShort,T.monthNames);break;case"y":O=ai("y");break;case"H":ae=ai("H");break;case"h":ae=ai("h");break;case"i":X=ai("i");break;case"s":P=ai("s");break;case"a":U=S("a",["am","pm"],["am","pm"])-1;break;case"A":U=S("A",["am","pm"],["am","pm"])-1;break;case"'":if(V("'")){Z()}else{aa=true}break;default:Z()}}}if(O<100){O+=new Date().getFullYear()-new Date().getFullYear()%100+(O<=T.shortYearCutoff?0:-100)}if(Q>-1){ah=1;ab=Q;do{var Y=32-new Date(O,ah-1,32).getDate();if(ab<=Y){break}ah++;ab-=Y}while(true)}ae=(U==-1)?ae:((U&&ae<12)?(ae+12):(!U&&ae==12?0:ae));var ag=new Date(O,ah-1,ab,ae,X,P);if(ag.getFullYear()!=O||ag.getMonth()+1!=ah||ag.getDate()!=ab){throw"Invalid date"}return ag};this.setValue=function(O){if(O==undefined){O=true}var N=this.formatResult();this.val=N;this.values=this.temp.slice(0);if(O&&d(K).is(":input")){d(K).val(N).change()}};this.getDate=function(){var O=this.values;if(M.preset=="date"){return new Date(O[J],O[L],O[l])}if(M.preset=="time"){var N=(M.ampm)?((O[M.seconds?3:2]=="PM"&&(O[0]-0)<12)?(O[0]-0+12):(O[M.seconds?3:2]=="AM"&&(O[0]==12)?0:O[0])):O[0];return new Date(1970,0,1,N,O[1],M.seconds?O[2]:null)}if(M.preset=="datetime"){var N=(M.ampm)?((O[M.seconds?6:5]=="PM"&&(O[3]-0)<12)?(O[3]-0+12):(O[M.seconds?6:5]=="AM"&&(O[3]==12)?0:O[3])):O[3];return new Date(O[J],O[L],O[l],N,O[4],M.seconds?O[5]:null)}};this.setDate=function(P,O){if(M.preset.match(/date/i)){this.temp[J]=P.getFullYear();this.temp[L]=P.getMonth();this.temp[l]=P.getDate()}if(M.preset=="time"){var N=P.getHours();this.temp[0]=(M.ampm)?(N>12?(N-12):(N==0?12:N)):N;this.temp[1]=P.getMinutes();if(M.seconds){this.temp[2]=P.getSeconds()}if(M.ampm){this.temp[M.seconds?3:2]=N>11?"PM":"AM"}}if(M.preset=="datetime"){var N=P.getHours();this.temp[3]=(M.ampm)?(N>12?(N-12):(N==0?12:N)):N;this.temp[4]=P.getMinutes();if(M.seconds){this.temp[5]=P.getSeconds()}if(M.ampm){this.temp[M.seconds?6:5]=N>11?"PM":"AM"}}this.setValue(O)};this.parseValue=function(R){if(this.preset){var N=[];if(M.preset=="date"){try{var Q=this.parseDate(M.dateFormat,R,M)}catch(P){var Q=new Date()}N[J]=Q.getFullYear();N[L]=Q.getMonth();N[l]=Q.getDate()}else{if(M.preset=="time"){try{var Q=this.parseDate(M.timeFormat,R,M)}catch(P){var Q=new Date()}var O=Q.getHours();N[0]=(M.ampm)?(O>12?(O-12):(O==0?12:O)):O;N[1]=Q.getMinutes();if(M.seconds){N[2]=Q.getSeconds()}if(M.ampm){N[M.seconds?3:2]=O>11?"PM":"AM"}}else{if(M.preset=="datetime"){try{var Q=this.parseDate(M.dateFormat+" "+M.timeFormat,R,M)}catch(P){var Q=new Date()}var O=Q.getHours();N[J]=Q.getFullYear();N[L]=Q.getMonth();N[l]=Q.getDate();N[3]=(M.ampm)?(O>12?(O-12):(O==0?12:O)):O;N[4]=Q.getMinutes();if(M.seconds){N[5]=Q.getSeconds()}if(M.ampm){N[M.seconds?6:5]=O>11?"PM":"AM"}}}}return N}return M.parseValue(R,this)};this.formatResult=function(){var O=this.temp;if(this.preset){if(M.preset=="date"){return this.formatDate(M.dateFormat,new Date(O[J],O[L],O[l]),M)}else{if(M.preset=="datetime"){var N=(M.ampm)?((O[M.seconds?6:5]=="PM"&&(O[3]-0)<12)?(O[3]-0+12):(O[M.seconds?6:5]=="AM"&&(O[3]==12)?0:O[3])):O[3];return this.formatDate(M.dateFormat+" "+M.timeFormat,new Date(O[J],O[L],O[l],N,O[4],M.seconds?O[5]:null),M)}else{if(M.preset=="time"){var N=(M.ampm)?((O[M.seconds?3:2]=="PM"&&(O[0]-0)<12)?(O[0]-0+12):(O[M.seconds?3:2]=="AM"&&(O[0]==12)?0:O[0])):O[0];return this.formatDate(M.timeFormat,new Date(1970,0,1,N,O[1],M.seconds?O[2]:null),M)}}}}return M.formatResult(O)};this.validate=function(O){if(this.preset&&M.preset.match(/date/i)&&((O==J)||(O==L)||(O==-1))){var P=32-new Date(this.temp[J],this.temp[L],32).getDate()-1;var N=d("ul:eq("+l+")",h);d("li",N).show();d("li:gt("+P+")",N).hide();if(this.temp[l]>P){this.scroll(N,s-P-1);this.temp[l]=d("li:eq("+P+")",N).data("val")}}else{M.validate(O)}};this.hide=function(){if(M.onClose(this.val,this)===false){return false}d(".dwtd").prop("disabled",false).removeClass("dwtd");d(K).blur();h.hide();n.hide();m=false;if(this.preset){M.wheels=null}d(window).unbind("resize.dw")};this.show=function(){if(M.disabled||m){return false}M.beforeShow(K,this);y=M.height;s=Math.round(M.rows/2);a=this;this.init();if(this.preset){M.wheels=new Array();if(M.preset.match(/date/i)){var N={};for(var P=0;P<3;P++){if(P==J){N[M.yearText]={};for(var S=M.startYear;S<=M.endYear;S++){N[M.yearText][S]=M.dateOrder.search(/yy/i)<0?S.toString().substr(2,2):S.toString()}}else{if(P==L){N[M.monthText]={};for(var S=0;S<12;S++){N[M.monthText][S]=(M.dateOrder.search(/MM/)<0?(M.dateOrder.search(/M/)<0?(M.dateOrder.search(/mm/)<0?(S+1):(S<9)?("0"+(S+1)):(S+1)):M.monthNamesShort[S]):M.monthNames[S])}}else{if(P==l){N[M.dayText]={};for(var S=1;S<32;S++){N[M.dayText][S]=M.dateOrder.search(/dd/i)<0?S:(S<10)?("0"+S):S}}}}}M.wheels.push(N)}if(M.preset.match(/time/i)){M.stepHour=(M.stepHour<1)?1:parseInt(M.stepHour);M.stepMinute=(M.stepMinute<1)?1:parseInt(M.stepMinute);M.stepSecond=(M.stepSecond<1)?1:parseInt(M.stepSecond);var N={};N[M.hourText]={};for(var S=(M.ampm?1:0);S<(M.ampm?13:24);S+=M.stepHour){N[M.hourText][S]=(S<10)?("0"+S):S}N[M.minuteText]={};for(var S=0;S<60;S+=M.stepMinute){N[M.minuteText][S]=(S<10)?("0"+S):S}if(M.seconds){N[M.secText]={};for(var S=0;S<60;S+=M.stepSecond){N[M.secText][S]=(S<10)?("0"+S):S}}if(M.ampm){N[M.ampmText]={};N[M.ampmText]["AM"]="AM";N[M.ampmText]["PM"]="PM"}M.wheels.push(N)}}d(".dwc",h).remove();for(var S=0;S<M.wheels.length;S++){var O=d('<div class="dwc'+(M.mode=="clickpick"?" dwpm":"")+'"><div class="dwwc dwrc"><div class="clear" style="clear:both;"></div></div>').insertBefore(d(".dwbc",h));for(var R in M.wheels[S]){var T=d(".dwwc .clear",O);var N=d('<div class="dwwl dwrc">'+(M.mode=="clickpick"?'<div class="dwwb dwwbp">+</div><div class="dwwb dwwbm">&ndash;</div>':"")+'<div class="dwl">'+R+'</div><div class="dww dwrc"><ul></ul><div class="dwwo"></div></div><div class="dwwol"></div></div>').insertBefore(T);for(var Q in M.wheels[S][R]){d('<li class="val_'+Q+'">'+M.wheels[S][R][Q]+"</li>").data("val",Q).appendTo(d("ul",N))}}}d(".dww ul",h).each(function(V){var U=d("li",this).index(d("li.val_"+I.temp[V],this));while((U<0)&&(--I.temp[V]>=0)){U=d("li",this).index(d("li.val_"+I.temp[V],this))}I.scroll(d(this),s-(U<0?0:U)-1)});d(".dwv",h).html(this.formatResult());I.validate(-1);d("#dw_set",h).text(M.setText).unbind().bind("click",function(U){I.setValue();M.onSelect(I.val,a);I.hide();return false});d("#dw_cancel",h).text(M.cancelText).unbind().bind("click",function(U){M.onCancel(I.val,a);I.hide();return false});d(":input:not(:disabled)").addClass("dwtd");d(":input").prop("disabled",true);n.show();h.attr("class","dw "+M.theme).show();m=true;d(".dww, .dwwl",h).height(M.rows*y);d(".dww",h).each(function(){d(this).width(d(this).parent().width()<M.width?M.width:d(this).parent().width())});d(".dwbc a",h).attr("class",M.btnClass);d(".dww li, .dwwb",h).css({height:y,lineHeight:y+"px"});d(".dwwc",h).each(function(){var U=0;d(".dwwl",this).each(function(){U+=d(this).outerWidth(true)});d(this).width(U)});d(".dwc",h).each(function(){d(this).width(d(".dwwc",this).outerWidth(true))});this.pos();d(window).bind("resize.dw",function(){I.pos()})};this.pos=function(){var N=0,Q=0,T=d(window).width(),P=d(window).height(),R=d(window).scrollTop(),O,S;d(".dwc",h).each(function(){O=d(this).outerWidth(true);N+=O;Q=(O>Q)?O:Q});O=N>T?Q:N;h.width(O);O=h.outerWidth();S=h.outerHeight();h.css({left:(T-O)/2,top:R+(P-S)/2});n.height(0);n.height(d(document).height())};this.init=function(){var N=M.dateOrder.search(/y/i),O=M.dateOrder.search(/m/i),P=M.dateOrder.search(/d/i);J=N<O?(N<P?0:1):(N<P?1:2);L=O<N?(O<P?0:1):(O<P?1:2);l=P<N?(P<O?0:1):(P<O?1:2);this.preset=(M.wheels===null);this.temp=((d(K).is("input")&&this.val!==null&&this.val!=d(K).val())||this.values===null)?this.parseValue(d(K).val()?d(K).val():""):this.values.slice(0);this.setValue(false)};this.init();if(d(K).is(":input")&&M.showOnFocus){d(K).data("dwro",d(K).prop("readonly")).prop("readonly",true)}d(K).addClass("scroller").unbind("focus.dw").bind("focus.dw",function(N){if(M.showOnFocus){I.show()}})}function F(l){for(var h in l){if(D[l[h]]!==undefined){return true}}return false}function b(){var h=["Webkit","Moz","O","ms"];for(var l in h){if(F([h[l]+"Transform"])){return"-"+h[l].toLowerCase()}}return""}var o,n,y,s,u,a,j={},C=new Date(),x=C.getTime(),r=false,E=null,e,t,p,c,f,D=document.createElement(D).style,k=F(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"])&&"webkitPerspective" in document.documentElement.style,w=b(),g=("ontouchstart" in window),v=g?"touchstart":"mousedown",B=g?"touchmove":"mousemove",q=g?"touchend":"mouseup",i={width:80,height:40,rows:3,disabled:false,showOnFocus:true,wheels:null,theme:"",mode:"scroller",preset:"date",dateFormat:"mm/dd/yy",dateOrder:"mmddy",ampm:true,seconds:false,timeFormat:"hh:ii A",startYear:C.getFullYear()-100,endYear:C.getFullYear()+1,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortYearCutoff:"+10",monthText:"Month",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",secText:"Seconds",ampmText:"&nbsp;",setText:"Set",cancelText:"Cancel",btnClass:"dwb",stepHour:1,stepMinute:1,stepSecond:1,beforeShow:function(){},onClose:function(){},onSelect:function(){},onCancel:function(){},formatResult:function(m){var h="";for(var l=0;l<m.length;l++){h+=(l>0?" ":"")+m[l]}return h},parseValue:function(m,I){var L=I.settings.wheels,J=m.split(" "),h=[],K=0;for(var H=0;H<L.length;H++){for(var G in L[H]){K++;for(var M in L[H][G]){h.push(M);break}}}return J.length==K?J:h},validate:function(){return true}},A={init:function(L){if(L===undefined){L={}}var H={};if(L.theme=="ios"){H.dateOrder="MMdyy";H.rows=5;H.height=30;H.width=55}if(L.mode=="clickpick"){H.height=50;H.rows=3}var l=d.extend({},i,H,L),h=false,J=false;if(d(".dw").length){n=d(".dwo");o=d(".dw")}else{n=d('<div class="dwo"></div>').hide().appendTo("body");o=d('<div class="dw"><div class="dwv">&nbsp;</div><div class="dwbc" style="clear:both;"><span class="dwbw dwb-s"><a id="dw_set" href="#"></a></span><span class="dwbw dwb-c"><a id="dw_cancel" href="#"></a></span></div></div>');o.hide().appendTo("body");function K(M){return g?M.originalEvent.changedTouches[0].pageY:M.pageY}function G(N,P,O,Q){var M=d("ul",o).index(N);P=P>(s-1)?(s-1):P;P=P<(s-u)?(s-u):P;a.scroll(N,P,O?(P==Q?0.1:Math.abs((P-Q)*0.1)):0,Q,M);a.temp[M]=d("li:eq("+(s-1-P)+")",N).data("val");a.validate(M);d(".dwv",o).html(a.formatResult())}function I(M){if(h){var N=M.data("pos"),O=N-1;O=O<(s-u)?(s-1):O;G(M,O)}else{clearInterval(h)}}function m(M){if(J){var N=M.data("pos"),O=N+1;O=O>(s-1)?(s-u):O;G(M,O)}else{clearInterval(J)}}d(document).bind(B,function(M){if(r){M.preventDefault();t=K(M);var N=f+(t-e)/y;N=N>(s-1+1)?(s-1+1):N;N=N<(s-u-1)?(s-u-1):N;a.scroll(E,N)}});d(document).bind(q,function(O){if(r){O.preventDefault();var N=new Date()-p;var Q=f+(t-e)/y;Q=Q>(s-1+1)?(s-1+1):Q;Q=Q<(s-u-1)?(s-u-1):Q;if(N<300){var M=(t-e)/N;var P=(M*M)/(2*0.0006);if(t-e<0){P=-P}}else{var P=t-e}G(E,Math.round(f+P/y),true,Math.round(Q));r=false;E=null}clearInterval(h);clearInterval(J);h=false;J=false;d(".dwb-a").removeClass("dwb-a")});o.delegate(".dwwl","DOMMouseScroll mousewheel",function(O){O.preventDefault();O=O.originalEvent;var Q=O.wheelDelta?(O.wheelDelta/120):(O.detail?(-O.detail/3):0),M=d("ul",this),N=M.data("pos"),P=Math.round(N+Q);u=d("li:visible",M).length;G(M,P)}).delegate(".dwb, .dwwb",v,function(M){d(this).addClass("dwb-a")}).delegate(".dwwbp",v,function(N){N.preventDefault();var M=d(this).closest(".dwwl").find("ul");u=d("li:visible",M).length;clearInterval(h);h=setInterval(function(){I(M)},200);I(M)}).delegate(".dwwbm",v,function(N){N.preventDefault();var M=d(this).closest(".dwwl").find("ul");u=d("li:visible",M).length;clearInterval(J);J=setInterval(function(){m(M)},200);m(M)}).delegate(".dwwl",v,function(M){if(!r&&a.settings.mode=="scroller"){M.preventDefault();r=true;E=d("ul",this);f=E.data("pos");u=d("li:visible",E).length;e=K(M);p=new Date();t=e;a.scroll(E,f)}})}return this.each(function(){if(!this.id){x+=1;this.id="scoller"+x}j[this.id]=new z(this,o,l)})},enable:function(){return this.each(function(){if(j[this.id]){j[this.id].enable()}})},disable:function(){return this.each(function(){if(j[this.id]){j[this.id].disable()}})},isDisabled:function(){if(j[this[0].id]){return j[this[0].id].settings.disabled}},option:function(h,l){return this.each(function(){if(j[this.id]){if(typeof h==="object"){d.extend(j[this.id].settings,h)}else{j[this.id].settings[h]=l}j[this.id].init()}})},setValue:function(l,h){if(h==undefined){h=false}return this.each(function(){if(j[this.id]){j[this.id].temp=l;j[this.id].setValue(l,h)}})},getValue:function(){if(j[this[0].id]){return j[this[0].id].values}},setDate:function(l,h){if(h==undefined){h=false}return this.each(function(){if(j[this.id]){j[this.id].setDate(l,h)}})},getDate:function(){if(j[this[0].id]){return j[this[0].id].getDate()}},show:function(){if(j[this[0].id]){return j[this[0].id].show()}},hide:function(){return this.each(function(){if(j[this.id]){j[this.id].hide()}})},destroy:function(){return this.each(function(){if(j[this.id]){d(this).unbind("focus.dw").removeClass("scroller");if(d(this).is(":input")){d(this).prop("readonly",d(this).data("dwro"))}delete j[this.id]}})}};d.fn.scroller=function(h){if(A[h]){return A[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof h==="object"||!h){return A.init.apply(this,arguments)}else{d.error("Unknown method")}}};d.scroller=new z(null,null,i)})(jQuery);


function BarrettMu(a){this.modulus=biCopy(a);this.k=biHighIndex(this.modulus)+1;var b=new BigInt();b.digits[2*this.k]=1;this.mu=biDivide(b,this.modulus);this.bkplus1=new BigInt();this.bkplus1.digits[this.k+1]=1;this.modulo=BarrettMu_modulo;this.multiplyMod=BarrettMu_multiplyMod;this.powMod=BarrettMu_powMod}function BarrettMu_modulo(h){var g=biDivideByRadixPower(h,this.k-1);var e=biMultiply(g,this.mu);var d=biDivideByRadixPower(e,this.k+1);var c=biModuloByRadixPower(h,this.k+1);var i=biMultiply(d,this.modulus);var b=biModuloByRadixPower(i,this.k+1);var a=biSubtract(c,b);if(a.isNeg){a=biAdd(a,this.bkplus1)}var f=biCompare(a,this.modulus)>=0;while(f){a=biSubtract(a,this.modulus);f=biCompare(a,this.modulus)>=0}return a}function BarrettMu_multiplyMod(a,c){var b=biMultiply(a,c);return this.modulo(b)}function BarrettMu_powMod(c,f){var b=new BigInt();b.digits[0]=1;var d=c;var e=f;while(true){if((e.digits[0]&1)!=0){b=this.multiplyMod(b,d)}e=biShiftRight(e,1);if(e.digits[0]==0&&biHighIndex(e)==0){break}d=this.multiplyMod(d,d)}return b};

var splashClosed=false;$(document).ready(function(){$.mobile.loadingMessage=Globals.LOADINGMESSAGE;initSplashScreen();if((BrowserDetect.browser!="Chrome")&&(BrowserDetect.browser!="Firefox")){document.addEventListener("deviceready",onDeviceReady,false)}else{setTimeout("MocksMobApp.Storage.openDB();",100);$.mobile.defaultPageTransition="none"}});function onDeviceReady(){DebugLogging.ConsoleLog("AppInfoOutput: Device Ready");setTimeout("GAnalytics.start()",200);MocksMobApp.Storage.openDB();document.addEventListener("backbutton",backKeyDown,true);Location.requestLocation();$.mobile.defaultPageTransition="none";$.mobile.buttonMarkup.hoverDelay=0;jQuery.extend(jQuery.mobile.datebox.prototype.options,{dateFormat:"dd/mm/YYYY",headerFormat:"dd/mm/YYYY",})}function initMainMenuFooter(){var b=MocksMobApp.UI.windowHeight();DebugLogging.ConsoleLog("AppInfoOutput: window height = "+b);if(b==0){b=480}DebugLogging.ConsoleLog("AppInfoOutput: window height (iphone defaut) = "+b);var c=b-$(".adContainer").height()-2;DebugLogging.ConsoleLog("AppInfoOutput: Ad height:"+$(".adContainer").height()+", footerTop:"+c);$("#mainMenu").find('[data-id="pFooter"]').css("top",c+"px");var a=MocksMobApp.UI.windowWidth();if(a>=700){$(".mainContentWrapper").css("width","700px")}}function initSplashScreen(){var b=MocksMobApp.UI.windowHeight();var a=MocksMobApp.UI.windowWidth();if(b==0){b=480}if(a==0){b=320}var d=(a-220)/2;var c=(b-230)/2;DebugLogging.ConsoleLog("AppInfoOutput: logoTop "+c+MocksMobApp.UI.windowHeight()+" "+b);$("#splashCon").css("height",b+"px");$("#splashLogo").css("position","fixed");$("#splashLogo").css("top",c+"px");$("#splashLogo").css("left",d+"px");$("#splashLogo").fadeIn(3000,"swing",function(){});setTimeout("closeSplashScreen()",10000)}function closeSplashScreen(){DebugLogging.ConsoleLog("AppInfoOutput: Close Splash");initMainMenuFooter();splashClosed=true;var e=UserPreferences.getItem(Globals.USER_NAME);var b=UserPreferences.getItem(Globals.USER_ID);var f=UserPreferences.getItem(Globals.CURRENT_AVAILABLE_APP_VERSION);DebugLogging.ConsoleLog("AppInfoOutput: AppAvail = "+f+" AppVersion = "+Globals.APP_VERSION);if(f>Globals.APP_VERSION){DebugLogging.ConsoleLog("AppInfoOutput: UpdateKill");MocksMobApp.UI.changePage("forceUpdate",false)}else{if(UserPreferences.getItem(Globals.PROFILEVALID)!=true){if((e!==null&&e.length>0)&&(b!==null&&b.length>0)&&(MocksMobApp.Network.hasConnection(false))){var a=Encrypt.GetEncryptedUserName();var d=Encrypt.GetEncryptedUserID();var c=new MocksMobApp.SeverRequestManager.Request({requestService:"checkprofilefields",requestCallback:MocksMobApp.Account.setProfileStatusCB,requestParam:{user:a,id:d},requestType:"post"});MocksMobApp.SeverRequestManager.issuePriorityRequest(c,function(){DebugLogging.ConsoleLog("AppInfoOutput: ProfilePriorityRequest Error")})}else{DebugLogging.ConsoleLog("AppInfoOutput: Before Sign in page Change)");MocksMobApp.UI.changePage("signIn",false);MocksMobApp.TimeTable.defaultTTSetting()}}else{if((e!==null&&e.length>0)&&(b!==null&&b.length>0)){MocksMobApp.UI.changePage("mainMenu",false)}else{DebugLogging.ConsoleLog("AppInfoOutput: Before Sign in page Change)");MocksMobApp.UI.changePage("signIn",false);MocksMobApp.TimeTable.defaultTTSetting()}}}}function contentSyncComplete(){UserPreferences.setItem(Globals.CONTENTSYNCED,"true");if($(".ui-page-active").attr("id")=="mainMenu"){MocksMobApp.UI.closeLoadingDialog();setTimeout("showPageCB()",200);setTimeout("MocksMobApp.UI.initScroll()",500)}}function regContentSyncComplete(){DebugLogging.ConsoleLog("regContentSynched");UserPreferences.setItem(Globals.REGCONTENTSYNCED,"true");if($(".ui-page-active").attr("id")=="regPage1"){MocksMobApp.UI.closeLoadingDialog();setTimeout("showPageCB()",200)}}function showPageCB(){$("#"+$(".ui-page-active").attr("id")+"Scroller").show();$("#"+MocksMobApp.UI.currentPage().serviceName).find('[data-role="listview"]').each(function(a){$(this).listview("refresh")});if($(".ui-page-active").attr("id")=="addClassTT"){$(".ui-page").css("-webkit-backface-visibility","visible");$("#addClassTTFooterWrapper").show()}}$("div[data-role*='page'][id!='splashScreen'][id!='signIn'][id!='regPage1'][id!='regPage2'][id!='regPage3']").live("pageshow",function(b){DebugLogging.ConsoleLog("AppInfoOutput: $(div[data-role*='page']).live(pageshow");MocksMobApp.UI.setPageParams($(".ui-page-active").attr("id"),MocksMobApp.UI.currentPage().subjectId,MocksMobApp.UI.currentPage().subjectName,true);MocksMobApp.UI.scrollToPageTop();MocksMobApp.Ads.requestNewAd();if(!(($(".ui-page-active").attr("id")=="mainMenu")&&(UserPreferences.getItem(Globals.CONTENTSYNCED)=="false"))){setTimeout("showPageCB()",200);setTimeout("MocksMobApp.UI.initScroll()",500)}var a=MocksMobApp.UI.headerHeight();$(".wrapper").css("top",a+"px");MocksMobApp.UI.openLoadingDialog();GAnalytics.recordPageView();if($(".ui-page-active").attr("id")=="addClassDetails"){$(".ui-page").css("-webkit-backface-visibility","visible");MocksMobApp.TimeTable.calculatetextBoxHeight()}DebugLogging.ConsoleLog("AppInfoOutput: pageshow finished")});$("#signIn").live("pagebeforeshow",function(a){MocksMobApp.UI.setPageParams("signIn",0,"",true);$("#signInErrorMsg").hide();$(".ui-page").css("-webkit-backface-visibility","visible")});$("#btnSignIn").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: btnSignIn clicked");if(MocksMobApp.Network.hasConnection(true)){MocksMobApp.Account.signIn()}});$("#btnRegister").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: hasConnection = ?");MocksMobApp.Account.ClearRegValues();DebugLogging.ConsoleLog("AppInfoOutput: Reg Clear");if(MocksMobApp.Network.hasConnection(true)){DebugLogging.ConsoleLog("AppInfoOutput: hasConnection");MocksMobApp.Account.setRegItem("CreateAcc",true);MocksMobApp.UI.changePage("regPage1",false)}});$("#btnCreateAccount").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: btnRegister clicked");MocksMobApp.Account.createAccount()});$("#btnRegPage1").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: btnRegPage1 clicked");MocksMobApp.Account.StoreRegValues("regPage1");var a=UserPreferences.getItem(Globals.REGCONTENTSYNCED);DebugLogging.ConsoleLog("AppInfoOutput: synched = ");if(a=="true"){MocksMobApp.UI.changePage("regPage2",false)}else{MocksMobApp.UI.changePage("regPage2",true)}});$("#btnRegPage2").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: btnRegPage2 clicked");MocksMobApp.Account.StoreRegValues("regPage2");var a=MocksMobApp.Account.getRegItem("regUserType");if((a=="Parent")||(a=="Student")){MocksMobApp.UI.changePage("regPage3",false)}else{MocksMobApp.Account.ValidateRegInfo()}});$("#btnRegPage3").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: btnRegPage3 clicked");MocksMobApp.Account.StoreRegValues("regPage3");MocksMobApp.Account.ValidateRegInfo();$("#btnRegister").removeClass("ui-btn-active")});$("#regPage1").live("pagebeforeshow",function(a){MocksMobApp.UI.setPageParams("regPage1",0,"",false);$(".ui-content").css("width","90%");$("#ServerInvalid").hide();$("#ServerInvalid").empty();$("#UserNameLengthErr").hide();$("#FirstNameLengthErr").hide();$("#LastNameLengthErr").hide();$("#EmailErr").hide();$("#PassMatchErr").hide();$("#passwordErrorMsg").hide();$("#AgeErr").hide();$("#LocationErr").hide();$("#invalidDataErrorMsg").hide();$("#passwordErrorMsg").hide();var c=MocksMobApp.Account.getRegItem("CreateAcc");if(c!=true){$("#regPage1").find("h1").empty();$("#regPage1").find("h1").append("Update Profile")}$("#reg_username").bind("touchstart",function(n){n.stopPropagation()});$("#firstname").bind("touchstart",function(n){n.stopPropagation()});$("#lastname").bind("touchstart",function(n){n.stopPropagation()});$("#email_addr").bind("touchstart",function(n){n.stopPropagation()});$("#reg_password").bind("touchstart",function(n){n.stopPropagation()});$("#reg_passwordConfirm").bind("touchstart",function(n){n.stopPropagation()});var f=MocksMobApp.Account.getRegItem("regServerValidationFail");DebugLogging.ConsoleLog("ServerInvalid = "+f);if(f==true){DebugLogging.ConsoleLog("In ServerInvalid");$("#ServerInvalid").append("The following error occurried:<br />");$("#ServerInvalid").append(MocksMobApp.Account.getRegItem("regServerValidationMsg"));$("#ServerInvalid").show()}var l=MocksMobApp.Account.getRegItem("regUserNameValid");DebugLogging.ConsoleLog("AppInfoOutput: UserNameValid = "+l);if(l==true){$("#reg_username").val(MocksMobApp.Account.getRegItem("regUserName"))}else{if(l==false){$("#reg_username").val(MocksMobApp.Account.getRegItem("regUserName"));$("#UserNameLengthErr").show()}}var i=MocksMobApp.Account.getRegItem("regFirstNameValid");DebugLogging.ConsoleLog("AppInfoOutput: FirstNameValid = "+i);if(i==true){$("#firstname").val(MocksMobApp.Account.getRegItem("regFirstName"))}else{if(i==false){$("#firstname").val(MocksMobApp.Account.getRegItem("regFirstName"));$("#FirstNameLengthErr").show()}}var g=MocksMobApp.Account.getRegItem("regLastNameValid");DebugLogging.ConsoleLog("AppInfoOutput: LastNameValid = "+g);if(g==true){$("#lastname").val(MocksMobApp.Account.getRegItem("regLastName"))}else{if(g==false){$("#lastname").val(MocksMobApp.Account.getRegItem("regLastName"));$("#LastNameLengthErr").show()}}var m=MocksMobApp.Account.getRegItem("regEmailValid");DebugLogging.ConsoleLog("AppInfoOutput: EmailValid = "+m);if(m==true){$("#email_addr").val(MocksMobApp.Account.getRegItem("regEmail"))}else{if(m==false){$("#email_addr").val(MocksMobApp.Account.getRegItem("regEmail"));$("#EmailErr").show()}}if(c!=true){DebugLogging.ConsoleLog("AppInfoOutput: Create Acc false");$("#divPass").hide();$("#divPassCon").hide()}else{var j=MocksMobApp.Account.getRegItem("regPassValid");DebugLogging.ConsoleLog("AppInfoOutput: PassValid = "+j);if(j==true){$("#reg_password").val(MocksMobApp.Account.getRegItem("regPassword"));$("#reg_passwordConfirm").val(MocksMobApp.Account.getRegItem("regPasswordConfirm"))}else{if(j==false){$("#reg_password").val(MocksMobApp.Account.getRegItem("regPassword"));$("#reg_passwordConfirm").val(MocksMobApp.Account.getRegItem("regPasswordConfirm"));$("#PassMatchErr").show()}}var d=MocksMobApp.Account.getRegItem("regPassLenValid");DebugLogging.ConsoleLog("AppInfoOutput: PassLenValid = "+d);if(d==false){$("#passwordErrorMsg").show()}}var h=MocksMobApp.Account.getRegItem("regUserDOBValid");DebugLogging.ConsoleLog("AppInfoOutput: UserDOBValid = "+h);if(h==true){$("#UserDOB").val(MocksMobApp.Account.getRegItem("regUserDOB"))}else{if(h=="false"){$("#UserDOB").val(MocksMobApp.Account.getRegItem("regUserDOB"));$("#AgeErr").show()}}var e=MocksMobApp.Account.getRegItem("regUserLocationValid");DebugLogging.ConsoleLog("AppInfoOutput: UserLocationValid = "+e);if(e==true){$("#UserCounty").val(MocksMobApp.Account.getRegItem("regUserLocation"))}else{if(e==false){$("#UserCounty").val(MocksMobApp.Account.getRegItem("regUserLocation"));$("#LocationErr").show()}}$("#UserCounty").selectmenu("refresh");var k=MocksMobApp.Account.getRegItem("regUserTypeValid");DebugLogging.ConsoleLog("AppInfoOutput: UserTypeValid = "+k);if(k==true){var b=MocksMobApp.Account.getRegItem("regUserType");if(b.substring(0,4)=="Stud"){b="Student"}DebugLogging.ConsoleLog("AppInfoOutput: UserType = "+b);$("#UserType").val(b)}$("#UserType").selectmenu("refresh");$("#UserType").change(function(){MocksMobApp.Account.removeRegItem("regSubjects");MocksMobApp.Account.removeRegItem("regNumSubjects");MocksMobApp.Account.removeRegItem("regStudyArea");MocksMobApp.Account.removeRegItem("regCollegeAreas");MocksMobApp.Account.removeRegItem("regNumCollegeAreas");MocksMobApp.Account.removeRegItem("regStudentYear");MocksMobApp.Account.removeRegItem("regSubjectsValid");MocksMobApp.Account.removeRegItem("regNumSubjectsValid");MocksMobApp.Account.removeRegItem("regStudyAreaValid");MocksMobApp.Account.removeRegItem("regCollegeAreasValid");MocksMobApp.Account.removeRegItem("regNumCollegeAreasValid");MocksMobApp.Account.removeRegItem("regStudentYearValid")});$("#UserDOB").bind("click",function(n){$("a[title='Open Date Picker']").click()});$(".ui-page").css("-webkit-backface-visibility","visible");MocksMobApp.UI.refreshScroll();DebugLogging.ConsoleLog("AppInfoOutput: regPage1 BeforeShow Fired");DebugLogging.ConsoleLog("ContentWrapper Width = "+$(".mainContentWrapper").width())});$("#regPage2").live("pagebeforeshow",function(d){DebugLogging.ConsoleLog("AppInfoOutput: regPage2 BeforeShow Fired");MocksMobApp.UI.setPageParams("regPage2",0,"",false);var b=MocksMobApp.Account.getRegItem("CreateAcc");if(b!=true){$("#regPage2").find("h1").empty();$("#regPage2").find("h1").append("Update Profile")}$(".ui-content").css("width","90%");$("#notEnoughSubjectsJCErrMsg").hide();$("#notEnoughSubjectsLCErrMsg").hide();$("#notEnoughSubjectsTeachErrMsg").hide();$("#divStudentYearErr").hide();$("#divStudentYear").empty();$("#subjectsRegList").empty();$("#subjectsRegText").empty();var f=MocksMobApp.Account.getRegItem("regUserType");switch(f){case"Student":$("#subjectsRegText").append("What subjects do you take?");$("#btnRegPage2").children().children().filter(".ui-btn-text").text("Next Page");break;case"Teacher":$("#subjectsRegText").append("What subjects do you teach?");if(b){$("#btnRegPage2").children().children().filter(".ui-btn-text").text("Create Account")}else{$("#btnRegPage2").children().children().filter(".ui-btn-text").text("Update Account")}break;case"Parent":$("#subjectsRegText").append("What subjects does your child take?");$("#btnRegPage2").children().children().filter(".ui-btn-text").text("Next Page");break;default:break}if(f=="Student"){var a="";a+="<label for='StudentYear'>What year are you in?</label>";a+="<select name='StudentYear' id='StudentYear' data-theme='m' data-native-menu='true'>";a+="<option value selected='selected'></option>";if(Globals.APP_LEVEL=="lc"){a+="<option value='Transition'>Transition Year</option>";a+="<option value='4th'>4th/5th</option>";a+="<option value='5th'>5th/6th</option>"}else{if(Globals.APP_LEVEL=="jc"){a+="<option value='1st'>1st</option>";a+="<option value='2nd'>2nd</option>";a+="<option value='3rd'>3rd</option>"}}a+="</select>";$("#divStudentYear").append(a);$("#divStudentYear").trigger("create");var e=MocksMobApp.Account.getRegItem("regStudentYearValid");if(e==true){$("option[value='"+MocksMobApp.Account.getRegItem("regStudentYear")+"']").attr("selected","selected");$("#StudentYear").selectmenu("refresh")}else{if(e==false){$("option[value='"+MocksMobApp.Account.getRegItem("regStudentYear")+"']").attr("selected","selected");$("#StudentYear").selectmenu("refresh");$("#divStudentYearErr").show()}}}else{$("#StudentYear").hide()}var c=MocksMobApp.Account.getRegItem("regNumSubjectsValid");if(c==false){if(f!="Teacher"){if(Globals.APP_LEVEL=="lc"){$("#notEnoughSubjectsLCErrMsg").show()}else{if(Globals.APP_LEVEL=="jc"){$("#notEnoughSubjectsJCErrMsg").show()}}}else{$("#notEnoughSubjectsTeachErrMsg").show()}}MocksMobApp.Storage.getRegSubjects(PopulateRegisterSubjectsPage,PopulateRegisterSubjectsPageFinished);$(".ui-page").css("-webkit-backface-visibility","visible");MocksMobApp.UI.refreshScroll()});$("#regPage3").live("pagebeforeshow",function(e){DebugLogging.ConsoleLog("AppInfoOutput: regPage3 BeforeShow Fired");MocksMobApp.UI.setPageParams("regPage3",0,"",false);$(".ui-content").css("width","90%");var a=MocksMobApp.Account.getRegItem("CreateAcc");if(a!=true){$("#regPage3").find("h1").empty();$("#regPage3").find("h1").append("Update Profile")}$("#CollegeAreaErr").hide();$("#StudyAreaErr").hide();$("#divCollegeText").empty();var g=MocksMobApp.Account.getRegItem("regUserType");switch(g){case"Student":$("#divCollegeText").append("Where would you like to go to college?");break;case"Parent":$("#divCollegeText").append("Where would you like your child to go to college??");break;default:break}if(g=="Parent"){$("#divStudyArea").hide()}var d=MocksMobApp.Account.getRegItem("regStudyAreaValid");if(d==true){$("#StudyArea").val(MocksMobApp.Account.getRegItem("regStudyArea"))}else{if(d==false){$("#StudyArea").val(MocksMobApp.Account.getRegItem("regStudyArea"));$("#StudyAreaErr").show()}}var f=MocksMobApp.Account.getRegItem("regNumCollegeAreasValid");if((f==true)||(f==false)){var b=MocksMobApp.Account.getRegItem("regCollegeAreas");var c=b.split("|");$.each(c,function(h,j){$("#chkGrpCollege").find("input[value="+j+"]").attr("checked","checked")})}if(f==false){$("#CollegeAreaErr").show()}if(a){$("#btnRegPage3").children().children().filter(".ui-btn-text").text("Create Account")}else{$("#btnRegPage3").children().children().filter(".ui-btn-text").text("Update Account")}$(".ui-page").css("-webkit-backface-visibility","visible");MocksMobApp.UI.refreshScroll()});$("#mainMenu").live("pagecreate",function(a){$(".ui-page").css("-webkit-backface-visibility","hidden");menuIconEvents(true);AdtechInterface.AdsVisible();InAppBilling.initalize()});$("#accountSettings").live("pagebeforeshow",function(a){MocksMobApp.UI.setPageParams("accountSettings",0,"",true);$("input#accUsername").val(UserPreferences.getItem(Globals.USER_NAME));$("#signOutBtnPH").show();$("#signOutConfirmBtns").hide();$("#btnSignOut").die("click").live("click",function(b){MocksMobApp.Account.SignOut(false)});$("#btnSignOutConfirmed").die("click").live("click",function(b){MocksMobApp.Account.SignOut(true)});$("#btnSignOutCancel").die("click").live("click",function(b){$("#signOutConfirmBtns").hide();$("#signOutBtnPH").show()})});function menuIconEvents(f){var d="click";var e=["mmSubjects","mmNotes","mmAurals","mmMcqs","mmCorrections","mmTimeTable","mmInfo","mmStudyTreats","mmSummerActivities","mmAccount","mmVideos"];var c=["subjects","notes","aurals","mcqs","corrections","schoolTimeTable","infoPagesList","studyTreats","summerActivities","accountSettings","videos"];var a="";for(var b=0;b<e.length;b++){a="#"+e[b];DebugLogging.ConsoleLog("AppInfoOutput: Kill Icon event:"+a);$(a).die(d);if(f){DebugLogging.ConsoleLog("AppInfoOutput: Bind Icon event:"+a);$(a).live(d,{ePage:c[b]},function(g){MocksMobApp.UI.changePage(g.data.ePage,false)})}}$("#mmTestNote").die("click").live("click",function(){if(UserPreferences.getItem(Globals.NOTERECIEVED)){MocksMobApp.UI.showToast("Note Recieved")}else{MocksMobApp.UI.showToast("No Note Recieved")}})}function initPtCalculatorBtns(f){var d="vclick";var e=["ptCalA1","ptCalA2","ptCalB1","ptCalB2","ptCalB3","ptCalC1","ptCalC2","ptCalC3","ptCalD1","ptCalD2","ptCalD3","ptCalE","ptCalF","ptCalNG"];var c=["A1","A2","B1","B2","B3","C1","C2","C3","D1","D2","D3","E","F","NG"];var a="";for(var b=0;b<14;b++){a="#"+e[b];$(a).die(d);if(f){$(a).live(d,{eGrade:c[b]},function(g){pointsCalAddGrade(g.data.eGrade)})}}}$("#infoPagesList").live("pagebeforeshow",function(a){$("#pagesList").empty();MocksMobApp.Storage.getInfoPagesList(fillInfoPagesList,fillInfoPagesListFinished)});$("#subjects").live("pagecreate",function(a){MocksMobApp.UI.setPageParams("subjects",0,"",true);MocksMobApp.Storage.getSubjects("subjects",addSubjectPagesToBtnList,addSubjectsToBtnListFinished);HelperFns.getSubscriptions("notes",MocksMobApp.Notes.getSubscriptionsCB);HelperFns.getSubscriptions("aurals",MocksMobApp.Aural.getSubscriptionsCB);HelperFns.getSubscriptions("mcqs",MocksMobApp.Mcq.getSubscriptionsCB)});$("#subjectsDetails").live("pagebeforeshow",function(a){$("#subjectsDetailsList").empty();$("#subjectsDetailsServiceList").empty();$("#subjectsDetailsHdrTitle").empty();$("#subjectsDetailsHdrTitle").append(MocksMobApp.UI.subjectsPageName());MocksMobApp.Storage.getSubjectPageInfo(MocksMobApp.UI.subjectsPageID(),addSubjectDetailsSingleLI,populateSubjectServicesPageFinished)});$("#subjectsDetails").live("pagehide",function(a,b){if(($(b.nextPage).attr("id")=="subjects")||($(b.nextPage).attr("id")=="mainMenu")){$("#subjectsDetailsHdrTitle").empty();$("#subjectsDetailsList").empty()}});$("#subjectsInfo").live("pagehide",function(a,b){MocksMobApp.UI.closeLoadingDialog();if(($(b.nextPage).attr("id")=="subjectsDetails")||($(b.nextPage).attr("id")=="mainMenu")){$("#subjectsInfoHdrTitle").empty();$("#SubjectsInfoNamePH").empty();$("#SubjectsInfoDetailsPH").empty()}});$("#examBreakdown").live("pagehide",function(a,b){MocksMobApp.UI.closeLoadingDialog();$(".scroller").css("width","100%");if(($(b.nextPage).attr("id")=="subjectsDetails")||($(b.nextPage).attr("id")=="mainMenu")){$("#examBreakdownHdrTitle").empty();$("#ExamBreakdownContentHdr").empty();$("#ExamBreakdownPH").empty()}});function populateSubjectServicesPageFinished(){DebugLogging.ConsoleLog("AppInfoOutput: populateSubjectsServicesPageFinished called");addDownloadPaperLi();getServicesForSubject()}$("#notes").live("pagecreate",function(a){MocksMobApp.UI.getIntroText("notes");MocksMobApp.Storage.getSubjects("notes",addSubjectToBtnList,addSubjectsToBtnListFinished);HelperFns.getSubscriptions("notes",MocksMobApp.Notes.getSubscriptionsCB)});$("#notes").live("pagebeforeshow",function(a){MocksMobApp.UI.setPageParams("notes",0,"",true)});$("#notesDetails").live("pagebeforeshow",function(a){MocksMobApp.Storage.getServiceSubjectDetails(MocksMobApp.UI.currentPage().serviceName,MocksMobApp.UI.currentPage().subjectId,populateNoteDetailsPage,populateNoteDetailsPageFinished)});$("#videos").live("pagebeforeshow",function(a){MocksMobApp.UI.setPageParams("videos",0,"",true);MocksMobApp.Storage.getSubjects("videos",addSubjectToBtnList,addSubjectsToBtnListFinished)});$("#videos").live("pagehide",function(a){$("#videosList").empty()});$("#videoTopics").live("pagebeforeshow",function(b){var c=ShortTermGlobals.getVidBack();var a;if(c==true){DebugLogging.ConsoleLog("AppInfoOutput: in Back branch");a=ShortTermGlobals.getVidSubject();ShortTermGlobals.setVidBack(false)}else{DebugLogging.ConsoleLog("AppInfoOutput: Not in Back branch");ShortTermGlobals.setVidSubject(MocksMobApp.UI.currentPage().subjectId);a=MocksMobApp.UI.currentPage().subjectId}DebugLogging.ConsoleLog("AppInfoOutput: Back = "+c+". VideoTopicID = "+a+".");MocksMobApp.Storage.getVideoTopics(a,populateVideoTopicsPage,addSubjectsToBtnListFinished)});$("#videoTopics").live("pagehide",function(a){$("#videoTopicsList").empty()});$("#videoSubheadings").live("pagebeforeshow",function(b){var c=ShortTermGlobals.getVidBack();var a;if(c==true){DebugLogging.ConsoleLog("AppInfoOutput: in Back branch");a=ShortTermGlobals.getVidTopic();ShortTermGlobals.setVidBack(false)}else{DebugLogging.ConsoleLog("AppInfoOutput: Not in Back branch");ShortTermGlobals.setVidTopic(MocksMobApp.UI.currentPage().subjectId);a=MocksMobApp.UI.currentPage().subjectId}DebugLogging.ConsoleLog("AppInfoOutput: Back = "+c+". VideoTopicID = "+a+".");MocksMobApp.Storage.getVideoSubheadings(a,populateVideoSubheadingsPage,addSubjectsToBtnListFinished);MocksMobApp.UI.setPageParams("videoSubheadings",0,"",true)});$("#videoSubheadings").live("pagehide",function(a){$("#videoSubheadingsList").empty()});$("#videoLinks").live("pagebeforeshow",function(a){MocksMobApp.Storage.getVideoLinks(MocksMobApp.UI.currentPage().subjectId,populateVideoLinksPage,addSubjectsToBtnListFinished);MocksMobApp.UI.setPageParams("videoLinks",0,"",true)});$("#videoLinks").live("pagehide",function(a){$("#videoLinksList").empty()});function populateVideoTopicsPage(c){$("#videoTopicsList").empty();var a;DebugLogging.ConsoleLog("AppInfoOutput: popVidTopics results:"+JSON.stringify(c));for(var b=0;b<c.length;b++){a=c.item(b).VideoTopicID;var d=MocksMobApp.UI.createBtn(c.item(b).Title,a);$(d).appendTo($("#videoTopicsList"));$("#"+a).die("click").live("click",{sID:c.item(b).VideoTopicID,sName:c.item(b).Title,service:"videoTopics"},function(e){OpenSubjectServicesPage(e.data.sID,e.data.sName,e.data.service)})}MocksMobApp.UI.setPageParams("videoTopics",0,"",true)}function populateVideoSubheadingsPage(c){DebugLogging.ConsoleLog("AppInfoOutput: pop Subheadings"+JSON.stringify(c));$("#videoSubheadingsList").empty();var a;for(var b=0;b<c.length;b++){a=c.item(b).VideoSubheadingID;var d=MocksMobApp.UI.createBtn(c.item(b).Title,a);$(d).appendTo($("#videoSubheadingsList"));$("#"+a).die("click").live("click",{sID:c.item(b).VideoSubheadingID,sName:c.item(b).Title,service:"videoLinks"},function(e){OpenSubjectServicesPage(e.data.sID,e.data.sName,e.data.service)})}MocksMobApp.UI.setPageParams("videoSubheadings",0,"",true)}function populateVideoLinksPage(c){$("#videoLinksList").empty();var a;for(var b=0;b<c.length;b++){a=c.item(b).VideoLinkID;var d="<a id='newAID' href='"+Globals.SERVER_URL+"/AppVideoPlayer/tabid/"+Globals.VIDEO_TABID+"/VideoLinkID/"+c.item(b).VideoLinkID+"/Default.aspx' data-role='button' rel='external' >"+c.item(b).Title+"</a>";$(d).appendTo($("#videoLinksList"))}}$("#forceUpdate").live("pagebeforeshow",function(a){$("#UpdateImgCon").css("position","relative")});$("#aurals").live("pagecreate",function(a){MocksMobApp.UI.getIntroText("aurals");MocksMobApp.Storage.getSubjects("aurals",addSubjectToBtnList,addSubjectsToBtnListFinished);HelperFns.getSubscriptions("aurals",MocksMobApp.Aural.getSubscriptionsCB)});$("#auralsDetails").live("pagebeforeshow",function(a){MocksMobApp.UI.setPageParams("auralsDetails",MocksMobApp.UI.currentPage().subjectId,MocksMobApp.UI.currentPage().subjectName,true);MocksMobApp.Storage.getServiceSubjectDetails(MocksMobApp.UI.currentPage().serviceName,MocksMobApp.UI.currentPage().subjectId,populateAuralsDetailsPage,populateAuralsDetailsPageFinished)});$("#auralsSections").live("pagebeforeshow",function(a){MocksMobApp.Aural.reset();MocksMobApp.Aural.requestExamSections()});$("#auralsSections").live("pagehide",function(a,b){MocksMobApp.UI.closeLoadingDialog();if(($(b.nextPage).attr("id")=="auralsDetails")||($(b.nextPage).attr("id")=="mainMenu")){DebugLogging.ConsoleLog("AppInfoOutput: auralsSections hidden");$("#auralSectionsConHdr").empty();$("#auralSectionBtnPH").empty();$("#sectionDetailsPH").empty()}});$("#auralsDetails").live("pagehide",function(a,b){if(($(b.nextPage).attr("id")=="aurals")||($(b.nextPage).attr("id")=="mainMenu")){DebugLogging.ConsoleLog("AppInfoOutput: auralsDetails hidden");$("#auralExamConHdr").empty();$("#auralsExamsList").empty();$("#myAuralsExamsList").empty()}});$("#auralsExam").live("pagehide",function(a){MocksMobApp.UI.closeLoadingDialog()});$("#mcqs").live("pagecreate",function(a){MocksMobApp.UI.getIntroText("mcqs");HelperFns.getSubscriptions("mcqs",MocksMobApp.Mcq.getSubscriptionsCB)});$("#mcqs").live("pagebeforeshow",function(a){MocksMobApp.UI.setPageParams("mcqs",0,"",true);MocksMobApp.Storage.getSubjects("mcqs",addMcqSubjectToSubBtnList,addSubjectsToBtnListFinished)});$("#mcqsDetails").live("pagebeforeshow",function(a){MocksMobApp.Storage.getServiceSubjectDetails(MocksMobApp.UI.currentPage().serviceName,MocksMobApp.UI.currentPage().subjectId,populateMcqsDetailsPage,populateMcqsDetailsPageFinished)});$("#mcqsDetails").live("pagehide",function(a,b){if(($(b.nextPage).attr("id")=="mcqs")||($(b.nextPage).attr("id")=="mainMenu")){$("#mcqsTopicsList").empty()}});$("#mcqsQuizSelection").live("pagehide",function(a,b){if(($(b.nextPage).attr("id")=="mcqsDetails")||($(b.nextPage).attr("id")=="mainMenu")){$("#mcqsSelectTopicsList").empty()}});$("#infoPagesDetails").live("pagehide",function(a,b){$("#InfoPageNamePH").empty();$("#InfoPageDetailsPH").empty()});$("#mcqQuiz").live("pagehide",function(a){MocksMobApp.UI.closeLoadingDialog();MocksMobApp.Mcq.clearQuizPage()});$("#mcqsQuizSelection").live("pagebeforeshow",function(a){MocksMobApp.Storage.getServiceSubjectDetails(MocksMobApp.UI.currentPage().serviceName,MocksMobApp.UI.currentPage().subjectId,populateMcqsSelectionPage,populateMcqsSelectionPageFinished)});$("#mcqQuizNxtQuestion").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: mcqQuizNxtQuestion clicked");$("#mcqQuizNxtQuestion").removeClass("ui-btn-active");MocksMobApp.Mcq.openNextQuestion()});$("#mcqQuizPrevQuestion").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: mcqQuizPrevQuestion clicked");$("#mcqQuizPrevQuestion").removeClass("ui-btn-active");MocksMobApp.Mcq.openPrevQuestion()});$("#mcqQuizContent").die("swipeleft").live("swipeleft",function(){DebugLogging.ConsoleLog("AppInfoOutput: conMcqsQuizSelection swipeleft");MocksMobApp.Mcq.openNextQuestion()});$("#mcqQuizContent").die("swiperight").live("swiperight",function(){DebugLogging.ConsoleLog("AppInfoOutput: conMcqsQuizSelection swiperight");MocksMobApp.Mcq.openPrevQuestion()});$("#mcqReportIncorrect").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: mcqReportIncorrect clicked");$("#mcqReportIncorrect").removeClass("ui-btn-active");MocksMobApp.Mcq.reportIncorrect()});$("#orals").live("pagecreate",function(a){MocksMobApp.UI.setPageParams("orals",0,"",true);MocksMobApp.UI.getIntroText("orals");MocksMobApp.Storage.getSubjects("orals",addOralSubjectsToBtnList,addOralSubjectsToBtnListFinished);HelperFns.getSubscriptions("orals",MocksMobApp.Orals.getSubscriptionsCB)});$("#oralsBuyNowBtn").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: oralsBuyNowBtn clicked");InAppBilling.purchase(InAppBilling.purchaseSuccessCB,InAppBilling.purchaseRequestFailedCB,{service:"orals"})});$("#corrections").live("pagecreate",function(a){MocksMobApp.UI.setPageParams("corrections",0,"",true);MocksMobApp.UI.getIntroText("corrections");MocksMobApp.Storage.getSubjects("corrections",addCorrectionsSubjectToBtnList,addSubjectsToBtnListFinished);HelperFns.getSubscriptions("corrections",MocksMobApp.Corrections.getSubscriptionsCB)});$("#correctionsBuyNowBtn").die("click").live("click",function(){DebugLogging.ConsoleLog("AppInfoOutput: correctionsBuyNowBtn clicked");InAppBilling.purchase(InAppBilling.purchaseSuccessCB,InAppBilling.purchaseRequestFailedCB,{service:"corrections"})});$("#dtt").live("pagecreate",function(a){MocksMobApp.UI.setPageParams("dtt",27,"",true);MocksMobApp.UI.getIntroText("dtt");MocksMobApp.Storage.getServiceSubjectDetails(MocksMobApp.UI.currentPage().serviceName,MocksMobApp.UI.currentPage().subjectId,populateDttDetailsPage,populateDttDetailsPageFinished)});$("#pointsCalculator").live("pagebeforeshow",function(a){pointsCalReset();initPtCalculatorBtns(true);$("#pointCalHonsBtn").addClass("ui-btn-active")});$("#pointsCalculator").live("pagehide",function(a){initPtCalculatorBtns(false)});$("#studyTreats").live("pagebeforeshow",function(a){MocksMobApp.Storage.getStudyTreatsDetails(fillStudyTreatsPage)});$("#studyTreats").live("pagehide",function(a){MocksMobApp.StudyTreats.stopPremiumTreatsSlideShow()});$("#studyTreatsInfo").live("pagehide",function(a){$("#treatInfoPH").empty()});function fillStudyTreatsPage(k){var c;var h;var b;var a;var f;var j;var l=0;var d=MocksMobApp.UI.windowWidth();var e=d-300;$("#premiumTreatsPH").empty();$("#premiumTreatsPH").css("margin-left",e/2);$("#standardTreatsPH").empty();$("#standardTreatsPH").css("margin-left",e/2);for(var g=0;g<k.length;g++){c=k.item(g).StudyTreatsID;h=c+"-study-treat";b=c+"-study-treat-img";if(k.item(g).StudyTreatsType==0){f='<img src="'+Globals.SERVER_URL+Globals.STUDYTREATS_IMAGE_SERVER_DIR+k.item(g).PremiumImageFileName+'" id="pre_'+b+'" />';a=MocksMobApp.UI.createAnchor(f,"pre_"+h,"");j='<div class="premiumStudyTreat">'+a+"</div>";$("#premiumTreatsPH").append(j);$("#pre_"+b).width(300);$("#pre_"+h).die("click").live("click",{treatsID:c},function(i){MocksMobApp.UI.changePage("studyTreatsInfo",false);MocksMobApp.Storage.getStudyTreatsDetails(showTreatInfo,i.data.treatsID)});l++}f='<img src="'+Globals.SERVER_URL+Globals.STUDYTREATS_IMAGE_SERVER_DIR+k.item(g).ImageFileName+'" id="'+b+'" />';a=MocksMobApp.UI.createAnchor(f,h,"");j='<div class="standardStudyTreat" style="float:left; margin-left:6px;">'+a+"</div>";$("#standardTreatsPH").append(j);if(k.item(g).ImageWidth>140){$("#"+b).width(140)}$("#"+h).die("click").live("click",{treatsID:c},function(i){MocksMobApp.UI.changePage("studyTreatsInfo",false);MocksMobApp.Storage.getStudyTreatsDetails(showTreatInfo,i.data.treatsID)})}$("#standardTreatsPH").append('<div style="clear: both"></div>');MocksMobApp.StudyTreats.recordAdsImpression();if(l>1){MocksMobApp.StudyTreats.startPremiumTreatsSlideShow()}MocksMobApp.UI.initScroll()}function showTreatInfo(b){var a;var e;var f;var d;var c;$("#treatInfoPH").empty();if(b.length>0){a=b.item(0).StudyTreatsID;e=a+"-study-treat-img-ext-lnk";d='<img src="'+Globals.SERVER_URL+Globals.STUDYTREATS_IMAGE_SERVER_DIR+b.item(0).ImageFileName+'" />';f=MocksMobApp.UI.createAnchor(d,e,"");c='<div class="studyTreatInfoImg">'+f+"</div>";$("#treatInfoPH").append(c);$("#"+e).die("click").live("click",{treatsID:a,url:b.item(0).Url},function(g){MocksMobApp.StudyTreats.openTreatLink(g.data.treatsID,g.data.url)});e=a+"-study-treat-ext-lnk";f=MocksMobApp.UI.createAnchor(b.item(0).Url,e,'class="ui-link"');c='<div class="studyTreatInfoDetials">';c+='<h2 class="textaligncenter">'+b.item(0).Name+"</h2>";c+="<div>"+f+"</div>";c+="<div>"+b.item(0).Description+"</div>";c+="</div>";$("#treatInfoPH").append(c);$("#"+e).die("click").live("click",{treatsID:a,url:b.item(0).Url},function(g){MocksMobApp.StudyTreats.openTreatLink(g.data.treatsID,g.data.url)});$("#treatInfoPH").append('<div style="clear: both"></div>');MocksMobApp.UI.refreshScroll()}}$("#summerActivities").live("pagebeforeshow",function(a){MocksMobApp.Storage.getSummerActivitiesDetails(fillSummerActivitiesPage)});$("#summerActivities").live("pagehide",function(a){MocksMobApp.SummerActivities.stopPremiumActivitiesSlideShow()});$("#summerActivitiesInfo").live("pagehide",function(a){$("#activitiesInfoPH").empty()});function fillSummerActivitiesPage(l){var b;var h;var c;var a;var f;var j;var k=0;var d=MocksMobApp.UI.windowWidth();var e=d-300;$("#premiumActivitiesPH").empty();$("#premiumActivitiesPH").css("margin-left",e/2);$("#standardActivitiesPH").empty();$("#standardActivitiesPH").css("margin-left",e/2);for(var g=0;g<l.length;g++){b=l.item(g).SummerActivitiesID;h=b+"-summer-activity";c=b+"-summer-activity-img";if(l.item(g).SummerActivitiesType==0){f='<img src="'+Globals.SERVER_URL+Globals.SUMMERACTIVITIES_IMAGE_SERVER_DIR+l.item(g).PremiumImageFileName+'" id="pre_'+c+'" />';a=MocksMobApp.UI.createAnchor(f,"pre_"+h,"");j='<div class="premiumSummerActivity">'+a+"</div>";$("#premiumActivitiesPH").append(j);$("#pre_"+c).width(300);$("#pre_"+h).die("click").live("click",{activitiesID:b},function(i){MocksMobApp.UI.changePage("summerActivitiesInfo",false);MocksMobApp.Storage.getSummerActivitiesDetails(showActivityInfo,i.data.activitiesID)});k++}f='<img src="'+Globals.SERVER_URL+Globals.SUMMERACTIVITIES_IMAGE_SERVER_DIR+l.item(g).ImageFileName+'" id="'+c+'" />';a=MocksMobApp.UI.createAnchor(f,h,"");j='<div class="standardSummerActivity" style="float:left; margin-left:6px;">'+a+"</div>";$("#standardActivitiesPH").append(j);if(l.item(g).ImageWidth>140){$("#"+c).width(140)}$("#"+h).die("click").live("click",{activitiesID:b},function(i){MocksMobApp.UI.changePage("summerActivitiesInfo",false);MocksMobApp.Storage.getSummerActivitiesDetails(showActivityInfo,i.data.activitiesID)})}$("#standardActivitiesPH").append('<div style="clear: both"></div>');MocksMobApp.SummerActivities.recordAdsImpression();if(k>1){MocksMobApp.SummerActivities.startPremiumActivitiesSlideShow();DebugLogging.ConsoleLog("AppInfoOutput: Slideshow Started")}MocksMobApp.UI.initScroll()}function showActivityInfo(c){DebugLogging.ConsoleLog("AppInfoOutput: showActivityInfo called");var d;var e;var f;var b;var a;$("#activityInfoPH").empty();if(c.length>0){d=c.item(0).SummerActivitiesID;e=d+"-summer-activity-img-ext-lnk";b='<img src="'+Globals.SERVER_URL+Globals.SUMMERACTIVITIES_IMAGE_SERVER_DIR+c.item(0).ImageFileName+'" />';f=MocksMobApp.UI.createAnchor(b,e,"");a='<div class="summerActivityInfoImg">'+f+"</div>";$("#activityInfoPH").append(a);$("#"+e).die("click").live("click",{activityID:d,url:c.item(0).Url},function(g){MocksMobApp.SummerActivities.openActivityLink(g.data.activitiesID,g.data.url)});e=c+"-summer-activity-ext-lnk";f=MocksMobApp.UI.createAnchor(c.item(0).Url,e,'class="ui-link"');a='<div class="summerActivityInfoDetials">';a+='<h2 class="textaligncenter">'+c.item(0).Name+"</h2>";a+="<div>"+f+"</div>";a+="<div>"+c.item(0).Description+"</div>";a+="</div>";$("#activityInfoPH").append(a);$("#"+e).die("click").live("click",{activityID:d,url:summerActivitiesInfo.item(0).Url},function(g){MocksMobApp.SummerActivities.openActivityLink(g.data.activitiesID,g.data.url)});$("#activityInfoPH").append('<div style="clear: both"></div>');MocksMobApp.UI.refreshScroll()}}$("#schoolTimeTable").live("pagebeforeshow",function(a){MocksMobApp.TimeTable.openTTPage()});$("#conTimeTableDay").die("swipeleft").live("swipeleft",function(){DebugLogging.ConsoleLog("AppInfoOutput: ExamNxtSection swipeleft");MocksMobApp.TimeTable.NxtDay(1);MocksMobApp.UI.scrollToPageTop()});$("#conTimeTableDay").die("swiperight").live("swiperight",function(){DebugLogging.ConsoleLog("AppInfoOutput: ExamNxtSection swipeleft");MocksMobApp.TimeTable.NxtDay(-1);MocksMobApp.UI.scrollToPageTop()});$("#optionsTimeTable").live("pagebeforeshow",function(a){MocksMobApp.UI.setPageParams("optionsTimeTable",0,"",true);MocksMobApp.TimeTable.loadTimeTableOptions()});$("#optionsTimeTable").live("pagecreate",function(a){MocksMobApp.TimeTable.initOptionsPage()});$("#addClassTT").live("pagebeforeshow",function(a){MocksMobApp.UI.setPageParams("addClassTT",0,"",true);MocksMobApp.TimeTable.createAddClassPage();$("#addClassTTFooterWrapper").hide()});function OpenSubjectsPage(c,b,a){MocksMobApp.UI.setPageParams(a+"Details","",b,true);MocksMobApp.UI.setSubjectsPageID(c,b);MocksMobApp.UI.changePage(a+"Details",false)}function OpenSubjectServicesPage(d,c,b){DebugLogging.ConsoleLog("AppInfoOutput: OpenSubjectServicesPage: "+d+" "+c);var a="";if((b!="orals")&&(b!="corrections")&&(b!="videos")&&(b!="videoTopics")&&(b!="videoSubheadings")&&(b!="videoLinks")){if(d!==""){a=b+"Details"}else{d=MocksMobApp.UI.currentPage().subjectId;a=b}}else{if(b=="videos"){a="videoTopics"}else{if(b=="videoTopics"){a="videoSubheadings"}else{if(b=="videoSubheadings"){a="videoLinks"}else{a=b}}}}MocksMobApp.UI.setPageParams(a,d,c,true);MocksMobApp.UI.changePage(a,false)}function OpenMcqQuizPage(d,a,c,e){if(MocksMobApp.Network.hasConnection(true)){DebugLogging.ConsoleLog("AppInfoOutput: OpenMcqQuizPage");MocksMobApp.UI.setPageParams("mcqQuiz",MocksMobApp.UI.currentPage().subjectId,MocksMobApp.UI.currentPage().subjectName,true);MocksMobApp.Mcq.createPage(d,a,c,e);MocksMobApp.UI.changePage("mcqQuiz",true);var b="OpenedMcqQuiz";if(e){b+="-Free"}GAnalytics.recordEvent(b,MocksMobApp.UI.currentPage().subjectName,"")}}function initMcqQuizPage(a){MocksMobApp.Mcq.setMcqQuiz(a);MocksMobApp.Mcq.openFirstQuestion();MocksMobApp.UI.closeLoadingDialog();MocksMobApp.UI.showToast("Swipe left/right to view the next/prev question",true)}function OpenAuralExamsPage(b){if(MocksMobApp.Network.hasConnection(true)){DebugLogging.ConsoleLog("AppInfoOutput: OpenAuralExamsPage: "+b);MocksMobApp.UI.setPageParams("auralsExam",MocksMobApp.UI.currentPage().subjectId,MocksMobApp.UI.currentPage().subjectName,true);MocksMobApp.Aural.createPage(b);MocksMobApp.UI.changePage("auralsExam",true);var a="OpenedAuralExam";GAnalytics.recordEvent(a,MocksMobApp.Aural.getExamName(),b)}}function OpenAuralSectionsPage(b,a,c){if(MocksMobApp.Network.hasConnection(true)){DebugLogging.ConsoleLog("AppInfoOutput: OpenAuralSectionsPage"+b);MocksMobApp.Aural.setExam(b,a,c);MocksMobApp.UI.scrollToPageTop();MocksMobApp.UI.changePage("auralsSections",true)}}function PopulateRegisterSubjectsPage(d){var f;var e;var g;var a="";for(var c=0;c<d.length;c++){e=d.item(c).name;g=d.item(c).SubjectID;f="chk"+e.replace(" ","");a+=MocksMobApp.UI.createCheckBox("chkboxSubjects",f,e,g)}$(a).appendTo($("#subjectsRegList"));$("#subjectsRegList_Contain").trigger("create");var h=MocksMobApp.Account.getRegItem("regNumSubjectsValid");DebugLogging.ConsoleLog("regNumSubjectsValid = "+h);if((h==true)||h==false){var j=MocksMobApp.Account.getRegItem("regSubjects");DebugLogging.ConsoleLog("AppInfoOutput: SubjectIDs = "+j);var l=j.split("|");DebugLogging.ConsoleLog("SubjectIDArray"+l);$.each(l,function(m,n){$("#subjectsRegList").find("input[value="+n+"]").prop("checked",true).checkboxradio("refresh")})}else{var b=["chkIrish","chkEnglish","chkMathematics"];var k=["chkHistory","chkGeography","chkScience"];if(Globals.APP_TYPE=="jc"){b=b.concat(k())}$.each(b,function(m,n){$("#subjectsRegList").find("input[id="+n+"]").prop("checked",true).checkboxradio("refresh")})}}function PopulateRegisterSubjectsPageFinished(){DebugLogging.ConsoleLog("AppInfoOutput: PopulateRegisterSubjectsPageFinished")}function addSubjectPagesToBtnList(a,b){$("#"+a+"List").empty();var c;for(var d=0;d<b.length;d++){c=b.item(d).SubjectsPageID+a;var e=MocksMobApp.UI.createBtn(b.item(d).SubjectName,c);$(e).appendTo($("#"+a+"List"));$("#"+c).die("click").live("click",{sID:b.item(d).SubjectsPageID,sName:b.item(d).SubjectName,service:a},function(f){OpenSubjectsPage(f.data.sID,f.data.sName,f.data.service)})}}function addSubjectToBtnList(a,b){$("#"+a+"List").empty();var c;for(var d=0;d<b.length;d++){c=b.item(d).SubjectID+a;var e=MocksMobApp.UI.createBtn(b.item(d).SubjectName,c);$(e).appendTo($("#"+a+"List"));$("#"+c).die("click").live("click",{sID:b.item(d).SubjectID,sName:b.item(d).SubjectName,service:a},function(f){OpenSubjectServicesPage(f.data.sID,f.data.sName,f.data.service)})}}function addMcqSubjectToSubBtnList(b,a){$("#mcqsList").empty();$("#mcqsSubList").empty();var d=false;var e="";for(var c=0;c<a.length;c++){newAID=a.item(c).SubjectID+b;e=MocksMobApp.UI.createBtn(a.item(c).SubjectName,newAID);DebugLogging.ConsoleLog(a.item(c));if(MocksMobApp.Mcq.hasSubscription(a.item(c).McqSubjectID)||a.item(c).IsFree=="true"){$(e).appendTo($("#mcqsSubList"));$("#"+newAID).attr("data-theme","g");$("#"+newAID).die("click").live("click",{mSID:a.item(c).McqSubjectID,sName:a.item(c).SubjectName},function(f){MocksMobApp.UI.setPageParams("mcqsQuizSelection",f.data.mSID,f.data.sName,true);OpenMCQQuizSelectionPage(f.data.mSID)});d=true}else{$(e).appendTo($("#mcqsList"));$("#"+newAID).attr("data-theme","p");$("#"+newAID).die("click").live("click",{sID:a.item(c).McqSubjectID,sName:a.item(c).SubjectName,service:b},function(f){OpenSubjectServicesPage(f.data.sID,f.data.sName,f.data.service)})}}if(d==false){$("#myMcqs").hide()}else{$("#myMcqs").show()}}function addCorrectionsSubjectToBtnList(a,b){$("#"+a+"List").empty();for(var c=0;c<b.length;c++){var d=MocksMobApp.Corrections.DownloadSampleLink(b.item(c).SubjectID,b.item(c).SubjectName);$(d).appendTo($("#"+a+"List"))}MocksMobApp.Corrections.displayCredits()}function addOralSubjectsToBtnList(a,b){$("#oralsList").empty();for(var c=0;c<b.length;c++){MocksMobApp.UI.addNewLi(b.item(c).SubjectName,a+b.item(c).SubjectID,"textaligncenter",$("#oralsList"))}}function addOralSubjectsToBtnListFinished(){$("#oralsList").listview("refresh");MocksMobApp.Orals.displayCredits();MocksMobApp.UI.refreshScroll()}function addSubjectsToBtnListFinished(){DebugLogging.ConsoleLog("AppInfoOutput: Before SubjectBtns Create:#"+MocksMobApp.UI.currentPage().scrollerDiv);$("#"+MocksMobApp.UI.currentPage().scrollerDiv).trigger("create");MocksMobApp.UI.refreshScroll()}function populateNoteDetailsPage(b){var a;var e;var d;var f;$("#notesDetailsList").empty();for(var c=0;c<b.length;c++){a=b.item(c).NotesID;e=b.item(c).NotesName;d=a+"-notes-details";f=MocksMobApp.UI.createAnchor(e,d,"");MocksMobApp.UI.addNewLi(f,d,"",$("#notesDetailsList"));if(MocksMobApp.Notes.hasSubscription(a)){$("#"+d+"_li").attr("data-theme","g")}$("#"+d).die("click").live("click",{nID:a},function(g){OpenGetNotesPage(g.data.nID)})}$("#notesDetailsConHdr").text(MocksMobApp.UI.currentPage().subjectName)}function OpenGetNotesPage(a){MocksMobApp.UI.setPageParams("getNotes",MocksMobApp.UI.currentPage().subjectId,MocksMobApp.UI.currentPage().subjectName,true);MocksMobApp.Storage.getNotesDetails(a,populateGetNotesPage);MocksMobApp.UI.changePage("getNotes",false)}function populateGetNotesPage(a){$("#getNotesConHdr").text(a.NotesName);if(MocksMobApp.Notes.hasSubscription(a.NotesID)){$("#notesDownLoadBtn").attr("href",Globals.SERVER_URL+Globals.CONTENT_PROVIDER+"filerequest?notesid="+a.NotesID+"&service=notes&user="+Encrypt.GetEncryptedUserName()+"&id="+Encrypt.GetEncryptedUserID());$("#notesBuyBtnDiv").hide();$("#notesSampleBtnDiv").hide();$("#notesDownloadBtnDiv").show()}else{$("#notesDownloadInfo").hide();$("#notesViewSampleBtn").attr("href",Globals.SERVER_URL+Globals.CONTENT_PROVIDER+"filerequest?notesid="+a.NotesID+"&service=notes");$("#notesBuyBtnDiv").show();$("#notesSampleBtnDiv").show();$("#notesDownloadBtnDiv").hide();$("#notesBuyNowBtn").die("click").live("click",{nID:a.NotesID,nPrice:a.Cost},function(b){InAppBilling.purchase(InAppBilling.purchaseSuccessCB,InAppBilling.purchaseRequestFailedCB,{service:"notes",notesid:b.data.nID,price:b.data.nPrice})})}$("#notesCostPH").empty();$("#notesCostPH").append("&euro;"+parseFloat(a.Cost).toFixed(2));$("#notesDescriptionPH").empty();$("#notesDescriptionPH").append(a.Description);$("#notesAuthorDescPH").empty();$("#notesAuthorDescPH").append(a.AuthorDesc+"<br /><br />")}function populateNoteDetailsPageFinished(){DebugLogging.ConsoleLog("AppInfoOutput: populateNoteDetailsPageFinished()");$("#notesDetailsList").listview("refresh");MocksMobApp.UI.refreshScroll()}function populateAuralsDetailsPage(c){DebugLogging.ConsoleLog("AppInfoOutput: populateAuralsDetailsPage");var j;var h;var e;var a;var g;var f=false;var b=false;$("#myAuralsExamsList").empty();$("#freeAuralsExamsList").empty();$("#auralsExamsList").empty();for(var d=0;d<c.length;d++){j=c.item(d).AuralExamID;h=c.item(d).AuralExamName;e=j+"-aural-details";a=MocksMobApp.UI.createAnchor(h,e,"");if(MocksMobApp.Aural.hasSubscription(j)){MocksMobApp.UI.addNewLi(a,e,"",$("#myAuralsExamsList"));g=true;f=true}else{if(c.item(d).Free=="true"){MocksMobApp.UI.addNewLi(a,e,"",$("#freeAuralsExamsList"));g=true;b=true}else{if(c.item(d).Free=="false"){MocksMobApp.UI.addNewLi(a,e,"",$("#auralsExamsList"));g=false}}}$("#"+e).die("click").live("click",{eID:j,eName:h,eFree:g},function(i){OpenAuralSectionsPage(i.data.eID,i.data.eName,i.data.eFree)})}if(f==false){$("#myAuralExams").hide()}else{$("#myAuralExams").show()}if(b==false){$("#freeAuralExams").hide()}else{$("#freeAuralExams").show()}}function populateAuralsSectionsPage(h,f){MocksMobApp.Aural.setExamSections(h);var c;var g;var d;var a;$("#auralSectionsConHdr").empty();$("#auralSectionsConHdr").append(MocksMobApp.UI.currentPage().subjectName+" - "+MocksMobApp.Aural.getExamName());if((HelperFns.is_array(h))&&(h.length>0)){$("#auralSectionBtnPH").empty();var b="";if(MocksMobApp.Aural.hasAccess()==true){b=MocksMobApp.UI.createBtn("Take Exam","take-aural-exam");$("#auralSectionBtnPH").append(b);$("#take-aural-exam").die("click").live("click",{sID:h[0].AuralSectionID},function(i){OpenAuralExamsPage(i.data.sID)});$("#take-aural-exam").attr("data-theme","g")}else{b=MocksMobApp.UI.createBtn("Buy Now","buy-aural");$("#auralSectionBtnPH").append(b);$("#buy-aural").attr("data-theme","p");$("#buy-aural").die("click").live("click",{aExamID:MocksMobApp.Aural.getExamID()},function(i){InAppBilling.purchase(InAppBilling.purchaseSuccessCB,InAppBilling.purchaseRequestFailedCB,{service:"aurals",auralexamid:i.data.aExamID})})}$("#auralSectionBtnPH").trigger("create");$("#sectionDetailsPH").empty();$("#sectionDetailsPH").append('<h2 class="textaligncenter">Exam Details</h2>');var j="";for(var e=0;e<h.length;e++){j="";j="<h2>"+h[e].Name+"</h2>";j+="<p>"+h[e].Description+"</p>";$("#sectionDetailsPH").append(j)}MocksMobApp.UI.refreshScroll();MocksMobApp.UI.closeLoadingDialog()}}function populateAuralsDetailsPageFinished(){DebugLogging.ConsoleLog("AppInfoOutput: populateAuralsDetailsPageFinished()");$("#auralExamConHdr").empty();$("#auralExamConHdr").append(MocksMobApp.UI.currentPage().subjectName+" Exams");$("#myAuralsExamsList").listview("refresh");$("#freeAuralsExamsList").listview("refresh");$("#auralsExamsList").listview("refresh");MocksMobApp.UI.refreshScroll()}function populateAuralsExamsPage(a){MocksMobApp.Aural.setSectionQuiz(a);MocksMobApp.Aural.addExamDetailsHeading();MocksMobApp.Aural.appendSectionNameAndDescription();MocksMobApp.Aural.addQuestionsToPage();MocksMobApp.Aural.initAudio();MocksMobApp.Aural.setSectionBtns();MocksMobApp.Aural.setMainBtns();MocksMobApp.UI.scrollToPageTop();MocksMobApp.UI.closeLoadingDialog();MocksMobApp.Aural.openSwipeMsg()}function populateMcqsDetailsPage(c){DebugLogging.ConsoleLog("AppInfoOutput: populateMcqsDetailsPage");$("#mcqsBuyNowBtnPH").empty();$("#mcqsFreeExamBtnPH").empty();$("#mcqsDetailsConHd").empty();$("#mcqsDetailsConHd").append(MocksMobApp.UI.currentPage().subjectName);var a=MocksMobApp.UI.createBtn("Buy Now","buy-mcq");var d=MocksMobApp.UI.createBtn("Try Free Exam","free-mcq");$("#mcqsBuyNowBtnPH").append(a);$("#buy-mcq").attr("data-theme","p");$("#mcqsFreeExamBtnPH").append(d);$("#free-mcq").attr("data-theme","n");$("#buy-mcq").die("click").live("click",{mSubjectID:MocksMobApp.UI.currentPage().subjectId},function(e){InAppBilling.purchase(InAppBilling.purchaseSuccessCB,InAppBilling.purchaseRequestFailedCB,{service:"mcqs",mcqsubjectid:e.data.mSubjectID})});$("#free-mcq").die("click").live("click",{mSubjectID:MocksMobApp.UI.currentPage().subjectId},function(e){OpenMcqQuizPage(e.data.mSubjectID,-1,"Free Exam",true)});$("#mcqsTopicsList").empty();DebugLogging.ConsoleLog("AppInfoOutput: populateMcqsDetailsPage: "+c.length);for(var b=0;b<c.length;b++){MocksMobApp.UI.addNewLi(c.item(b).Description,c.item(b).McqTopicID,"",$("#mcqsTopicsList"))}}function populateDttDetailsPage(d){$("#dttBuyNowBtnPH").empty();$("#dttFreeExamBtnPH").empty();$("#dttDetailsConHd").empty();$("#dttTopicsHeading").empty();for(var b=0;b<d.length;b++){DebugLogging.ConsoleLog(d.item(b))}if(d.length>0){MocksMobApp.UI.setPageParams("dtt",d.item(0).McqSubjectID,d.item(0).SubjectName,true)}if(d.item(0).IsFree||MocksMobApp.Mcq.hasSubscription(MocksMobApp.UI.currentPage().subjectId)){$("#dttBuyNowBtnPH").hide();$("#dttFreeExamBtnPH").hide();$("#dttDetailsConHd").hide();$("#dttTopicsHeading").append("Select Topics");$("#dttAllTopicsBtn").show();if((d.length>1)||(d.length==0)){$("#dttAnyTopic").die("click").live("click",{mSubjectID:MocksMobApp.UI.currentPage().subjectId},function(i){OpenMcqQuizPage(i.data.mSubjectID,-1,"All Topics",false)})}var h;var c;var e;var g;$("#dttTopicsList").empty();for(var b=0;b<d.length;b++){h=d.item(b).McqTopicID;c="li-selected-dtt-"+h;e="anc-selected-dtt-"+h;g=MocksMobApp.UI.createAnchor(d.item(b).Description,e,"");MocksMobApp.UI.addNewLi(g,c,"",$("#dttTopicsList"));$("#"+e).die("click").live("click",{subjectID:d.item(b).McqSubjectID,topicID:h,topicName:d.item(b).Description},function(i){OpenMcqQuizPage(i.data.subjectID,i.data.topicID,i.data.topicName,false)})}}else{$("#dttAllTopicsBtn").hide();$("#dttBuyNowBtnPH").show();$("#dttFreeExamBtnPH").show();$("#dttDetailsConHd").show();$("#dttTopicsHeading").append("Topics Available");$("#dttDetailsConHd").append(MocksMobApp.UI.currentPage().subjectName);var a=MocksMobApp.UI.createBtn("Buy Now","buy-dtt");var f=MocksMobApp.UI.createBtn("Try Free Exam","free-dtt");$("#dttBuyNowBtnPH").append(a);$("#buy-dtt").attr("data-theme","p");$("#dttFreeExamBtnPH").append(f);$("#free-dtt").attr("data-theme","n");$("#buy-dtt").die("click").live("click",{mSubjectID:MocksMobApp.UI.currentPage().subjectId},function(i){InAppBilling.purchase(InAppBilling.purchaseSuccessCB,InAppBilling.purchaseRequestFailedCB,{service:"mcqs",mcqsubjectid:i.data.mSubjectID})});$("#free-dtt").die("click").live("click",{mSubjectID:MocksMobApp.UI.currentPage().subjectId},function(i){OpenMcqQuizPage(i.data.mSubjectID,-1,"Free Exam",true)});$("#dttTopicsList").empty();for(var b=0;b<d.length;b++){MocksMobApp.UI.addNewLi(d.item(b).Description,"dtt-"+d.item(b).McqTopicID,"",$("#dttTopicsList"))}}}function OpenMCQQuizSelectionPage(a){DebugLogging.ConsoleLog("AppInfoOutput: OpenMCQQuizSelectionPage"+a);MocksMobApp.UI.setPageParams("mcqsQuizSelection",a,MocksMobApp.UI.currentPage().subjectName,true);MocksMobApp.UI.changePage("mcqsQuizSelection",false)}function populateMcqsSelectionPage(c){DebugLogging.ConsoleLog("AppInfoOutput: populateMcqsSelectionPage");if((c.length>1)||(c.length==0)){$("#mcqAnyTopic").die("click").live("click",{mSubjectID:MocksMobApp.UI.currentPage().subjectId},function(g){OpenMcqQuizPage(g.data.mSubjectID,-1,"All Topics",false)})}var f;var b;var d;var e;$("#mcqsSelectTopicsList").empty();DebugLogging.ConsoleLog("AppInfoOutput: populateMcqsSelectionPage: "+c.length);for(var a=0;a<c.length;a++){f=c.item(a).McqTopicID;b="li-selected-mcq-"+f;d="anc-selected-mcq-"+f;e=MocksMobApp.UI.createAnchor(c.item(a).Description,d,"");MocksMobApp.UI.addNewLi(e,b,"",$("#mcqsSelectTopicsList"));$("#"+d).die("click").live("click",{subjectID:c.item(a).McqSubjectID,topicID:f,topicName:c.item(a).Description},function(g){OpenMcqQuizPage(g.data.subjectID,g.data.topicID,g.data.topicName,false)})}}function populateMcqsSelectionPageFinished(){$("#mcqsSelectTopicsList").listview("refresh");MocksMobApp.UI.refreshScroll()}function populateMcqsDetailsPageFinished(){$("#mcqsBuyNowBtnPH").trigger("create");$("#mcqsFreeExamBtnPH").trigger("create");$("#mcqsTopicsList").listview("refresh");MocksMobApp.UI.refreshScroll()}function populateDttDetailsPageFinished(){$("#dttBuyNowBtnPH").trigger("create");$("#dttFreeExamBtnPH").trigger("create");$("#dttTopicsList").listview("refresh");MocksMobApp.UI.initScroll()}function populateSubjectServicesPagePaper(b){DebugLogging.ConsoleLog("AppInfoOutput: populateSubjectServicesPagePaper:"+b.length);if(b.length>0){$("#subjectsPagePapers").empty();$("#subjectsPagePapers").show();DebugLogging.ConsoleLog("AppInfoOutput: adding Paper info");for(var a=0;a<b.length;a++){$("#subjectsPagePapers").append("<h2>"+b.item(a).PaperName+"</h2>");if(b.item(a).Marks>0){$("#subjectsPagePapers").append("<h3>Marks:&nbsp;"+b.item(a).Marks+"</h3>")}if((b.item(a).NoQuestions>0)&&(b.item(a).NoQuestionsToAnswer>0)){$("#subjectsPagePapers").append("<h3>Answer&nbsp;"+b.item(a).NoQuestionsToAnswer+" / "+b.item(a).NoQuestions+" Questions</h3>")}if(b.item(a).Duration!==""){$("#subjectsPagePapers").append("<h3>Time Allocated:&nbsp;"+b.item(a).Duration+"</h3>")}$("#subjectsPagePapers").append('<div id="PaperShortDesc_'+b.item(a).SubjectsPaperID+'">'+b.item(a).ShortDescription+"</div>");if(b.item(a).LongDescription!==""){$("#subjectsPagePapers").append('<a id="showSubjectsPaperLongDesc'+b.item(a).SubjectsPaperID+'" data-role="button" data-inline="true">More Info</a>');$("#subjectsPagePapers").append('<div id="PaperLongDesc_'+b.item(a).SubjectsPaperID+'">'+b.item(a).LongDescription+"</div>");$("#subjectsPagePapers").append('<a id="showSubjectsPaperShortDesc'+b.item(a).SubjectsPaperID+'" data-role="button" data-inline="true">Less Info</a>');$("#subjectsPagePapers").trigger("create");$("#PaperLongDesc_"+b.item(a).SubjectsPaperID).hide();$("#showSubjectsPaperShortDesc"+b.item(a).SubjectsPaperID).hide();$("#showSubjectsPaperLongDesc"+b.item(a).SubjectsPaperID).die("click").live("click",{pID:b.item(a).SubjectsPaperID},function(c){toggleSubjectsPaperDesc(c.data.pID,true)});$("#showSubjectsPaperShortDesc"+b.item(a).SubjectsPaperID).die("click").live("click",{pID:b.item(a).SubjectsPaperID},function(c){toggleSubjectsPaperDesc(c.data.pID,false)})}}}else{$("#subjectsPagePapers").empty();$("#subjectsPagePapers").hide()}}function pointsCalChangeLevel(a){DebugLogging.ConsoleLog("AppInfoOutput: pointsCalChangeLevel:"+a);MocksMobApp.PointsCalculator.setLevel(a);pointsCalUpdateUI()}function OpenSubjectsInfoPage(b,a){if((a=="downloadpapers")||(a=="exambreakdown")){if(!MocksMobApp.Network.hasConnection(true)){return}}if(a=="exambreakdown"){MocksMobApp.UI.setPageParams("examBreakdown",MocksMobApp.UI.currentPage().subjectId,MocksMobApp.UI.currentPage().subjectName,true);MocksMobApp.UI.changePage("examBreakdown",true)}else{MocksMobApp.UI.setPageParams("subjectsInfo",MocksMobApp.UI.currentPage().subjectId,MocksMobApp.UI.currentPage().subjectName,true);MocksMobApp.UI.changePage("subjectsInfo",true)}MocksMobApp.Subjects.getSubjectInfoDetails(b,a)}function fillInfoPagesList(d){var b="";var c="";var e="";for(var a=0;a<d.length;a++){b=d.item(a).InfoPageID;c=b+"-InfoPage";e=MocksMobApp.UI.createAnchor(d.item(a).InfoPageName,c,"");MocksMobApp.UI.addNewLi(e,c,"",$("#pagesList"));$("#"+c).die("click").live("click",{eID:b},function(f){OpenInfoPageDetails(f.data.eID)})}}function fillInfoPagesListFinished(){$("#pagesList").listview("refresh");MocksMobApp.UI.refreshScroll()}function OpenInfoPageDetails(a){MocksMobApp.UI.setPageParams("infoPagesDetails","","",true);MocksMobApp.UI.changePage("infoPagesDetails",true);MocksMobApp.InfoPages.getInfoPageDetails(a)}function addSubjectDetailsSingleLI(b,a){DebugLogging.ConsoleLog("AppInfoOutput: addSubjectDetailsSingleLI called. Type ="+a);if(b.length>0){var e="";switch(a){case"general":e="General Information";break;case"stats":e="Statistics";break;case"def":e="Definitions";break;default:addSubjectDetailsMultipleLI(b,a);return;break}var c=b.item(0).ID;var d=c+"-"+a;var f=MocksMobApp.UI.createAnchor(e,d,"");MocksMobApp.UI.addNewLi(f,d,"",$("#subjectsDetailsList"));$("#"+d).die("click").live("click",{eID:c,eType:a},function(g){OpenSubjectsInfoPage(g.data.eID,g.data.eType)})}}function addDownloadPaperLi(){var d="Download Past Papers";var a="downloadpapers";MocksMobApp.UI.addNewLi("Past Papers",a,"",$("#subjectsDetailsList"));$("#"+a+"_li").attr("data-role","list-divider");var b=MocksMobApp.UI.subjectsPageID();var c=b+"-"+a;var e=MocksMobApp.UI.createAnchor(d,c,"");MocksMobApp.UI.addNewLi(e,c,"",$("#subjectsDetailsList"));$("#"+c).die("click").live("click",{eID:b,eType:a},function(f){OpenSubjectsInfoPage(f.data.eID,f.data.eType)})}function getServicesForSubject(){serviceAddedToList=false;var b=new Array("notes","aurals","orals","corrections","videos");for(var a=0;a<b.length;a++){MocksMobApp.Storage.IsServiceForSubject(b[a],MocksMobApp.UI.subjectsPageID(),addServiceToList)}}var serviceAddedToList=false;function addServiceToList(c,b){DebugLogging.ConsoleLog("AppInfoOutput: AddServiceToList:"+b);if(c.length>0){var f,h;var e="";var d="SubjectService";var a="";if(b=="notes"){a="Revision Notes";e=c.item(0).SubjectID;serviceTheme="a";serviceIcon="ListMenuIcon-Notes"}else{if(b=="aurals"){a="Aural";e=c.item(0).SubjectID;serviceTheme="b";serviceIcon="ListMenuIcon-Aurals"}else{if(b=="mcqs"){a="Revision Tool";e=c.item(0).SubjectID;serviceTheme="c";serviceIcon="ListMenuIcon-Mcqs"}else{if(b=="orals"){a="Orals";serviceTheme="g";serviceIcon="ListMenuIcon-Orals";e=c.item(0).SubjectID}else{if(b=="corrections"){a="Corrections & Feedback";e=c.item(0).SubjectID;serviceTheme="d";serviceIcon="ListMenuIcon-Corrections"}else{if(b=="videos"){a="Videos";e=c.item(0).SubjectID;serviceTheme="h";serviceIcon="ListMenuIcon-Videos"}}}}}}var g='<span class="ListMenuIcon '+serviceIcon+'"></span>';g+='<span class="ListMenuName"><span class="ListMenuNameCentered">'+a+"</span></span>";g+='<span class="ListMenuArrR"></span>';f=e+"-"+d+b;h=MocksMobApp.UI.createAnchor(g,f,"");MocksMobApp.UI.addNewLi(h,f,"",$("#subjectsDetailsServiceList"));$("#"+f+"_li").attr("data-theme",serviceTheme);$("#"+f+"_li").attr("data-icon","false");$("#"+f).die("click").live("click",{sID:e},function(i){OpenServiceBarPage(i.data.sID,MocksMobApp.UI.currentPage().subjectName,b)})}if(b=="videos"){MocksMobApp.UI.refreshScroll();$("#subjectsDetailsList").listview("refresh");$("#subjectsDetailsServiceList").listview("refresh")}}function OpenServiceBarPage(d,c,b){DebugLogging.ConsoleLog("AppInfoOutput: OpenServiceBarPage: "+d+" "+c);var a="";if((b!="orals")&&(b!="corrections")&&(b!="videos")){if(d!==""){if(b!="mcqs"){a=b+"Details"}else{if(MocksMobApp.Mcq.hasSubscription(d)){a=b+"QuizSelection"}else{a=b+"Details"}}}else{d=MocksMobApp.UI.currentPage().subjectId;a=b}}else{if(b=="videos"){a="videoTopics"}else{a=b}}MocksMobApp.UI.setPageParams(a,d,c,true);MocksMobApp.UI.changePage(a,false)}function addSubjectDetailsMultipleLI(c,b){if(c.length>0){var f="";switch(b){case"exambreakdown":f="Exam Breakdown";break;case"timebreakdown":f="Time & Mark Breakdown";break;case"topics":f="Topics Covered";break;case"paper":f="Paper Layout";break}MocksMobApp.UI.addNewLi(f,b,"",$("#subjectsDetailsList"));$("#"+b+"_li").attr("data-role","list-divider");var d,e,g;for(var a=0;a<c.length;a++){d=c.item(a).ID;f=c.item(a).Name;e=d+"-"+b;g=MocksMobApp.UI.createAnchor(f,e,"");MocksMobApp.UI.addNewLi(g,e,"",$("#subjectsDetailsList"));$("#"+e).die("click").live("click",{eID:d,eType:b},function(h){OpenSubjectsInfoPage(h.data.eID,h.data.eType)})}}}function pointsCalReset(){MocksMobApp.PointsCalculator.reset();pointsCalUpdateUI();$("#ptsCalHdr").empty();$("#ptsCalHdr").append("Points Calculator");$("#pointCalHonsBtn").addClass("ui-btn-active");$("#pointCalClearBtn").removeClass("ui-btn-active")}function pointsCalAddGrade(a){MocksMobApp.PointsCalculator.addGrade(a);pointsCalUpdateUI()}function pointsCalUpdateUI(){var a=0;a=MocksMobApp.PointsCalculator.getTotalPoints();$("#ptsCalHdr").empty();$("#ptsCalHdr").append("Points: "+a);$("#gradesUsed").empty();$("#gradesUsed").append('<b><span style="color: #39B151;">'+a+"<span></b><hr />");$("#gradesUsed").append(MocksMobApp.PointsCalculator.getUsedGrades())}function backKeyDown(){DebugLogging.ConsoleLog("AppInfoOutput: backKeyDown");if(($(".ui-page-active").attr("id")=="mainMenu")||($(".ui-page-active").attr("id")=="signIn")||(($(".ui-page-active").attr("id")=="splashScreen")&&(splashClosed==true))){DebugLogging.ConsoleLog("AppInfoOutput: Exiting app");AdtechInterface.exitApp()}else{if(($(".ui-page-active").attr("id")!="register")&&(($(".ui-page-active").attr("id")!="addClassDetails"))){$(".ui-page").css("-webkit-backface-visibility","hidden")}if($(".ui-page-active").attr("id")!="addClassTT"){$("#addClassTTFooterWrapper").hide()}if(($(".ui-page-active").attr("id")=="videoLinks")||($(".ui-page-active").attr("id")=="videoSubheadings")){ShortTermGlobals.setVidBack(true)}$("#"+$(".ui-page-active").attr("id")+"Scroller").hide();window.history.back()}}function base64decode(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}a=Base64._utf8_decode(a);return a}function base64encode(j){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var g=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);var d,f,h;var e,c,b;h=j.length;f=0;d="";while(f<h){e=j.charCodeAt(f++)&255;if(f==h){d+=a.charAt(e>>2);d+=a.charAt((e&3)<<4);d+="==";break}c=j.charCodeAt(f++);if(f==h){d+=a.charAt(e>>2);d+=a.charAt(((e&3)<<4)|((c&240)>>4));d+=a.charAt((c&15)<<2);d+="=";break}b=j.charCodeAt(f++);d+=a.charAt(e>>2);d+=a.charAt(((e&3)<<4)|((c&240)>>4));d+=a.charAt(((c&15)<<2)|((b&192)>>6));d+=a.charAt(b&63)}return d};

var biRadixBase=2;var biRadixBits=16;var bitsPerDigit=biRadixBits;var biRadix=1<<16;var biHalfRadix=biRadix>>>1;var biRadixSquared=biRadix*biRadix;var maxDigitVal=biRadix-1;var maxInteger=9999999999999998;var maxDigits;var ZERO_ARRAY;var bigZero,bigOne;function setMaxDigits(b){maxDigits=b;ZERO_ARRAY=new Array(maxDigits);for(var a=0;a<ZERO_ARRAY.length;a++){ZERO_ARRAY[a]=0}bigZero=new BigInt();bigOne=new BigInt();bigOne.digits[0]=1}setMaxDigits(20);var dpl10=15;var lr10=biFromNumber(1000000000000000);function BigInt(a){if(typeof a=="boolean"&&a==true){this.digits=null}else{this.digits=ZERO_ARRAY.slice(0)}this.isNeg=false}function biFromDecimal(e){var d=e.charAt(0)=="-";var c=d?1:0;var a;while(c<e.length&&e.charAt(c)=="0"){++c}if(c==e.length){a=new BigInt()}else{var b=e.length-c;var f=b%dpl10;if(f==0){f=dpl10}a=biFromNumber(Number(e.substr(c,f)));c+=f;while(c<e.length){a=biAdd(biMultiply(a,lr10),biFromNumber(Number(e.substr(c,dpl10))));c+=dpl10}a.isNeg=d}return a}function biCopy(b){var a=new BigInt(true);a.digits=b.digits.slice(0);a.isNeg=b.isNeg;return a}function biFromNumber(c){var a=new BigInt();a.isNeg=c<0;c=Math.abs(c);var b=0;while(c>0){a.digits[b++]=c&maxDigitVal;c>>=biRadixBits}return a}function reverseStr(c){var a="";for(var b=c.length-1;b>-1;--b){a+=c.charAt(b)}return a}var hexatrigesimalToChar=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z");function biToString(d,f){var c=new BigInt();c.digits[0]=f;var e=biDivideModulo(d,c);var a=hexatrigesimalToChar[e[1].digits[0]];while(biCompare(e[0],bigZero)==1){e=biDivideModulo(e[0],c);digit=e[1].digits[0];a+=hexatrigesimalToChar[e[1].digits[0]]}return(d.isNeg?"-":"")+reverseStr(a)}function biToDecimal(d){var c=new BigInt();c.digits[0]=10;var e=biDivideModulo(d,c);var a=String(e[1].digits[0]);while(biCompare(e[0],bigZero)==1){e=biDivideModulo(e[0],c);a+=String(e[1].digits[0])}return(d.isNeg?"-":"")+reverseStr(a)}var hexToChar=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");function digitToHex(c){var b=15;var a="";for(i=0;i<4;++i){a+=hexToChar[c&b];c>>>=4}return reverseStr(a)}function biToHex(b){var a="";var d=biHighIndex(b);for(var c=biHighIndex(b);c>-1;--c){a+=digitToHex(b.digits[c])}return a}function charToHex(k){var d=48;var b=d+9;var e=97;var h=e+25;var g=65;var f=65+25;var a;if(k>=d&&k<=b){a=k-d}else{if(k>=g&&k<=f){a=10+k-g}else{if(k>=e&&k<=h){a=10+k-e}else{a=0}}}return a}function hexToDigit(d){var b=0;var a=Math.min(d.length,4);for(var c=0;c<a;++c){b<<=4;b|=charToHex(d.charCodeAt(c))}return b}function biFromHex(e){var b=new BigInt();var a=e.length;for(var d=a,c=0;d>0;d-=4,++c){b.digits[c]=hexToDigit(e.substr(Math.max(d-4,0),Math.min(d,4)))}return b}function biFromString(l,k){var a=l.charAt(0)=="-";var e=a?1:0;var m=new BigInt();var b=new BigInt();b.digits[0]=1;for(var d=l.length-1;d>=e;d--){var f=l.charCodeAt(d);var g=charToHex(f);var h=biMultiplyDigit(b,g);m=biAdd(m,h);b=biMultiplyDigit(b,k)}m.isNeg=a;return m}function biDump(a){return(a.isNeg?"-":"")+a.digits.join(" ")}function biAdd(b,g){var a;if(b.isNeg!=g.isNeg){g.isNeg=!g.isNeg;a=biSubtract(b,g);g.isNeg=!g.isNeg}else{a=new BigInt();var f=0;var e;for(var d=0;d<b.digits.length;++d){e=b.digits[d]+g.digits[d]+f;a.digits[d]=e&65535;f=Number(e>=biRadix)}a.isNeg=b.isNeg}return a}function biSubtract(b,g){var a;if(b.isNeg!=g.isNeg){g.isNeg=!g.isNeg;a=biAdd(b,g);g.isNeg=!g.isNeg}else{a=new BigInt();var f,e;e=0;for(var d=0;d<b.digits.length;++d){f=b.digits[d]-g.digits[d]+e;a.digits[d]=f&65535;if(a.digits[d]<0){a.digits[d]+=biRadix}e=0-Number(f<0)}if(e==-1){e=0;for(var d=0;d<b.digits.length;++d){f=0-a.digits[d]+e;a.digits[d]=f&65535;if(a.digits[d]<0){a.digits[d]+=biRadix}e=0-Number(f<0)}a.isNeg=!b.isNeg}else{a.isNeg=b.isNeg}}return a}function biHighIndex(b){var a=b.digits.length-1;while(a>0&&b.digits[a]==0){--a}return a}function biNumBits(c){var f=biHighIndex(c);var e=c.digits[f];var b=(f+1)*bitsPerDigit;var a;for(a=b;a>b-bitsPerDigit;--a){if((e&32768)!=0){break}e<<=1}return a}function biMultiply(h,g){var o=new BigInt();var f;var b=biHighIndex(h);var m=biHighIndex(g);var l,a,d;for(var e=0;e<=m;++e){f=0;d=e;for(j=0;j<=b;++j,++d){a=o.digits[d]+h.digits[j]*g.digits[e]+f;o.digits[d]=a&maxDigitVal;f=a>>>biRadixBits}o.digits[e+b+1]=f}o.isNeg=h.isNeg!=g.isNeg;return o}function biMultiplyDigit(a,g){var f,e,d;result=new BigInt();f=biHighIndex(a);e=0;for(var b=0;b<=f;++b){d=result.digits[b]+a.digits[b]*g+e;result.digits[b]=d&maxDigitVal;e=d>>>biRadixBits}result.digits[1+f]=e;return result}function arrayCopy(e,h,c,g,f){var a=Math.min(h+f,e.length);for(var d=h,b=g;d<a;++d,++b){c[b]=e[d]}}var highBitMasks=new Array(0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535);function biShiftLeft(b,h){var d=Math.floor(h/bitsPerDigit);var a=new BigInt();arrayCopy(b.digits,0,a.digits,d,a.digits.length-d);var g=h%bitsPerDigit;var c=bitsPerDigit-g;for(var e=a.digits.length-1,f=e-1;e>0;--e,--f){a.digits[e]=((a.digits[e]<<g)&maxDigitVal)|((a.digits[f]&highBitMasks[g])>>>(c))}a.digits[0]=((a.digits[e]<<g)&maxDigitVal);a.isNeg=b.isNeg;return a}var lowBitMasks=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535);function biShiftRight(b,h){var c=Math.floor(h/bitsPerDigit);var a=new BigInt();arrayCopy(b.digits,c,a.digits,0,b.digits.length-c);var f=h%bitsPerDigit;var g=bitsPerDigit-f;for(var d=0,e=d+1;d<a.digits.length-1;++d,++e){a.digits[d]=(a.digits[d]>>>f)|((a.digits[e]&lowBitMasks[f])<<g)}a.digits[a.digits.length-1]>>>=f;a.isNeg=b.isNeg;return a}function biMultiplyByRadixPower(b,c){var a=new BigInt();arrayCopy(b.digits,0,a.digits,c,a.digits.length-c);return a}function biDivideByRadixPower(b,c){var a=new BigInt();arrayCopy(b.digits,c,a.digits,0,a.digits.length-c);return a}function biModuloByRadixPower(b,c){var a=new BigInt();arrayCopy(b.digits,0,a.digits,0,c);return a}function biCompare(a,c){if(a.isNeg!=c.isNeg){return 1-2*Number(a.isNeg)}for(var b=a.digits.length-1;b>=0;--b){if(a.digits[b]!=c.digits[b]){if(a.isNeg){return 1-2*Number(a.digits[b]>c.digits[b])}else{return 1-2*Number(a.digits[b]<c.digits[b])}}}return 0}function biDivideModulo(g,f){var a=biNumBits(g);var e=biNumBits(f);var d=f.isNeg;var o,m;if(a<e){if(g.isNeg){o=biCopy(bigOne);o.isNeg=!f.isNeg;g.isNeg=false;f.isNeg=false;m=biSubtract(f,g);g.isNeg=true;f.isNeg=d}else{o=new BigInt();m=biCopy(g)}return new Array(o,m)}o=new BigInt();m=g;var k=Math.ceil(e/bitsPerDigit)-1;var h=0;while(f.digits[k]<biHalfRadix){f=biShiftLeft(f,1);++h;++e;k=Math.ceil(e/bitsPerDigit)-1}m=biShiftLeft(m,h);a+=h;var u=Math.ceil(a/bitsPerDigit)-1;var B=biMultiplyByRadixPower(f,u-k);while(biCompare(m,B)!=-1){++o.digits[u-k];m=biSubtract(m,B)}for(var z=u;z>k;--z){var l=(z>=m.digits.length)?0:m.digits[z];var A=(z-1>=m.digits.length)?0:m.digits[z-1];var w=(z-2>=m.digits.length)?0:m.digits[z-2];var v=(k>=f.digits.length)?0:f.digits[k];var c=(k-1>=f.digits.length)?0:f.digits[k-1];if(l==v){o.digits[z-k-1]=maxDigitVal}else{o.digits[z-k-1]=Math.floor((l*biRadix+A)/v)}var s=o.digits[z-k-1]*((v*biRadix)+c);var p=(l*biRadixSquared)+((A*biRadix)+w);while(s>p){--o.digits[z-k-1];s=o.digits[z-k-1]*((v*biRadix)|c);p=(l*biRadix*biRadix)+((A*biRadix)+w)}B=biMultiplyByRadixPower(f,z-k-1);m=biSubtract(m,biMultiplyDigit(B,o.digits[z-k-1]));if(m.isNeg){m=biAdd(m,B);--o.digits[z-k-1]}}m=biShiftRight(m,h);o.isNeg=g.isNeg!=d;if(g.isNeg){if(d){o=biAdd(o,bigOne)}else{o=biSubtract(o,bigOne)}f=biShiftRight(f,h);m=biSubtract(f,m)}if(m.digits[0]==0&&biHighIndex(m)==0){m.isNeg=false}return new Array(o,m)}function biDivide(a,b){return biDivideModulo(a,b)[0]}function biModulo(a,b){return biDivideModulo(a,b)[1]}function biMultiplyMod(b,c,a){return biModulo(biMultiply(b,c),a)}function biPow(c,e){var b=bigOne;var d=c;while(true){if((e&1)!=0){b=biMultiply(b,d)}e>>=1;if(e==0){break}d=biMultiply(d,d)}return b}function biPowMod(d,g,c){var b=bigOne;var e=d;var f=g;while(true){if((f.digits[0]&1)!=0){b=biMultiplyMod(b,e,c)}f=biShiftRight(f,1);if(f.digits[0]==0&&biHighIndex(f)==0){break}e=biMultiplyMod(e,e,c)}return b};

var inappbilling={init:function(b,a){return cordova.exec(b,a,"InAppBillingPlugin","init",["null"])},purchase:function(c,a,b){console.log("JS Plugin Recieved purchase req");return cordova.exec(c,a,"InAppBillingPlugin","purchase",[b])},getOwnItems:function(b,a){return cordova.exec(b,a,"InAppBillingPlugin","ownItems",["null"])},confirm:function(c,a,b){return cordova.exec(c,a,"InAppBillingPlugin","confirm",[b])},};

if (ormma && ormma.info) {
	ormma.info('mraid.js identification script found');
}
ormmaview.scriptFound = true;

mraid.resize = function() {
    ormmaview.mraidResize();
};

mraid.getResizeProperties = function() {
    return ormmaview.getResizeProperties();
};

mraid.setResizeProperties = function (properties) {
    ormmaview.setResizeProperties(properties);
};

mraid.expand = function (URL) {
    ormmaview.mraidExpand(URL);
};

mraid.getExpandProperties = function () {
	var mraidExpandProperties = {
		width:Number.NaN,
		height:Number.NaN,
		useCustomClose:false,
		isModal:true
    };
	
	var allProps = ormma.getExpandProperties();
	mraidExpandProperties.width = allProps.width;
	mraidExpandProperties.height = allProps.height;
	mraidExpandProperties.useCustomClose = allProps.useCustomClose;
	
	return mraidExpandProperties;
};

mraid.setExpandProperties = ormma.setExpandProperties;

mraid.getOrientationProperties = ormma.getOrientationProperties;
mraid.setOrientationProperties = ormma.setOrientationProperties;

